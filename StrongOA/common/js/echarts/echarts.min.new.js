(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object"){module.exports=factory()}else{if(typeof define==="function"&&define.amd){define([],factory)}else{if(typeof exports==="object"){exports["echarts"]=factory()}else{root["echarts"]=factory()}}}})(this,function(){return(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)})([(function(module,exports,__webpack_require__){module.exports=__webpack_require__(1);__webpack_require__(116);__webpack_require__(142);__webpack_require__(149);__webpack_require__(158);__webpack_require__(162);__webpack_require__(172);__webpack_require__(196);__webpack_require__(208);__webpack_require__(229);__webpack_require__(233);__webpack_require__(237);__webpack_require__(254);__webpack_require__(260);__webpack_require__(267);__webpack_require__(273);__webpack_require__(277);__webpack_require__(286);__webpack_require__(290);__webpack_require__(293);__webpack_require__(316);__webpack_require__(322);__webpack_require__(323);__webpack_require__(324);__webpack_require__(334);__webpack_require__(301);__webpack_require__(338);__webpack_require__(351);__webpack_require__(238);__webpack_require__(294);__webpack_require__(354);__webpack_require__(366);__webpack_require__(370);__webpack_require__(371);__webpack_require__(384);__webpack_require__(399);__webpack_require__(405);__webpack_require__(408);__webpack_require__(411);__webpack_require__(420);__webpack_require__(432)}),(function(module,exports,__webpack_require__){if(false){if(typeof window!=="undefined"){window.__DEV__=true}else{if(typeof global!=="undefined"){global.__DEV__=true}}
/*!
	 * ECharts, a javascript interactive chart library.
	 *
	 * Copyright (c) 2015, Baidu Inc.
	 * All rights reserved.
	 *
	 * LICENSE
	 * https://github.com/ecomfe/echarts/blob/master/LICENSE.txt
	 */
}var env=__webpack_require__(2);var GlobalModel=__webpack_require__(3);var ExtensionAPI=__webpack_require__(78);var CoordinateSystemManager=__webpack_require__(79);var OptionManager=__webpack_require__(80);var backwardCompat=__webpack_require__(81);var ComponentModel=__webpack_require__(72);var SeriesModel=__webpack_require__(83);var ComponentView=__webpack_require__(84);var ChartView=__webpack_require__(85);var graphic=__webpack_require__(20);var modelUtil=__webpack_require__(5);var throttle=__webpack_require__(86);var zrender=__webpack_require__(87);var zrUtil=__webpack_require__(4);var colorTool=__webpack_require__(33);var Eventful=__webpack_require__(27);var timsort=__webpack_require__(91);var each=zrUtil.each;var parseClassType=ComponentModel.parseClassType;var PRIORITY_PROCESSOR_FILTER=1000;var PRIORITY_PROCESSOR_STATISTIC=5000;var PRIORITY_VISUAL_LAYOUT=1000;var PRIORITY_VISUAL_GLOBAL=2000;var PRIORITY_VISUAL_CHART=3000;var PRIORITY_VISUAL_COMPONENT=4000;var PRIORITY_VISUAL_BRUSH=5000;var IN_MAIN_PROCESS="__flagInMainProcess";var HAS_GRADIENT_OR_PATTERN_BG="__hasGradientOrPatternBg";var OPTION_UPDATED="__optionUpdated";var ACTION_REG=/^[a-zA-Z0-9_]+$/;function createRegisterEventWithLowercaseName(method){return function(eventName,handler,context){eventName=eventName&&eventName.toLowerCase();Eventful.prototype[method].call(this,eventName,handler,context)}}function MessageCenter(){Eventful.call(this)}MessageCenter.prototype.on=createRegisterEventWithLowercaseName("on");MessageCenter.prototype.off=createRegisterEventWithLowercaseName("off");MessageCenter.prototype.one=createRegisterEventWithLowercaseName("one");zrUtil.mixin(MessageCenter,Eventful);function ECharts(dom,theme,opts){opts=opts||{};if(typeof theme==="string"){theme=themeStorage[theme]}this.id;this.group;this._dom=dom;var zr=this._zr=zrender.init(dom,{renderer:opts.renderer||"canvas",devicePixelRatio:opts.devicePixelRatio,width:opts.width,height:opts.height});this._throttledZrFlush=throttle.throttle(zrUtil.bind(zr.flush,zr),17);var theme=zrUtil.clone(theme);theme&&backwardCompat(theme,true);this._theme=theme;this._chartsViews=[];this._chartsMap={};this._componentsViews=[];this._componentsMap={};this._coordSysMgr=new CoordinateSystemManager();this._api=createExtensionAPI(this);Eventful.call(this);this._messageCenter=new MessageCenter();this._initEvents();this.resize=zrUtil.bind(this.resize,this);this._pendingActions=[];function prioritySortFunc(a,b){return a.prio-b.prio}timsort(visualFuncs,prioritySortFunc);timsort(dataProcessorFuncs,prioritySortFunc);zr.animation.on("frame",this._onframe,this);zrUtil.setAsPrimitive(this)}var echartsProto=ECharts.prototype;echartsProto._onframe=function(){if(this[OPTION_UPDATED]){var silent=this[OPTION_UPDATED].silent;
this[IN_MAIN_PROCESS]=true;updateMethods.prepareAndUpdate.call(this);this[IN_MAIN_PROCESS]=false;this[OPTION_UPDATED]=false;flushPendingActions.call(this,silent);triggerUpdatedEvent.call(this,silent)}};echartsProto.getDom=function(){return this._dom};echartsProto.getZr=function(){return this._zr};echartsProto.setOption=function(option,notMerge,lazyUpdate){if(true){zrUtil.assert(!this[IN_MAIN_PROCESS],"`setOption` should not be called during main process.")}var silent;if(zrUtil.isObject(notMerge)){lazyUpdate=notMerge.lazyUpdate;silent=notMerge.silent;notMerge=notMerge.notMerge}this[IN_MAIN_PROCESS]=true;if(!this._model||notMerge){var optionManager=new OptionManager(this._api);var theme=this._theme;var ecModel=this._model=new GlobalModel(null,null,theme,optionManager);ecModel.init(null,null,theme,optionManager)}this._model.setOption(option,optionPreprocessorFuncs);if(lazyUpdate){this[OPTION_UPDATED]={silent:silent};this[IN_MAIN_PROCESS]=false}else{updateMethods.prepareAndUpdate.call(this);this._zr.flush();this[OPTION_UPDATED]=false;this[IN_MAIN_PROCESS]=false;flushPendingActions.call(this,silent);triggerUpdatedEvent.call(this,silent)}};echartsProto.setTheme=function(){console.log("ECharts#setTheme() is DEPRECATED in ECharts 3.0")};echartsProto.getModel=function(){return this._model};echartsProto.getOption=function(){return this._model&&this._model.getOption()};echartsProto.getWidth=function(){return this._zr.getWidth()};echartsProto.getHeight=function(){return this._zr.getHeight()};echartsProto.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1};echartsProto.getRenderedCanvas=function(opts){if(!env.canvasSupported){return}opts=opts||{};opts.pixelRatio=opts.pixelRatio||1;opts.backgroundColor=opts.backgroundColor||this._model.get("backgroundColor");var zr=this._zr;var list=zr.storage.getDisplayList();zrUtil.each(list,function(el){el.stopAnimation(true)});return zr.painter.getRenderedCanvas(opts)};echartsProto.getDataURL=function(opts){opts=opts||{};var excludeComponents=opts.excludeComponents;var ecModel=this._model;var excludesComponentViews=[];var self=this;each(excludeComponents,function(componentType){ecModel.eachComponent({mainType:componentType},function(component){var view=self._componentsMap[component.__viewId];if(!view.group.ignore){excludesComponentViews.push(view);view.group.ignore=true}})});var url=this.getRenderedCanvas(opts).toDataURL("image/"+(opts&&opts.type||"png"));each(excludesComponentViews,function(view){view.group.ignore=false});return url};echartsProto.getConnectedDataURL=function(opts){if(!env.canvasSupported){return}var groupId=this.group;var mathMin=Math.min;var mathMax=Math.max;var MAX_NUMBER=Infinity;if(connectedGroups[groupId]){var left=MAX_NUMBER;var top=MAX_NUMBER;var right=-MAX_NUMBER;var bottom=-MAX_NUMBER;var canvasList=[];var dpr=(opts&&opts.pixelRatio)||1;zrUtil.each(instances,function(chart,id){if(chart.group===groupId){var canvas=chart.getRenderedCanvas(zrUtil.clone(opts));var boundingRect=chart.getDom().getBoundingClientRect();left=mathMin(boundingRect.left,left);top=mathMin(boundingRect.top,top);right=mathMax(boundingRect.right,right);bottom=mathMax(boundingRect.bottom,bottom);canvasList.push({dom:canvas,left:boundingRect.left,top:boundingRect.top})}});left*=dpr;top*=dpr;right*=dpr;bottom*=dpr;var width=right-left;var height=bottom-top;var targetCanvas=zrUtil.createCanvas();targetCanvas.width=width;targetCanvas.height=height;var zr=zrender.init(targetCanvas);each(canvasList,function(item){var img=new graphic.Image({style:{x:item.left*dpr-left,y:item.top*dpr-top,image:item.dom}});zr.add(img)});zr.refreshImmediately();return targetCanvas.toDataURL("image/"+(opts&&opts.type||"png"))}else{return this.getDataURL(opts)}};echartsProto.convertToPixel=zrUtil.curry(doConvertPixel,"convertToPixel");echartsProto.convertFromPixel=zrUtil.curry(doConvertPixel,"convertFromPixel");function doConvertPixel(methodName,finder,value){var ecModel=this._model;var coordSysList=this._coordSysMgr.getCoordinateSystems();var result;finder=modelUtil.parseFinder(ecModel,finder);for(var i=0;i<coordSysList.length;i++){var coordSys=coordSysList[i];if(coordSys[methodName]&&(result=coordSys[methodName](ecModel,finder,value))!=null){return result}}if(true){console.warn("No coordinate system that supports "+methodName+" found by the given finder.")}}echartsProto.containPixel=function(finder,value){var ecModel=this._model;var result;finder=modelUtil.parseFinder(ecModel,finder);zrUtil.each(finder,function(models,key){key.indexOf("Models")>=0&&zrUtil.each(models,function(model){var coordSys=model.coordinateSystem;if(coordSys&&coordSys.containPoint){result|=!!coordSys.containPoint(value)}else{if(key==="seriesModels"){var view=this._chartsMap[model.__viewId];if(view&&view.containPoint){result|=view.containPoint(value,model)}else{if(true){console.warn(key+": "+(view?"The found component do not support containPoint.":"No view mapping to the found component."))}}}else{if(true){console.warn(key+": containPoint is not supported")
}}}},this)},this);return !!result};echartsProto.getVisual=function(finder,visualType){var ecModel=this._model;finder=modelUtil.parseFinder(ecModel,finder,{defaultMainType:"series"});var seriesModel=finder.seriesModel;if(true){if(!seriesModel){console.warn("There is no specified seires model")}}var data=seriesModel.getData();var dataIndexInside=finder.hasOwnProperty("dataIndexInside")?finder.dataIndexInside:finder.hasOwnProperty("dataIndex")?data.indexOfRawIndex(finder.dataIndex):null;return dataIndexInside!=null?data.getItemVisual(dataIndexInside,visualType):data.getVisual(visualType)};echartsProto.getViewOfComponentModel=function(componentModel){return this._componentsMap[componentModel.__viewId]};echartsProto.getViewOfSeriesModel=function(seriesModel){return this._chartsMap[seriesModel.__viewId]};var updateMethods={update:function(payload){var ecModel=this._model;var api=this._api;var coordSysMgr=this._coordSysMgr;var zr=this._zr;if(!ecModel){return}ecModel.restoreData();coordSysMgr.create(this._model,this._api);processData.call(this,ecModel,api);stackSeriesData.call(this,ecModel);coordSysMgr.update(ecModel,api);doVisualEncoding.call(this,ecModel,payload);doRender.call(this,ecModel,payload);var backgroundColor=ecModel.get("backgroundColor")||"transparent";var painter=zr.painter;if(painter.isSingleCanvas&&painter.isSingleCanvas()){zr.configLayer(0,{clearColor:backgroundColor})}else{if(!env.canvasSupported){var colorArr=colorTool.parse(backgroundColor);backgroundColor=colorTool.stringify(colorArr,"rgb");if(colorArr[3]===0){backgroundColor="transparent"}}if(backgroundColor.colorStops||backgroundColor.image){zr.configLayer(0,{clearColor:backgroundColor});this[HAS_GRADIENT_OR_PATTERN_BG]=true;this._dom.style.background="transparent"}else{if(this[HAS_GRADIENT_OR_PATTERN_BG]){zr.configLayer(0,{clearColor:null})}this[HAS_GRADIENT_OR_PATTERN_BG]=false;this._dom.style.background=backgroundColor}}each(postUpdateFuncs,function(func){func(ecModel,api)})},updateView:function(payload){var ecModel=this._model;if(!ecModel){return}ecModel.eachSeries(function(seriesModel){seriesModel.getData().clearAllVisual()});doVisualEncoding.call(this,ecModel,payload);invokeUpdateMethod.call(this,"updateView",ecModel,payload)},updateVisual:function(payload){var ecModel=this._model;if(!ecModel){return}ecModel.eachSeries(function(seriesModel){seriesModel.getData().clearAllVisual()});doVisualEncoding.call(this,ecModel,payload,true);invokeUpdateMethod.call(this,"updateVisual",ecModel,payload)},updateLayout:function(payload){var ecModel=this._model;if(!ecModel){return}doLayout.call(this,ecModel,payload);invokeUpdateMethod.call(this,"updateLayout",ecModel,payload)},prepareAndUpdate:function(payload){var ecModel=this._model;prepareView.call(this,"component",ecModel);prepareView.call(this,"chart",ecModel);updateMethods.update.call(this,payload)}};function updateDirectly(ecIns,method,payload,mainType,subType){var ecModel=ecIns._model;if(!mainType){each(ecIns._componentsViews.concat(ecIns._chartsViews),callView);return}var query={};query[mainType+"Id"]=payload[mainType+"Id"];query[mainType+"Index"]=payload[mainType+"Index"];query[mainType+"Name"]=payload[mainType+"Name"];var condition={mainType:mainType,query:query};subType&&(condition.subType=subType);ecModel&&ecModel.eachComponent(condition,function(model,index){callView(ecIns[mainType==="series"?"_chartsMap":"_componentsMap"][model.__viewId])},ecIns);function callView(view){view&&view.__alive&&view[method]&&view[method](view.__model,ecModel,ecIns._api,payload)}}echartsProto.resize=function(opts){if(true){zrUtil.assert(!this[IN_MAIN_PROCESS],"`resize` should not be called during main process.")}this[IN_MAIN_PROCESS]=true;this._zr.resize(opts);var optionChanged=this._model&&this._model.resetOption("media");var updateMethod=optionChanged?"prepareAndUpdate":"update";updateMethods[updateMethod].call(this);this._loadingFX&&this._loadingFX.resize();this[IN_MAIN_PROCESS]=false;var silent=opts&&opts.silent;flushPendingActions.call(this,silent);triggerUpdatedEvent.call(this,silent)};echartsProto.showLoading=function(name,cfg){if(zrUtil.isObject(name)){cfg=name;name=""}name=name||"default";this.hideLoading();if(!loadingEffects[name]){if(true){console.warn("Loading effects "+name+" not exists.")}return}var el=loadingEffects[name](this._api,cfg);var zr=this._zr;this._loadingFX=el;zr.add(el)};echartsProto.hideLoading=function(){this._loadingFX&&this._zr.remove(this._loadingFX);this._loadingFX=null};echartsProto.makeActionFromEvent=function(eventObj){var payload=zrUtil.extend({},eventObj);payload.type=eventActionMap[eventObj.type];return payload};echartsProto.dispatchAction=function(payload,opt){if(!zrUtil.isObject(opt)){opt={silent:!!opt}}if(!actions[payload.type]){return}if(!this._model){return}if(this[IN_MAIN_PROCESS]){this._pendingActions.push(payload);return}doDispatchAction.call(this,payload,opt.silent);if(opt.flush){this._zr.flush(true)}else{if(opt.flush!==false&&env.browser.weChat){this._throttledZrFlush()
}}flushPendingActions.call(this,opt.silent);triggerUpdatedEvent.call(this,opt.silent)};function doDispatchAction(payload,silent){var payloadType=payload.type;var escapeConnect=payload.escapeConnect;var actionWrap=actions[payloadType];var actionInfo=actionWrap.actionInfo;var cptType=(actionInfo.update||"update").split(":");var updateMethod=cptType.pop();cptType=cptType[0]!=null&&parseClassType(cptType[0]);this[IN_MAIN_PROCESS]=true;var payloads=[payload];var batched=false;if(payload.batch){batched=true;payloads=zrUtil.map(payload.batch,function(item){item=zrUtil.defaults(zrUtil.extend({},item),payload);item.batch=null;return item})}var eventObjBatch=[];var eventObj;var isHighDown=payloadType==="highlight"||payloadType==="downplay";each(payloads,function(batchItem){eventObj=actionWrap.action(batchItem,this._model,this._api);eventObj=eventObj||zrUtil.extend({},batchItem);eventObj.type=actionInfo.event||eventObj.type;eventObjBatch.push(eventObj);if(isHighDown){updateDirectly(this,updateMethod,batchItem,"series")}else{if(cptType){updateDirectly(this,updateMethod,batchItem,cptType.main,cptType.sub)}}},this);if(updateMethod!=="none"&&!isHighDown&&!cptType){if(this[OPTION_UPDATED]){updateMethods.prepareAndUpdate.call(this,payload);this[OPTION_UPDATED]=false}else{updateMethods[updateMethod].call(this,payload)}}if(batched){eventObj={type:actionInfo.event||payloadType,escapeConnect:escapeConnect,batch:eventObjBatch}}else{eventObj=eventObjBatch[0]}this[IN_MAIN_PROCESS]=false;!silent&&this._messageCenter.trigger(eventObj.type,eventObj)}function flushPendingActions(silent){var pendingActions=this._pendingActions;while(pendingActions.length){var payload=pendingActions.shift();doDispatchAction.call(this,payload,silent)}}function triggerUpdatedEvent(silent){!silent&&this.trigger("updated")}echartsProto.on=createRegisterEventWithLowercaseName("on");echartsProto.off=createRegisterEventWithLowercaseName("off");echartsProto.one=createRegisterEventWithLowercaseName("one");function invokeUpdateMethod(methodName,ecModel,payload){var api=this._api;each(this._componentsViews,function(component){var componentModel=component.__model;component[methodName](componentModel,ecModel,api,payload);updateZ(componentModel,component)},this);ecModel.eachSeries(function(seriesModel,idx){var chart=this._chartsMap[seriesModel.__viewId];chart[methodName](seriesModel,ecModel,api,payload);updateZ(seriesModel,chart);updateProgressiveAndBlend(seriesModel,chart)},this);updateHoverLayerStatus(this._zr,ecModel);each(postUpdateFuncs,function(func){func(ecModel,api)})}function prepareView(type,ecModel){var isComponent=type==="component";var viewList=isComponent?this._componentsViews:this._chartsViews;var viewMap=isComponent?this._componentsMap:this._chartsMap;var zr=this._zr;for(var i=0;i<viewList.length;i++){viewList[i].__alive=false}ecModel[isComponent?"eachComponent":"eachSeries"](function(componentType,model){if(isComponent){if(componentType==="series"){return}}else{model=componentType}var viewId="_ec_"+model.id+"_"+model.type;var view=viewMap[viewId];if(!view){var classType=parseClassType(model.type);var Clazz=isComponent?ComponentView.getClass(classType.main,classType.sub):ChartView.getClass(classType.sub);if(Clazz){view=new Clazz();view.init(ecModel,this._api);viewMap[viewId]=view;viewList.push(view);zr.add(view.group)}else{return}}model.__viewId=view.__id=viewId;view.__alive=true;view.__model=model;view.group.__ecComponentInfo={mainType:model.mainType,index:model.componentIndex}},this);for(var i=0;i<viewList.length;){var view=viewList[i];if(!view.__alive){zr.remove(view.group);view.dispose(ecModel,this._api);viewList.splice(i,1);delete viewMap[view.__id];view.__id=view.group.__ecComponentInfo=null}else{i++}}}function processData(ecModel,api){each(dataProcessorFuncs,function(process){process.func(ecModel,api)})}function stackSeriesData(ecModel){var stackedDataMap={};ecModel.eachSeries(function(series){var stack=series.get("stack");var data=series.getData();if(stack&&data.type==="list"){var previousStack=stackedDataMap[stack];if(stackedDataMap.hasOwnProperty(stack)&&previousStack){data.stackedOn=previousStack}stackedDataMap[stack]=data}})}function doLayout(ecModel,payload){var api=this._api;each(visualFuncs,function(visual){if(visual.isLayout){visual.func(ecModel,api,payload)}})}function doVisualEncoding(ecModel,payload,excludesLayout){var api=this._api;ecModel.clearColorPalette();ecModel.eachSeries(function(seriesModel){seriesModel.clearColorPalette()});each(visualFuncs,function(visual){(!excludesLayout||!visual.isLayout)&&visual.func(ecModel,api,payload)})}function doRender(ecModel,payload){var api=this._api;each(this._componentsViews,function(componentView){var componentModel=componentView.__model;componentView.render(componentModel,ecModel,api,payload);updateZ(componentModel,componentView)},this);each(this._chartsViews,function(chart){chart.__alive=false},this);ecModel.eachSeries(function(seriesModel,idx){var chartView=this._chartsMap[seriesModel.__viewId];
chartView.__alive=true;chartView.render(seriesModel,ecModel,api,payload);chartView.group.silent=!!seriesModel.get("silent");updateZ(seriesModel,chartView);updateProgressiveAndBlend(seriesModel,chartView)},this);updateHoverLayerStatus(this._zr,ecModel);each(this._chartsViews,function(chart){if(!chart.__alive){chart.remove(ecModel,api)}},this)}var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];echartsProto._initEvents=function(){each(MOUSE_EVENT_NAMES,function(eveName){this._zr.on(eveName,function(e){var ecModel=this.getModel();var el=e.target;var params;if(eveName==="globalout"){params={}}else{if(el&&el.dataIndex!=null){var dataModel=el.dataModel||ecModel.getSeriesByIndex(el.seriesIndex);params=dataModel&&dataModel.getDataParams(el.dataIndex,el.dataType)||{}}else{if(el&&el.eventData){params=zrUtil.extend({},el.eventData)}}}if(params){params.event=e;params.type=eveName;this.trigger(eveName,params)}},this)},this);each(eventActionMap,function(actionType,eventType){this._messageCenter.on(eventType,function(event){this.trigger(eventType,event)},this)},this)};echartsProto.isDisposed=function(){return this._disposed};echartsProto.clear=function(){this.setOption({series:[]},true)};echartsProto.dispose=function(){if(this._disposed){if(true){console.warn("Instance "+this.id+" has been disposed")}return}this._disposed=true;var api=this._api;var ecModel=this._model;each(this._componentsViews,function(component){component.dispose(ecModel,api)});each(this._chartsViews,function(chart){chart.dispose(ecModel,api)});this._zr.dispose();delete instances[this.id]};zrUtil.mixin(ECharts,Eventful);function updateHoverLayerStatus(zr,ecModel){var storage=zr.storage;var elCount=0;storage.traverse(function(el){if(!el.isGroup){elCount++}});if(elCount>ecModel.get("hoverLayerThreshold")&&!env.node){storage.traverse(function(el){if(!el.isGroup){el.useHoverLayer=true}})}}function updateProgressiveAndBlend(seriesModel,chartView){var elCount=0;chartView.group.traverse(function(el){if(el.type!=="group"&&!el.ignore){elCount++}});var frameDrawNum=+seriesModel.get("progressive");var needProgressive=elCount>seriesModel.get("progressiveThreshold")&&frameDrawNum&&!env.node;if(needProgressive){chartView.group.traverse(function(el){if(!el.isGroup){el.progressive=needProgressive?Math.floor(elCount++/frameDrawNum):-1;if(needProgressive){el.stopAnimation(true)}}})}var blendMode=seriesModel.get("blendMode")||null;if(true){if(!env.canvasSupported&&blendMode&&blendMode!=="source-over"){console.warn("Only canvas support blendMode")}}chartView.group.traverse(function(el){if(!el.isGroup){el.setStyle("blend",blendMode)}})}function updateZ(model,view){var z=model.get("z");var zlevel=model.get("zlevel");view.group.traverse(function(el){if(el.type!=="group"){z!=null&&(el.z=z);zlevel!=null&&(el.zlevel=zlevel)}})}function createExtensionAPI(ecInstance){var coordSysMgr=ecInstance._coordSysMgr;return zrUtil.extend(new ExtensionAPI(ecInstance),{getCoordinateSystems:zrUtil.bind(coordSysMgr.getCoordinateSystems,coordSysMgr),getComponentByElement:function(el){while(el){var modelInfo=el.__ecComponentInfo;if(modelInfo!=null){return ecInstance._model.getComponent(modelInfo.mainType,modelInfo.index)}el=el.parent}}})}var actions={};var eventActionMap={};var dataProcessorFuncs=[];var optionPreprocessorFuncs=[];var postUpdateFuncs=[];var visualFuncs=[];var themeStorage={};var loadingEffects={};var instances={};var connectedGroups={};var idBase=new Date()-0;var groupIdBase=new Date()-0;var DOM_ATTRIBUTE_KEY="_echarts_instance_";var echarts={version:"3.7.2",dependencies:{zrender:"3.6.2"}};function enableConnect(chart){var STATUS_PENDING=0;var STATUS_UPDATING=1;var STATUS_UPDATED=2;var STATUS_KEY="__connectUpdateStatus";function updateConnectedChartsStatus(charts,status){for(var i=0;i<charts.length;i++){var otherChart=charts[i];otherChart[STATUS_KEY]=status}}zrUtil.each(eventActionMap,function(actionType,eventType){chart._messageCenter.on(eventType,function(event){if(connectedGroups[chart.group]&&chart[STATUS_KEY]!==STATUS_PENDING){if(event&&event.escapeConnect){return}var action=chart.makeActionFromEvent(event);var otherCharts=[];zrUtil.each(instances,function(otherChart){if(otherChart!==chart&&otherChart.group===chart.group){otherCharts.push(otherChart)}});updateConnectedChartsStatus(otherCharts,STATUS_PENDING);each(otherCharts,function(otherChart){if(otherChart[STATUS_KEY]!==STATUS_UPDATING){otherChart.dispatchAction(action)}});updateConnectedChartsStatus(otherCharts,STATUS_UPDATED)}})})}echarts.init=function(dom,theme,opts){if(true){if((zrender.version.replace(".","")-0)<(echarts.dependencies.zrender.replace(".","")-0)){throw new Error("ZRender "+zrender.version+" is too old for ECharts "+echarts.version+". Current version need ZRender "+echarts.dependencies.zrender+"+")}if(!dom){throw new Error("Initialize failed: invalid dom.")}}var existInstance=echarts.getInstanceByDom(dom);if(existInstance){if(true){console.warn("There is a chart instance already initialized on the dom.")
}return existInstance}if(true){if(zrUtil.isDom(dom)&&dom.nodeName.toUpperCase()!=="CANVAS"&&((!dom.clientWidth&&(!opts||opts.width==null))||(!dom.clientHeight&&(!opts||opts.height==null)))){console.warn("Can't get dom width or height")}}var chart=new ECharts(dom,theme,opts);chart.id="ec_"+idBase++;instances[chart.id]=chart;if(dom.setAttribute){dom.setAttribute(DOM_ATTRIBUTE_KEY,chart.id)}else{dom[DOM_ATTRIBUTE_KEY]=chart.id}enableConnect(chart);return chart};echarts.connect=function(groupId){if(zrUtil.isArray(groupId)){var charts=groupId;groupId=null;zrUtil.each(charts,function(chart){if(chart.group!=null){groupId=chart.group}});groupId=groupId||("g_"+groupIdBase++);zrUtil.each(charts,function(chart){chart.group=groupId})}connectedGroups[groupId]=true;return groupId};echarts.disConnect=function(groupId){connectedGroups[groupId]=false};echarts.disconnect=echarts.disConnect;echarts.dispose=function(chart){if(typeof chart==="string"){chart=instances[chart]}else{if(!(chart instanceof ECharts)){chart=echarts.getInstanceByDom(chart)}}if((chart instanceof ECharts)&&!chart.isDisposed()){chart.dispose()}};echarts.getInstanceByDom=function(dom){var key;if(dom.getAttribute){key=dom.getAttribute(DOM_ATTRIBUTE_KEY)}else{key=dom[DOM_ATTRIBUTE_KEY]}return instances[key]};echarts.getInstanceById=function(key){return instances[key]};echarts.registerTheme=function(name,theme){themeStorage[name]=theme};echarts.registerPreprocessor=function(preprocessorFunc){optionPreprocessorFuncs.push(preprocessorFunc)};echarts.registerProcessor=function(priority,processorFunc){if(typeof priority==="function"){processorFunc=priority;priority=PRIORITY_PROCESSOR_FILTER}if(true){if(isNaN(priority)){throw new Error("Unkown processor priority")}}dataProcessorFuncs.push({prio:priority,func:processorFunc})};echarts.registerPostUpdate=function(postUpdateFunc){postUpdateFuncs.push(postUpdateFunc)};echarts.registerAction=function(actionInfo,eventName,action){if(typeof eventName==="function"){action=eventName;eventName=""}var actionType=zrUtil.isObject(actionInfo)?actionInfo.type:([actionInfo,actionInfo={event:eventName}][0]);actionInfo.event=(actionInfo.event||actionType).toLowerCase();eventName=actionInfo.event;zrUtil.assert(ACTION_REG.test(actionType)&&ACTION_REG.test(eventName));if(!actions[actionType]){actions[actionType]={action:action,actionInfo:actionInfo}}eventActionMap[eventName]=actionType};echarts.registerCoordinateSystem=function(type,CoordinateSystem){CoordinateSystemManager.register(type,CoordinateSystem)};echarts.getCoordinateSystemDimensions=function(type){var coordSysCreator=CoordinateSystemManager.get(type);if(coordSysCreator){return coordSysCreator.getDimensionsInfo?coordSysCreator.getDimensionsInfo():coordSysCreator.dimensions.slice()}};echarts.registerLayout=function(priority,layoutFunc){if(typeof priority==="function"){layoutFunc=priority;priority=PRIORITY_VISUAL_LAYOUT}if(true){if(isNaN(priority)){throw new Error("Unkown layout priority")}}visualFuncs.push({prio:priority,func:layoutFunc,isLayout:true})};echarts.registerVisual=function(priority,visualFunc){if(typeof priority==="function"){visualFunc=priority;priority=PRIORITY_VISUAL_CHART}if(true){if(isNaN(priority)){throw new Error("Unkown visual priority")}}visualFuncs.push({prio:priority,func:visualFunc})};echarts.registerLoading=function(name,loadingFx){loadingEffects[name]=loadingFx};echarts.extendComponentModel=function(opts){return ComponentModel.extend(opts)};echarts.extendComponentView=function(opts){return ComponentView.extend(opts)};echarts.extendSeriesModel=function(opts){return SeriesModel.extend(opts)};echarts.extendChartView=function(opts){return ChartView.extend(opts)};echarts.setCanvasCreator=function(creator){zrUtil.createCanvas=creator};echarts.registerVisual(PRIORITY_VISUAL_GLOBAL,__webpack_require__(99));echarts.registerPreprocessor(backwardCompat);echarts.registerLoading("default",__webpack_require__(100));echarts.registerAction({type:"highlight",event:"highlight",update:"highlight"},zrUtil.noop);echarts.registerAction({type:"downplay",event:"downplay",update:"downplay"},zrUtil.noop);echarts.zrender=zrender;echarts.List=__webpack_require__(101);echarts.Model=__webpack_require__(14);echarts.Axis=__webpack_require__(103);echarts.graphic=__webpack_require__(20);echarts.number=__webpack_require__(7);echarts.format=__webpack_require__(6);echarts.throttle=throttle.throttle;echarts.matrix=__webpack_require__(11);echarts.vector=__webpack_require__(10);echarts.color=__webpack_require__(33);echarts.util={};each(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(name){echarts.util[name]=zrUtil[name]});echarts.helper=__webpack_require__(111);echarts.PRIORITY={PROCESSOR:{FILTER:PRIORITY_PROCESSOR_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,CHART:PRIORITY_VISUAL_CHART,COMPONENT:PRIORITY_VISUAL_COMPONENT,BRUSH:PRIORITY_VISUAL_BRUSH}};
module.exports=echarts}),(function(module,exports){var env={};if(typeof navigator==="undefined"){env={browser:{},os:{},node:true,canvasSupported:true}}else{env=detect(navigator.userAgent)}module.exports=env;function detect(ua){var os={};var browser={};var firefox=ua.match(/Firefox\/([\d.]+)/);var ie=ua.match(/MSIE\s([\d.]+)/)||ua.match(/Trident\/.+?rv:(([\d.]+))/);var edge=ua.match(/Edge\/([\d.]+)/);var weChat=(/micromessenger/i).test(ua);if(firefox){browser.firefox=true;browser.version=firefox[1]}if(ie){browser.ie=true;browser.version=ie[1]}if(edge){browser.edge=true;browser.version=edge[1]}if(weChat){browser.weChat=true}return{browser:browser,os:os,node:false,canvasSupported:document.createElement("canvas").getContext?true:false,touchEventsSupported:"ontouchstart" in window&&!browser.ie&&!browser.edge,pointerEventsSupported:"onpointerdown" in window&&(browser.edge||(browser.ie&&browser.version>=11))}}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var modelUtil=__webpack_require__(5);var Model=__webpack_require__(14);var each=zrUtil.each;var filter=zrUtil.filter;var map=zrUtil.map;var isArray=zrUtil.isArray;var indexOf=zrUtil.indexOf;var isObject=zrUtil.isObject;var ComponentModel=__webpack_require__(72);var globalDefault=__webpack_require__(76);var OPTION_INNER_KEY="\0_ec_inner";var GlobalModel=Model.extend({constructor:GlobalModel,init:function(option,parentModel,theme,optionManager){theme=theme||{};this.option=null;this._theme=new Model(theme);this._optionManager=optionManager},setOption:function(option,optionPreprocessorFuncs){zrUtil.assert(!(OPTION_INNER_KEY in option),"please use chart.getOption()");this._optionManager.setOption(option,optionPreprocessorFuncs);this.resetOption(null)},resetOption:function(type){var optionChanged=false;var optionManager=this._optionManager;if(!type||type==="recreate"){var baseOption=optionManager.mountOption(type==="recreate");if(!this.option||type==="recreate"){initBase.call(this,baseOption)}else{this.restoreData();this.mergeOption(baseOption)}optionChanged=true}if(type==="timeline"||type==="media"){this.restoreData()}if(!type||type==="recreate"||type==="timeline"){var timelineOption=optionManager.getTimelineOption(this);timelineOption&&(this.mergeOption(timelineOption),optionChanged=true)}if(!type||type==="recreate"||type==="media"){var mediaOptions=optionManager.getMediaOption(this,this._api);if(mediaOptions.length){each(mediaOptions,function(mediaOption){this.mergeOption(mediaOption,optionChanged=true)},this)}}return optionChanged},mergeOption:function(newOption){var option=this.option;var componentsMap=this._componentsMap;var newCptTypes=[];each(newOption,function(componentOption,mainType){if(componentOption==null){return}if(!ComponentModel.hasClass(mainType)){option[mainType]=option[mainType]==null?zrUtil.clone(componentOption):zrUtil.merge(option[mainType],componentOption,true)}else{newCptTypes.push(mainType)}});ComponentModel.topologicalTravel(newCptTypes,ComponentModel.getAllClassMainTypes(),visitComponent,this);this._seriesIndices=this._seriesIndices||[];function visitComponent(mainType,dependencies){var newCptOptionList=modelUtil.normalizeToArray(newOption[mainType]);var mapResult=modelUtil.mappingToExists(componentsMap.get(mainType),newCptOptionList);modelUtil.makeIdAndName(mapResult);each(mapResult,function(item,index){var opt=item.option;if(isObject(opt)){item.keyInfo.mainType=mainType;item.keyInfo.subType=determineSubType(mainType,opt,item.exist)}});var dependentModels=getComponentsByTypes(componentsMap,dependencies);option[mainType]=[];componentsMap.set(mainType,[]);each(mapResult,function(resultItem,index){var componentModel=resultItem.exist;var newCptOption=resultItem.option;zrUtil.assert(isObject(newCptOption)||componentModel,"Empty component definition");if(!newCptOption){componentModel.mergeOption({},this);componentModel.optionUpdated({},false)}else{var ComponentModelClass=ComponentModel.getClass(mainType,resultItem.keyInfo.subType,true);if(componentModel&&componentModel instanceof ComponentModelClass){componentModel.name=resultItem.keyInfo.name;componentModel.mergeOption(newCptOption,this);componentModel.optionUpdated(newCptOption,false)}else{var extraOpt=zrUtil.extend({dependentModels:dependentModels,componentIndex:index},resultItem.keyInfo);componentModel=new ComponentModelClass(newCptOption,this,this,extraOpt);zrUtil.extend(componentModel,extraOpt);componentModel.init(newCptOption,this,this,extraOpt);componentModel.optionUpdated(null,true)}}componentsMap.get(mainType)[index]=componentModel;option[mainType][index]=componentModel.option},this);if(mainType==="series"){this._seriesIndices=createSeriesIndices(componentsMap.get("series"))}}},getOption:function(){var option=zrUtil.clone(this.option);each(option,function(opts,mainType){if(ComponentModel.hasClass(mainType)){var opts=modelUtil.normalizeToArray(opts);for(var i=opts.length-1;i>=0;i--){if(modelUtil.isIdInner(opts[i])){opts.splice(i,1)}}option[mainType]=opts
}});delete option[OPTION_INNER_KEY];return option},getTheme:function(){return this._theme},getComponent:function(mainType,idx){var list=this._componentsMap.get(mainType);if(list){return list[idx||0]}},queryComponents:function(condition){var mainType=condition.mainType;if(!mainType){return[]}var index=condition.index;var id=condition.id;var name=condition.name;var cpts=this._componentsMap.get(mainType);if(!cpts||!cpts.length){return[]}var result;if(index!=null){if(!isArray(index)){index=[index]}result=filter(map(index,function(idx){return cpts[idx]}),function(val){return !!val})}else{if(id!=null){var isIdArray=isArray(id);result=filter(cpts,function(cpt){return(isIdArray&&indexOf(id,cpt.id)>=0)||(!isIdArray&&cpt.id===id)})}else{if(name!=null){var isNameArray=isArray(name);result=filter(cpts,function(cpt){return(isNameArray&&indexOf(name,cpt.name)>=0)||(!isNameArray&&cpt.name===name)})}else{result=cpts.slice()}}}return filterBySubType(result,condition)},findComponents:function(condition){var query=condition.query;var mainType=condition.mainType;var queryCond=getQueryCond(query);var result=queryCond?this.queryComponents(queryCond):this._componentsMap.get(mainType);return doFilter(filterBySubType(result,condition));function getQueryCond(q){var indexAttr=mainType+"Index";var idAttr=mainType+"Id";var nameAttr=mainType+"Name";return q&&(q[indexAttr]!=null||q[idAttr]!=null||q[nameAttr]!=null)?{mainType:mainType,index:q[indexAttr],id:q[idAttr],name:q[nameAttr]}:null}function doFilter(res){return condition.filter?filter(res,condition.filter):res}},eachComponent:function(mainType,cb,context){var componentsMap=this._componentsMap;if(typeof mainType==="function"){context=cb;cb=mainType;componentsMap.each(function(components,componentType){each(components,function(component,index){cb.call(context,componentType,component,index)})})}else{if(zrUtil.isString(mainType)){each(componentsMap.get(mainType),cb,context)}else{if(isObject(mainType)){var queryResult=this.findComponents(mainType);each(queryResult,cb,context)}}}},getSeriesByName:function(name){var series=this._componentsMap.get("series");return filter(series,function(oneSeries){return oneSeries.name===name})},getSeriesByIndex:function(seriesIndex){return this._componentsMap.get("series")[seriesIndex]},getSeriesByType:function(subType){var series=this._componentsMap.get("series");return filter(series,function(oneSeries){return oneSeries.subType===subType})},getSeries:function(){return this._componentsMap.get("series").slice()},eachSeries:function(cb,context){assertSeriesInitialized(this);each(this._seriesIndices,function(rawSeriesIndex){var series=this._componentsMap.get("series")[rawSeriesIndex];cb.call(context,series,rawSeriesIndex)},this)},eachRawSeries:function(cb,context){each(this._componentsMap.get("series"),cb,context)},eachSeriesByType:function(subType,cb,context){assertSeriesInitialized(this);each(this._seriesIndices,function(rawSeriesIndex){var series=this._componentsMap.get("series")[rawSeriesIndex];if(series.subType===subType){cb.call(context,series,rawSeriesIndex)}},this)},eachRawSeriesByType:function(subType,cb,context){return each(this.getSeriesByType(subType),cb,context)},isSeriesFiltered:function(seriesModel){assertSeriesInitialized(this);return zrUtil.indexOf(this._seriesIndices,seriesModel.componentIndex)<0},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(cb,context){assertSeriesInitialized(this);var filteredSeries=filter(this._componentsMap.get("series"),cb,context);this._seriesIndices=createSeriesIndices(filteredSeries)},restoreData:function(){var componentsMap=this._componentsMap;this._seriesIndices=createSeriesIndices(componentsMap.get("series"));var componentTypes=[];componentsMap.each(function(components,componentType){componentTypes.push(componentType)});ComponentModel.topologicalTravel(componentTypes,ComponentModel.getAllClassMainTypes(),function(componentType,dependencies){each(componentsMap.get(componentType),function(component){component.restoreData()})})}});function mergeTheme(option,theme){zrUtil.each(theme,function(themeItem,name){if(!ComponentModel.hasClass(name)){if(typeof themeItem==="object"){option[name]=!option[name]?zrUtil.clone(themeItem):zrUtil.merge(option[name],themeItem,false)}else{if(option[name]==null){option[name]=themeItem}}}})}function initBase(baseOption){baseOption=baseOption;this.option={};this.option[OPTION_INNER_KEY]=1;this._componentsMap=zrUtil.createHashMap({series:[]});this._seriesIndices=null;mergeTheme(baseOption,this._theme.option);zrUtil.merge(baseOption,globalDefault,false);this.mergeOption(baseOption)}function getComponentsByTypes(componentsMap,types){if(!zrUtil.isArray(types)){types=types?[types]:[]}var ret={};each(types,function(type){ret[type]=(componentsMap.get(type)||[]).slice()});return ret}function determineSubType(mainType,newCptOption,existComponent){var subType=newCptOption.type?newCptOption.type:existComponent?existComponent.subType:ComponentModel.determineSubType(mainType,newCptOption);
return subType}function createSeriesIndices(seriesModels){return map(seriesModels,function(series){return series.componentIndex})||[]}function filterBySubType(components,condition){return condition.hasOwnProperty("subType")?filter(components,function(cpt){return cpt.subType===condition.subType}):components}function assertSeriesInitialized(ecModel){if(true){if(!ecModel._seriesIndices){throw new Error("Option should contains series.")}}}zrUtil.mixin(GlobalModel,__webpack_require__(77));module.exports=GlobalModel}),(function(module,exports){var BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1};var TYPED_ARRAY={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1};var objToString=Object.prototype.toString;var arrayProto=Array.prototype;var nativeForEach=arrayProto.forEach;var nativeFilter=arrayProto.filter;var nativeSlice=arrayProto.slice;var nativeMap=arrayProto.map;var nativeReduce=arrayProto.reduce;function clone(source){if(source==null||typeof source!="object"){return source}var result=source;var typeStr=objToString.call(source);if(typeStr==="[object Array]"){result=[];for(var i=0,len=source.length;i<len;i++){result[i]=clone(source[i])}}else{if(TYPED_ARRAY[typeStr]){var Ctor=source.constructor;if(source.constructor.from){result=Ctor.from(source)}else{result=new Ctor(source.length);for(var i=0,len=source.length;i<len;i++){result[i]=clone(source[i])}}}else{if(!BUILTIN_OBJECT[typeStr]&&!isPrimitive(source)&&!isDom(source)){result={};for(var key in source){if(source.hasOwnProperty(key)){result[key]=clone(source[key])}}}}}return result}function merge(target,source,overwrite){if(!isObject(source)||!isObject(target)){return overwrite?clone(source):target}for(var key in source){if(source.hasOwnProperty(key)){var targetProp=target[key];var sourceProp=source[key];if(isObject(sourceProp)&&isObject(targetProp)&&!isArray(sourceProp)&&!isArray(targetProp)&&!isDom(sourceProp)&&!isDom(targetProp)&&!isBuiltInObject(sourceProp)&&!isBuiltInObject(targetProp)&&!isPrimitive(sourceProp)&&!isPrimitive(targetProp)){merge(targetProp,sourceProp,overwrite)}else{if(overwrite||!(key in target)){target[key]=clone(source[key],true)}}}}return target}function mergeAll(targetAndSources,overwrite){var result=targetAndSources[0];for(var i=1,len=targetAndSources.length;i<len;i++){result=merge(result,targetAndSources[i],overwrite)}return result}function extend(target,source){for(var key in source){if(source.hasOwnProperty(key)){target[key]=source[key]}}return target}function defaults(target,source,overlay){for(var key in source){if(source.hasOwnProperty(key)&&(overlay?source[key]!=null:target[key]==null)){target[key]=source[key]}}return target}function createCanvas(){return document.createElement("canvas")}var _ctx;function getContext(){if(!_ctx){_ctx=util.createCanvas().getContext("2d")}return _ctx}function indexOf(array,value){if(array){if(array.indexOf){return array.indexOf(value)}for(var i=0,len=array.length;i<len;i++){if(array[i]===value){return i}}}return -1}function inherits(clazz,baseClazz){var clazzPrototype=clazz.prototype;function F(){}F.prototype=baseClazz.prototype;clazz.prototype=new F();for(var prop in clazzPrototype){clazz.prototype[prop]=clazzPrototype[prop]}clazz.prototype.constructor=clazz;clazz.superClass=baseClazz}function mixin(target,source,overlay){target="prototype" in target?target.prototype:target;source="prototype" in source?source.prototype:source;defaults(target,source,overlay)}function isArrayLike(data){if(!data){return}if(typeof data=="string"){return false}return typeof data.length=="number"}function each(obj,cb,context){if(!(obj&&cb)){return}if(obj.forEach&&obj.forEach===nativeForEach){obj.forEach(cb,context)}else{if(obj.length===+obj.length){for(var i=0,len=obj.length;i<len;i++){cb.call(context,obj[i],i,obj)}}else{for(var key in obj){if(obj.hasOwnProperty(key)){cb.call(context,obj[key],key,obj)}}}}}function map(obj,cb,context){if(!(obj&&cb)){return}if(obj.map&&obj.map===nativeMap){return obj.map(cb,context)}else{var result=[];for(var i=0,len=obj.length;i<len;i++){result.push(cb.call(context,obj[i],i,obj))}return result}}function reduce(obj,cb,memo,context){if(!(obj&&cb)){return}if(obj.reduce&&obj.reduce===nativeReduce){return obj.reduce(cb,memo,context)}else{for(var i=0,len=obj.length;i<len;i++){memo=cb.call(context,memo,obj[i],i,obj)}return memo}}function filter(obj,cb,context){if(!(obj&&cb)){return}if(obj.filter&&obj.filter===nativeFilter){return obj.filter(cb,context)}else{var result=[];for(var i=0,len=obj.length;i<len;i++){if(cb.call(context,obj[i],i,obj)){result.push(obj[i])}}return result}}function find(obj,cb,context){if(!(obj&&cb)){return}for(var i=0,len=obj.length;i<len;i++){if(cb.call(context,obj[i],i,obj)){return obj[i]
}}}function bind(func,context){var args=nativeSlice.call(arguments,2);return function(){return func.apply(context,args.concat(nativeSlice.call(arguments)))}}function curry(func){var args=nativeSlice.call(arguments,1);return function(){return func.apply(this,args.concat(nativeSlice.call(arguments)))}}function isArray(value){return objToString.call(value)==="[object Array]"}function isFunction(value){return typeof value==="function"}function isString(value){return objToString.call(value)==="[object String]"}function isObject(value){var type=typeof value;return type==="function"||(!!value&&type=="object")}function isBuiltInObject(value){return !!BUILTIN_OBJECT[objToString.call(value)]}function isDom(value){return typeof value==="object"&&typeof value.nodeType==="number"&&typeof value.ownerDocument==="object"}function eqNaN(value){return value!==value}function retrieve(values){for(var i=0,len=arguments.length;i<len;i++){if(arguments[i]!=null){return arguments[i]}}}function retrieve2(value0,value1){return value0!=null?value0:value1}function retrieve3(value0,value1,value2){return value0!=null?value0:value1!=null?value1:value2}function slice(){return Function.call.apply(nativeSlice,arguments)}function normalizeCssArray(val){if(typeof(val)==="number"){return[val,val,val,val]}var len=val.length;if(len===2){return[val[0],val[1],val[0],val[1]]}else{if(len===3){return[val[0],val[1],val[2],val[1]]}}return val}function assert(condition,message){if(!condition){throw new Error(message)}}var primitiveKey="__ec_primitive__";function setAsPrimitive(obj){obj[primitiveKey]=true}function isPrimitive(obj){return obj[primitiveKey]}function HashMap(obj){obj&&each(obj,function(value,key){this.set(key,value)},this)}var HASH_MAP_PREFIX="_ec_";var HASH_MAP_PREFIX_LENGTH=4;HashMap.prototype={constructor:HashMap,get:function(key){return this[HASH_MAP_PREFIX+key]},set:function(key,value){this[HASH_MAP_PREFIX+key]=value;return value},each:function(cb,context){context!==void 0&&(cb=bind(cb,context));for(var prefixedKey in this){this.hasOwnProperty(prefixedKey)&&cb(this[prefixedKey],prefixedKey.slice(HASH_MAP_PREFIX_LENGTH))}},removeKey:function(key){delete this[HASH_MAP_PREFIX+key]}};function createHashMap(obj){return new HashMap(obj)}var util={inherits:inherits,mixin:mixin,clone:clone,merge:merge,mergeAll:mergeAll,extend:extend,defaults:defaults,getContext:getContext,createCanvas:createCanvas,indexOf:indexOf,slice:slice,find:find,isArrayLike:isArrayLike,each:each,map:map,reduce:reduce,filter:filter,bind:bind,curry:curry,isArray:isArray,isString:isString,isObject:isObject,isFunction:isFunction,isBuiltInObject:isBuiltInObject,isDom:isDom,eqNaN:eqNaN,retrieve:retrieve,retrieve2:retrieve2,retrieve3:retrieve3,assert:assert,setAsPrimitive:setAsPrimitive,createHashMap:createHashMap,normalizeCssArray:normalizeCssArray,noop:function(){}};module.exports=util}),(function(module,exports,__webpack_require__){var formatUtil=__webpack_require__(6);var nubmerUtil=__webpack_require__(7);var Model=__webpack_require__(14);var zrUtil=__webpack_require__(4);var each=zrUtil.each;var isObject=zrUtil.isObject;var modelUtil={};modelUtil.normalizeToArray=function(value){return value instanceof Array?value:value==null?[]:[value]};modelUtil.defaultEmphasis=function(opt,subOpts){if(opt){var emphasisOpt=opt.emphasis=opt.emphasis||{};var normalOpt=opt.normal=opt.normal||{};for(var i=0,len=subOpts.length;i<len;i++){var subOptName=subOpts[i];if(!emphasisOpt.hasOwnProperty(subOptName)&&normalOpt.hasOwnProperty(subOptName)){emphasisOpt[subOptName]=normalOpt[subOptName]}}}};modelUtil.TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];modelUtil.getDataItemValue=function(dataItem){return dataItem&&(dataItem.value==null?dataItem:dataItem.value)};modelUtil.isDataItemOption=function(dataItem){return isObject(dataItem)&&!(dataItem instanceof Array)};modelUtil.converDataValue=function(value,dimInfo){var dimType=dimInfo&&dimInfo.type;if(dimType==="ordinal"){return value}if(dimType==="time"&&typeof value!=="number"&&value!=null&&value!=="-"){value=+nubmerUtil.parseDate(value)}return(value==null||value==="")?NaN:+value};modelUtil.createDataFormatModel=function(data,opt){var model=new Model();zrUtil.mixin(model,modelUtil.dataFormatMixin);model.seriesIndex=opt.seriesIndex;model.name=opt.name||"";model.mainType=opt.mainType;model.subType=opt.subType;model.getData=function(){return data};return model};modelUtil.dataFormatMixin={getDataParams:function(dataIndex,dataType){var data=this.getData(dataType);var rawValue=this.getRawValue(dataIndex,dataType);var rawDataIndex=data.getRawIndex(dataIndex);var name=data.getName(dataIndex,true);var itemOpt=data.getRawDataItem(dataIndex);
var color=data.getItemVisual(dataIndex,"color");return{componentType:this.mainType,componentSubType:this.subType,seriesType:this.mainType==="series"?this.subType:null,seriesIndex:this.seriesIndex,seriesId:this.id,seriesName:this.name,name:name,dataIndex:rawDataIndex,data:itemOpt,dataType:dataType,value:rawValue,color:color,marker:formatUtil.getTooltipMarker(color),$vars:["seriesName","name","value"]}},getFormattedLabel:function(dataIndex,status,dataType,dimIndex,labelProp){status=status||"normal";var data=this.getData(dataType);var itemModel=data.getItemModel(dataIndex);var params=this.getDataParams(dataIndex,dataType);if(dimIndex!=null&&(params.value instanceof Array)){params.value=params.value[dimIndex]}var formatter=itemModel.get([labelProp||"label",status,"formatter"]);if(typeof formatter==="function"){params.status=status;return formatter(params)}else{if(typeof formatter==="string"){return formatUtil.formatTpl(formatter,params)}}},getRawValue:function(idx,dataType){var data=this.getData(dataType);var dataItem=data.getRawDataItem(idx);if(dataItem!=null){return(isObject(dataItem)&&!(dataItem instanceof Array))?dataItem.value:dataItem}},formatTooltip:zrUtil.noop};modelUtil.mappingToExists=function(exists,newCptOptions){newCptOptions=(newCptOptions||[]).slice();var result=zrUtil.map(exists||[],function(obj,index){return{exist:obj}});each(newCptOptions,function(cptOption,index){if(!isObject(cptOption)){return}for(var i=0;i<result.length;i++){if(!result[i].option&&cptOption.id!=null&&result[i].exist.id===cptOption.id+""){result[i].option=cptOption;newCptOptions[index]=null;return}}for(var i=0;i<result.length;i++){var exist=result[i].exist;if(!result[i].option&&(exist.id==null||cptOption.id==null)&&cptOption.name!=null&&!modelUtil.isIdInner(cptOption)&&!modelUtil.isIdInner(exist)&&exist.name===cptOption.name+""){result[i].option=cptOption;newCptOptions[index]=null;return}}});each(newCptOptions,function(cptOption,index){if(!isObject(cptOption)){return}var i=0;for(;i<result.length;i++){var exist=result[i].exist;if(!result[i].option&&!modelUtil.isIdInner(exist)&&cptOption.id==null){result[i].option=cptOption;break}}if(i>=result.length){result.push({option:cptOption})}});return result};modelUtil.makeIdAndName=function(mapResult){var idMap=zrUtil.createHashMap();each(mapResult,function(item,index){var existCpt=item.exist;existCpt&&idMap.set(existCpt.id,item)});each(mapResult,function(item,index){var opt=item.option;zrUtil.assert(!opt||opt.id==null||!idMap.get(opt.id)||idMap.get(opt.id)===item,"id duplicates: "+(opt&&opt.id));opt&&opt.id!=null&&idMap.set(opt.id,item);!item.keyInfo&&(item.keyInfo={})});each(mapResult,function(item,index){var existCpt=item.exist;var opt=item.option;var keyInfo=item.keyInfo;if(!isObject(opt)){return}keyInfo.name=opt.name!=null?opt.name+"":existCpt?existCpt.name:"\0-";if(existCpt){keyInfo.id=existCpt.id}else{if(opt.id!=null){keyInfo.id=opt.id+""}else{var idNum=0;do{keyInfo.id="\0"+keyInfo.name+"\0"+idNum++}while(idMap.get(keyInfo.id))}}idMap.set(keyInfo.id,item)})};modelUtil.isIdInner=function(cptOption){return isObject(cptOption)&&cptOption.id&&(cptOption.id+"").indexOf("\0_ec_\0")===0};modelUtil.compressBatches=function(batchA,batchB){var mapA={};var mapB={};makeMap(batchA||[],mapA);makeMap(batchB||[],mapB,mapA);return[mapToArray(mapA),mapToArray(mapB)];function makeMap(sourceBatch,map,otherMap){for(var i=0,len=sourceBatch.length;i<len;i++){var seriesId=sourceBatch[i].seriesId;var dataIndices=modelUtil.normalizeToArray(sourceBatch[i].dataIndex);var otherDataIndices=otherMap&&otherMap[seriesId];for(var j=0,lenj=dataIndices.length;j<lenj;j++){var dataIndex=dataIndices[j];if(otherDataIndices&&otherDataIndices[dataIndex]){otherDataIndices[dataIndex]=null}else{(map[seriesId]||(map[seriesId]={}))[dataIndex]=1}}}}function mapToArray(map,isData){var result=[];for(var i in map){if(map.hasOwnProperty(i)&&map[i]!=null){if(isData){result.push(+i)}else{var dataIndices=mapToArray(map[i],true);dataIndices.length&&result.push({seriesId:i,dataIndex:dataIndices})}}}return result}};modelUtil.queryDataIndex=function(data,payload){if(payload.dataIndexInside!=null){return payload.dataIndexInside}else{if(payload.dataIndex!=null){return zrUtil.isArray(payload.dataIndex)?zrUtil.map(payload.dataIndex,function(value){return data.indexOfRawIndex(value)}):data.indexOfRawIndex(payload.dataIndex)}else{if(payload.name!=null){return zrUtil.isArray(payload.name)?zrUtil.map(payload.name,function(value){return data.indexOfName(value)}):data.indexOfName(payload.name)}}}};modelUtil.makeGetter=(function(){var index=0;return function(){var key="\0__ec_prop_getter_"+index++;return function(hostObj){return hostObj[key]||(hostObj[key]={})}}})();modelUtil.parseFinder=function(ecModel,finder,opt){if(zrUtil.isString(finder)){var obj={};obj[finder+"Index"]=0;finder=obj}var defaultMainType=opt&&opt.defaultMainType;if(defaultMainType&&!has(finder,defaultMainType+"Index")&&!has(finder,defaultMainType+"Id")&&!has(finder,defaultMainType+"Name")){finder[defaultMainType+"Index"]=0
}var result={};each(finder,function(value,key){var value=finder[key];if(key==="dataIndex"||key==="dataIndexInside"){result[key]=value;return}var parsedKey=key.match(/^(\w+)(Index|Id|Name)$/)||[];var mainType=parsedKey[1];var queryType=(parsedKey[2]||"").toLowerCase();if(!mainType||!queryType||value==null||(queryType==="index"&&value==="none")||(opt&&opt.includeMainTypes&&zrUtil.indexOf(opt.includeMainTypes,mainType)<0)){return}var queryParam={mainType:mainType};if(queryType!=="index"||value!=="all"){queryParam[queryType]=value}var models=ecModel.queryComponents(queryParam);result[mainType+"Models"]=models;result[mainType+"Model"]=models[0]});return result};modelUtil.dataDimToCoordDim=function(data,dataDim){var dimensions=data.dimensions;dataDim=data.getDimension(dataDim);for(var i=0;i<dimensions.length;i++){var dimItem=data.getDimensionInfo(dimensions[i]);if(dimItem.name===dataDim){return dimItem.coordDim}}};modelUtil.coordDimToDataDim=function(data,coordDim){var dataDim=[];each(data.dimensions,function(dimName){var dimItem=data.getDimensionInfo(dimName);if(dimItem.coordDim===coordDim){dataDim[dimItem.coordDimIndex]=dimItem.name}});return dataDim};modelUtil.otherDimToDataDim=function(data,otherDim){var dataDim=[];each(data.dimensions,function(dimName){var dimItem=data.getDimensionInfo(dimName);var otherDims=dimItem.otherDims;var dimIndex=otherDims[otherDim];if(dimIndex!=null&&dimIndex!==false){dataDim[dimIndex]=dimItem.name}});return dataDim};function has(obj,prop){return obj&&obj.hasOwnProperty(prop)}module.exports=modelUtil}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var numberUtil=__webpack_require__(7);var textContain=__webpack_require__(8);var formatUtil={};formatUtil.addCommas=function(x){if(isNaN(x)){return"-"}x=(x+"").split(".");return x[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(x.length>1?("."+x[1]):"")};formatUtil.toCamelCase=function(str,upperCaseFirst){str=(str||"").toLowerCase().replace(/-(.)/g,function(match,group1){return group1.toUpperCase()});if(upperCaseFirst&&str){str=str.charAt(0).toUpperCase()+str.slice(1)}return str};formatUtil.normalizeCssArray=zrUtil.normalizeCssArray;var encodeHTML=formatUtil.encodeHTML=function(source){return String(source).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"];var wrapVar=function(varName,seriesIdx){return"{"+varName+(seriesIdx==null?"":seriesIdx)+"}"};formatUtil.formatTpl=function(tpl,paramsList,encode){if(!zrUtil.isArray(paramsList)){paramsList=[paramsList]}var seriesLen=paramsList.length;if(!seriesLen){return""}var $vars=paramsList[0].$vars||[];for(var i=0;i<$vars.length;i++){var alias=TPL_VAR_ALIAS[i];var val=wrapVar(alias,0);tpl=tpl.replace(wrapVar(alias),encode?encodeHTML(val):val)}for(var seriesIdx=0;seriesIdx<seriesLen;seriesIdx++){for(var k=0;k<$vars.length;k++){var val=paramsList[seriesIdx][$vars[k]];tpl=tpl.replace(wrapVar(TPL_VAR_ALIAS[k],seriesIdx),encode?encodeHTML(val):val)}}return tpl};formatUtil.formatTplSimple=function(tpl,param,encode){zrUtil.each(param,function(value,key){tpl=tpl.replace("{"+key+"}",encode?encodeHTML(value):value)});return tpl};formatUtil.getTooltipMarker=function(color,extraCssText){return color?'<span style="display:inline-block;margin-right:5px;'+"border-radius:10px;width:9px;height:9px;background-color:"+formatUtil.encodeHTML(color)+";"+(extraCssText||"")+'"></span>':""};var s2d=function(str){return str<10?("0"+str):str};formatUtil.formatTime=function(tpl,value,isUTC){if(tpl==="week"||tpl==="month"||tpl==="quarter"||tpl==="half-year"||tpl==="year"){tpl="MM-dd\nyyyy"}var date=numberUtil.parseDate(value);var utc=isUTC?"UTC":"";var y=date["get"+utc+"FullYear"]();var M=date["get"+utc+"Month"]()+1;var d=date["get"+utc+"Date"]();var h=date["get"+utc+"Hours"]();var m=date["get"+utc+"Minutes"]();var s=date["get"+utc+"Seconds"]();tpl=tpl.replace("MM",s2d(M)).replace("M",M).replace("yyyy",y).replace("yy",y%100).replace("dd",s2d(d)).replace("d",d).replace("hh",s2d(h)).replace("h",h).replace("mm",s2d(m)).replace("m",m).replace("ss",s2d(s)).replace("s",s);return tpl};formatUtil.capitalFirst=function(str){return str?str.charAt(0).toUpperCase()+str.substr(1):str};formatUtil.truncateText=textContain.truncateText;formatUtil.getTextRect=textContain.getBoundingRect;module.exports=formatUtil}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var number={};var RADIAN_EPSILON=0.0001;function _trim(str){return str.replace(/^\s+/,"").replace(/\s+$/,"")}number.linearMap=function(val,domain,range,clamp){var subDomain=domain[1]-domain[0];var subRange=range[1]-range[0];if(subDomain===0){return subRange===0?range[0]:(range[0]+range[1])/2}if(clamp){if(subDomain>0){if(val<=domain[0]){return range[0]}else{if(val>=domain[1]){return range[1]}}}else{if(val>=domain[0]){return range[0]}else{if(val<=domain[1]){return range[1]}}}}else{if(val===domain[0]){return range[0]
}if(val===domain[1]){return range[1]}}return(val-domain[0])/subDomain*subRange+range[0]};number.parsePercent=function(percent,all){switch(percent){case"center":case"middle":percent="50%";break;case"left":case"top":percent="0%";break;case"right":case"bottom":percent="100%";break}if(typeof percent==="string"){if(_trim(percent).match(/%$/)){return parseFloat(percent)/100*all}return parseFloat(percent)}return percent==null?NaN:+percent};number.round=function(x,precision,returnStr){if(precision==null){precision=10}precision=Math.min(Math.max(0,precision),20);x=(+x).toFixed(precision);return returnStr?x:+x};number.asc=function(arr){arr.sort(function(a,b){return a-b});return arr};number.getPrecision=function(val){val=+val;if(isNaN(val)){return 0}var e=1;var count=0;while(Math.round(val*e)/e!==val){e*=10;count++}return count};number.getPrecisionSafe=function(val){var str=val.toString();var eIndex=str.indexOf("e");if(eIndex>0){var precision=+str.slice(eIndex+1);return precision<0?-precision:0}else{var dotIndex=str.indexOf(".");return dotIndex<0?0:str.length-1-dotIndex}};number.getPixelPrecision=function(dataExtent,pixelExtent){var log=Math.log;var LN10=Math.LN10;var dataQuantity=Math.floor(log(dataExtent[1]-dataExtent[0])/LN10);var sizeQuantity=Math.round(log(Math.abs(pixelExtent[1]-pixelExtent[0]))/LN10);var precision=Math.min(Math.max(-dataQuantity+sizeQuantity,0),20);return !isFinite(precision)?20:precision};number.getPercentWithPrecision=function(valueList,idx,precision){if(!valueList[idx]){return 0}var sum=zrUtil.reduce(valueList,function(acc,val){return acc+(isNaN(val)?0:val)},0);if(sum===0){return 0}var digits=Math.pow(10,precision);var votesPerQuota=zrUtil.map(valueList,function(val){return(isNaN(val)?0:val)/sum*digits*100});var targetSeats=digits*100;var seats=zrUtil.map(votesPerQuota,function(votes){return Math.floor(votes)});var currentSum=zrUtil.reduce(seats,function(acc,val){return acc+val},0);var remainder=zrUtil.map(votesPerQuota,function(votes,idx){return votes-seats[idx]});while(currentSum<targetSeats){var max=Number.NEGATIVE_INFINITY;var maxId=null;for(var i=0,len=remainder.length;i<len;++i){if(remainder[i]>max){max=remainder[i];maxId=i}}++seats[maxId];remainder[maxId]=0;++currentSum}return seats[idx]/digits};number.MAX_SAFE_INTEGER=9007199254740991;number.remRadian=function(radian){var pi2=Math.PI*2;return(radian%pi2+pi2)%pi2};number.isRadianAroundZero=function(val){return val>-RADIAN_EPSILON&&val<RADIAN_EPSILON};var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;number.parseDate=function(value){if(value instanceof Date){return value}else{if(typeof value==="string"){var match=TIME_REG.exec(value);if(!match){return new Date(NaN)}if(!match[8]){return new Date(+match[1],+(match[2]||1)-1,+match[3]||1,+match[4]||0,+(match[5]||0),+match[6]||0,+match[7]||0)}else{var hour=+match[4]||0;if(match[8].toUpperCase()!=="Z"){hour-=match[8].slice(0,3)}return new Date(Date.UTC(+match[1],+(match[2]||1)-1,+match[3]||1,hour,+(match[5]||0),+match[6]||0,+match[7]||0))}}else{if(value==null){return new Date(NaN)}}}return new Date(Math.round(value))};number.quantity=function(val){return Math.pow(10,quantityExponent(val))};function quantityExponent(val){return Math.floor(Math.log(val)/Math.LN10)}number.nice=function(val,round){var exponent=quantityExponent(val);var exp10=Math.pow(10,exponent);var f=val/exp10;var nf;if(round){if(f<1.5){nf=1}else{if(f<2.5){nf=2}else{if(f<4){nf=3}else{if(f<7){nf=5}else{nf=10}}}}}else{if(f<1){nf=1}else{if(f<2){nf=2}else{if(f<3){nf=3}else{if(f<5){nf=5}else{nf=10}}}}}val=nf*exp10;return exponent>=-20?+val.toFixed(exponent<0?-exponent:0):val};number.reformIntervals=function(list){list.sort(function(a,b){return littleThan(a,b,0)?-1:1});var curr=-Infinity;var currClose=1;for(var i=0;i<list.length;){var interval=list[i].interval;var close=list[i].close;for(var lg=0;lg<2;lg++){if(interval[lg]<=curr){interval[lg]=curr;close[lg]=!lg?1-currClose:1}curr=interval[lg];currClose=close[lg]}if(interval[0]===interval[1]&&close[0]*close[1]!==1){list.splice(i,1)}else{i++}}return list;function littleThan(a,b,lg){return a.interval[lg]<b.interval[lg]||(a.interval[lg]===b.interval[lg]&&((a.close[lg]-b.close[lg]===(!lg?1:-1))||(!lg&&littleThan(a,b,1))))}};number.isNumeric=function(v){return v-parseFloat(v)>=0};module.exports=number}),(function(module,exports,__webpack_require__){var util=__webpack_require__(4);var BoundingRect=__webpack_require__(9);var imageHelper=__webpack_require__(12);var textWidthCache={};var textWidthCacheCounter=0;var TEXT_CACHE_MAX=5000;var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;var DEFAULT_FONT="12px sans-serif";var retrieve2=util.retrieve2;var retrieve3=util.retrieve3;function getTextWidth(text,font){font=font||DEFAULT_FONT;var key=text+":"+font;if(textWidthCache[key]){return textWidthCache[key]}var textLines=(text+"").split("\n");var width=0;for(var i=0,l=textLines.length;i<l;i++){width=Math.max(textContain.measureText(textLines[i],font).width,width)
}if(textWidthCacheCounter>TEXT_CACHE_MAX){textWidthCacheCounter=0;textWidthCache={}}textWidthCacheCounter++;textWidthCache[key]=width;return width}function getTextRect(text,font,textAlign,textVerticalAlign,textPadding,rich,truncate){return rich?getRichTextRect(text,font,textAlign,textVerticalAlign,textPadding,rich,truncate):getPlainTextRect(text,font,textAlign,textVerticalAlign,textPadding,truncate)}function getPlainTextRect(text,font,textAlign,textVerticalAlign,textPadding,truncate){var contentBlock=parsePlainText(text,font,textPadding,truncate);var outerWidth=getTextWidth(text,font);if(textPadding){outerWidth+=textPadding[1]+textPadding[3]}var outerHeight=contentBlock.outerHeight;var x=adjustTextX(0,outerWidth,textAlign);var y=adjustTextY(0,outerHeight,textVerticalAlign);var rect=new BoundingRect(x,y,outerWidth,outerHeight);rect.lineHeight=contentBlock.lineHeight;return rect}function getRichTextRect(text,font,textAlign,textVerticalAlign,textPadding,rich,truncate){var contentBlock=parseRichText(text,{rich:rich,truncate:truncate,font:font,textAlign:textAlign,textPadding:textPadding});var outerWidth=contentBlock.outerWidth;var outerHeight=contentBlock.outerHeight;var x=adjustTextX(0,outerWidth,textAlign);var y=adjustTextY(0,outerHeight,textVerticalAlign);return new BoundingRect(x,y,outerWidth,outerHeight)}function adjustTextX(x,width,textAlign){if(textAlign==="right"){x-=width}else{if(textAlign==="center"){x-=width/2}}return x}function adjustTextY(y,height,textVerticalAlign){if(textVerticalAlign==="middle"){y-=height/2}else{if(textVerticalAlign==="bottom"){y-=height}}return y}function adjustTextPositionOnRect(textPosition,rect,distance){var x=rect.x;var y=rect.y;var height=rect.height;var width=rect.width;var halfHeight=height/2;var textAlign="left";var textVerticalAlign="top";switch(textPosition){case"left":x-=distance;y+=halfHeight;textAlign="right";textVerticalAlign="middle";break;case"right":x+=distance+width;y+=halfHeight;textVerticalAlign="middle";break;case"top":x+=width/2;y-=distance;textAlign="center";textVerticalAlign="bottom";break;case"bottom":x+=width/2;y+=height+distance;textAlign="center";break;case"inside":x+=width/2;y+=halfHeight;textAlign="center";textVerticalAlign="middle";break;case"insideLeft":x+=distance;y+=halfHeight;textVerticalAlign="middle";break;case"insideRight":x+=width-distance;y+=halfHeight;textAlign="right";textVerticalAlign="middle";break;case"insideTop":x+=width/2;y+=distance;textAlign="center";break;case"insideBottom":x+=width/2;y+=height-distance;textAlign="center";textVerticalAlign="bottom";break;case"insideTopLeft":x+=distance;y+=distance;break;case"insideTopRight":x+=width-distance;y+=distance;textAlign="right";break;case"insideBottomLeft":x+=distance;y+=height-distance;textVerticalAlign="bottom";break;case"insideBottomRight":x+=width-distance;y+=height-distance;textAlign="right";textVerticalAlign="bottom";break}return{x:x,y:y,textAlign:textAlign,textVerticalAlign:textVerticalAlign}}function truncateText(text,containerWidth,font,ellipsis,options){if(!containerWidth){return""}var textLines=(text+"").split("\n");options=prepareTruncateOptions(containerWidth,font,ellipsis,options);for(var i=0,len=textLines.length;i<len;i++){textLines[i]=truncateSingleLine(textLines[i],options)}return textLines.join("\n")}function prepareTruncateOptions(containerWidth,font,ellipsis,options){options=util.extend({},options);options.font=font;var ellipsis=retrieve2(ellipsis,"...");options.maxIterations=retrieve2(options.maxIterations,2);var minChar=options.minChar=retrieve2(options.minChar,0);options.cnCharWidth=getTextWidth("国",font);var ascCharWidth=options.ascCharWidth=getTextWidth("a",font);options.placeholder=retrieve2(options.placeholder,"");var contentWidth=containerWidth=Math.max(0,containerWidth-1);for(var i=0;i<minChar&&contentWidth>=ascCharWidth;i++){contentWidth-=ascCharWidth}var ellipsisWidth=getTextWidth(ellipsis);if(ellipsisWidth>contentWidth){ellipsis="";ellipsisWidth=0}contentWidth=containerWidth-ellipsisWidth;options.ellipsis=ellipsis;options.ellipsisWidth=ellipsisWidth;options.contentWidth=contentWidth;options.containerWidth=containerWidth;return options}function truncateSingleLine(textLine,options){var containerWidth=options.containerWidth;var font=options.font;var contentWidth=options.contentWidth;if(!containerWidth){return""}var lineWidth=getTextWidth(textLine,font);if(lineWidth<=containerWidth){return textLine}for(var j=0;;j++){if(lineWidth<=contentWidth||j>=options.maxIterations){textLine+=options.ellipsis;break}var subLength=j===0?estimateLength(textLine,contentWidth,options.ascCharWidth,options.cnCharWidth):lineWidth>0?Math.floor(textLine.length*contentWidth/lineWidth):0;textLine=textLine.substr(0,subLength);lineWidth=getTextWidth(textLine,font)}if(textLine===""){textLine=options.placeholder}return textLine}function estimateLength(text,contentWidth,ascCharWidth,cnCharWidth){var width=0;var i=0;for(var len=text.length;i<len&&width<contentWidth;i++){var charCode=text.charCodeAt(i);
width+=(0<=charCode&&charCode<=127)?ascCharWidth:cnCharWidth}return i}function getLineHeight(font){return getTextWidth("国",font)}function measureText(text,font){var ctx=util.getContext();ctx.font=font||DEFAULT_FONT;return ctx.measureText(text)}function parsePlainText(text,font,padding,truncate){text!=null&&(text+="");var lineHeight=getLineHeight(font);var lines=text?text.split("\n"):[];var height=lines.length*lineHeight;var outerHeight=height;if(padding){outerHeight+=padding[0]+padding[2]}if(text&&truncate){var truncOuterHeight=truncate.outerHeight;var truncOuterWidth=truncate.outerWidth;if(truncOuterHeight!=null&&outerHeight>truncOuterHeight){text="";lines=[]}else{if(truncOuterWidth!=null){var options=prepareTruncateOptions(truncOuterWidth-(padding?padding[1]+padding[3]:0),font,truncate.ellipsis,{minChar:truncate.minChar,placeholder:truncate.placeholder});for(var i=0,len=lines.length;i<len;i++){lines[i]=truncateSingleLine(lines[i],options)}}}}return{lines:lines,height:height,outerHeight:outerHeight,lineHeight:lineHeight}}function parseRichText(text,style){var contentBlock={lines:[],width:0,height:0};text!=null&&(text+="");if(!text){return contentBlock}var lastIndex=STYLE_REG.lastIndex=0;var result;while((result=STYLE_REG.exec(text))!=null){var matchedIndex=result.index;if(matchedIndex>lastIndex){pushTokens(contentBlock,text.substring(lastIndex,matchedIndex))}pushTokens(contentBlock,result[2],result[1]);lastIndex=STYLE_REG.lastIndex}if(lastIndex<text.length){pushTokens(contentBlock,text.substring(lastIndex,text.length))}var lines=contentBlock.lines;var contentHeight=0;var contentWidth=0;var pendingList=[];var stlPadding=style.textPadding;var truncate=style.truncate;var truncateWidth=truncate&&truncate.outerWidth;var truncateHeight=truncate&&truncate.outerHeight;if(stlPadding){truncateWidth!=null&&(truncateWidth-=stlPadding[1]+stlPadding[3]);truncateHeight!=null&&(truncateHeight-=stlPadding[0]+stlPadding[2])}for(var i=0;i<lines.length;i++){var line=lines[i];var lineHeight=0;var lineWidth=0;for(var j=0;j<line.tokens.length;j++){var token=line.tokens[j];var tokenStyle=token.styleName&&style.rich[token.styleName]||{};var textPadding=token.textPadding=tokenStyle.textPadding;var font=token.font=tokenStyle.font||style.font;var tokenHeight=token.textHeight=retrieve2(tokenStyle.textHeight,textContain.getLineHeight(font));textPadding&&(tokenHeight+=textPadding[0]+textPadding[2]);token.height=tokenHeight;token.lineHeight=retrieve3(tokenStyle.textLineHeight,style.textLineHeight,tokenHeight);token.textAlign=tokenStyle&&tokenStyle.textAlign||style.textAlign;token.textVerticalAlign=tokenStyle&&tokenStyle.textVerticalAlign||"middle";if(truncateHeight!=null&&contentHeight+token.lineHeight>truncateHeight){return{lines:[],width:0,height:0}}token.textWidth=textContain.getWidth(token.text,font);var tokenWidth=tokenStyle.textWidth;var tokenWidthNotSpecified=tokenWidth==null||tokenWidth==="auto";if(typeof tokenWidth==="string"&&tokenWidth.charAt(tokenWidth.length-1)==="%"){token.percentWidth=tokenWidth;pendingList.push(token);tokenWidth=0}else{if(tokenWidthNotSpecified){tokenWidth=token.textWidth;var textBackgroundColor=tokenStyle.textBackgroundColor;var bgImg=textBackgroundColor&&textBackgroundColor.image;if(bgImg){bgImg=imageHelper.findExistImage(bgImg);if(imageHelper.isImageReady(bgImg)){tokenWidth=Math.max(tokenWidth,bgImg.width*tokenHeight/bgImg.height)}}}var paddingW=textPadding?textPadding[1]+textPadding[3]:0;tokenWidth+=paddingW;var remianTruncWidth=truncateWidth!=null?truncateWidth-lineWidth:null;if(remianTruncWidth!=null&&remianTruncWidth<tokenWidth){if(!tokenWidthNotSpecified||remianTruncWidth<paddingW){token.text="";token.textWidth=tokenWidth=0}else{token.text=truncateText(token.text,remianTruncWidth-paddingW,font,truncate.ellipsis,{minChar:truncate.minChar});token.textWidth=textContain.getWidth(token.text,font);tokenWidth=token.textWidth+paddingW}}}lineWidth+=(token.width=tokenWidth);tokenStyle&&(lineHeight=Math.max(lineHeight,token.lineHeight))}line.width=lineWidth;line.lineHeight=lineHeight;contentHeight+=lineHeight;contentWidth=Math.max(contentWidth,lineWidth)}contentBlock.outerWidth=contentBlock.width=retrieve2(style.textWidth,contentWidth);contentBlock.outerHeight=contentBlock.height=retrieve2(style.textHeight,contentHeight);if(stlPadding){contentBlock.outerWidth+=stlPadding[1]+stlPadding[3];contentBlock.outerHeight+=stlPadding[0]+stlPadding[2]}for(var i=0;i<pendingList.length;i++){var token=pendingList[i];var percentWidth=token.percentWidth;token.width=parseInt(percentWidth,10)/100*contentWidth}return contentBlock}function pushTokens(block,str,styleName){var isEmptyStr=str==="";var strs=str.split("\n");var lines=block.lines;for(var i=0;i<strs.length;i++){var text=strs[i];var token={styleName:styleName,text:text,isLineHolder:!text&&!isEmptyStr};if(!i){var tokens=(lines[lines.length-1]||(lines[0]={tokens:[]})).tokens;var tokensLen=tokens.length;(tokensLen===1&&tokens[0].isLineHolder)?(tokens[0]=token):((text||!tokensLen||isEmptyStr)&&tokens.push(token))
}else{lines.push({tokens:[token]})}}}function makeFont(style){return(style.fontSize||style.fontFamily)&&[style.fontStyle,style.fontWeight,(style.fontSize||12)+"px",style.fontFamily||"sans-serif"].join(" ")||style.textFont||style.font}var textContain={getWidth:getTextWidth,getBoundingRect:getTextRect,adjustTextPositionOnRect:adjustTextPositionOnRect,truncateText:truncateText,measureText:measureText,getLineHeight:getLineHeight,parsePlainText:parsePlainText,parseRichText:parseRichText,adjustTextX:adjustTextX,adjustTextY:adjustTextY,makeFont:makeFont,DEFAULT_FONT:DEFAULT_FONT};module.exports=textContain}),(function(module,exports,__webpack_require__){var vec2=__webpack_require__(10);var matrix=__webpack_require__(11);var v2ApplyTransform=vec2.applyTransform;var mathMin=Math.min;var mathMax=Math.max;function BoundingRect(x,y,width,height){if(width<0){x=x+width;width=-width}if(height<0){y=y+height;height=-height}this.x=x;this.y=y;this.width=width;this.height=height}BoundingRect.prototype={constructor:BoundingRect,union:function(other){var x=mathMin(other.x,this.x);var y=mathMin(other.y,this.y);this.width=mathMax(other.x+other.width,this.x+this.width)-x;this.height=mathMax(other.y+other.height,this.y+this.height)-y;this.x=x;this.y=y},applyTransform:(function(){var lt=[];var rb=[];var lb=[];var rt=[];return function(m){if(!m){return}lt[0]=lb[0]=this.x;lt[1]=rt[1]=this.y;rb[0]=rt[0]=this.x+this.width;rb[1]=lb[1]=this.y+this.height;v2ApplyTransform(lt,lt,m);v2ApplyTransform(rb,rb,m);v2ApplyTransform(lb,lb,m);v2ApplyTransform(rt,rt,m);this.x=mathMin(lt[0],rb[0],lb[0],rt[0]);this.y=mathMin(lt[1],rb[1],lb[1],rt[1]);var maxX=mathMax(lt[0],rb[0],lb[0],rt[0]);var maxY=mathMax(lt[1],rb[1],lb[1],rt[1]);this.width=maxX-this.x;this.height=maxY-this.y}})(),calculateTransform:function(b){var a=this;var sx=b.width/a.width;var sy=b.height/a.height;var m=matrix.create();matrix.translate(m,m,[-a.x,-a.y]);matrix.scale(m,m,[sx,sy]);matrix.translate(m,m,[b.x,b.y]);return m},intersect:function(b){if(!b){return false}if(!(b instanceof BoundingRect)){b=BoundingRect.create(b)}var a=this;var ax0=a.x;var ax1=a.x+a.width;var ay0=a.y;var ay1=a.y+a.height;var bx0=b.x;var bx1=b.x+b.width;var by0=b.y;var by1=b.y+b.height;return !(ax1<bx0||bx1<ax0||ay1<by0||by1<ay0)},contain:function(x,y){var rect=this;return x>=rect.x&&x<=(rect.x+rect.width)&&y>=rect.y&&y<=(rect.y+rect.height)},clone:function(){return new BoundingRect(this.x,this.y,this.width,this.height)},copy:function(other){this.x=other.x;this.y=other.y;this.width=other.width;this.height=other.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}};BoundingRect.create=function(rect){return new BoundingRect(rect.x,rect.y,rect.width,rect.height)};module.exports=BoundingRect}),(function(module,exports){var ArrayCtor=typeof Float32Array==="undefined"?Array:Float32Array;var vector={create:function(x,y){var out=new ArrayCtor(2);if(x==null){x=0}if(y==null){y=0}out[0]=x;out[1]=y;return out},copy:function(out,v){out[0]=v[0];out[1]=v[1];return out},clone:function(v){var out=new ArrayCtor(2);out[0]=v[0];out[1]=v[1];return out},set:function(out,a,b){out[0]=a;out[1]=b;return out},add:function(out,v1,v2){out[0]=v1[0]+v2[0];out[1]=v1[1]+v2[1];return out},scaleAndAdd:function(out,v1,v2,a){out[0]=v1[0]+v2[0]*a;out[1]=v1[1]+v2[1]*a;return out},sub:function(out,v1,v2){out[0]=v1[0]-v2[0];out[1]=v1[1]-v2[1];return out},len:function(v){return Math.sqrt(this.lenSquare(v))},lenSquare:function(v){return v[0]*v[0]+v[1]*v[1]},mul:function(out,v1,v2){out[0]=v1[0]*v2[0];out[1]=v1[1]*v2[1];return out},div:function(out,v1,v2){out[0]=v1[0]/v2[0];out[1]=v1[1]/v2[1];return out},dot:function(v1,v2){return v1[0]*v2[0]+v1[1]*v2[1]},scale:function(out,v,s){out[0]=v[0]*s;out[1]=v[1]*s;return out},normalize:function(out,v){var d=vector.len(v);if(d===0){out[0]=0;out[1]=0}else{out[0]=v[0]/d;out[1]=v[1]/d}return out},distance:function(v1,v2){return Math.sqrt((v1[0]-v2[0])*(v1[0]-v2[0])+(v1[1]-v2[1])*(v1[1]-v2[1]))},distanceSquare:function(v1,v2){return(v1[0]-v2[0])*(v1[0]-v2[0])+(v1[1]-v2[1])*(v1[1]-v2[1])},negate:function(out,v){out[0]=-v[0];out[1]=-v[1];return out},lerp:function(out,v1,v2,t){out[0]=v1[0]+t*(v2[0]-v1[0]);out[1]=v1[1]+t*(v2[1]-v1[1]);return out},applyTransform:function(out,v,m){var x=v[0];var y=v[1];out[0]=m[0]*x+m[2]*y+m[4];out[1]=m[1]*x+m[3]*y+m[5];return out},min:function(out,v1,v2){out[0]=Math.min(v1[0],v2[0]);out[1]=Math.min(v1[1],v2[1]);return out},max:function(out,v1,v2){out[0]=Math.max(v1[0],v2[0]);out[1]=Math.max(v1[1],v2[1]);return out}};vector.length=vector.len;vector.lengthSquare=vector.lenSquare;vector.dist=vector.distance;vector.distSquare=vector.distanceSquare;module.exports=vector}),(function(module,exports){var ArrayCtor=typeof Float32Array==="undefined"?Array:Float32Array;var matrix={create:function(){var out=new ArrayCtor(6);matrix.identity(out);return out},identity:function(out){out[0]=1;out[1]=0;out[2]=0;out[3]=1;out[4]=0;out[5]=0;return out},copy:function(out,m){out[0]=m[0];
out[1]=m[1];out[2]=m[2];out[3]=m[3];out[4]=m[4];out[5]=m[5];return out},mul:function(out,m1,m2){var out0=m1[0]*m2[0]+m1[2]*m2[1];var out1=m1[1]*m2[0]+m1[3]*m2[1];var out2=m1[0]*m2[2]+m1[2]*m2[3];var out3=m1[1]*m2[2]+m1[3]*m2[3];var out4=m1[0]*m2[4]+m1[2]*m2[5]+m1[4];var out5=m1[1]*m2[4]+m1[3]*m2[5]+m1[5];out[0]=out0;out[1]=out1;out[2]=out2;out[3]=out3;out[4]=out4;out[5]=out5;return out},translate:function(out,a,v){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4]+v[0];out[5]=a[5]+v[1];return out},rotate:function(out,a,rad){var aa=a[0];var ac=a[2];var atx=a[4];var ab=a[1];var ad=a[3];var aty=a[5];var st=Math.sin(rad);var ct=Math.cos(rad);out[0]=aa*ct+ab*st;out[1]=-aa*st+ab*ct;out[2]=ac*ct+ad*st;out[3]=-ac*st+ct*ad;out[4]=ct*atx+st*aty;out[5]=ct*aty-st*atx;return out},scale:function(out,a,v){var vx=v[0];var vy=v[1];out[0]=a[0]*vx;out[1]=a[1]*vy;out[2]=a[2]*vx;out[3]=a[3]*vy;out[4]=a[4]*vx;out[5]=a[5]*vy;return out},invert:function(out,a){var aa=a[0];var ac=a[2];var atx=a[4];var ab=a[1];var ad=a[3];var aty=a[5];var det=aa*ad-ab*ac;if(!det){return null}det=1/det;out[0]=ad*det;out[1]=-ab*det;out[2]=-ac*det;out[3]=aa*det;out[4]=(ac*aty-ad*atx)*det;out[5]=(ab*atx-aa*aty)*det;return out}};module.exports=matrix}),(function(module,exports,__webpack_require__){var LRU=__webpack_require__(13);var globalImageCache=new LRU(50);var helper={};helper.findExistImage=function(newImageOrSrc){if(typeof newImageOrSrc==="string"){var cachedImgObj=globalImageCache.get(newImageOrSrc);return cachedImgObj&&cachedImgObj.image}else{return newImageOrSrc}};helper.createOrUpdateImage=function(newImageOrSrc,image,hostEl,cb,cbPayload){if(!newImageOrSrc){return image}else{if(typeof newImageOrSrc==="string"){if((image&&image.__zrImageSrc===newImageOrSrc)||!hostEl){return image}var cachedImgObj=globalImageCache.get(newImageOrSrc);var pendingWrap={hostEl:hostEl,cb:cb,cbPayload:cbPayload};if(cachedImgObj){image=cachedImgObj.image;!isImageReady(image)&&cachedImgObj.pending.push(pendingWrap)}else{!image&&(image=new Image());image.onload=imageOnLoad;globalImageCache.put(newImageOrSrc,image.__cachedImgObj={image:image,pending:[pendingWrap]});image.src=image.__zrImageSrc=newImageOrSrc}return image}else{return newImageOrSrc}}};function imageOnLoad(){var cachedImgObj=this.__cachedImgObj;this.onload=this.__cachedImgObj=null;for(var i=0;i<cachedImgObj.pending.length;i++){var pendingWrap=cachedImgObj.pending[i];var cb=pendingWrap.cb;cb&&cb(this,pendingWrap.cbPayload);pendingWrap.hostEl.dirty()}cachedImgObj.pending.length=0}var isImageReady=helper.isImageReady=function(image){return image&&image.width&&image.height};module.exports=helper}),(function(module,exports){var LinkedList=function(){this.head=null;this.tail=null;this._len=0};var linkedListProto=LinkedList.prototype;linkedListProto.insert=function(val){var entry=new Entry(val);this.insertEntry(entry);return entry};linkedListProto.insertEntry=function(entry){if(!this.head){this.head=this.tail=entry}else{this.tail.next=entry;entry.prev=this.tail;entry.next=null;this.tail=entry}this._len++};linkedListProto.remove=function(entry){var prev=entry.prev;var next=entry.next;if(prev){prev.next=next}else{this.head=next}if(next){next.prev=prev}else{this.tail=prev}entry.next=entry.prev=null;this._len--};linkedListProto.len=function(){return this._len};linkedListProto.clear=function(){this.head=this.tail=null;this._len=0};var Entry=function(val){this.value=val;this.next;this.prev};var LRU=function(maxSize){this._list=new LinkedList();this._map={};this._maxSize=maxSize||10;this._lastRemovedEntry=null};var LRUProto=LRU.prototype;LRUProto.put=function(key,value){var list=this._list;var map=this._map;var removed=null;if(map[key]==null){var len=list.len();var entry=this._lastRemovedEntry;if(len>=this._maxSize&&len>0){var leastUsedEntry=list.head;list.remove(leastUsedEntry);delete map[leastUsedEntry.key];removed=leastUsedEntry.value;this._lastRemovedEntry=leastUsedEntry}if(entry){entry.value=value}else{entry=new Entry(value)}entry.key=key;list.insertEntry(entry);map[key]=entry}return removed};LRUProto.get=function(key){var entry=this._map[key];var list=this._list;if(entry!=null){if(entry!==list.tail){list.remove(entry);list.insertEntry(entry)}return entry.value}};LRUProto.clear=function(){this._list.clear();this._map={}};module.exports=LRU}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var clazzUtil=__webpack_require__(15);var env=__webpack_require__(2);function Model(option,parentModel,ecModel){this.parentModel=parentModel;this.ecModel=ecModel;this.option=option}Model.prototype={constructor:Model,init:null,mergeOption:function(option){zrUtil.merge(this.option,option,true)},get:function(path,ignoreParent){if(path==null){return this.option}return doGet(this.option,this.parsePath(path),!ignoreParent&&getParent(this,path))},getShallow:function(key,ignoreParent){var option=this.option;var val=option==null?option:option[key];var parentModel=!ignoreParent&&getParent(this,key);if(val==null&&parentModel){val=parentModel.getShallow(key)
}return val},getModel:function(path,parentModel){var obj=path==null?this.option:doGet(this.option,path=this.parsePath(path));var thisParentModel;parentModel=parentModel||((thisParentModel=getParent(this,path))&&thisParentModel.getModel(path));return new Model(obj,parentModel,this.ecModel)},isEmpty:function(){return this.option==null},restoreData:function(){},clone:function(){var Ctor=this.constructor;return new Ctor(zrUtil.clone(this.option))},setReadOnly:function(properties){clazzUtil.setReadOnly(this,properties)},parsePath:function(path){if(typeof path==="string"){path=path.split(".")}return path},customizeGetParent:function(getParentMethod){clazzUtil.set(this,"getParent",getParentMethod)},isAnimationEnabled:function(){if(!env.node){if(this.option.animation!=null){return !!this.option.animation}else{if(this.parentModel){return this.parentModel.isAnimationEnabled()}}}}};function doGet(obj,pathArr,parentModel){for(var i=0;i<pathArr.length;i++){if(!pathArr[i]){continue}obj=(obj&&typeof obj==="object")?obj[pathArr[i]]:null;if(obj==null){break}}if(obj==null&&parentModel){obj=parentModel.get(pathArr)}return obj}function getParent(model,path){var getParentMethod=clazzUtil.get(model,"getParent");return getParentMethod?getParentMethod.call(model,path):model.parentModel}clazzUtil.enableClassExtend(Model);var mixin=zrUtil.mixin;mixin(Model,__webpack_require__(16));mixin(Model,__webpack_require__(18));mixin(Model,__webpack_require__(19));mixin(Model,__webpack_require__(71));module.exports=Model}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var clazz={};var TYPE_DELIMITER=".";var IS_CONTAINER="___EC__COMPONENT__CONTAINER___";var MEMBER_PRIFIX="\0ec_\0";clazz.set=function(host,name,value){return(host[MEMBER_PRIFIX+name]=value)};clazz.get=function(host,name){return host[MEMBER_PRIFIX+name]};clazz.hasOwn=function(host,name){return host.hasOwnProperty(MEMBER_PRIFIX+name)};var parseClassType=clazz.parseClassType=function(componentType){var ret={main:"",sub:""};if(componentType){componentType=componentType.split(TYPE_DELIMITER);ret.main=componentType[0]||"";ret.sub=componentType[1]||""}return ret};function checkClassType(componentType){zrUtil.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(componentType),'componentType "'+componentType+'" illegal')}clazz.enableClassExtend=function(RootClass,mandatoryMethods){RootClass.$constructor=RootClass;RootClass.extend=function(proto){if(true){zrUtil.each(mandatoryMethods,function(method){if(!proto[method]){console.warn("Method `"+method+"` should be implemented"+(proto.type?" in "+proto.type:"")+".")}})}var superClass=this;var ExtendedClass=function(){if(!proto.$constructor){superClass.apply(this,arguments)}else{proto.$constructor.apply(this,arguments)}};zrUtil.extend(ExtendedClass.prototype,proto);ExtendedClass.extend=this.extend;ExtendedClass.superCall=superCall;ExtendedClass.superApply=superApply;zrUtil.inherits(ExtendedClass,this);ExtendedClass.superClass=superClass;return ExtendedClass}};function superCall(context,methodName){var args=zrUtil.slice(arguments,2);return this.superClass.prototype[methodName].apply(context,args)}function superApply(context,methodName,args){return this.superClass.prototype[methodName].apply(context,args)}clazz.enableClassManagement=function(entity,options){options=options||{};var storage={};entity.registerClass=function(Clazz,componentType){if(componentType){checkClassType(componentType);componentType=parseClassType(componentType);if(!componentType.sub){if(true){if(storage[componentType.main]){console.warn(componentType.main+" exists.")}}storage[componentType.main]=Clazz}else{if(componentType.sub!==IS_CONTAINER){var container=makeContainer(componentType);container[componentType.sub]=Clazz}}}return Clazz};entity.getClass=function(componentMainType,subType,throwWhenNotFound){var Clazz=storage[componentMainType];if(Clazz&&Clazz[IS_CONTAINER]){Clazz=subType?Clazz[subType]:null}if(throwWhenNotFound&&!Clazz){throw new Error(!subType?componentMainType+"."+"type should be specified.":"Component "+componentMainType+"."+(subType||"")+" not exists. Load it first.")}return Clazz};entity.getClassesByMainType=function(componentType){componentType=parseClassType(componentType);var result=[];var obj=storage[componentType.main];if(obj&&obj[IS_CONTAINER]){zrUtil.each(obj,function(o,type){type!==IS_CONTAINER&&result.push(o)})}else{result.push(obj)}return result};entity.hasClass=function(componentType){componentType=parseClassType(componentType);return !!storage[componentType.main]};entity.getAllClassMainTypes=function(){var types=[];zrUtil.each(storage,function(obj,type){types.push(type)});return types};entity.hasSubTypes=function(componentType){componentType=parseClassType(componentType);var obj=storage[componentType.main];return obj&&obj[IS_CONTAINER]};entity.parseClassType=parseClassType;function makeContainer(componentType){var container=storage[componentType.main];if(!container||!container[IS_CONTAINER]){container=storage[componentType.main]={};
container[IS_CONTAINER]=true}return container}if(options.registerWhenExtend){var originalExtend=entity.extend;if(originalExtend){entity.extend=function(proto){var ExtendedClass=originalExtend.call(this,proto);return entity.registerClass(ExtendedClass,proto.type)}}}return entity};clazz.setReadOnly=function(obj,properties){};module.exports=clazz}),(function(module,exports,__webpack_require__){var getLineStyle=__webpack_require__(17)([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);module.exports={getLineStyle:function(excludes){var style=getLineStyle.call(this,excludes);var lineDash=this.getLineDash(style.lineWidth);lineDash&&(style.lineDash=lineDash);return style},getLineDash:function(lineWidth){if(lineWidth==null){lineWidth=1}var lineType=this.get("type");var dotSize=Math.max(lineWidth,2);var dashSize=lineWidth*4;return(lineType==="solid"||lineType==null)?null:(lineType==="dashed"?[dashSize,dashSize]:[dotSize,dotSize])}}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);module.exports=function(properties){for(var i=0;i<properties.length;i++){if(!properties[i][1]){properties[i][1]=properties[i][0]}}return function(excludes,includes){var style={};for(var i=0;i<properties.length;i++){var propName=properties[i][1];if((excludes&&zrUtil.indexOf(excludes,propName)>=0)||(includes&&zrUtil.indexOf(includes,propName)<0)){continue}var val=this.getShallow(propName);if(val!=null){style[properties[i][0]]=val}}return style}}}),(function(module,exports,__webpack_require__){module.exports={getAreaStyle:__webpack_require__(17)([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]])}}),(function(module,exports,__webpack_require__){var textContain=__webpack_require__(8);var graphicUtil=__webpack_require__(20);var PATH_COLOR=["textStyle","color"];module.exports={getTextColor:function(isEmphasis){var ecModel=this.ecModel;return this.getShallow("color")||((!isEmphasis&&ecModel)?ecModel.get(PATH_COLOR):null)},getFont:function(){return graphicUtil.getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(text){return textContain.getBoundingRect(text,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("rich"),this.getShallow("truncateText"))}}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var pathTool=__webpack_require__(21);var Path=__webpack_require__(22);var colorTool=__webpack_require__(33);var matrix=__webpack_require__(11);var vector=__webpack_require__(10);var Transformable=__webpack_require__(28);var BoundingRect=__webpack_require__(9);var round=Math.round;var mathMax=Math.max;var mathMin=Math.min;var EMPTY_OBJ={};var graphic={};graphic.Group=__webpack_require__(51);graphic.Image=__webpack_require__(52);graphic.Text=__webpack_require__(53);graphic.Circle=__webpack_require__(54);graphic.Sector=__webpack_require__(55);graphic.Ring=__webpack_require__(57);graphic.Polygon=__webpack_require__(58);graphic.Polyline=__webpack_require__(62);graphic.Rect=__webpack_require__(63);graphic.Line=__webpack_require__(64);graphic.BezierCurve=__webpack_require__(65);graphic.Arc=__webpack_require__(66);graphic.CompoundPath=__webpack_require__(67);graphic.LinearGradient=__webpack_require__(68);graphic.RadialGradient=__webpack_require__(70);graphic.BoundingRect=BoundingRect;graphic.extendShape=function(opts){return Path.extend(opts)};graphic.extendPath=function(pathData,opts){return pathTool.extendFromString(pathData,opts)};graphic.makePath=function(pathData,opts,rect,layout){var path=pathTool.createFromString(pathData,opts);var boundingRect=path.getBoundingRect();if(rect){var aspect=boundingRect.width/boundingRect.height;if(layout==="center"){var width=rect.height*aspect;var height;if(width<=rect.width){height=rect.height}else{width=rect.width;height=width/aspect}var cx=rect.x+rect.width/2;var cy=rect.y+rect.height/2;rect.x=cx-width/2;rect.y=cy-height/2;rect.width=width;rect.height=height}graphic.resizePath(path,rect)}return path};graphic.mergePath=pathTool.mergePath,graphic.resizePath=function(path,rect){if(!path.applyTransform){return}var pathRect=path.getBoundingRect();var m=pathRect.calculateTransform(rect);path.applyTransform(m)};graphic.subPixelOptimizeLine=function(param){var shape=param.shape;var lineWidth=param.style.lineWidth;if(round(shape.x1*2)===round(shape.x2*2)){shape.x1=shape.x2=subPixelOptimize(shape.x1,lineWidth,true)}if(round(shape.y1*2)===round(shape.y2*2)){shape.y1=shape.y2=subPixelOptimize(shape.y1,lineWidth,true)}return param};graphic.subPixelOptimizeRect=function(param){var shape=param.shape;var lineWidth=param.style.lineWidth;var originX=shape.x;var originY=shape.y;var originWidth=shape.width;var originHeight=shape.height;
shape.x=subPixelOptimize(shape.x,lineWidth,true);shape.y=subPixelOptimize(shape.y,lineWidth,true);shape.width=Math.max(subPixelOptimize(originX+originWidth,lineWidth,false)-shape.x,originWidth===0?0:1);shape.height=Math.max(subPixelOptimize(originY+originHeight,lineWidth,false)-shape.y,originHeight===0?0:1);return param};var subPixelOptimize=graphic.subPixelOptimize=function(position,lineWidth,positiveOrNegative){var doubledPosition=round(position*2);return(doubledPosition+round(lineWidth))%2===0?doubledPosition/2:(doubledPosition+(positiveOrNegative?1:-1))/2};function hasFillOrStroke(fillOrStroke){return fillOrStroke!=null&&fillOrStroke!="none"}function liftColor(color){return typeof color==="string"?colorTool.lift(color,-0.1):color}function cacheElementStl(el){if(el.__hoverStlDirty){var stroke=el.style.stroke;var fill=el.style.fill;var hoverStyle=el.__hoverStl;hoverStyle.fill=hoverStyle.fill||(hasFillOrStroke(fill)?liftColor(fill):null);hoverStyle.stroke=hoverStyle.stroke||(hasFillOrStroke(stroke)?liftColor(stroke):null);var normalStyle={};for(var name in hoverStyle){if(hoverStyle[name]!=null){normalStyle[name]=el.style[name]}}el.__normalStl=normalStyle;el.__hoverStlDirty=false}}function doSingleEnterHover(el){if(el.__isHover){return}cacheElementStl(el);if(el.useHoverLayer){el.__zr&&el.__zr.addHover(el,el.__hoverStl)}else{var style=el.style;var insideRollbackOpt=style.insideRollbackOpt;insideRollbackOpt&&rollbackInsideStyle(style);style.extendFrom(el.__hoverStl);if(insideRollbackOpt){applyInsideStyle(style,style.insideOriginalTextPosition,insideRollbackOpt);if(style.textFill==null){style.textFill=insideRollbackOpt.autoColor}}el.dirty(false);el.z2+=1}el.__isHover=true}function doSingleLeaveHover(el){if(!el.__isHover){return}var normalStl=el.__normalStl;if(el.useHoverLayer){el.__zr&&el.__zr.removeHover(el)}else{normalStl&&el.setStyle(normalStl);el.z2-=1}el.__isHover=false}function doEnterHover(el){el.type==="group"?el.traverse(function(child){if(child.type!=="group"){doSingleEnterHover(child)}}):doSingleEnterHover(el)}function doLeaveHover(el){el.type==="group"?el.traverse(function(child){if(child.type!=="group"){doSingleLeaveHover(child)}}):doSingleLeaveHover(el)}function setElementHoverStl(el,hoverStl){el.__hoverStl=el.hoverStyle||hoverStl||{};el.__hoverStlDirty=true;if(el.__isHover){cacheElementStl(el)}}function onElementMouseOver(e){if(this.__hoverSilentOnTouch&&e.zrByTouch){return}!this.__isEmphasis&&doEnterHover(this)}function onElementMouseOut(e){if(this.__hoverSilentOnTouch&&e.zrByTouch){return}!this.__isEmphasis&&doLeaveHover(this)}function enterEmphasis(){this.__isEmphasis=true;doEnterHover(this)}function leaveEmphasis(){this.__isEmphasis=false;doLeaveHover(this)}graphic.setHoverStyle=function(el,hoverStyle,opt){el.__hoverSilentOnTouch=opt&&opt.hoverSilentOnTouch;el.type==="group"?el.traverse(function(child){if(child.type!=="group"){setElementHoverStl(child,hoverStyle)}}):setElementHoverStl(el,hoverStyle);el.on("mouseover",onElementMouseOver).on("mouseout",onElementMouseOut);el.on("emphasis",enterEmphasis).on("normal",leaveEmphasis)};graphic.setLabelStyle=function(normalStyle,emphasisStyle,normalModel,emphasisModel,opt,normalSpecified,emphasisSpecified){opt=opt||EMPTY_OBJ;var labelFetcher=opt.labelFetcher;var labelDataIndex=opt.labelDataIndex;var labelDimIndex=opt.labelDimIndex;var showNormal=normalModel.getShallow("show");var showEmphasis=emphasisModel.getShallow("show");var baseText=(showNormal||showEmphasis)?zrUtil.retrieve2(labelFetcher?labelFetcher.getFormattedLabel(labelDataIndex,"normal",null,labelDimIndex):null,opt.defaultText):null;var normalStyleText=showNormal?baseText:null;var emphasisStyleText=showEmphasis?zrUtil.retrieve2(labelFetcher?labelFetcher.getFormattedLabel(labelDataIndex,"emphasis",null,labelDimIndex):null,baseText):null;if(normalStyleText!=null||emphasisStyleText!=null){setTextStyle(normalStyle,normalModel,normalSpecified,opt);setTextStyle(emphasisStyle,emphasisModel,emphasisSpecified,opt,true)}normalStyle.text=normalStyleText;emphasisStyle.text=emphasisStyleText};var setTextStyle=graphic.setTextStyle=function(textStyle,textStyleModel,specifiedTextStyle,opt,isEmphasis){setTextStyleCommon(textStyle,textStyleModel,opt,isEmphasis);specifiedTextStyle&&zrUtil.extend(textStyle,specifiedTextStyle);textStyle.host&&textStyle.host.dirty&&textStyle.host.dirty(false);return textStyle};graphic.setText=function(textStyle,labelModel,defaultColor){var opt={isRectText:true};var isEmphasis;if(defaultColor===false){isEmphasis=true}else{opt.autoColor=defaultColor}setTextStyleCommon(textStyle,labelModel,opt,isEmphasis);textStyle.host&&textStyle.host.dirty&&textStyle.host.dirty(false)};function setTextStyleCommon(textStyle,textStyleModel,opt,isEmphasis){opt=opt||EMPTY_OBJ;if(opt.isRectText){var textPosition=textStyleModel.getShallow("position")||(isEmphasis?null:"inside");textPosition==="outside"&&(textPosition="top");textStyle.textPosition=textPosition;textStyle.textOffset=textStyleModel.getShallow("offset");
var labelRotate=textStyleModel.getShallow("rotate");labelRotate!=null&&(labelRotate*=Math.PI/180);textStyle.textRotation=labelRotate;textStyle.textDistance=zrUtil.retrieve2(textStyleModel.getShallow("distance"),isEmphasis?null:5)}var ecModel=textStyleModel.ecModel;var globalTextStyle=ecModel&&ecModel.option.textStyle;var richItemNames=getRichItemNames(textStyleModel);var richResult;if(richItemNames){richResult={};for(var name in richItemNames){if(richItemNames.hasOwnProperty(name)){var richTextStyle=textStyleModel.getModel(["rich",name]);setTokenTextStyle(richResult[name]={},richTextStyle,globalTextStyle,opt,isEmphasis)}}}textStyle.rich=richResult;setTokenTextStyle(textStyle,textStyleModel,globalTextStyle,opt,isEmphasis,true);if(opt.forceRich&&!opt.textStyle){opt.textStyle={}}return textStyle}function getRichItemNames(textStyleModel){var richItemNameMap;while(textStyleModel&&textStyleModel!==textStyleModel.ecModel){var rich=(textStyleModel.option||EMPTY_OBJ).rich;if(rich){richItemNameMap=richItemNameMap||{};for(var name in rich){if(rich.hasOwnProperty(name)){richItemNameMap[name]=1}}}textStyleModel=textStyleModel.parentModel}return richItemNameMap}function setTokenTextStyle(textStyle,textStyleModel,globalTextStyle,opt,isEmphasis,isBlock){globalTextStyle=!isEmphasis&&globalTextStyle||EMPTY_OBJ;textStyle.textFill=getAutoColor(textStyleModel.getShallow("color"),opt)||globalTextStyle.color;textStyle.textStroke=getAutoColor(textStyleModel.getShallow("textBorderColor"),opt)||globalTextStyle.textBorderColor;textStyle.textStrokeWidth=zrUtil.retrieve2(textStyleModel.getShallow("textBorderWidth"),globalTextStyle.textBorderWidth);if(!isEmphasis){if(isBlock){var originalTextPosition=textStyle.textPosition;textStyle.insideRollback=applyInsideStyle(textStyle,originalTextPosition,opt);textStyle.insideOriginalTextPosition=originalTextPosition;textStyle.insideRollbackOpt=opt}if(textStyle.textFill==null){textStyle.textFill=opt.autoColor}}textStyle.fontStyle=textStyleModel.getShallow("fontStyle")||globalTextStyle.fontStyle;textStyle.fontWeight=textStyleModel.getShallow("fontWeight")||globalTextStyle.fontWeight;textStyle.fontSize=textStyleModel.getShallow("fontSize")||globalTextStyle.fontSize;textStyle.fontFamily=textStyleModel.getShallow("fontFamily")||globalTextStyle.fontFamily;textStyle.textAlign=textStyleModel.getShallow("align");textStyle.textVerticalAlign=textStyleModel.getShallow("verticalAlign")||textStyleModel.getShallow("baseline");textStyle.textLineHeight=textStyleModel.getShallow("lineHeight");textStyle.textWidth=textStyleModel.getShallow("width");textStyle.textHeight=textStyleModel.getShallow("height");textStyle.textTag=textStyleModel.getShallow("tag");if(!isBlock||!opt.disableBox){textStyle.textBackgroundColor=getAutoColor(textStyleModel.getShallow("backgroundColor"),opt);textStyle.textPadding=textStyleModel.getShallow("padding");textStyle.textBorderColor=getAutoColor(textStyleModel.getShallow("borderColor"),opt);textStyle.textBorderWidth=textStyleModel.getShallow("borderWidth");textStyle.textBorderRadius=textStyleModel.getShallow("borderRadius");textStyle.textBoxShadowColor=textStyleModel.getShallow("shadowColor");textStyle.textBoxShadowBlur=textStyleModel.getShallow("shadowBlur");textStyle.textBoxShadowOffsetX=textStyleModel.getShallow("shadowOffsetX");textStyle.textBoxShadowOffsetY=textStyleModel.getShallow("shadowOffsetY")}textStyle.textShadowColor=textStyleModel.getShallow("textShadowColor")||globalTextStyle.textShadowColor;textStyle.textShadowBlur=textStyleModel.getShallow("textShadowBlur")||globalTextStyle.textShadowBlur;textStyle.textShadowOffsetX=textStyleModel.getShallow("textShadowOffsetX")||globalTextStyle.textShadowOffsetX;textStyle.textShadowOffsetY=textStyleModel.getShallow("textShadowOffsetY")||globalTextStyle.textShadowOffsetY}function getAutoColor(color,opt){return color!=="auto"?color:(opt&&opt.autoColor)?opt.autoColor:null}function applyInsideStyle(textStyle,textPosition,opt){var useInsideStyle=opt.useInsideStyle;var insideRollback;if(textStyle.textFill==null&&useInsideStyle!==false&&(useInsideStyle===true||(opt.isRectText&&textPosition&&typeof textPosition==="string"&&textPosition.indexOf("inside")>=0))){insideRollback={textFill:null,textStroke:textStyle.textStroke,textStrokeWidth:textStyle.textStrokeWidth};textStyle.textFill="#fff";if(textStyle.textStroke==null){textStyle.textStroke=opt.autoColor;textStyle.textStrokeWidth==null&&(textStyle.textStrokeWidth=2)}}return insideRollback}function rollbackInsideStyle(style){var insideRollback=style.insideRollback;if(insideRollback){style.textFill=insideRollback.textFill;style.textStroke=insideRollback.textStroke;style.textStrokeWidth=insideRollback.textStrokeWidth}}graphic.getFont=function(opt,ecModel){var gTextStyleModel=ecModel||ecModel.getModel("textStyle");return[opt.fontStyle||gTextStyleModel&&gTextStyleModel.getShallow("fontStyle")||"",opt.fontWeight||gTextStyleModel&&gTextStyleModel.getShallow("fontWeight")||"",(opt.fontSize||gTextStyleModel&&gTextStyleModel.getShallow("fontSize")||12)+"px",opt.fontFamily||gTextStyleModel&&gTextStyleModel.getShallow("fontFamily")||"sans-serif"].join(" ")
};function animateOrSetProps(isUpdate,el,props,animatableModel,dataIndex,cb){if(typeof dataIndex==="function"){cb=dataIndex;dataIndex=null}var animationEnabled=animatableModel&&animatableModel.isAnimationEnabled();if(animationEnabled){var postfix=isUpdate?"Update":"";var duration=animatableModel.getShallow("animationDuration"+postfix);var animationEasing=animatableModel.getShallow("animationEasing"+postfix);var animationDelay=animatableModel.getShallow("animationDelay"+postfix);if(typeof animationDelay==="function"){animationDelay=animationDelay(dataIndex,animatableModel.getAnimationDelayParams?animatableModel.getAnimationDelayParams(el,dataIndex):null)}if(typeof duration==="function"){duration=duration(dataIndex)}duration>0?el.animateTo(props,duration,animationDelay||0,animationEasing,cb,!!cb):(el.stopAnimation(),el.attr(props),cb&&cb())}else{el.stopAnimation();el.attr(props);cb&&cb()}}graphic.updateProps=function(el,props,animatableModel,dataIndex,cb){animateOrSetProps(true,el,props,animatableModel,dataIndex,cb)};graphic.initProps=function(el,props,animatableModel,dataIndex,cb){animateOrSetProps(false,el,props,animatableModel,dataIndex,cb)};graphic.getTransform=function(target,ancestor){var mat=matrix.identity([]);while(target&&target!==ancestor){matrix.mul(mat,target.getLocalTransform(),mat);target=target.parent}return mat};graphic.applyTransform=function(target,transform,invert){if(transform&&!zrUtil.isArrayLike(transform)){transform=Transformable.getLocalTransform(transform)}if(invert){transform=matrix.invert([],transform)}return vector.applyTransform([],target,transform)};graphic.transformDirection=function(direction,transform,invert){var hBase=(transform[4]===0||transform[5]===0||transform[0]===0)?1:Math.abs(2*transform[4]/transform[0]);var vBase=(transform[4]===0||transform[5]===0||transform[2]===0)?1:Math.abs(2*transform[4]/transform[2]);var vertex=[direction==="left"?-hBase:direction==="right"?hBase:0,direction==="top"?-vBase:direction==="bottom"?vBase:0];vertex=graphic.applyTransform(vertex,transform,invert);return Math.abs(vertex[0])>Math.abs(vertex[1])?(vertex[0]>0?"right":"left"):(vertex[1]>0?"bottom":"top")};graphic.groupTransition=function(g1,g2,animatableModel,cb){if(!g1||!g2){return}function getElMap(g){var elMap={};g.traverse(function(el){if(!el.isGroup&&el.anid){elMap[el.anid]=el}});return elMap}function getAnimatableProps(el){var obj={position:vector.clone(el.position),rotation:el.rotation};if(el.shape){obj.shape=zrUtil.extend({},el.shape)}return obj}var elMap1=getElMap(g1);g2.traverse(function(el){if(!el.isGroup&&el.anid){var oldEl=elMap1[el.anid];if(oldEl){var newProp=getAnimatableProps(el);el.attr(getAnimatableProps(oldEl));graphic.updateProps(el,newProp,animatableModel,el.dataIndex)}}})};graphic.clipPointsByRect=function(points,rect){return zrUtil.map(points,function(point){var x=point[0];x=mathMax(x,rect.x);x=mathMin(x,rect.x+rect.width);var y=point[1];y=mathMax(y,rect.y);y=mathMin(y,rect.y+rect.height);return[x,y]})};graphic.clipRectByRect=function(targetRect,rect){var x=mathMax(targetRect.x,rect.x);var x2=mathMin(targetRect.x+targetRect.width,rect.x+rect.width);var y=mathMax(targetRect.y,rect.y);var y2=mathMin(targetRect.y+targetRect.height,rect.y+rect.height);if(x2>=x&&y2>=y){return{x:x,y:y,width:x2-x,height:y2-y}}};graphic.createIcon=function(iconStr,opt,rect){opt=zrUtil.extend({rectHover:true},opt);var style=opt.style={strokeNoScale:true};rect=rect||{x:-1,y:-1,width:2,height:2};if(iconStr){return iconStr.indexOf("image://")===0?(style.image=iconStr.slice(8),zrUtil.defaults(style,rect),new graphic.Image(opt)):(graphic.makePath(iconStr.replace("path://",""),opt,rect,"center"))}};module.exports=graphic}),(function(module,exports,__webpack_require__){var Path=__webpack_require__(22);var PathProxy=__webpack_require__(39);var transformPath=__webpack_require__(50);var cc=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];var mathSqrt=Math.sqrt;var mathSin=Math.sin;var mathCos=Math.cos;var PI=Math.PI;var vMag=function(v){return Math.sqrt(v[0]*v[0]+v[1]*v[1])};var vRatio=function(u,v){return(u[0]*v[0]+u[1]*v[1])/(vMag(u)*vMag(v))};var vAngle=function(u,v){return(u[0]*v[1]<u[1]*v[0]?-1:1)*Math.acos(vRatio(u,v))};function processArc(x1,y1,x2,y2,fa,fs,rx,ry,psiDeg,cmd,path){var psi=psiDeg*(PI/180);var xp=mathCos(psi)*(x1-x2)/2+mathSin(psi)*(y1-y2)/2;var yp=-1*mathSin(psi)*(x1-x2)/2+mathCos(psi)*(y1-y2)/2;var lambda=(xp*xp)/(rx*rx)+(yp*yp)/(ry*ry);if(lambda>1){rx*=mathSqrt(lambda);ry*=mathSqrt(lambda)}var f=(fa===fs?-1:1)*mathSqrt((((rx*rx)*(ry*ry))-((rx*rx)*(yp*yp))-((ry*ry)*(xp*xp)))/((rx*rx)*(yp*yp)+(ry*ry)*(xp*xp)))||0;var cxp=f*rx*yp/ry;var cyp=f*-ry*xp/rx;var cx=(x1+x2)/2+mathCos(psi)*cxp-mathSin(psi)*cyp;var cy=(y1+y2)/2+mathSin(psi)*cxp+mathCos(psi)*cyp;var theta=vAngle([1,0],[(xp-cxp)/rx,(yp-cyp)/ry]);var u=[(xp-cxp)/rx,(yp-cyp)/ry];var v=[(-1*xp-cxp)/rx,(-1*yp-cyp)/ry];var dTheta=vAngle(u,v);if(vRatio(u,v)<=-1){dTheta=PI}if(vRatio(u,v)>=1){dTheta=0}if(fs===0&&dTheta>0){dTheta=dTheta-2*PI
}if(fs===1&&dTheta<0){dTheta=dTheta+2*PI}path.addData(cmd,cx,cy,rx,ry,theta,dTheta,psi,fs)}function createPathProxyFromString(data){if(!data){return[]}var cs=data.replace(/-/g," -").replace(/  /g," ").replace(/ /g,",").replace(/,,/g,",");var n;for(n=0;n<cc.length;n++){cs=cs.replace(new RegExp(cc[n],"g"),"|"+cc[n])}var arr=cs.split("|");var cpx=0;var cpy=0;var path=new PathProxy();var CMD=PathProxy.CMD;var prevCmd;for(n=1;n<arr.length;n++){var str=arr[n];var c=str.charAt(0);var off=0;var p=str.slice(1).replace(/e,-/g,"e-").split(",");var cmd;if(p.length>0&&p[0]===""){p.shift()}for(var i=0;i<p.length;i++){p[i]=parseFloat(p[i])}while(off<p.length&&!isNaN(p[off])){if(isNaN(p[0])){break}var ctlPtx;var ctlPty;var rx;var ry;var psi;var fa;var fs;var x1=cpx;var y1=cpy;switch(c){case"l":cpx+=p[off++];cpy+=p[off++];cmd=CMD.L;path.addData(cmd,cpx,cpy);break;case"L":cpx=p[off++];cpy=p[off++];cmd=CMD.L;path.addData(cmd,cpx,cpy);break;case"m":cpx+=p[off++];cpy+=p[off++];cmd=CMD.M;path.addData(cmd,cpx,cpy);c="l";break;case"M":cpx=p[off++];cpy=p[off++];cmd=CMD.M;path.addData(cmd,cpx,cpy);c="L";break;case"h":cpx+=p[off++];cmd=CMD.L;path.addData(cmd,cpx,cpy);break;case"H":cpx=p[off++];cmd=CMD.L;path.addData(cmd,cpx,cpy);break;case"v":cpy+=p[off++];cmd=CMD.L;path.addData(cmd,cpx,cpy);break;case"V":cpy=p[off++];cmd=CMD.L;path.addData(cmd,cpx,cpy);break;case"C":cmd=CMD.C;path.addData(cmd,p[off++],p[off++],p[off++],p[off++],p[off++],p[off++]);cpx=p[off-2];cpy=p[off-1];break;case"c":cmd=CMD.C;path.addData(cmd,p[off++]+cpx,p[off++]+cpy,p[off++]+cpx,p[off++]+cpy,p[off++]+cpx,p[off++]+cpy);cpx+=p[off-2];cpy+=p[off-1];break;case"S":ctlPtx=cpx;ctlPty=cpy;var len=path.len();var pathData=path.data;if(prevCmd===CMD.C){ctlPtx+=cpx-pathData[len-4];ctlPty+=cpy-pathData[len-3]}cmd=CMD.C;x1=p[off++];y1=p[off++];cpx=p[off++];cpy=p[off++];path.addData(cmd,ctlPtx,ctlPty,x1,y1,cpx,cpy);break;case"s":ctlPtx=cpx;ctlPty=cpy;var len=path.len();var pathData=path.data;if(prevCmd===CMD.C){ctlPtx+=cpx-pathData[len-4];ctlPty+=cpy-pathData[len-3]}cmd=CMD.C;x1=cpx+p[off++];y1=cpy+p[off++];cpx+=p[off++];cpy+=p[off++];path.addData(cmd,ctlPtx,ctlPty,x1,y1,cpx,cpy);break;case"Q":x1=p[off++];y1=p[off++];cpx=p[off++];cpy=p[off++];cmd=CMD.Q;path.addData(cmd,x1,y1,cpx,cpy);break;case"q":x1=p[off++]+cpx;y1=p[off++]+cpy;cpx+=p[off++];cpy+=p[off++];cmd=CMD.Q;path.addData(cmd,x1,y1,cpx,cpy);break;case"T":ctlPtx=cpx;ctlPty=cpy;var len=path.len();var pathData=path.data;if(prevCmd===CMD.Q){ctlPtx+=cpx-pathData[len-4];ctlPty+=cpy-pathData[len-3]}cpx=p[off++];cpy=p[off++];cmd=CMD.Q;path.addData(cmd,ctlPtx,ctlPty,cpx,cpy);break;case"t":ctlPtx=cpx;ctlPty=cpy;var len=path.len();var pathData=path.data;if(prevCmd===CMD.Q){ctlPtx+=cpx-pathData[len-4];ctlPty+=cpy-pathData[len-3]}cpx+=p[off++];cpy+=p[off++];cmd=CMD.Q;path.addData(cmd,ctlPtx,ctlPty,cpx,cpy);break;case"A":rx=p[off++];ry=p[off++];psi=p[off++];fa=p[off++];fs=p[off++];x1=cpx,y1=cpy;cpx=p[off++];cpy=p[off++];cmd=CMD.A;processArc(x1,y1,cpx,cpy,fa,fs,rx,ry,psi,cmd,path);break;case"a":rx=p[off++];ry=p[off++];psi=p[off++];fa=p[off++];fs=p[off++];x1=cpx,y1=cpy;cpx+=p[off++];cpy+=p[off++];cmd=CMD.A;processArc(x1,y1,cpx,cpy,fa,fs,rx,ry,psi,cmd,path);break}}if(c==="z"||c==="Z"){cmd=CMD.Z;path.addData(cmd)}prevCmd=cmd}path.toStatic();return path}function createPathOptions(str,opts){var pathProxy=createPathProxyFromString(str);opts=opts||{};opts.buildPath=function(path){if(path.setData){path.setData(pathProxy.data);var ctx=path.getContext();if(ctx){path.rebuildPath(ctx)}}else{var ctx=path;pathProxy.rebuildPath(ctx)}};opts.applyTransform=function(m){transformPath(pathProxy,m);this.dirty(true)};return opts}module.exports={createFromString:function(str,opts){return new Path(createPathOptions(str,opts))},extendFromString:function(str,opts){return Path.extend(createPathOptions(str,opts))},mergePath:function(pathEls,opts){var pathList=[];var len=pathEls.length;for(var i=0;i<len;i++){var pathEl=pathEls[i];if(!pathEl.path){pathEl.createPathProxy()}if(pathEl.__dirtyPath){pathEl.buildPath(pathEl.path,pathEl.shape,true)}pathList.push(pathEl.path)}var pathBundle=new Path(opts);pathBundle.createPathProxy();pathBundle.buildPath=function(path){path.appendPath(pathList);var ctx=path.getContext();if(ctx){path.rebuildPath(ctx)}};return pathBundle}}}),(function(module,exports,__webpack_require__){var Displayable=__webpack_require__(23);var zrUtil=__webpack_require__(4);var PathProxy=__webpack_require__(39);var pathContain=__webpack_require__(42);var Pattern=__webpack_require__(49);var getCanvasPattern=Pattern.prototype.getCanvasPattern;var abs=Math.abs;var pathProxyForDraw=new PathProxy(true);function Path(opts){Displayable.call(this,opts);this.path=null}Path.prototype={constructor:Path,type:"path",__dirtyPath:true,strokeContainThreshold:5,brush:function(ctx,prevEl){var style=this.style;var path=this.path||pathProxyForDraw;var hasStroke=style.hasStroke();var hasFill=style.hasFill();var fill=style.fill;var stroke=style.stroke;var hasFillGradient=hasFill&&!!(fill.colorStops);
var hasStrokeGradient=hasStroke&&!!(stroke.colorStops);var hasFillPattern=hasFill&&!!(fill.image);var hasStrokePattern=hasStroke&&!!(stroke.image);style.bind(ctx,this,prevEl);this.setTransform(ctx);if(this.__dirty){var rect;if(hasFillGradient){rect=rect||this.getBoundingRect();this._fillGradient=style.getGradient(ctx,fill,rect)}if(hasStrokeGradient){rect=rect||this.getBoundingRect();this._strokeGradient=style.getGradient(ctx,stroke,rect)}}if(hasFillGradient){ctx.fillStyle=this._fillGradient}else{if(hasFillPattern){ctx.fillStyle=getCanvasPattern.call(fill,ctx)}}if(hasStrokeGradient){ctx.strokeStyle=this._strokeGradient}else{if(hasStrokePattern){ctx.strokeStyle=getCanvasPattern.call(stroke,ctx)}}var lineDash=style.lineDash;var lineDashOffset=style.lineDashOffset;var ctxLineDash=!!ctx.setLineDash;var scale=this.getGlobalScale();path.setScale(scale[0],scale[1]);if(this.__dirtyPath||(lineDash&&!ctxLineDash&&hasStroke)){path.beginPath(ctx);if(lineDash&&!ctxLineDash){path.setLineDash(lineDash);path.setLineDashOffset(lineDashOffset)}this.buildPath(path,this.shape,false);if(this.path){this.__dirtyPath=false}}else{ctx.beginPath();this.path.rebuildPath(ctx)}hasFill&&path.fill(ctx);if(lineDash&&ctxLineDash){ctx.setLineDash(lineDash);ctx.lineDashOffset=lineDashOffset}hasStroke&&path.stroke(ctx);if(lineDash&&ctxLineDash){ctx.setLineDash([])}this.restoreTransform(ctx);if(style.text!=null){this.drawRectText(ctx,this.getBoundingRect())}},buildPath:function(ctx,shapeCfg,inBundle){},createPathProxy:function(){this.path=new PathProxy()},getBoundingRect:function(){var rect=this._rect;var style=this.style;var needsUpdateRect=!rect;if(needsUpdateRect){var path=this.path;if(!path){path=this.path=new PathProxy()}if(this.__dirtyPath){path.beginPath();this.buildPath(path,this.shape,false)}rect=path.getBoundingRect()}this._rect=rect;if(style.hasStroke()){var rectWithStroke=this._rectWithStroke||(this._rectWithStroke=rect.clone());if(this.__dirty||needsUpdateRect){rectWithStroke.copy(rect);var w=style.lineWidth;var lineScale=style.strokeNoScale?this.getLineScale():1;if(!style.hasFill()){w=Math.max(w,this.strokeContainThreshold||4)}if(lineScale>1e-10){rectWithStroke.width+=w/lineScale;rectWithStroke.height+=w/lineScale;rectWithStroke.x-=w/lineScale/2;rectWithStroke.y-=w/lineScale/2}}return rectWithStroke}return rect},contain:function(x,y){var localPos=this.transformCoordToLocal(x,y);var rect=this.getBoundingRect();var style=this.style;x=localPos[0];y=localPos[1];if(rect.contain(x,y)){var pathData=this.path.data;if(style.hasStroke()){var lineWidth=style.lineWidth;var lineScale=style.strokeNoScale?this.getLineScale():1;if(lineScale>1e-10){if(!style.hasFill()){lineWidth=Math.max(lineWidth,this.strokeContainThreshold)}if(pathContain.containStroke(pathData,lineWidth/lineScale,x,y)){return true}}}if(style.hasFill()){return pathContain.contain(pathData,x,y)}}return false},dirty:function(dirtyPath){if(dirtyPath==null){dirtyPath=true}if(dirtyPath){this.__dirtyPath=dirtyPath;this._rect=null}this.__dirty=true;this.__zr&&this.__zr.refresh();if(this.__clipTarget){this.__clipTarget.dirty()}},animateShape:function(loop){return this.animate("shape",loop)},attrKV:function(key,value){if(key==="shape"){this.setShape(value);this.__dirtyPath=true;this._rect=null}else{Displayable.prototype.attrKV.call(this,key,value)}},setShape:function(key,value){var shape=this.shape;if(shape){if(zrUtil.isObject(key)){for(var name in key){if(key.hasOwnProperty(name)){shape[name]=key[name]}}}else{shape[key]=value}this.dirty(true)}return this},getLineScale:function(){var m=this.transform;return m&&abs(m[0]-1)>1e-10&&abs(m[3]-1)>1e-10?Math.sqrt(abs(m[0]*m[3]-m[2]*m[1])):1}};Path.extend=function(defaults){var Sub=function(opts){Path.call(this,opts);if(defaults.style){this.style.extendFrom(defaults.style,false)}var defaultShape=defaults.shape;if(defaultShape){this.shape=this.shape||{};var thisShape=this.shape;for(var name in defaultShape){if(!thisShape.hasOwnProperty(name)&&defaultShape.hasOwnProperty(name)){thisShape[name]=defaultShape[name]}}}defaults.init&&defaults.init.call(this,opts)};zrUtil.inherits(Sub,Path);for(var name in defaults){if(name!=="style"&&name!=="shape"){Sub.prototype[name]=defaults[name]}}return Sub};zrUtil.inherits(Path,Displayable);module.exports=Path}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var Style=__webpack_require__(24);var Element=__webpack_require__(25);var RectText=__webpack_require__(36);function Displayable(opts){opts=opts||{};Element.call(this,opts);for(var name in opts){if(opts.hasOwnProperty(name)&&name!=="style"){this[name]=opts[name]}}this.style=new Style(opts.style,this);this._rect=null;this.__clipPaths=[]}Displayable.prototype={constructor:Displayable,type:"displayable",__dirty:true,invisible:false,z:0,z2:0,zlevel:0,draggable:false,dragging:false,silent:false,culling:false,cursor:"pointer",rectHover:false,progressive:-1,beforeBrush:function(ctx){},afterBrush:function(ctx){},brush:function(ctx,prevEl){},getBoundingRect:function(){},contain:function(x,y){return this.rectContain(x,y)
},traverse:function(cb,context){cb.call(context,this)},rectContain:function(x,y){var coord=this.transformCoordToLocal(x,y);var rect=this.getBoundingRect();return rect.contain(coord[0],coord[1])},dirty:function(){this.__dirty=true;this._rect=null;this.__zr&&this.__zr.refresh()},animateStyle:function(loop){return this.animate("style",loop)},attrKV:function(key,value){if(key!=="style"){Element.prototype.attrKV.call(this,key,value)}else{this.style.set(value)}},setStyle:function(key,value){this.style.set(key,value);this.dirty(false);return this},useStyle:function(obj){this.style=new Style(obj,this);this.dirty(false);return this}};zrUtil.inherits(Displayable,Element);zrUtil.mixin(Displayable,RectText);module.exports=Displayable}),(function(module,exports){var STYLE_COMMON_PROPS=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];var Style=function(opts,host){this.extendFrom(opts,false);this.host=host};function createLinearGradient(ctx,obj,rect){var x=obj.x==null?0:obj.x;var x2=obj.x2==null?1:obj.x2;var y=obj.y==null?0:obj.y;var y2=obj.y2==null?0:obj.y2;if(!obj.global){x=x*rect.width+rect.x;x2=x2*rect.width+rect.x;y=y*rect.height+rect.y;y2=y2*rect.height+rect.y}var canvasGradient=ctx.createLinearGradient(x,y,x2,y2);return canvasGradient}function createRadialGradient(ctx,obj,rect){var width=rect.width;var height=rect.height;var min=Math.min(width,height);var x=obj.x==null?0.5:obj.x;var y=obj.y==null?0.5:obj.y;var r=obj.r==null?0.5:obj.r;if(!obj.global){x=x*width+rect.x;y=y*height+rect.y;r=r*min}var canvasGradient=ctx.createRadialGradient(x,y,0,x,y,r);return canvasGradient}Style.prototype={constructor:Style,host:null,fill:"#000",stroke:null,opacity:1,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:false,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:false,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(ctx,el,prevEl){var style=this;var prevStyle=prevEl&&prevEl.style;var firstDraw=!prevStyle;for(var i=0;i<STYLE_COMMON_PROPS.length;i++){var prop=STYLE_COMMON_PROPS[i];var styleName=prop[0];if(firstDraw||style[styleName]!==prevStyle[styleName]){ctx[styleName]=style[styleName]||prop[1]}}if((firstDraw||style.fill!==prevStyle.fill)){ctx.fillStyle=style.fill}if((firstDraw||style.stroke!==prevStyle.stroke)){ctx.strokeStyle=style.stroke}if((firstDraw||style.opacity!==prevStyle.opacity)){ctx.globalAlpha=style.opacity==null?1:style.opacity}if((firstDraw||style.blend!==prevStyle.blend)){ctx.globalCompositeOperation=style.blend||"source-over"}if(this.hasStroke()){var lineWidth=style.lineWidth;ctx.lineWidth=lineWidth/((this.strokeNoScale&&el&&el.getLineScale)?el.getLineScale():1)}},hasFill:function(){var fill=this.fill;return fill!=null&&fill!=="none"},hasStroke:function(){var stroke=this.stroke;return stroke!=null&&stroke!=="none"&&this.lineWidth>0},extendFrom:function(otherStyle,overwrite){if(otherStyle){for(var name in otherStyle){if(otherStyle.hasOwnProperty(name)&&(overwrite===true||(overwrite===false?!this.hasOwnProperty(name):otherStyle[name]!=null))){this[name]=otherStyle[name]}}}},set:function(obj,value){if(typeof obj==="string"){this[obj]=value}else{this.extendFrom(obj,true)}},clone:function(){var newStyle=new this.constructor();newStyle.extendFrom(this,true);return newStyle},getGradient:function(ctx,obj,rect){var method=obj.type==="radial"?createRadialGradient:createLinearGradient;var canvasGradient=method(ctx,obj,rect);var colorStops=obj.colorStops;for(var i=0;i<colorStops.length;i++){canvasGradient.addColorStop(colorStops[i].offset,colorStops[i].color)}return canvasGradient}};var styleProto=Style.prototype;for(var i=0;i<STYLE_COMMON_PROPS.length;i++){var prop=STYLE_COMMON_PROPS[i];if(!(prop[0] in styleProto)){styleProto[prop[0]]=prop[1]}}Style.getGradient=styleProto.getGradient;module.exports=Style}),(function(module,exports,__webpack_require__){var guid=__webpack_require__(26);var Eventful=__webpack_require__(27);var Transformable=__webpack_require__(28);var Animatable=__webpack_require__(29);var zrUtil=__webpack_require__(4);var Element=function(opts){Transformable.call(this,opts);Eventful.call(this,opts);Animatable.call(this,opts);this.id=opts.id||guid()};Element.prototype={type:"element",name:"",__zr:null,ignore:false,clipPath:null,drift:function(dx,dy){switch(this.draggable){case"horizontal":dy=0;
break;case"vertical":dx=0;break}var m=this.transform;if(!m){m=this.transform=[1,0,0,1,0,0]}m[4]+=dx;m[5]+=dy;this.decomposeTransform();this.dirty(false)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(cb,context){},attrKV:function(key,value){if(key==="position"||key==="scale"||key==="origin"){if(value){var target=this[key];if(!target){target=this[key]=[]}target[0]=value[0];target[1]=value[1]}}else{this[key]=value}},hide:function(){this.ignore=true;this.__zr&&this.__zr.refresh()},show:function(){this.ignore=false;this.__zr&&this.__zr.refresh()},attr:function(key,value){if(typeof key==="string"){this.attrKV(key,value)}else{if(zrUtil.isObject(key)){for(var name in key){if(key.hasOwnProperty(name)){this.attrKV(name,key[name])}}}}this.dirty(false);return this},setClipPath:function(clipPath){var zr=this.__zr;if(zr){clipPath.addSelfToZr(zr)}if(this.clipPath&&this.clipPath!==clipPath){this.removeClipPath()}this.clipPath=clipPath;clipPath.__zr=zr;clipPath.__clipTarget=this;this.dirty(false)},removeClipPath:function(){var clipPath=this.clipPath;if(clipPath){if(clipPath.__zr){clipPath.removeSelfFromZr(clipPath.__zr)}clipPath.__zr=null;clipPath.__clipTarget=null;this.clipPath=null;this.dirty(false)}},addSelfToZr:function(zr){this.__zr=zr;var animators=this.animators;if(animators){for(var i=0;i<animators.length;i++){zr.animation.addAnimator(animators[i])}}if(this.clipPath){this.clipPath.addSelfToZr(zr)}},removeSelfFromZr:function(zr){this.__zr=null;var animators=this.animators;if(animators){for(var i=0;i<animators.length;i++){zr.animation.removeAnimator(animators[i])}}if(this.clipPath){this.clipPath.removeSelfFromZr(zr)}}};zrUtil.mixin(Element,Animatable);zrUtil.mixin(Element,Transformable);zrUtil.mixin(Element,Eventful);module.exports=Element}),(function(module,exports){var idStart=2311;module.exports=function(){return idStart++}}),(function(module,exports){var arrySlice=Array.prototype.slice;var Eventful=function(){this._$handlers={}};Eventful.prototype={constructor:Eventful,one:function(event,handler,context){var _h=this._$handlers;if(!handler||!event){return this}if(!_h[event]){_h[event]=[]}for(var i=0;i<_h[event].length;i++){if(_h[event][i].h===handler){return this}}_h[event].push({h:handler,one:true,ctx:context||this});return this},on:function(event,handler,context){var _h=this._$handlers;if(!handler||!event){return this}if(!_h[event]){_h[event]=[]}for(var i=0;i<_h[event].length;i++){if(_h[event][i].h===handler){return this}}_h[event].push({h:handler,one:false,ctx:context||this});return this},isSilent:function(event){var _h=this._$handlers;return _h[event]&&_h[event].length},off:function(event,handler){var _h=this._$handlers;if(!event){this._$handlers={};return this}if(handler){if(_h[event]){var newList=[];for(var i=0,l=_h[event].length;i<l;i++){if(_h[event][i]["h"]!=handler){newList.push(_h[event][i])}}_h[event]=newList}if(_h[event]&&_h[event].length===0){delete _h[event]}}else{delete _h[event]}return this},trigger:function(type){if(this._$handlers[type]){var args=arguments;var argLen=args.length;if(argLen>3){args=arrySlice.call(args,1)}var _h=this._$handlers[type];var len=_h.length;for(var i=0;i<len;){switch(argLen){case 1:_h[i]["h"].call(_h[i]["ctx"]);break;case 2:_h[i]["h"].call(_h[i]["ctx"],args[1]);break;case 3:_h[i]["h"].call(_h[i]["ctx"],args[1],args[2]);break;default:_h[i]["h"].apply(_h[i]["ctx"],args);break}if(_h[i]["one"]){_h.splice(i,1);len--}else{i++}}}return this},triggerWithContext:function(type){if(this._$handlers[type]){var args=arguments;var argLen=args.length;if(argLen>4){args=arrySlice.call(args,1,args.length-1)}var ctx=args[args.length-1];var _h=this._$handlers[type];var len=_h.length;for(var i=0;i<len;){switch(argLen){case 1:_h[i]["h"].call(ctx);break;case 2:_h[i]["h"].call(ctx,args[1]);break;case 3:_h[i]["h"].call(ctx,args[1],args[2]);break;default:_h[i]["h"].apply(ctx,args);break}if(_h[i]["one"]){_h.splice(i,1);len--}else{i++}}}return this}};module.exports=Eventful}),(function(module,exports,__webpack_require__){var matrix=__webpack_require__(11);var vector=__webpack_require__(10);var mIdentity=matrix.identity;var EPSILON=0.00005;function isNotAroundZero(val){return val>EPSILON||val<-EPSILON}var Transformable=function(opts){opts=opts||{};if(!opts.position){this.position=[0,0]}if(opts.rotation==null){this.rotation=0}if(!opts.scale){this.scale=[1,1]}this.origin=this.origin||null};var transformableProto=Transformable.prototype;transformableProto.transform=null;transformableProto.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.position[0])||isNotAroundZero(this.position[1])||isNotAroundZero(this.scale[0]-1)||isNotAroundZero(this.scale[1]-1)};transformableProto.updateTransform=function(){var parent=this.parent;var parentHasTransform=parent&&parent.transform;var needLocalTransform=this.needLocalTransform();var m=this.transform;if(!(needLocalTransform||parentHasTransform)){m&&mIdentity(m);return
}m=m||matrix.create();if(needLocalTransform){this.getLocalTransform(m)}else{mIdentity(m)}if(parentHasTransform){if(needLocalTransform){matrix.mul(m,parent.transform,m)}else{matrix.copy(m,parent.transform)}}this.transform=m;this.invTransform=this.invTransform||matrix.create();matrix.invert(this.invTransform,m)};transformableProto.getLocalTransform=function(m){return Transformable.getLocalTransform(this,m)};transformableProto.setTransform=function(ctx){var m=this.transform;var dpr=ctx.dpr||1;if(m){ctx.setTransform(dpr*m[0],dpr*m[1],dpr*m[2],dpr*m[3],dpr*m[4],dpr*m[5])}else{ctx.setTransform(dpr,0,0,dpr,0,0)}};transformableProto.restoreTransform=function(ctx){var dpr=ctx.dpr||1;ctx.setTransform(dpr,0,0,dpr,0,0)};var tmpTransform=[];transformableProto.decomposeTransform=function(){if(!this.transform){return}var parent=this.parent;var m=this.transform;if(parent&&parent.transform){matrix.mul(tmpTransform,parent.invTransform,m);m=tmpTransform}var sx=m[0]*m[0]+m[1]*m[1];var sy=m[2]*m[2]+m[3]*m[3];var position=this.position;var scale=this.scale;if(isNotAroundZero(sx-1)){sx=Math.sqrt(sx)}if(isNotAroundZero(sy-1)){sy=Math.sqrt(sy)}if(m[0]<0){sx=-sx}if(m[3]<0){sy=-sy}position[0]=m[4];position[1]=m[5];scale[0]=sx;scale[1]=sy;this.rotation=Math.atan2(-m[1]/sy,m[0]/sx)};transformableProto.getGlobalScale=function(){var m=this.transform;if(!m){return[1,1]}var sx=Math.sqrt(m[0]*m[0]+m[1]*m[1]);var sy=Math.sqrt(m[2]*m[2]+m[3]*m[3]);if(m[0]<0){sx=-sx}if(m[3]<0){sy=-sy}return[sx,sy]};transformableProto.transformCoordToLocal=function(x,y){var v2=[x,y];var invTransform=this.invTransform;if(invTransform){vector.applyTransform(v2,v2,invTransform)}return v2};transformableProto.transformCoordToGlobal=function(x,y){var v2=[x,y];var transform=this.transform;if(transform){vector.applyTransform(v2,v2,transform)}return v2};Transformable.getLocalTransform=function(target,m){m=m||[];mIdentity(m);var origin=target.origin;var scale=target.scale||[1,1];var rotation=target.rotation||0;var position=target.position||[0,0];if(origin){m[4]-=origin[0];m[5]-=origin[1]}matrix.scale(m,m,scale);if(rotation){matrix.rotate(m,m,rotation)}if(origin){m[4]+=origin[0];m[5]+=origin[1]}m[4]+=position[0];m[5]+=position[1];return m};module.exports=Transformable}),(function(module,exports,__webpack_require__){var Animator=__webpack_require__(30);var util=__webpack_require__(4);var isString=util.isString;var isFunction=util.isFunction;var isObject=util.isObject;var log=__webpack_require__(34);var Animatable=function(){this.animators=[]};Animatable.prototype={constructor:Animatable,animate:function(path,loop){var target;var animatingShape=false;var el=this;var zr=this.__zr;if(path){var pathSplitted=path.split(".");var prop=el;animatingShape=pathSplitted[0]==="shape";for(var i=0,l=pathSplitted.length;i<l;i++){if(!prop){continue}prop=prop[pathSplitted[i]]}if(prop){target=prop}}else{target=el}if(!target){log('Property "'+path+'" is not existed in element '+el.id);return}var animators=el.animators;var animator=new Animator(target,loop);animator.during(function(target){el.dirty(animatingShape)}).done(function(){animators.splice(util.indexOf(animators,animator),1)});animators.push(animator);if(zr){zr.animation.addAnimator(animator)}return animator},stopAnimation:function(forwardToLast){var animators=this.animators;var len=animators.length;for(var i=0;i<len;i++){animators[i].stop(forwardToLast)}animators.length=0;return this},animateTo:function(target,time,delay,easing,callback,forceAnimate){if(isString(delay)){callback=easing;easing=delay;delay=0}else{if(isFunction(easing)){callback=easing;easing="linear";delay=0}else{if(isFunction(delay)){callback=delay;delay=0}else{if(isFunction(time)){callback=time;time=500}else{if(!time){time=500}}}}}this.stopAnimation();this._animateToShallow("",this,target,time,delay,easing,callback);var animators=this.animators.slice();var count=animators.length;function done(){count--;if(!count){callback&&callback()}}if(!count){callback&&callback()}for(var i=0;i<animators.length;i++){animators[i].done(done).start(easing,forceAnimate)}},_animateToShallow:function(path,source,target,time,delay){var objShallow={};var propertyCount=0;for(var name in target){if(!target.hasOwnProperty(name)){continue}if(source[name]!=null){if(isObject(target[name])&&!util.isArrayLike(target[name])){this._animateToShallow(path?path+"."+name:name,source[name],target[name],time,delay)}else{objShallow[name]=target[name];propertyCount++}}else{if(target[name]!=null){if(!path){this.attr(name,target[name])}else{var props={};props[path]={};props[path][name]=target[name];this.attr(props)}}}}if(propertyCount>0){this.animate(path,false).when(time==null?500:time,objShallow).delay(delay||0)}return this}};module.exports=Animatable}),(function(module,exports,__webpack_require__){var Clip=__webpack_require__(31);var color=__webpack_require__(33);var util=__webpack_require__(4);var isArrayLike=util.isArrayLike;var arraySlice=Array.prototype.slice;function defaultGetter(target,key){return target[key]
}function defaultSetter(target,key,value){target[key]=value}function interpolateNumber(p0,p1,percent){return(p1-p0)*percent+p0}function interpolateString(p0,p1,percent){return percent>0.5?p1:p0}function interpolateArray(p0,p1,percent,out,arrDim){var len=p0.length;if(arrDim==1){for(var i=0;i<len;i++){out[i]=interpolateNumber(p0[i],p1[i],percent)}}else{var len2=len&&p0[0].length;for(var i=0;i<len;i++){for(var j=0;j<len2;j++){out[i][j]=interpolateNumber(p0[i][j],p1[i][j],percent)}}}}function fillArr(arr0,arr1,arrDim){var arr0Len=arr0.length;var arr1Len=arr1.length;if(arr0Len!==arr1Len){var isPreviousLarger=arr0Len>arr1Len;if(isPreviousLarger){arr0.length=arr1Len}else{for(var i=arr0Len;i<arr1Len;i++){arr0.push(arrDim===1?arr1[i]:arraySlice.call(arr1[i]))}}}var len2=arr0[0]&&arr0[0].length;for(var i=0;i<arr0.length;i++){if(arrDim===1){if(isNaN(arr0[i])){arr0[i]=arr1[i]}}else{for(var j=0;j<len2;j++){if(isNaN(arr0[i][j])){arr0[i][j]=arr1[i][j]}}}}}function isArraySame(arr0,arr1,arrDim){if(arr0===arr1){return true}var len=arr0.length;if(len!==arr1.length){return false}if(arrDim===1){for(var i=0;i<len;i++){if(arr0[i]!==arr1[i]){return false}}}else{var len2=arr0[0].length;for(var i=0;i<len;i++){for(var j=0;j<len2;j++){if(arr0[i][j]!==arr1[i][j]){return false}}}}return true}function catmullRomInterpolateArray(p0,p1,p2,p3,t,t2,t3,out,arrDim){var len=p0.length;if(arrDim==1){for(var i=0;i<len;i++){out[i]=catmullRomInterpolate(p0[i],p1[i],p2[i],p3[i],t,t2,t3)}}else{var len2=p0[0].length;for(var i=0;i<len;i++){for(var j=0;j<len2;j++){out[i][j]=catmullRomInterpolate(p0[i][j],p1[i][j],p2[i][j],p3[i][j],t,t2,t3)}}}}function catmullRomInterpolate(p0,p1,p2,p3,t,t2,t3){var v0=(p2-p0)*0.5;var v1=(p3-p1)*0.5;return(2*(p1-p2)+v0+v1)*t3+(-3*(p1-p2)-2*v0-v1)*t2+v0*t+p1}function cloneValue(value){if(isArrayLike(value)){var len=value.length;if(isArrayLike(value[0])){var ret=[];for(var i=0;i<len;i++){ret.push(arraySlice.call(value[i]))}return ret}return arraySlice.call(value)}return value}function rgba2String(rgba){rgba[0]=Math.floor(rgba[0]);rgba[1]=Math.floor(rgba[1]);rgba[2]=Math.floor(rgba[2]);return"rgba("+rgba.join(",")+")"}function getArrayDim(keyframes){var lastValue=keyframes[keyframes.length-1].value;return isArrayLike(lastValue&&lastValue[0])?2:1}function createTrackClip(animator,easing,oneTrackDone,keyframes,propName,forceAnimate){var getter=animator._getter;var setter=animator._setter;var useSpline=easing==="spline";var trackLen=keyframes.length;if(!trackLen){return}var firstVal=keyframes[0].value;var isValueArray=isArrayLike(firstVal);var isValueColor=false;var isValueString=false;var arrDim=isValueArray?getArrayDim(keyframes):0;var trackMaxTime;keyframes.sort(function(a,b){return a.time-b.time});trackMaxTime=keyframes[trackLen-1].time;var kfPercents=[];var kfValues=[];var prevValue=keyframes[0].value;var isAllValueEqual=true;for(var i=0;i<trackLen;i++){kfPercents.push(keyframes[i].time/trackMaxTime);var value=keyframes[i].value;if(!((isValueArray&&isArraySame(value,prevValue,arrDim))||(!isValueArray&&value===prevValue))){isAllValueEqual=false}prevValue=value;if(typeof value=="string"){var colorArray=color.parse(value);if(colorArray){value=colorArray;isValueColor=true}else{isValueString=true}}kfValues.push(value)}if(!forceAnimate&&isAllValueEqual){return}var lastValue=kfValues[trackLen-1];for(var i=0;i<trackLen-1;i++){if(isValueArray){fillArr(kfValues[i],lastValue,arrDim)}else{if(isNaN(kfValues[i])&&!isNaN(lastValue)&&!isValueString&&!isValueColor){kfValues[i]=lastValue}}}isValueArray&&fillArr(getter(animator._target,propName),lastValue,arrDim);var lastFrame=0;var lastFramePercent=0;var start;var w;var p0;var p1;var p2;var p3;if(isValueColor){var rgba=[0,0,0,0]}var onframe=function(target,percent){var frame;if(percent<0){frame=0}else{if(percent<lastFramePercent){start=Math.min(lastFrame+1,trackLen-1);for(frame=start;frame>=0;frame--){if(kfPercents[frame]<=percent){break}}frame=Math.min(frame,trackLen-2)}else{for(frame=lastFrame;frame<trackLen;frame++){if(kfPercents[frame]>percent){break}}frame=Math.min(frame-1,trackLen-2)}}lastFrame=frame;lastFramePercent=percent;var range=(kfPercents[frame+1]-kfPercents[frame]);if(range===0){return}else{w=(percent-kfPercents[frame])/range}if(useSpline){p1=kfValues[frame];p0=kfValues[frame===0?frame:frame-1];p2=kfValues[frame>trackLen-2?trackLen-1:frame+1];p3=kfValues[frame>trackLen-3?trackLen-1:frame+2];if(isValueArray){catmullRomInterpolateArray(p0,p1,p2,p3,w,w*w,w*w*w,getter(target,propName),arrDim)}else{var value;if(isValueColor){value=catmullRomInterpolateArray(p0,p1,p2,p3,w,w*w,w*w*w,rgba,1);value=rgba2String(rgba)}else{if(isValueString){return interpolateString(p1,p2,w)}else{value=catmullRomInterpolate(p0,p1,p2,p3,w,w*w,w*w*w)}}setter(target,propName,value)}}else{if(isValueArray){interpolateArray(kfValues[frame],kfValues[frame+1],w,getter(target,propName),arrDim)}else{var value;if(isValueColor){interpolateArray(kfValues[frame],kfValues[frame+1],w,rgba,1);value=rgba2String(rgba)}else{if(isValueString){return interpolateString(kfValues[frame],kfValues[frame+1],w)
}else{value=interpolateNumber(kfValues[frame],kfValues[frame+1],w)}}setter(target,propName,value)}}};var clip=new Clip({target:animator._target,life:trackMaxTime,loop:animator._loop,delay:animator._delay,onframe:onframe,ondestroy:oneTrackDone});if(easing&&easing!=="spline"){clip.easing=easing}return clip}var Animator=function(target,loop,getter,setter){this._tracks={};this._target=target;this._loop=loop||false;this._getter=getter||defaultGetter;this._setter=setter||defaultSetter;this._clipCount=0;this._delay=0;this._doneList=[];this._onframeList=[];this._clipList=[]};Animator.prototype={when:function(time,props){var tracks=this._tracks;for(var propName in props){if(!props.hasOwnProperty(propName)){continue}if(!tracks[propName]){tracks[propName]=[];var value=this._getter(this._target,propName);if(value==null){continue}if(time!==0){tracks[propName].push({time:0,value:cloneValue(value)})}}tracks[propName].push({time:time,value:props[propName]})}return this},during:function(callback){this._onframeList.push(callback);return this},pause:function(){for(var i=0;i<this._clipList.length;i++){this._clipList[i].pause()}this._paused=true},resume:function(){for(var i=0;i<this._clipList.length;i++){this._clipList[i].resume()}this._paused=false},isPaused:function(){return !!this._paused},_doneCallback:function(){this._tracks={};this._clipList.length=0;var doneList=this._doneList;var len=doneList.length;for(var i=0;i<len;i++){doneList[i].call(this)}},start:function(easing,forceAnimate){var self=this;var clipCount=0;var oneTrackDone=function(){clipCount--;if(!clipCount){self._doneCallback()}};var lastClip;for(var propName in this._tracks){if(!this._tracks.hasOwnProperty(propName)){continue}var clip=createTrackClip(this,easing,oneTrackDone,this._tracks[propName],propName,forceAnimate);if(clip){this._clipList.push(clip);clipCount++;if(this.animation){this.animation.addClip(clip)}lastClip=clip}}if(lastClip){var oldOnFrame=lastClip.onframe;lastClip.onframe=function(target,percent){oldOnFrame(target,percent);for(var i=0;i<self._onframeList.length;i++){self._onframeList[i](target,percent)}}}if(!clipCount){this._doneCallback()}return this},stop:function(forwardToLast){var clipList=this._clipList;var animation=this.animation;for(var i=0;i<clipList.length;i++){var clip=clipList[i];if(forwardToLast){clip.onframe(this._target,1)}animation&&animation.removeClip(clip)}clipList.length=0},delay:function(time){this._delay=time;return this},done:function(cb){if(cb){this._doneList.push(cb)}return this},getClips:function(){return this._clipList}};module.exports=Animator}),(function(module,exports,__webpack_require__){var easingFuncs=__webpack_require__(32);function Clip(options){this._target=options.target;this._life=options.life||1000;this._delay=options.delay||0;this._initialized=false;this.loop=options.loop==null?false:options.loop;this.gap=options.gap||0;this.easing=options.easing||"Linear";this.onframe=options.onframe;this.ondestroy=options.ondestroy;this.onrestart=options.onrestart;this._pausedTime=0;this._paused=false}Clip.prototype={constructor:Clip,step:function(globalTime,deltaTime){if(!this._initialized){this._startTime=globalTime+this._delay;this._initialized=true}if(this._paused){this._pausedTime+=deltaTime;return}var percent=(globalTime-this._startTime-this._pausedTime)/this._life;if(percent<0){return}percent=Math.min(percent,1);var easing=this.easing;var easingFunc=typeof easing=="string"?easingFuncs[easing]:easing;var schedule=typeof easingFunc==="function"?easingFunc(percent):percent;this.fire("frame",schedule);if(percent==1){if(this.loop){this.restart(globalTime);return"restart"}this._needsRemove=true;return"destroy"}return null},restart:function(globalTime){var remainder=(globalTime-this._startTime-this._pausedTime)%this._life;this._startTime=globalTime-remainder+this.gap;this._pausedTime=0;this._needsRemove=false},fire:function(eventType,arg){eventType="on"+eventType;if(this[eventType]){this[eventType](this._target,arg)}},pause:function(){this._paused=true},resume:function(){this._paused=false}};module.exports=Clip}),(function(module,exports){var easing={linear:function(k){return k},quadraticIn:function(k){return k*k},quadraticOut:function(k){return k*(2-k)},quadraticInOut:function(k){if((k*=2)<1){return 0.5*k*k}return -0.5*(--k*(k-2)-1)},cubicIn:function(k){return k*k*k},cubicOut:function(k){return --k*k*k+1},cubicInOut:function(k){if((k*=2)<1){return 0.5*k*k*k}return 0.5*((k-=2)*k*k+2)},quarticIn:function(k){return k*k*k*k},quarticOut:function(k){return 1-(--k*k*k*k)},quarticInOut:function(k){if((k*=2)<1){return 0.5*k*k*k*k}return -0.5*((k-=2)*k*k*k-2)},quinticIn:function(k){return k*k*k*k*k},quinticOut:function(k){return --k*k*k*k*k+1},quinticInOut:function(k){if((k*=2)<1){return 0.5*k*k*k*k*k}return 0.5*((k-=2)*k*k*k*k+2)},sinusoidalIn:function(k){return 1-Math.cos(k*Math.PI/2)},sinusoidalOut:function(k){return Math.sin(k*Math.PI/2)},sinusoidalInOut:function(k){return 0.5*(1-Math.cos(Math.PI*k))},exponentialIn:function(k){return k===0?0:Math.pow(1024,k-1)
},exponentialOut:function(k){return k===1?1:1-Math.pow(2,-10*k)},exponentialInOut:function(k){if(k===0){return 0}if(k===1){return 1}if((k*=2)<1){return 0.5*Math.pow(1024,k-1)}return 0.5*(-Math.pow(2,-10*(k-1))+2)},circularIn:function(k){return 1-Math.sqrt(1-k*k)},circularOut:function(k){return Math.sqrt(1-(--k*k))},circularInOut:function(k){if((k*=2)<1){return -0.5*(Math.sqrt(1-k*k)-1)}return 0.5*(Math.sqrt(1-(k-=2)*k)+1)},elasticIn:function(k){var s;var a=0.1;var p=0.4;if(k===0){return 0}if(k===1){return 1}if(!a||a<1){a=1;s=p/4}else{s=p*Math.asin(1/a)/(2*Math.PI)}return -(a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p))},elasticOut:function(k){var s;var a=0.1;var p=0.4;if(k===0){return 0}if(k===1){return 1}if(!a||a<1){a=1;s=p/4}else{s=p*Math.asin(1/a)/(2*Math.PI)}return(a*Math.pow(2,-10*k)*Math.sin((k-s)*(2*Math.PI)/p)+1)},elasticInOut:function(k){var s;var a=0.1;var p=0.4;if(k===0){return 0}if(k===1){return 1}if(!a||a<1){a=1;s=p/4}else{s=p*Math.asin(1/a)/(2*Math.PI)}if((k*=2)<1){return -0.5*(a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p))}return a*Math.pow(2,-10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p)*0.5+1},backIn:function(k){var s=1.70158;return k*k*((s+1)*k-s)},backOut:function(k){var s=1.70158;return --k*k*((s+1)*k+s)+1},backInOut:function(k){var s=1.70158*1.525;if((k*=2)<1){return 0.5*(k*k*((s+1)*k-s))}return 0.5*((k-=2)*k*((s+1)*k+s)+2)},bounceIn:function(k){return 1-easing.bounceOut(1-k)},bounceOut:function(k){if(k<(1/2.75)){return 7.5625*k*k}else{if(k<(2/2.75)){return 7.5625*(k-=(1.5/2.75))*k+0.75}else{if(k<(2.5/2.75)){return 7.5625*(k-=(2.25/2.75))*k+0.9375}else{return 7.5625*(k-=(2.625/2.75))*k+0.984375}}}},bounceInOut:function(k){if(k<0.5){return easing.bounceIn(k*2)*0.5}return easing.bounceOut(k*2-1)*0.5+0.5}};module.exports=easing}),(function(module,exports,__webpack_require__){var LRU=__webpack_require__(13);var kCSSColorTable={"transparent":[0,0,0,0],"aliceblue":[240,248,255,1],"antiquewhite":[250,235,215,1],"aqua":[0,255,255,1],"aquamarine":[127,255,212,1],"azure":[240,255,255,1],"beige":[245,245,220,1],"bisque":[255,228,196,1],"black":[0,0,0,1],"blanchedalmond":[255,235,205,1],"blue":[0,0,255,1],"blueviolet":[138,43,226,1],"brown":[165,42,42,1],"burlywood":[222,184,135,1],"cadetblue":[95,158,160,1],"chartreuse":[127,255,0,1],"chocolate":[210,105,30,1],"coral":[255,127,80,1],"cornflowerblue":[100,149,237,1],"cornsilk":[255,248,220,1],"crimson":[220,20,60,1],"cyan":[0,255,255,1],"darkblue":[0,0,139,1],"darkcyan":[0,139,139,1],"darkgoldenrod":[184,134,11,1],"darkgray":[169,169,169,1],"darkgreen":[0,100,0,1],"darkgrey":[169,169,169,1],"darkkhaki":[189,183,107,1],"darkmagenta":[139,0,139,1],"darkolivegreen":[85,107,47,1],"darkorange":[255,140,0,1],"darkorchid":[153,50,204,1],"darkred":[139,0,0,1],"darksalmon":[233,150,122,1],"darkseagreen":[143,188,143,1],"darkslateblue":[72,61,139,1],"darkslategray":[47,79,79,1],"darkslategrey":[47,79,79,1],"darkturquoise":[0,206,209,1],"darkviolet":[148,0,211,1],"deeppink":[255,20,147,1],"deepskyblue":[0,191,255,1],"dimgray":[105,105,105,1],"dimgrey":[105,105,105,1],"dodgerblue":[30,144,255,1],"firebrick":[178,34,34,1],"floralwhite":[255,250,240,1],"forestgreen":[34,139,34,1],"fuchsia":[255,0,255,1],"gainsboro":[220,220,220,1],"ghostwhite":[248,248,255,1],"gold":[255,215,0,1],"goldenrod":[218,165,32,1],"gray":[128,128,128,1],"green":[0,128,0,1],"greenyellow":[173,255,47,1],"grey":[128,128,128,1],"honeydew":[240,255,240,1],"hotpink":[255,105,180,1],"indianred":[205,92,92,1],"indigo":[75,0,130,1],"ivory":[255,255,240,1],"khaki":[240,230,140,1],"lavender":[230,230,250,1],"lavenderblush":[255,240,245,1],"lawngreen":[124,252,0,1],"lemonchiffon":[255,250,205,1],"lightblue":[173,216,230,1],"lightcoral":[240,128,128,1],"lightcyan":[224,255,255,1],"lightgoldenrodyellow":[250,250,210,1],"lightgray":[211,211,211,1],"lightgreen":[144,238,144,1],"lightgrey":[211,211,211,1],"lightpink":[255,182,193,1],"lightsalmon":[255,160,122,1],"lightseagreen":[32,178,170,1],"lightskyblue":[135,206,250,1],"lightslategray":[119,136,153,1],"lightslategrey":[119,136,153,1],"lightsteelblue":[176,196,222,1],"lightyellow":[255,255,224,1],"lime":[0,255,0,1],"limegreen":[50,205,50,1],"linen":[250,240,230,1],"magenta":[255,0,255,1],"maroon":[128,0,0,1],"mediumaquamarine":[102,205,170,1],"mediumblue":[0,0,205,1],"mediumorchid":[186,85,211,1],"mediumpurple":[147,112,219,1],"mediumseagreen":[60,179,113,1],"mediumslateblue":[123,104,238,1],"mediumspringgreen":[0,250,154,1],"mediumturquoise":[72,209,204,1],"mediumvioletred":[199,21,133,1],"midnightblue":[25,25,112,1],"mintcream":[245,255,250,1],"mistyrose":[255,228,225,1],"moccasin":[255,228,181,1],"navajowhite":[255,222,173,1],"navy":[0,0,128,1],"oldlace":[253,245,230,1],"olive":[128,128,0,1],"olivedrab":[107,142,35,1],"orange":[255,165,0,1],"orangered":[255,69,0,1],"orchid":[218,112,214,1],"palegoldenrod":[238,232,170,1],"palegreen":[152,251,152,1],"paleturquoise":[175,238,238,1],"palevioletred":[219,112,147,1],"papayawhip":[255,239,213,1],"peachpuff":[255,218,185,1],"peru":[205,133,63,1],"pink":[255,192,203,1],"plum":[221,160,221,1],"powderblue":[176,224,230,1],"purple":[128,0,128,1],"red":[255,0,0,1],"rosybrown":[188,143,143,1],"royalblue":[65,105,225,1],"saddlebrown":[139,69,19,1],"salmon":[250,128,114,1],"sandybrown":[244,164,96,1],"seagreen":[46,139,87,1],"seashell":[255,245,238,1],"sienna":[160,82,45,1],"silver":[192,192,192,1],"skyblue":[135,206,235,1],"slateblue":[106,90,205,1],"slategray":[112,128,144,1],"slategrey":[112,128,144,1],"snow":[255,250,250,1],"springgreen":[0,255,127,1],"steelblue":[70,130,180,1],"tan":[210,180,140,1],"teal":[0,128,128,1],"thistle":[216,191,216,1],"tomato":[255,99,71,1],"turquoise":[64,224,208,1],"violet":[238,130,238,1],"wheat":[245,222,179,1],"white":[255,255,255,1],"whitesmoke":[245,245,245,1],"yellow":[255,255,0,1],"yellowgreen":[154,205,50,1]};
function clampCssByte(i){i=Math.round(i);return i<0?0:i>255?255:i}function clampCssAngle(i){i=Math.round(i);return i<0?0:i>360?360:i}function clampCssFloat(f){return f<0?0:f>1?1:f}function parseCssInt(str){if(str.length&&str.charAt(str.length-1)==="%"){return clampCssByte(parseFloat(str)/100*255)}return clampCssByte(parseInt(str,10))}function parseCssFloat(str){if(str.length&&str.charAt(str.length-1)==="%"){return clampCssFloat(parseFloat(str)/100)}return clampCssFloat(parseFloat(str))}function cssHueToRgb(m1,m2,h){if(h<0){h+=1}else{if(h>1){h-=1}}if(h*6<1){return m1+(m2-m1)*h*6}if(h*2<1){return m2}if(h*3<2){return m1+(m2-m1)*(2/3-h)*6}return m1}function lerpNumber(a,b,p){return a+(b-a)*p}function setRgba(out,r,g,b,a){out[0]=r;out[1]=g;out[2]=b;out[3]=a;return out}function copyRgba(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];return out}var colorCache=new LRU(20);var lastRemovedArr=null;function putToCache(colorStr,rgbaArr){if(lastRemovedArr){copyRgba(lastRemovedArr,rgbaArr)}lastRemovedArr=colorCache.put(colorStr,lastRemovedArr||(rgbaArr.slice()))}function parse(colorStr,rgbaArr){if(!colorStr){return}rgbaArr=rgbaArr||[];var cached=colorCache.get(colorStr);if(cached){return copyRgba(rgbaArr,cached)}colorStr=colorStr+"";var str=colorStr.replace(/ /g,"").toLowerCase();if(str in kCSSColorTable){copyRgba(rgbaArr,kCSSColorTable[str]);putToCache(colorStr,rgbaArr);return rgbaArr}if(str.charAt(0)==="#"){if(str.length===4){var iv=parseInt(str.substr(1),16);if(!(iv>=0&&iv<=4095)){setRgba(rgbaArr,0,0,0,1);return}setRgba(rgbaArr,((iv&3840)>>4)|((iv&3840)>>8),(iv&240)|((iv&240)>>4),(iv&15)|((iv&15)<<4),1);putToCache(colorStr,rgbaArr);return rgbaArr}else{if(str.length===7){var iv=parseInt(str.substr(1),16);if(!(iv>=0&&iv<=16777215)){setRgba(rgbaArr,0,0,0,1);return}setRgba(rgbaArr,(iv&16711680)>>16,(iv&65280)>>8,iv&255,1);putToCache(colorStr,rgbaArr);return rgbaArr}}return}var op=str.indexOf("("),ep=str.indexOf(")");if(op!==-1&&ep+1===str.length){var fname=str.substr(0,op);var params=str.substr(op+1,ep-(op+1)).split(",");var alpha=1;switch(fname){case"rgba":if(params.length!==4){setRgba(rgbaArr,0,0,0,1);return}alpha=parseCssFloat(params.pop());case"rgb":if(params.length!==3){setRgba(rgbaArr,0,0,0,1);return}setRgba(rgbaArr,parseCssInt(params[0]),parseCssInt(params[1]),parseCssInt(params[2]),alpha);putToCache(colorStr,rgbaArr);return rgbaArr;case"hsla":if(params.length!==4){setRgba(rgbaArr,0,0,0,1);return}params[3]=parseCssFloat(params[3]);hsla2rgba(params,rgbaArr);putToCache(colorStr,rgbaArr);return rgbaArr;case"hsl":if(params.length!==3){setRgba(rgbaArr,0,0,0,1);return}hsla2rgba(params,rgbaArr);putToCache(colorStr,rgbaArr);return rgbaArr;default:return}}setRgba(rgbaArr,0,0,0,1);return}function hsla2rgba(hsla,rgba){var h=(((parseFloat(hsla[0])%360)+360)%360)/360;var s=parseCssFloat(hsla[1]);var l=parseCssFloat(hsla[2]);var m2=l<=0.5?l*(s+1):l+s-l*s;var m1=l*2-m2;rgba=rgba||[];setRgba(rgba,clampCssByte(cssHueToRgb(m1,m2,h+1/3)*255),clampCssByte(cssHueToRgb(m1,m2,h)*255),clampCssByte(cssHueToRgb(m1,m2,h-1/3)*255),1);if(hsla.length===4){rgba[3]=hsla[3]}return rgba}function rgba2hsla(rgba){if(!rgba){return}var R=rgba[0]/255;var G=rgba[1]/255;var B=rgba[2]/255;var vMin=Math.min(R,G,B);var vMax=Math.max(R,G,B);var delta=vMax-vMin;var L=(vMax+vMin)/2;var H;var S;if(delta===0){H=0;S=0}else{if(L<0.5){S=delta/(vMax+vMin)}else{S=delta/(2-vMax-vMin)}var deltaR=(((vMax-R)/6)+(delta/2))/delta;var deltaG=(((vMax-G)/6)+(delta/2))/delta;var deltaB=(((vMax-B)/6)+(delta/2))/delta;if(R===vMax){H=deltaB-deltaG}else{if(G===vMax){H=(1/3)+deltaR-deltaB}else{if(B===vMax){H=(2/3)+deltaG-deltaR}}}if(H<0){H+=1}if(H>1){H-=1}}var hsla=[H*360,S,L];if(rgba[3]!=null){hsla.push(rgba[3])}return hsla}function lift(color,level){var colorArr=parse(color);if(colorArr){for(var i=0;i<3;i++){if(level<0){colorArr[i]=colorArr[i]*(1-level)|0}else{colorArr[i]=((255-colorArr[i])*level+colorArr[i])|0}}return stringify(colorArr,colorArr.length===4?"rgba":"rgb")}}function toHex(color,level){var colorArr=parse(color);if(colorArr){return((1<<24)+(colorArr[0]<<16)+(colorArr[1]<<8)+(+colorArr[2])).toString(16).slice(1)}}function fastLerp(normalizedValue,colors,out){if(!(colors&&colors.length)||!(normalizedValue>=0&&normalizedValue<=1)){return}out=out||[];var value=normalizedValue*(colors.length-1);var leftIndex=Math.floor(value);var rightIndex=Math.ceil(value);var leftColor=colors[leftIndex];var rightColor=colors[rightIndex];var dv=value-leftIndex;out[0]=clampCssByte(lerpNumber(leftColor[0],rightColor[0],dv));out[1]=clampCssByte(lerpNumber(leftColor[1],rightColor[1],dv));out[2]=clampCssByte(lerpNumber(leftColor[2],rightColor[2],dv));out[3]=clampCssFloat(lerpNumber(leftColor[3],rightColor[3],dv));return out}function lerp(normalizedValue,colors,fullOutput){if(!(colors&&colors.length)||!(normalizedValue>=0&&normalizedValue<=1)){return}var value=normalizedValue*(colors.length-1);var leftIndex=Math.floor(value);var rightIndex=Math.ceil(value);var leftColor=parse(colors[leftIndex]);
var rightColor=parse(colors[rightIndex]);var dv=value-leftIndex;var color=stringify([clampCssByte(lerpNumber(leftColor[0],rightColor[0],dv)),clampCssByte(lerpNumber(leftColor[1],rightColor[1],dv)),clampCssByte(lerpNumber(leftColor[2],rightColor[2],dv)),clampCssFloat(lerpNumber(leftColor[3],rightColor[3],dv))],"rgba");return fullOutput?{color:color,leftIndex:leftIndex,rightIndex:rightIndex,value:value}:color}function modifyHSL(color,h,s,l){color=parse(color);if(color){color=rgba2hsla(color);h!=null&&(color[0]=clampCssAngle(h));s!=null&&(color[1]=parseCssFloat(s));l!=null&&(color[2]=parseCssFloat(l));return stringify(hsla2rgba(color),"rgba")}}function modifyAlpha(color,alpha){color=parse(color);if(color&&alpha!=null){color[3]=clampCssFloat(alpha);return stringify(color,"rgba")}}function stringify(arrColor,type){if(!arrColor||!arrColor.length){return}var colorStr=arrColor[0]+","+arrColor[1]+","+arrColor[2];if(type==="rgba"||type==="hsva"||type==="hsla"){colorStr+=","+arrColor[3]}return type+"("+colorStr+")"}module.exports={parse:parse,lift:lift,toHex:toHex,fastLerp:fastLerp,fastMapToColor:fastLerp,lerp:lerp,mapToColor:lerp,modifyHSL:modifyHSL,modifyAlpha:modifyAlpha,stringify:stringify}}),(function(module,exports,__webpack_require__){var config=__webpack_require__(35);module.exports=function(){if(config.debugMode===0){return}else{if(config.debugMode==1){for(var k in arguments){throw new Error(arguments[k])}}else{if(config.debugMode>1){for(var k in arguments){console.log(arguments[k])}}}}}}),(function(module,exports){var dpr=1;if(typeof window!=="undefined"){dpr=Math.max(window.devicePixelRatio||1,1)}var config={debugMode:0,devicePixelRatio:dpr};module.exports=config}),(function(module,exports,__webpack_require__){var textHelper=__webpack_require__(37);var BoundingRect=__webpack_require__(9);var tmpRect=new BoundingRect();var RectText=function(){};RectText.prototype={constructor:RectText,drawRectText:function(ctx,rect){var style=this.style;rect=style.textRect||rect;this.__dirty&&textHelper.normalizeTextStyle(style,true);var text=style.text;text!=null&&(text+="");if(!textHelper.needDrawText(text,style)){return}ctx.save();var transform=this.transform;if(!style.transformText){if(transform){tmpRect.copy(rect);tmpRect.applyTransform(transform);rect=tmpRect}}else{this.setTransform(ctx)}textHelper.renderText(this,ctx,text,style,rect);ctx.restore()}};module.exports=RectText}),(function(module,exports,__webpack_require__){var textContain=__webpack_require__(8);var util=__webpack_require__(4);var roundRectHelper=__webpack_require__(38);var imageHelper=__webpack_require__(12);var retrieve3=util.retrieve3;var retrieve2=util.retrieve2;var VALID_TEXT_ALIGN={left:1,right:1,center:1};var VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1};var helper={};helper.normalizeTextStyle=function(style){normalizeStyle(style);util.each(style.rich,normalizeStyle);return style};function normalizeStyle(style){if(style){style.font=textContain.makeFont(style);var textAlign=style.textAlign;textAlign==="middle"&&(textAlign="center");style.textAlign=(textAlign==null||VALID_TEXT_ALIGN[textAlign])?textAlign:"left";var textVerticalAlign=style.textVerticalAlign||style.textBaseline;textVerticalAlign==="center"&&(textVerticalAlign="middle");style.textVerticalAlign=(textVerticalAlign==null||VALID_TEXT_VERTICAL_ALIGN[textVerticalAlign])?textVerticalAlign:"top";var textPadding=style.textPadding;if(textPadding){style.textPadding=util.normalizeCssArray(style.textPadding)}}}helper.renderText=function(hostEl,ctx,text,style,rect){style.rich?renderRichText(hostEl,ctx,text,style,rect):renderPlainText(hostEl,ctx,text,style,rect)};function renderPlainText(hostEl,ctx,text,style,rect){var font=setCtx(ctx,"font",style.font||textContain.DEFAULT_FONT);var textPadding=style.textPadding;var contentBlock=hostEl.__textCotentBlock;if(!contentBlock||hostEl.__dirty){contentBlock=hostEl.__textCotentBlock=textContain.parsePlainText(text,font,textPadding,style.truncate)}var outerHeight=contentBlock.outerHeight;var textLines=contentBlock.lines;var lineHeight=contentBlock.lineHeight;var boxPos=getBoxPosition(outerHeight,style,rect);var baseX=boxPos.baseX;var baseY=boxPos.baseY;var textAlign=boxPos.textAlign;var textVerticalAlign=boxPos.textVerticalAlign;applyTextRotation(ctx,style,rect,baseX,baseY);var boxY=textContain.adjustTextY(baseY,outerHeight,textVerticalAlign);var textX=baseX;var textY=boxY;var needDrawBg=needDrawBackground(style);if(needDrawBg||textPadding){var textWidth=textContain.getWidth(text,font);var outerWidth=textWidth;textPadding&&(outerWidth+=textPadding[1]+textPadding[3]);var boxX=textContain.adjustTextX(baseX,outerWidth,textAlign);needDrawBg&&drawBackground(hostEl,ctx,style,boxX,boxY,outerWidth,outerHeight);if(textPadding){textX=getTextXForPadding(baseX,textAlign,textPadding);textY+=textPadding[0]}}setCtx(ctx,"textAlign",textAlign||"left");setCtx(ctx,"textBaseline","middle");setCtx(ctx,"shadowBlur",style.textShadowBlur||0);setCtx(ctx,"shadowColor",style.textShadowColor||"transparent");
setCtx(ctx,"shadowOffsetX",style.textShadowOffsetX||0);setCtx(ctx,"shadowOffsetY",style.textShadowOffsetY||0);textY+=lineHeight/2;var textStrokeWidth=style.textStrokeWidth;var textStroke=getStroke(style.textStroke,textStrokeWidth);var textFill=getFill(style.textFill);if(textStroke){setCtx(ctx,"lineWidth",textStrokeWidth);setCtx(ctx,"strokeStyle",textStroke)}if(textFill){setCtx(ctx,"fillStyle",textFill)}for(var i=0;i<textLines.length;i++){textStroke&&ctx.strokeText(textLines[i],textX,textY);textFill&&ctx.fillText(textLines[i],textX,textY);textY+=lineHeight}}function renderRichText(hostEl,ctx,text,style,rect){var contentBlock=hostEl.__textCotentBlock;if(!contentBlock||hostEl.__dirty){contentBlock=hostEl.__textCotentBlock=textContain.parseRichText(text,style)}drawRichText(hostEl,ctx,contentBlock,style,rect)}function drawRichText(hostEl,ctx,contentBlock,style,rect){var contentWidth=contentBlock.width;var outerWidth=contentBlock.outerWidth;var outerHeight=contentBlock.outerHeight;var textPadding=style.textPadding;var boxPos=getBoxPosition(outerHeight,style,rect);var baseX=boxPos.baseX;var baseY=boxPos.baseY;var textAlign=boxPos.textAlign;var textVerticalAlign=boxPos.textVerticalAlign;applyTextRotation(ctx,style,rect,baseX,baseY);var boxX=textContain.adjustTextX(baseX,outerWidth,textAlign);var boxY=textContain.adjustTextY(baseY,outerHeight,textVerticalAlign);var xLeft=boxX;var lineTop=boxY;if(textPadding){xLeft+=textPadding[3];lineTop+=textPadding[0]}var xRight=xLeft+contentWidth;needDrawBackground(style)&&drawBackground(hostEl,ctx,style,boxX,boxY,outerWidth,outerHeight);for(var i=0;i<contentBlock.lines.length;i++){var line=contentBlock.lines[i];var tokens=line.tokens;var tokenCount=tokens.length;var lineHeight=line.lineHeight;var usedWidth=line.width;var leftIndex=0;var lineXLeft=xLeft;var lineXRight=xRight;var rightIndex=tokenCount-1;var token;while(leftIndex<tokenCount&&(token=tokens[leftIndex],!token.textAlign||token.textAlign==="left")){placeToken(hostEl,ctx,token,style,lineHeight,lineTop,lineXLeft,"left");usedWidth-=token.width;lineXLeft+=token.width;leftIndex++}while(rightIndex>=0&&(token=tokens[rightIndex],token.textAlign==="right")){placeToken(hostEl,ctx,token,style,lineHeight,lineTop,lineXRight,"right");usedWidth-=token.width;lineXRight-=token.width;rightIndex--}lineXLeft+=(contentWidth-(lineXLeft-xLeft)-(xRight-lineXRight)-usedWidth)/2;while(leftIndex<=rightIndex){token=tokens[leftIndex];placeToken(hostEl,ctx,token,style,lineHeight,lineTop,lineXLeft+token.width/2,"center");lineXLeft+=token.width;leftIndex++}lineTop+=lineHeight}}function applyTextRotation(ctx,style,rect,x,y){if(rect&&style.textRotation){var origin=style.textOrigin;if(origin==="center"){x=rect.width/2+rect.x;y=rect.height/2+rect.y}else{if(origin){x=origin[0]+rect.x;y=origin[1]+rect.y}}ctx.translate(x,y);ctx.rotate(-style.textRotation);ctx.translate(-x,-y)}}function placeToken(hostEl,ctx,token,style,lineHeight,lineTop,x,textAlign){var tokenStyle=style.rich[token.styleName]||{};var textVerticalAlign=token.textVerticalAlign;var y=lineTop+lineHeight/2;if(textVerticalAlign==="top"){y=lineTop+token.height/2}else{if(textVerticalAlign==="bottom"){y=lineTop+lineHeight-token.height/2}}!token.isLineHolder&&needDrawBackground(tokenStyle)&&drawBackground(hostEl,ctx,tokenStyle,textAlign==="right"?x-token.width:textAlign==="center"?x-token.width/2:x,y-token.height/2,token.width,token.height);var textPadding=token.textPadding;if(textPadding){x=getTextXForPadding(x,textAlign,textPadding);y-=token.height/2-textPadding[2]-token.textHeight/2}setCtx(ctx,"shadowBlur",retrieve3(tokenStyle.textShadowBlur,style.textShadowBlur,0));setCtx(ctx,"shadowColor",tokenStyle.textShadowColor||style.textShadowColor||"transparent");setCtx(ctx,"shadowOffsetX",retrieve3(tokenStyle.textShadowOffsetX,style.textShadowOffsetX,0));setCtx(ctx,"shadowOffsetY",retrieve3(tokenStyle.textShadowOffsetY,style.textShadowOffsetY,0));setCtx(ctx,"textAlign",textAlign);setCtx(ctx,"textBaseline","middle");setCtx(ctx,"font",token.font||textContain.DEFAULT_FONT);var textStroke=getStroke(tokenStyle.textStroke||style.textStroke,textStrokeWidth);var textFill=getFill(tokenStyle.textFill||style.textFill);var textStrokeWidth=retrieve2(tokenStyle.textStrokeWidth,style.textStrokeWidth);if(textStroke){setCtx(ctx,"lineWidth",textStrokeWidth);setCtx(ctx,"strokeStyle",textStroke);ctx.strokeText(token.text,x,y)}if(textFill){setCtx(ctx,"fillStyle",textFill);ctx.fillText(token.text,x,y)}}function needDrawBackground(style){return style.textBackgroundColor||(style.textBorderWidth&&style.textBorderColor)}function drawBackground(hostEl,ctx,style,x,y,width,height){var textBackgroundColor=style.textBackgroundColor;var textBorderWidth=style.textBorderWidth;var textBorderColor=style.textBorderColor;var isPlainBg=util.isString(textBackgroundColor);setCtx(ctx,"shadowBlur",style.textBoxShadowBlur||0);setCtx(ctx,"shadowColor",style.textBoxShadowColor||"transparent");setCtx(ctx,"shadowOffsetX",style.textBoxShadowOffsetX||0);setCtx(ctx,"shadowOffsetY",style.textBoxShadowOffsetY||0);
if(isPlainBg||(textBorderWidth&&textBorderColor)){ctx.beginPath();var textBorderRadius=style.textBorderRadius;if(!textBorderRadius){ctx.rect(x,y,width,height)}else{roundRectHelper.buildPath(ctx,{x:x,y:y,width:width,height:height,r:textBorderRadius})}ctx.closePath()}if(isPlainBg){setCtx(ctx,"fillStyle",textBackgroundColor);ctx.fill()}else{if(util.isObject(textBackgroundColor)){var image=textBackgroundColor.image;image=imageHelper.createOrUpdateImage(image,null,hostEl,onBgImageLoaded,textBackgroundColor);if(image&&imageHelper.isImageReady(image)){ctx.drawImage(image,x,y,width,height)}}}if(textBorderWidth&&textBorderColor){setCtx(ctx,"lineWidth",textBorderWidth);setCtx(ctx,"strokeStyle",textBorderColor);ctx.stroke()}}function onBgImageLoaded(image,textBackgroundColor){textBackgroundColor.image=image}function getBoxPosition(blockHeiht,style,rect){var baseX=style.x||0;var baseY=style.y||0;var textAlign=style.textAlign;var textVerticalAlign=style.textVerticalAlign;if(rect){var textPosition=style.textPosition;if(textPosition instanceof Array){baseX=rect.x+parsePercent(textPosition[0],rect.width);baseY=rect.y+parsePercent(textPosition[1],rect.height)}else{var res=textContain.adjustTextPositionOnRect(textPosition,rect,style.textDistance);baseX=res.x;baseY=res.y;textAlign=textAlign||res.textAlign;textVerticalAlign=textVerticalAlign||res.textVerticalAlign}var textOffset=style.textOffset;if(textOffset){baseX+=textOffset[0];baseY+=textOffset[1]}}return{baseX:baseX,baseY:baseY,textAlign:textAlign,textVerticalAlign:textVerticalAlign}}function setCtx(ctx,prop,value){ctx[prop]=value;return ctx[prop]}var getStroke=helper.getStroke=function(stroke,lineWidth){return(stroke==null||lineWidth<=0||stroke==="transparent"||stroke==="none")?null:(stroke.image||stroke.colorStops)?"#000":stroke};var getFill=helper.getFill=function(fill){return(fill==null||fill==="none")?null:(fill.image||fill.colorStops)?"#000":fill};function parsePercent(value,maxValue){if(typeof value==="string"){if(value.lastIndexOf("%")>=0){return parseFloat(value)/100*maxValue}return parseFloat(value)}return value}function getTextXForPadding(x,textAlign,textPadding){return textAlign==="right"?(x-textPadding[1]):textAlign==="center"?(x+textPadding[3]/2-textPadding[1]/2):(x+textPadding[3])}helper.needDrawText=function(text,style){return text!=null&&(text||style.textBackgroundColor||(style.textBorderWidth&&style.textBorderColor)||style.textPadding)};module.exports=helper}),(function(module,exports){module.exports={buildPath:function(ctx,shape){var x=shape.x;var y=shape.y;var width=shape.width;var height=shape.height;var r=shape.r;var r1;var r2;var r3;var r4;if(width<0){x=x+width;width=-width}if(height<0){y=y+height;height=-height}if(typeof r==="number"){r1=r2=r3=r4=r}else{if(r instanceof Array){if(r.length===1){r1=r2=r3=r4=r[0]}else{if(r.length===2){r1=r3=r[0];r2=r4=r[1]}else{if(r.length===3){r1=r[0];r2=r4=r[1];r3=r[2]}else{r1=r[0];r2=r[1];r3=r[2];r4=r[3]}}}}else{r1=r2=r3=r4=0}}var total;if(r1+r2>width){total=r1+r2;r1*=width/total;r2*=width/total}if(r3+r4>width){total=r3+r4;r3*=width/total;r4*=width/total}if(r2+r3>height){total=r2+r3;r2*=height/total;r3*=height/total}if(r1+r4>height){total=r1+r4;r1*=height/total;r4*=height/total}ctx.moveTo(x+r1,y);ctx.lineTo(x+width-r2,y);r2!==0&&ctx.quadraticCurveTo(x+width,y,x+width,y+r2);ctx.lineTo(x+width,y+height-r3);r3!==0&&ctx.quadraticCurveTo(x+width,y+height,x+width-r3,y+height);ctx.lineTo(x+r4,y+height);r4!==0&&ctx.quadraticCurveTo(x,y+height,x,y+height-r4);ctx.lineTo(x,y+r1);r1!==0&&ctx.quadraticCurveTo(x,y,x+r1,y)}}}),(function(module,exports,__webpack_require__){var curve=__webpack_require__(40);var vec2=__webpack_require__(10);var bbox=__webpack_require__(41);var BoundingRect=__webpack_require__(9);var dpr=__webpack_require__(35).devicePixelRatio;var CMD={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7};var min=[];var max=[];var min2=[];var max2=[];var mathMin=Math.min;var mathMax=Math.max;var mathCos=Math.cos;var mathSin=Math.sin;var mathSqrt=Math.sqrt;var mathAbs=Math.abs;var hasTypedArray=typeof Float32Array!="undefined";var PathProxy=function(notSaveData){this._saveData=!(notSaveData||false);if(this._saveData){this.data=[]}this._ctx=null};PathProxy.prototype={constructor:PathProxy,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(sx,sy){this._ux=mathAbs(1/dpr/sx)||0;this._uy=mathAbs(1/dpr/sy)||0},getContext:function(){return this._ctx},beginPath:function(ctx){this._ctx=ctx;ctx&&ctx.beginPath();ctx&&(this.dpr=ctx.dpr);if(this._saveData){this._len=0}if(this._lineDash){this._lineDash=null;this._dashOffset=0}return this},moveTo:function(x,y){this.addData(CMD.M,x,y);this._ctx&&this._ctx.moveTo(x,y);this._x0=x;this._y0=y;this._xi=x;this._yi=y;return this},lineTo:function(x,y){var exceedUnit=mathAbs(x-this._xi)>this._ux||mathAbs(y-this._yi)>this._uy||this._len<5;this.addData(CMD.L,x,y);if(this._ctx&&exceedUnit){this._needsDash()?this._dashedLineTo(x,y):this._ctx.lineTo(x,y)}if(exceedUnit){this._xi=x;
this._yi=y}return this},bezierCurveTo:function(x1,y1,x2,y2,x3,y3){this.addData(CMD.C,x1,y1,x2,y2,x3,y3);if(this._ctx){this._needsDash()?this._dashedBezierTo(x1,y1,x2,y2,x3,y3):this._ctx.bezierCurveTo(x1,y1,x2,y2,x3,y3)}this._xi=x3;this._yi=y3;return this},quadraticCurveTo:function(x1,y1,x2,y2){this.addData(CMD.Q,x1,y1,x2,y2);if(this._ctx){this._needsDash()?this._dashedQuadraticTo(x1,y1,x2,y2):this._ctx.quadraticCurveTo(x1,y1,x2,y2)}this._xi=x2;this._yi=y2;return this},arc:function(cx,cy,r,startAngle,endAngle,anticlockwise){this.addData(CMD.A,cx,cy,r,r,startAngle,endAngle-startAngle,0,anticlockwise?0:1);this._ctx&&this._ctx.arc(cx,cy,r,startAngle,endAngle,anticlockwise);this._xi=mathCos(endAngle)*r+cx;this._yi=mathSin(endAngle)*r+cx;return this},arcTo:function(x1,y1,x2,y2,radius){if(this._ctx){this._ctx.arcTo(x1,y1,x2,y2,radius)}return this},rect:function(x,y,w,h){this._ctx&&this._ctx.rect(x,y,w,h);this.addData(CMD.R,x,y,w,h);return this},closePath:function(){this.addData(CMD.Z);var ctx=this._ctx;var x0=this._x0;var y0=this._y0;if(ctx){this._needsDash()&&this._dashedLineTo(x0,y0);ctx.closePath()}this._xi=x0;this._yi=y0;return this},fill:function(ctx){ctx&&ctx.fill();this.toStatic()},stroke:function(ctx){ctx&&ctx.stroke();this.toStatic()},setLineDash:function(lineDash){if(lineDash instanceof Array){this._lineDash=lineDash;this._dashIdx=0;var lineDashSum=0;for(var i=0;i<lineDash.length;i++){lineDashSum+=lineDash[i]}this._dashSum=lineDashSum}return this},setLineDashOffset:function(offset){this._dashOffset=offset;return this},len:function(){return this._len},setData:function(data){var len=data.length;if(!(this.data&&this.data.length==len)&&hasTypedArray){this.data=new Float32Array(len)}for(var i=0;i<len;i++){this.data[i]=data[i]}this._len=len},appendPath:function(path){if(!(path instanceof Array)){path=[path]}var len=path.length;var appendSize=0;var offset=this._len;for(var i=0;i<len;i++){appendSize+=path[i].len()}if(hasTypedArray&&(this.data instanceof Float32Array)){this.data=new Float32Array(offset+appendSize)}for(var i=0;i<len;i++){var appendPathData=path[i].data;for(var k=0;k<appendPathData.length;k++){this.data[offset++]=appendPathData[k]}}this._len=offset},addData:function(cmd){if(!this._saveData){return}var data=this.data;if(this._len+arguments.length>data.length){this._expandData();data=this.data}for(var i=0;i<arguments.length;i++){data[this._len++]=arguments[i]}this._prevCmd=cmd},_expandData:function(){if(!(this.data instanceof Array)){var newData=[];for(var i=0;i<this._len;i++){newData[i]=this.data[i]}this.data=newData}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(x1,y1){var dashSum=this._dashSum;var offset=this._dashOffset;var lineDash=this._lineDash;var ctx=this._ctx;var x0=this._xi;var y0=this._yi;var dx=x1-x0;var dy=y1-y0;var dist=mathSqrt(dx*dx+dy*dy);var x=x0;var y=y0;var dash;var nDash=lineDash.length;var idx;dx/=dist;dy/=dist;if(offset<0){offset=dashSum+offset}offset%=dashSum;x-=offset*dx;y-=offset*dy;while((dx>0&&x<=x1)||(dx<0&&x>=x1)||(dx==0&&((dy>0&&y<=y1)||(dy<0&&y>=y1)))){idx=this._dashIdx;dash=lineDash[idx];x+=dx*dash;y+=dy*dash;this._dashIdx=(idx+1)%nDash;if((dx>0&&x<x0)||(dx<0&&x>x0)||(dy>0&&y<y0)||(dy<0&&y>y0)){continue}ctx[idx%2?"moveTo":"lineTo"](dx>=0?mathMin(x,x1):mathMax(x,x1),dy>=0?mathMin(y,y1):mathMax(y,y1))}dx=x-x1;dy=y-y1;this._dashOffset=-mathSqrt(dx*dx+dy*dy)},_dashedBezierTo:function(x1,y1,x2,y2,x3,y3){var dashSum=this._dashSum;var offset=this._dashOffset;var lineDash=this._lineDash;var ctx=this._ctx;var x0=this._xi;var y0=this._yi;var t;var dx;var dy;var cubicAt=curve.cubicAt;var bezierLen=0;var idx=this._dashIdx;var nDash=lineDash.length;var x;var y;var tmpLen=0;if(offset<0){offset=dashSum+offset}offset%=dashSum;for(t=0;t<1;t+=0.1){dx=cubicAt(x0,x1,x2,x3,t+0.1)-cubicAt(x0,x1,x2,x3,t);dy=cubicAt(y0,y1,y2,y3,t+0.1)-cubicAt(y0,y1,y2,y3,t);bezierLen+=mathSqrt(dx*dx+dy*dy)}for(;idx<nDash;idx++){tmpLen+=lineDash[idx];if(tmpLen>offset){break}}t=(tmpLen-offset)/bezierLen;while(t<=1){x=cubicAt(x0,x1,x2,x3,t);y=cubicAt(y0,y1,y2,y3,t);idx%2?ctx.moveTo(x,y):ctx.lineTo(x,y);t+=lineDash[idx]/bezierLen;idx=(idx+1)%nDash}(idx%2!==0)&&ctx.lineTo(x3,y3);dx=x3-x;dy=y3-y;this._dashOffset=-mathSqrt(dx*dx+dy*dy)},_dashedQuadraticTo:function(x1,y1,x2,y2){var x3=x2;var y3=y2;x2=(x2+2*x1)/3;y2=(y2+2*y1)/3;x1=(this._xi+2*x1)/3;y1=(this._yi+2*y1)/3;this._dashedBezierTo(x1,y1,x2,y2,x3,y3)},toStatic:function(){var data=this.data;if(data instanceof Array){data.length=this._len;if(hasTypedArray){this.data=new Float32Array(data)}}},getBoundingRect:function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE;max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var data=this.data;var xi=0;var yi=0;var x0=0;var y0=0;for(var i=0;i<data.length;){var cmd=data[i++];if(i==1){xi=data[i];yi=data[i+1];x0=xi;y0=yi}switch(cmd){case CMD.M:x0=data[i++];y0=data[i++];xi=x0;yi=y0;min2[0]=x0;min2[1]=y0;max2[0]=x0;max2[1]=y0;break;case CMD.L:bbox.fromLine(xi,yi,data[i],data[i+1],min2,max2);xi=data[i++];yi=data[i++];
break;case CMD.C:bbox.fromCubic(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],min2,max2);xi=data[i++];yi=data[i++];break;case CMD.Q:bbox.fromQuadratic(xi,yi,data[i++],data[i++],data[i],data[i+1],min2,max2);xi=data[i++];yi=data[i++];break;case CMD.A:var cx=data[i++];var cy=data[i++];var rx=data[i++];var ry=data[i++];var startAngle=data[i++];var endAngle=data[i++]+startAngle;var psi=data[i++];var anticlockwise=1-data[i++];if(i==1){x0=mathCos(startAngle)*rx+cx;y0=mathSin(startAngle)*ry+cy}bbox.fromArc(cx,cy,rx,ry,startAngle,endAngle,anticlockwise,min2,max2);xi=mathCos(endAngle)*rx+cx;yi=mathSin(endAngle)*ry+cy;break;case CMD.R:x0=xi=data[i++];y0=yi=data[i++];var width=data[i++];var height=data[i++];bbox.fromLine(x0,y0,x0+width,y0+height,min2,max2);break;case CMD.Z:xi=x0;yi=y0;break}vec2.min(min,min,min2);vec2.max(max,max,max2)}if(i===0){min[0]=min[1]=max[0]=max[1]=0}return new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1])},rebuildPath:function(ctx){var d=this.data;var x0,y0;var xi,yi;var x,y;var ux=this._ux;var uy=this._uy;var len=this._len;for(var i=0;i<len;){var cmd=d[i++];if(i==1){xi=d[i];yi=d[i+1];x0=xi;y0=yi}switch(cmd){case CMD.M:x0=xi=d[i++];y0=yi=d[i++];ctx.moveTo(xi,yi);break;case CMD.L:x=d[i++];y=d[i++];if(mathAbs(x-xi)>ux||mathAbs(y-yi)>uy||i===len-1){ctx.lineTo(x,y);xi=x;yi=y}break;case CMD.C:ctx.bezierCurveTo(d[i++],d[i++],d[i++],d[i++],d[i++],d[i++]);xi=d[i-2];yi=d[i-1];break;case CMD.Q:ctx.quadraticCurveTo(d[i++],d[i++],d[i++],d[i++]);xi=d[i-2];yi=d[i-1];break;case CMD.A:var cx=d[i++];var cy=d[i++];var rx=d[i++];var ry=d[i++];var theta=d[i++];var dTheta=d[i++];var psi=d[i++];var fs=d[i++];var r=(rx>ry)?rx:ry;var scaleX=(rx>ry)?1:rx/ry;var scaleY=(rx>ry)?ry/rx:1;var isEllipse=Math.abs(rx-ry)>0.001;var endAngle=theta+dTheta;if(isEllipse){ctx.translate(cx,cy);ctx.rotate(psi);ctx.scale(scaleX,scaleY);ctx.arc(0,0,r,theta,endAngle,1-fs);ctx.scale(1/scaleX,1/scaleY);ctx.rotate(-psi);ctx.translate(-cx,-cy)}else{ctx.arc(cx,cy,r,theta,endAngle,1-fs)}if(i==1){x0=mathCos(theta)*rx+cx;y0=mathSin(theta)*ry+cy}xi=mathCos(endAngle)*rx+cx;yi=mathSin(endAngle)*ry+cy;break;case CMD.R:x0=xi=d[i];y0=yi=d[i+1];ctx.rect(d[i++],d[i++],d[i++],d[i++]);break;case CMD.Z:ctx.closePath();xi=x0;yi=y0}}}};PathProxy.CMD=CMD;module.exports=PathProxy}),(function(module,exports,__webpack_require__){var vec2=__webpack_require__(10);var v2Create=vec2.create;var v2DistSquare=vec2.distSquare;var mathPow=Math.pow;var mathSqrt=Math.sqrt;var EPSILON=1e-8;var EPSILON_NUMERIC=0.0001;var THREE_SQRT=mathSqrt(3);var ONE_THIRD=1/3;var _v0=v2Create();var _v1=v2Create();var _v2=v2Create();function isAroundZero(val){return val>-EPSILON&&val<EPSILON}function isNotAroundZero(val){return val>EPSILON||val<-EPSILON}function cubicAt(p0,p1,p2,p3,t){var onet=1-t;return onet*onet*(onet*p0+3*t*p1)+t*t*(t*p3+3*onet*p2)}function cubicDerivativeAt(p0,p1,p2,p3,t){var onet=1-t;return 3*(((p1-p0)*onet+2*(p2-p1)*t)*onet+(p3-p2)*t*t)}function cubicRootAt(p0,p1,p2,p3,val,roots){var a=p3+3*(p1-p2)-p0;var b=3*(p2-p1*2+p0);var c=3*(p1-p0);var d=p0-val;var A=b*b-3*a*c;var B=b*c-9*a*d;var C=c*c-3*b*d;var n=0;if(isAroundZero(A)&&isAroundZero(B)){if(isAroundZero(b)){roots[0]=0}else{var t1=-c/b;if(t1>=0&&t1<=1){roots[n++]=t1}}}else{var disc=B*B-4*A*C;if(isAroundZero(disc)){var K=B/A;var t1=-b/a+K;var t2=-K/2;if(t1>=0&&t1<=1){roots[n++]=t1}if(t2>=0&&t2<=1){roots[n++]=t2}}else{if(disc>0){var discSqrt=mathSqrt(disc);var Y1=A*b+1.5*a*(-B+discSqrt);var Y2=A*b+1.5*a*(-B-discSqrt);if(Y1<0){Y1=-mathPow(-Y1,ONE_THIRD)}else{Y1=mathPow(Y1,ONE_THIRD)}if(Y2<0){Y2=-mathPow(-Y2,ONE_THIRD)}else{Y2=mathPow(Y2,ONE_THIRD)}var t1=(-b-(Y1+Y2))/(3*a);if(t1>=0&&t1<=1){roots[n++]=t1}}else{var T=(2*A*b-3*a*B)/(2*mathSqrt(A*A*A));var theta=Math.acos(T)/3;var ASqrt=mathSqrt(A);var tmp=Math.cos(theta);var t1=(-b-2*ASqrt*tmp)/(3*a);var t2=(-b+ASqrt*(tmp+THREE_SQRT*Math.sin(theta)))/(3*a);var t3=(-b+ASqrt*(tmp-THREE_SQRT*Math.sin(theta)))/(3*a);if(t1>=0&&t1<=1){roots[n++]=t1}if(t2>=0&&t2<=1){roots[n++]=t2}if(t3>=0&&t3<=1){roots[n++]=t3}}}}return n}function cubicExtrema(p0,p1,p2,p3,extrema){var b=6*p2-12*p1+6*p0;var a=9*p1+3*p3-3*p0-9*p2;var c=3*p1-3*p0;var n=0;if(isAroundZero(a)){if(isNotAroundZero(b)){var t1=-c/b;if(t1>=0&&t1<=1){extrema[n++]=t1}}}else{var disc=b*b-4*a*c;if(isAroundZero(disc)){extrema[0]=-b/(2*a)}else{if(disc>0){var discSqrt=mathSqrt(disc);var t1=(-b+discSqrt)/(2*a);var t2=(-b-discSqrt)/(2*a);if(t1>=0&&t1<=1){extrema[n++]=t1}if(t2>=0&&t2<=1){extrema[n++]=t2}}}}return n}function cubicSubdivide(p0,p1,p2,p3,t,out){var p01=(p1-p0)*t+p0;var p12=(p2-p1)*t+p1;var p23=(p3-p2)*t+p2;var p012=(p12-p01)*t+p01;var p123=(p23-p12)*t+p12;var p0123=(p123-p012)*t+p012;out[0]=p0;out[1]=p01;out[2]=p012;out[3]=p0123;out[4]=p0123;out[5]=p123;out[6]=p23;out[7]=p3}function cubicProjectPoint(x0,y0,x1,y1,x2,y2,x3,y3,x,y,out){var t;var interval=0.005;var d=Infinity;var prev;var next;var d1;var d2;_v0[0]=x;_v0[1]=y;for(var _t=0;_t<1;_t+=0.05){_v1[0]=cubicAt(x0,x1,x2,x3,_t);_v1[1]=cubicAt(y0,y1,y2,y3,_t);
d1=v2DistSquare(_v0,_v1);if(d1<d){t=_t;d=d1}}d=Infinity;for(var i=0;i<32;i++){if(interval<EPSILON_NUMERIC){break}prev=t-interval;next=t+interval;_v1[0]=cubicAt(x0,x1,x2,x3,prev);_v1[1]=cubicAt(y0,y1,y2,y3,prev);d1=v2DistSquare(_v1,_v0);if(prev>=0&&d1<d){t=prev;d=d1}else{_v2[0]=cubicAt(x0,x1,x2,x3,next);_v2[1]=cubicAt(y0,y1,y2,y3,next);d2=v2DistSquare(_v2,_v0);if(next<=1&&d2<d){t=next;d=d2}else{interval*=0.5}}}if(out){out[0]=cubicAt(x0,x1,x2,x3,t);out[1]=cubicAt(y0,y1,y2,y3,t)}return mathSqrt(d)}function quadraticAt(p0,p1,p2,t){var onet=1-t;return onet*(onet*p0+2*t*p1)+t*t*p2}function quadraticDerivativeAt(p0,p1,p2,t){return 2*((1-t)*(p1-p0)+t*(p2-p1))}function quadraticRootAt(p0,p1,p2,val,roots){var a=p0-2*p1+p2;var b=2*(p1-p0);var c=p0-val;var n=0;if(isAroundZero(a)){if(isNotAroundZero(b)){var t1=-c/b;if(t1>=0&&t1<=1){roots[n++]=t1}}}else{var disc=b*b-4*a*c;if(isAroundZero(disc)){var t1=-b/(2*a);if(t1>=0&&t1<=1){roots[n++]=t1}}else{if(disc>0){var discSqrt=mathSqrt(disc);var t1=(-b+discSqrt)/(2*a);var t2=(-b-discSqrt)/(2*a);if(t1>=0&&t1<=1){roots[n++]=t1}if(t2>=0&&t2<=1){roots[n++]=t2}}}}return n}function quadraticExtremum(p0,p1,p2){var divider=p0+p2-2*p1;if(divider===0){return 0.5}else{return(p0-p1)/divider}}function quadraticSubdivide(p0,p1,p2,t,out){var p01=(p1-p0)*t+p0;var p12=(p2-p1)*t+p1;var p012=(p12-p01)*t+p01;out[0]=p0;out[1]=p01;out[2]=p012;out[3]=p012;out[4]=p12;out[5]=p2}function quadraticProjectPoint(x0,y0,x1,y1,x2,y2,x,y,out){var t;var interval=0.005;var d=Infinity;_v0[0]=x;_v0[1]=y;for(var _t=0;_t<1;_t+=0.05){_v1[0]=quadraticAt(x0,x1,x2,_t);_v1[1]=quadraticAt(y0,y1,y2,_t);var d1=v2DistSquare(_v0,_v1);if(d1<d){t=_t;d=d1}}d=Infinity;for(var i=0;i<32;i++){if(interval<EPSILON_NUMERIC){break}var prev=t-interval;var next=t+interval;_v1[0]=quadraticAt(x0,x1,x2,prev);_v1[1]=quadraticAt(y0,y1,y2,prev);var d1=v2DistSquare(_v1,_v0);if(prev>=0&&d1<d){t=prev;d=d1}else{_v2[0]=quadraticAt(x0,x1,x2,next);_v2[1]=quadraticAt(y0,y1,y2,next);var d2=v2DistSquare(_v2,_v0);if(next<=1&&d2<d){t=next;d=d2}else{interval*=0.5}}}if(out){out[0]=quadraticAt(x0,x1,x2,t);out[1]=quadraticAt(y0,y1,y2,t)}return mathSqrt(d)}module.exports={cubicAt:cubicAt,cubicDerivativeAt:cubicDerivativeAt,cubicRootAt:cubicRootAt,cubicExtrema:cubicExtrema,cubicSubdivide:cubicSubdivide,cubicProjectPoint:cubicProjectPoint,quadraticAt:quadraticAt,quadraticDerivativeAt:quadraticDerivativeAt,quadraticRootAt:quadraticRootAt,quadraticExtremum:quadraticExtremum,quadraticSubdivide:quadraticSubdivide,quadraticProjectPoint:quadraticProjectPoint}}),(function(module,exports,__webpack_require__){var vec2=__webpack_require__(10);var curve=__webpack_require__(40);var bbox={};var mathMin=Math.min;var mathMax=Math.max;var mathSin=Math.sin;var mathCos=Math.cos;var start=vec2.create();var end=vec2.create();var extremity=vec2.create();var PI2=Math.PI*2;bbox.fromPoints=function(points,min,max){if(points.length===0){return}var p=points[0];var left=p[0];var right=p[0];var top=p[1];var bottom=p[1];var i;for(i=1;i<points.length;i++){p=points[i];left=mathMin(left,p[0]);right=mathMax(right,p[0]);top=mathMin(top,p[1]);bottom=mathMax(bottom,p[1])}min[0]=left;min[1]=top;max[0]=right;max[1]=bottom};bbox.fromLine=function(x0,y0,x1,y1,min,max){min[0]=mathMin(x0,x1);min[1]=mathMin(y0,y1);max[0]=mathMax(x0,x1);max[1]=mathMax(y0,y1)};var xDim=[];var yDim=[];bbox.fromCubic=function(x0,y0,x1,y1,x2,y2,x3,y3,min,max){var cubicExtrema=curve.cubicExtrema;var cubicAt=curve.cubicAt;var i;var n=cubicExtrema(x0,x1,x2,x3,xDim);min[0]=Infinity;min[1]=Infinity;max[0]=-Infinity;max[1]=-Infinity;for(i=0;i<n;i++){var x=cubicAt(x0,x1,x2,x3,xDim[i]);min[0]=mathMin(x,min[0]);max[0]=mathMax(x,max[0])}n=cubicExtrema(y0,y1,y2,y3,yDim);for(i=0;i<n;i++){var y=cubicAt(y0,y1,y2,y3,yDim[i]);min[1]=mathMin(y,min[1]);max[1]=mathMax(y,max[1])}min[0]=mathMin(x0,min[0]);max[0]=mathMax(x0,max[0]);min[0]=mathMin(x3,min[0]);max[0]=mathMax(x3,max[0]);min[1]=mathMin(y0,min[1]);max[1]=mathMax(y0,max[1]);min[1]=mathMin(y3,min[1]);max[1]=mathMax(y3,max[1])};bbox.fromQuadratic=function(x0,y0,x1,y1,x2,y2,min,max){var quadraticExtremum=curve.quadraticExtremum;var quadraticAt=curve.quadraticAt;var tx=mathMax(mathMin(quadraticExtremum(x0,x1,x2),1),0);var ty=mathMax(mathMin(quadraticExtremum(y0,y1,y2),1),0);var x=quadraticAt(x0,x1,x2,tx);var y=quadraticAt(y0,y1,y2,ty);min[0]=mathMin(x0,x2,x);min[1]=mathMin(y0,y2,y);max[0]=mathMax(x0,x2,x);max[1]=mathMax(y0,y2,y)};bbox.fromArc=function(x,y,rx,ry,startAngle,endAngle,anticlockwise,min,max){var vec2Min=vec2.min;var vec2Max=vec2.max;var diff=Math.abs(startAngle-endAngle);if(diff%PI2<0.0001&&diff>0.0001){min[0]=x-rx;min[1]=y-ry;max[0]=x+rx;max[1]=y+ry;return}start[0]=mathCos(startAngle)*rx+x;start[1]=mathSin(startAngle)*ry+y;end[0]=mathCos(endAngle)*rx+x;end[1]=mathSin(endAngle)*ry+y;vec2Min(min,start,end);vec2Max(max,start,end);startAngle=startAngle%(PI2);if(startAngle<0){startAngle=startAngle+PI2}endAngle=endAngle%(PI2);if(endAngle<0){endAngle=endAngle+PI2}if(startAngle>endAngle&&!anticlockwise){endAngle+=PI2
}else{if(startAngle<endAngle&&anticlockwise){startAngle+=PI2}}if(anticlockwise){var tmp=endAngle;endAngle=startAngle;startAngle=tmp}for(var angle=0;angle<endAngle;angle+=Math.PI/2){if(angle>startAngle){extremity[0]=mathCos(angle)*rx+x;extremity[1]=mathSin(angle)*ry+y;vec2Min(min,extremity,min);vec2Max(max,extremity,max)}}};module.exports=bbox}),(function(module,exports,__webpack_require__){var CMD=__webpack_require__(39).CMD;var line=__webpack_require__(43);var cubic=__webpack_require__(44);var quadratic=__webpack_require__(45);var arc=__webpack_require__(46);var normalizeRadian=__webpack_require__(47).normalizeRadian;var curve=__webpack_require__(40);var windingLine=__webpack_require__(48);var containStroke=line.containStroke;var PI2=Math.PI*2;var EPSILON=0.0001;function isAroundEqual(a,b){return Math.abs(a-b)<EPSILON}var roots=[-1,-1,-1];var extrema=[-1,-1];function swapExtrema(){var tmp=extrema[0];extrema[0]=extrema[1];extrema[1]=tmp}function windingCubic(x0,y0,x1,y1,x2,y2,x3,y3,x,y){if((y>y0&&y>y1&&y>y2&&y>y3)||(y<y0&&y<y1&&y<y2&&y<y3)){return 0}var nRoots=curve.cubicRootAt(y0,y1,y2,y3,y,roots);if(nRoots===0){return 0}else{var w=0;var nExtrema=-1;var y0_,y1_;for(var i=0;i<nRoots;i++){var t=roots[i];var unit=(t===0||t===1)?0.5:1;var x_=curve.cubicAt(x0,x1,x2,x3,t);if(x_<x){continue}if(nExtrema<0){nExtrema=curve.cubicExtrema(y0,y1,y2,y3,extrema);if(extrema[1]<extrema[0]&&nExtrema>1){swapExtrema()}y0_=curve.cubicAt(y0,y1,y2,y3,extrema[0]);if(nExtrema>1){y1_=curve.cubicAt(y0,y1,y2,y3,extrema[1])}}if(nExtrema==2){if(t<extrema[0]){w+=y0_<y0?unit:-unit}else{if(t<extrema[1]){w+=y1_<y0_?unit:-unit}else{w+=y3<y1_?unit:-unit}}}else{if(t<extrema[0]){w+=y0_<y0?unit:-unit}else{w+=y3<y0_?unit:-unit}}}return w}}function windingQuadratic(x0,y0,x1,y1,x2,y2,x,y){if((y>y0&&y>y1&&y>y2)||(y<y0&&y<y1&&y<y2)){return 0}var nRoots=curve.quadraticRootAt(y0,y1,y2,y,roots);if(nRoots===0){return 0}else{var t=curve.quadraticExtremum(y0,y1,y2);if(t>=0&&t<=1){var w=0;var y_=curve.quadraticAt(y0,y1,y2,t);for(var i=0;i<nRoots;i++){var unit=(roots[i]===0||roots[i]===1)?0.5:1;var x_=curve.quadraticAt(x0,x1,x2,roots[i]);if(x_<x){continue}if(roots[i]<t){w+=y_<y0?unit:-unit}else{w+=y2<y_?unit:-unit}}return w}else{var unit=(roots[0]===0||roots[0]===1)?0.5:1;var x_=curve.quadraticAt(x0,x1,x2,roots[0]);if(x_<x){return 0}return y2<y0?unit:-unit}}}function windingArc(cx,cy,r,startAngle,endAngle,anticlockwise,x,y){y-=cy;if(y>r||y<-r){return 0}var tmp=Math.sqrt(r*r-y*y);roots[0]=-tmp;roots[1]=tmp;var diff=Math.abs(startAngle-endAngle);if(diff<0.0001){return 0}if(diff%PI2<0.0001){startAngle=0;endAngle=PI2;var dir=anticlockwise?1:-1;if(x>=roots[0]+cx&&x<=roots[1]+cx){return dir}else{return 0}}if(anticlockwise){var tmp=startAngle;startAngle=normalizeRadian(endAngle);endAngle=normalizeRadian(tmp)}else{startAngle=normalizeRadian(startAngle);endAngle=normalizeRadian(endAngle)}if(startAngle>endAngle){endAngle+=PI2}var w=0;for(var i=0;i<2;i++){var x_=roots[i];if(x_+cx>x){var angle=Math.atan2(y,x_);var dir=anticlockwise?1:-1;if(angle<0){angle=PI2+angle}if((angle>=startAngle&&angle<=endAngle)||(angle+PI2>=startAngle&&angle+PI2<=endAngle)){if(angle>Math.PI/2&&angle<Math.PI*1.5){dir=-dir}w+=dir}}}return w}function containPath(data,lineWidth,isStroke,x,y){var w=0;var xi=0;var yi=0;var x0=0;var y0=0;for(var i=0;i<data.length;){var cmd=data[i++];if(cmd===CMD.M&&i>1){if(!isStroke){w+=windingLine(xi,yi,x0,y0,x,y)}}if(i==1){xi=data[i];yi=data[i+1];x0=xi;y0=yi}switch(cmd){case CMD.M:x0=data[i++];y0=data[i++];xi=x0;yi=y0;break;case CMD.L:if(isStroke){if(containStroke(xi,yi,data[i],data[i+1],lineWidth,x,y)){return true}}else{w+=windingLine(xi,yi,data[i],data[i+1],x,y)||0}xi=data[i++];yi=data[i++];break;case CMD.C:if(isStroke){if(cubic.containStroke(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],lineWidth,x,y)){return true}}else{w+=windingCubic(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],x,y)||0}xi=data[i++];yi=data[i++];break;case CMD.Q:if(isStroke){if(quadratic.containStroke(xi,yi,data[i++],data[i++],data[i],data[i+1],lineWidth,x,y)){return true}}else{w+=windingQuadratic(xi,yi,data[i++],data[i++],data[i],data[i+1],x,y)||0}xi=data[i++];yi=data[i++];break;case CMD.A:var cx=data[i++];var cy=data[i++];var rx=data[i++];var ry=data[i++];var theta=data[i++];var dTheta=data[i++];var psi=data[i++];var anticlockwise=1-data[i++];var x1=Math.cos(theta)*rx+cx;var y1=Math.sin(theta)*ry+cy;if(i>1){w+=windingLine(xi,yi,x1,y1,x,y)}else{x0=x1;y0=y1}var _x=(x-cx)*ry/rx+cx;if(isStroke){if(arc.containStroke(cx,cy,ry,theta,theta+dTheta,anticlockwise,lineWidth,_x,y)){return true}}else{w+=windingArc(cx,cy,ry,theta,theta+dTheta,anticlockwise,_x,y)}xi=Math.cos(theta+dTheta)*rx+cx;yi=Math.sin(theta+dTheta)*ry+cy;break;case CMD.R:x0=xi=data[i++];y0=yi=data[i++];var width=data[i++];var height=data[i++];var x1=x0+width;var y1=y0+height;if(isStroke){if(containStroke(x0,y0,x1,y0,lineWidth,x,y)||containStroke(x1,y0,x1,y1,lineWidth,x,y)||containStroke(x1,y1,x0,y1,lineWidth,x,y)||containStroke(x0,y1,x0,y0,lineWidth,x,y)){return true
}}else{w+=windingLine(x1,y0,x1,y1,x,y);w+=windingLine(x0,y1,x0,y0,x,y)}break;case CMD.Z:if(isStroke){if(containStroke(xi,yi,x0,y0,lineWidth,x,y)){return true}}else{w+=windingLine(xi,yi,x0,y0,x,y)}xi=x0;yi=y0;break}}if(!isStroke&&!isAroundEqual(yi,y0)){w+=windingLine(xi,yi,x0,y0,x,y)||0}return w!==0}module.exports={contain:function(pathData,x,y){return containPath(pathData,0,false,x,y)},containStroke:function(pathData,lineWidth,x,y){return containPath(pathData,lineWidth,true,x,y)}}}),(function(module,exports){module.exports={containStroke:function(x0,y0,x1,y1,lineWidth,x,y){if(lineWidth===0){return false}var _l=lineWidth;var _a=0;var _b=x0;if((y>y0+_l&&y>y1+_l)||(y<y0-_l&&y<y1-_l)||(x>x0+_l&&x>x1+_l)||(x<x0-_l&&x<x1-_l)){return false}if(x0!==x1){_a=(y0-y1)/(x0-x1);_b=(x0*y1-x1*y0)/(x0-x1)}else{return Math.abs(x-x0)<=_l/2}var tmp=_a*x-y+_b;var _s=tmp*tmp/(_a*_a+1);return _s<=_l/2*_l/2}}}),(function(module,exports,__webpack_require__){var curve=__webpack_require__(40);module.exports={containStroke:function(x0,y0,x1,y1,x2,y2,x3,y3,lineWidth,x,y){if(lineWidth===0){return false}var _l=lineWidth;if((y>y0+_l&&y>y1+_l&&y>y2+_l&&y>y3+_l)||(y<y0-_l&&y<y1-_l&&y<y2-_l&&y<y3-_l)||(x>x0+_l&&x>x1+_l&&x>x2+_l&&x>x3+_l)||(x<x0-_l&&x<x1-_l&&x<x2-_l&&x<x3-_l)){return false}var d=curve.cubicProjectPoint(x0,y0,x1,y1,x2,y2,x3,y3,x,y,null);return d<=_l/2}}}),(function(module,exports,__webpack_require__){var curve=__webpack_require__(40);module.exports={containStroke:function(x0,y0,x1,y1,x2,y2,lineWidth,x,y){if(lineWidth===0){return false}var _l=lineWidth;if((y>y0+_l&&y>y1+_l&&y>y2+_l)||(y<y0-_l&&y<y1-_l&&y<y2-_l)||(x>x0+_l&&x>x1+_l&&x>x2+_l)||(x<x0-_l&&x<x1-_l&&x<x2-_l)){return false}var d=curve.quadraticProjectPoint(x0,y0,x1,y1,x2,y2,x,y,null);return d<=_l/2}}}),(function(module,exports,__webpack_require__){var normalizeRadian=__webpack_require__(47).normalizeRadian;var PI2=Math.PI*2;module.exports={containStroke:function(cx,cy,r,startAngle,endAngle,anticlockwise,lineWidth,x,y){if(lineWidth===0){return false}var _l=lineWidth;x-=cx;y-=cy;var d=Math.sqrt(x*x+y*y);if((d-_l>r)||(d+_l<r)){return false}if(Math.abs(startAngle-endAngle)%PI2<0.0001){return true}if(anticlockwise){var tmp=startAngle;startAngle=normalizeRadian(endAngle);endAngle=normalizeRadian(tmp)}else{startAngle=normalizeRadian(startAngle);endAngle=normalizeRadian(endAngle)}if(startAngle>endAngle){endAngle+=PI2}var angle=Math.atan2(y,x);if(angle<0){angle+=PI2}return(angle>=startAngle&&angle<=endAngle)||(angle+PI2>=startAngle&&angle+PI2<=endAngle)}}}),(function(module,exports){var PI2=Math.PI*2;module.exports={normalizeRadian:function(angle){angle%=PI2;if(angle<0){angle+=PI2}return angle}}}),(function(module,exports){module.exports=function windingLine(x0,y0,x1,y1,x,y){if((y>y0&&y>y1)||(y<y0&&y<y1)){return 0}if(y1===y0){return 0}var dir=y1<y0?1:-1;var t=(y-y0)/(y1-y0);if(t===1||t===0){dir=y1<y0?0.5:-0.5}var x_=t*(x1-x0)+x0;return x_>x?dir:0}}),(function(module,exports){var Pattern=function(image,repeat){this.image=image;this.repeat=repeat;this.type="pattern"};Pattern.prototype.getCanvasPattern=function(ctx){return ctx.createPattern(this.image,this.repeat||"repeat")};module.exports=Pattern}),(function(module,exports,__webpack_require__){var CMD=__webpack_require__(39).CMD;var vec2=__webpack_require__(10);var v2ApplyTransform=vec2.applyTransform;var points=[[],[],[]];var mathSqrt=Math.sqrt;var mathAtan2=Math.atan2;function transformPath(path,m){var data=path.data;var cmd;var nPoint;var i;var j;var k;var p;var M=CMD.M;var C=CMD.C;var L=CMD.L;var R=CMD.R;var A=CMD.A;var Q=CMD.Q;for(i=0,j=0;i<data.length;){cmd=data[i++];j=i;nPoint=0;switch(cmd){case M:nPoint=1;break;case L:nPoint=1;break;case C:nPoint=3;break;case Q:nPoint=2;break;case A:var x=m[4];var y=m[5];var sx=mathSqrt(m[0]*m[0]+m[1]*m[1]);var sy=mathSqrt(m[2]*m[2]+m[3]*m[3]);var angle=mathAtan2(-m[1]/sy,m[0]/sx);data[i]*=sx;data[i++]+=x;data[i]*=sy;data[i++]+=y;data[i++]*=sx;data[i++]*=sy;data[i++]+=angle;data[i++]+=angle;i+=2;j=i;break;case R:p[0]=data[i++];p[1]=data[i++];v2ApplyTransform(p,p,m);data[j++]=p[0];data[j++]=p[1];p[0]+=data[i++];p[1]+=data[i++];v2ApplyTransform(p,p,m);data[j++]=p[0];data[j++]=p[1]}for(k=0;k<nPoint;k++){var p=points[k];p[0]=data[i++];p[1]=data[i++];v2ApplyTransform(p,p,m);data[j++]=p[0];data[j++]=p[1]}}}module.exports=transformPath}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var Element=__webpack_require__(25);var BoundingRect=__webpack_require__(9);var Group=function(opts){opts=opts||{};Element.call(this,opts);for(var key in opts){if(opts.hasOwnProperty(key)){this[key]=opts[key]}}this._children=[];this.__storage=null;this.__dirty=true};Group.prototype={constructor:Group,isGroup:true,type:"group",silent:false,children:function(){return this._children.slice()},childAt:function(idx){return this._children[idx]},childOfName:function(name){var children=this._children;for(var i=0;i<children.length;i++){if(children[i].name===name){return children[i]}}},childCount:function(){return this._children.length
},add:function(child){if(child&&child!==this&&child.parent!==this){this._children.push(child);this._doAdd(child)}return this},addBefore:function(child,nextSibling){if(child&&child!==this&&child.parent!==this&&nextSibling&&nextSibling.parent===this){var children=this._children;var idx=children.indexOf(nextSibling);if(idx>=0){children.splice(idx,0,child);this._doAdd(child)}}return this},_doAdd:function(child){if(child.parent){child.parent.remove(child)}child.parent=this;var storage=this.__storage;var zr=this.__zr;if(storage&&storage!==child.__storage){storage.addToStorage(child);if(child instanceof Group){child.addChildrenToStorage(storage)}}zr&&zr.refresh()},remove:function(child){var zr=this.__zr;var storage=this.__storage;var children=this._children;var idx=zrUtil.indexOf(children,child);if(idx<0){return this}children.splice(idx,1);child.parent=null;if(storage){storage.delFromStorage(child);if(child instanceof Group){child.delChildrenFromStorage(storage)}}zr&&zr.refresh();return this},removeAll:function(){var children=this._children;var storage=this.__storage;var child;var i;for(i=0;i<children.length;i++){child=children[i];if(storage){storage.delFromStorage(child);if(child instanceof Group){child.delChildrenFromStorage(storage)}}child.parent=null}children.length=0;return this},eachChild:function(cb,context){var children=this._children;for(var i=0;i<children.length;i++){var child=children[i];cb.call(context,child,i)}return this},traverse:function(cb,context){for(var i=0;i<this._children.length;i++){var child=this._children[i];cb.call(context,child);if(child.type==="group"){child.traverse(cb,context)}}return this},addChildrenToStorage:function(storage){for(var i=0;i<this._children.length;i++){var child=this._children[i];storage.addToStorage(child);if(child instanceof Group){child.addChildrenToStorage(storage)}}},delChildrenFromStorage:function(storage){for(var i=0;i<this._children.length;i++){var child=this._children[i];storage.delFromStorage(child);if(child instanceof Group){child.delChildrenFromStorage(storage)}}},dirty:function(){this.__dirty=true;this.__zr&&this.__zr.refresh();return this},getBoundingRect:function(includeChildren){var rect=null;var tmpRect=new BoundingRect(0,0,0,0);var children=includeChildren||this._children;var tmpMat=[];for(var i=0;i<children.length;i++){var child=children[i];if(child.ignore||child.invisible){continue}var childRect=child.getBoundingRect();var transform=child.getLocalTransform(tmpMat);if(transform){tmpRect.copy(childRect);tmpRect.applyTransform(transform);rect=rect||tmpRect.clone();rect.union(tmpRect)}else{rect=rect||childRect.clone();rect.union(childRect)}}return rect||tmpRect}};zrUtil.inherits(Group,Element);module.exports=Group}),(function(module,exports,__webpack_require__){var Displayable=__webpack_require__(23);var BoundingRect=__webpack_require__(9);var zrUtil=__webpack_require__(4);var imageHelper=__webpack_require__(12);function ZImage(opts){Displayable.call(this,opts)}ZImage.prototype={constructor:ZImage,type:"image",brush:function(ctx,prevEl){var style=this.style;var src=style.image;style.bind(ctx,this,prevEl);var image=this._image=imageHelper.createOrUpdateImage(src,this._image,this);if(!image||!imageHelper.isImageReady(image)){return}var x=style.x||0;var y=style.y||0;var width=style.width;var height=style.height;var aspect=image.width/image.height;if(width==null&&height!=null){width=height*aspect}else{if(height==null&&width!=null){height=width/aspect}else{if(width==null&&height==null){width=image.width;height=image.height}}}this.setTransform(ctx);if(style.sWidth&&style.sHeight){var sx=style.sx||0;var sy=style.sy||0;ctx.drawImage(image,sx,sy,style.sWidth,style.sHeight,x,y,width,height)}else{if(style.sx&&style.sy){var sx=style.sx;var sy=style.sy;var sWidth=width-sx;var sHeight=height-sy;ctx.drawImage(image,sx,sy,sWidth,sHeight,x,y,width,height)}else{ctx.drawImage(image,x,y,width,height)}}this.restoreTransform(ctx);if(style.text!=null){this.drawRectText(ctx,this.getBoundingRect())}},getBoundingRect:function(){var style=this.style;if(!this._rect){this._rect=new BoundingRect(style.x||0,style.y||0,style.width||0,style.height||0)}return this._rect}};zrUtil.inherits(ZImage,Displayable);module.exports=ZImage}),(function(module,exports,__webpack_require__){var Displayable=__webpack_require__(23);var zrUtil=__webpack_require__(4);var textContain=__webpack_require__(8);var textHelper=__webpack_require__(37);var Text=function(opts){Displayable.call(this,opts)};Text.prototype={constructor:Text,type:"text",brush:function(ctx,prevEl){var style=this.style;this.__dirty&&textHelper.normalizeTextStyle(style,true);style.fill=style.stroke=style.shadowBlur=style.shadowColor=style.shadowOffsetX=style.shadowOffsetY=null;var text=style.text;text!=null&&(text+="");style.bind(ctx,this,prevEl);if(!textHelper.needDrawText(text,style)){return}this.setTransform(ctx);textHelper.renderText(this,ctx,text,style);this.restoreTransform(ctx)},getBoundingRect:function(){var style=this.style;this.__dirty&&textHelper.normalizeTextStyle(style,true);
if(!this._rect){var text=style.text;text!=null?(text+=""):(text="");var rect=textContain.getBoundingRect(style.text+"",style.font,style.textAlign,style.textVerticalAlign,style.textPadding,style.rich);rect.x+=style.x||0;rect.y+=style.y||0;if(textHelper.getStroke(style.textStroke,style.textStrokeWidth)){var w=style.textStrokeWidth;rect.x-=w/2;rect.y-=w/2;rect.width+=w;rect.height+=w}this._rect=rect}return this._rect}};zrUtil.inherits(Text,Displayable);module.exports=Text}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(22).extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(ctx,shape,inBundle){if(inBundle){ctx.moveTo(shape.cx+shape.r,shape.cy)}ctx.arc(shape.cx,shape.cy,shape.r,0,Math.PI*2,true)}})}),(function(module,exports,__webpack_require__){var Path=__webpack_require__(22);var fixClipWithShadow=__webpack_require__(56);module.exports=Path.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:true},brush:fixClipWithShadow(Path.prototype.brush),buildPath:function(ctx,shape){var x=shape.cx;var y=shape.cy;var r0=Math.max(shape.r0||0,0);var r=Math.max(shape.r,0);var startAngle=shape.startAngle;var endAngle=shape.endAngle;var clockwise=shape.clockwise;var unitX=Math.cos(startAngle);var unitY=Math.sin(startAngle);ctx.moveTo(unitX*r0+x,unitY*r0+y);ctx.lineTo(unitX*r+x,unitY*r+y);ctx.arc(x,y,r,startAngle,endAngle,!clockwise);ctx.lineTo(Math.cos(endAngle)*r0+x,Math.sin(endAngle)*r0+y);if(r0!==0){ctx.arc(x,y,r0,endAngle,startAngle,clockwise)}ctx.closePath()}})}),(function(module,exports,__webpack_require__){var env=__webpack_require__(2);var shadowTemp=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]];module.exports=function(orignalBrush){return(env.browser.ie&&env.browser.version>=11)?function(){var clipPaths=this.__clipPaths;var style=this.style;var modified;if(clipPaths){for(var i=0;i<clipPaths.length;i++){var clipPath=clipPaths[i];var shape=clipPath&&clipPath.shape;var type=clipPath&&clipPath.type;if(shape&&((type==="sector"&&shape.startAngle===shape.endAngle)||(type==="rect"&&(!shape.width||!shape.height)))){for(var j=0;j<shadowTemp.length;j++){shadowTemp[j][2]=style[shadowTemp[j][0]];style[shadowTemp[j][0]]=shadowTemp[j][1]}modified=true;break}}}orignalBrush.apply(this,arguments);if(modified){for(var j=0;j<shadowTemp.length;j++){style[shadowTemp[j][0]]=shadowTemp[j][2]}}}:orignalBrush}}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(22).extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(ctx,shape){var x=shape.cx;var y=shape.cy;var PI2=Math.PI*2;ctx.moveTo(x+shape.r,y);ctx.arc(x,y,shape.r,0,PI2,false);ctx.moveTo(x+shape.r0,y);ctx.arc(x,y,shape.r0,0,PI2,true)}})}),(function(module,exports,__webpack_require__){var polyHelper=__webpack_require__(59);module.exports=__webpack_require__(22).extend({type:"polygon",shape:{points:null,smooth:false,smoothConstraint:null},buildPath:function(ctx,shape){polyHelper.buildPath(ctx,shape,true)}})}),(function(module,exports,__webpack_require__){var smoothSpline=__webpack_require__(60);var smoothBezier=__webpack_require__(61);module.exports={buildPath:function(ctx,shape,closePath){var points=shape.points;var smooth=shape.smooth;if(points&&points.length>=2){if(smooth&&smooth!=="spline"){var controlPoints=smoothBezier(points,smooth,closePath,shape.smoothConstraint);ctx.moveTo(points[0][0],points[0][1]);var len=points.length;for(var i=0;i<(closePath?len:len-1);i++){var cp1=controlPoints[i*2];var cp2=controlPoints[i*2+1];var p=points[(i+1)%len];ctx.bezierCurveTo(cp1[0],cp1[1],cp2[0],cp2[1],p[0],p[1])}}else{if(smooth==="spline"){points=smoothSpline(points,closePath)}ctx.moveTo(points[0][0],points[0][1]);for(var i=1,l=points.length;i<l;i++){ctx.lineTo(points[i][0],points[i][1])}}closePath&&ctx.closePath()}}}}),(function(module,exports,__webpack_require__){var vec2=__webpack_require__(10);function interpolate(p0,p1,p2,p3,t,t2,t3){var v0=(p2-p0)*0.5;var v1=(p3-p1)*0.5;return(2*(p1-p2)+v0+v1)*t3+(-3*(p1-p2)-2*v0-v1)*t2+v0*t+p1}module.exports=function(points,isLoop){var len=points.length;var ret=[];var distance=0;for(var i=1;i<len;i++){distance+=vec2.distance(points[i-1],points[i])}var segs=distance/2;segs=segs<len?len:segs;for(var i=0;i<segs;i++){var pos=i/(segs-1)*(isLoop?len:len-1);var idx=Math.floor(pos);var w=pos-idx;var p0;var p1=points[idx%len];var p2;var p3;if(!isLoop){p0=points[idx===0?idx:idx-1];p2=points[idx>len-2?len-1:idx+1];p3=points[idx>len-3?len-1:idx+2]}else{p0=points[(idx-1+len)%len];p2=points[(idx+1)%len];p3=points[(idx+2)%len]}var w2=w*w;var w3=w*w2;ret.push([interpolate(p0[0],p1[0],p2[0],p3[0],w,w2,w3),interpolate(p0[1],p1[1],p2[1],p3[1],w,w2,w3)])}return ret}}),(function(module,exports,__webpack_require__){var vec2=__webpack_require__(10);var v2Min=vec2.min;var v2Max=vec2.max;var v2Scale=vec2.scale;var v2Distance=vec2.distance;var v2Add=vec2.add;module.exports=function(points,smooth,isLoop,constraint){var cps=[];
var v=[];var v1=[];var v2=[];var prevPoint;var nextPoint;var min,max;if(constraint){min=[Infinity,Infinity];max=[-Infinity,-Infinity];for(var i=0,len=points.length;i<len;i++){v2Min(min,min,points[i]);v2Max(max,max,points[i])}v2Min(min,min,constraint[0]);v2Max(max,max,constraint[1])}for(var i=0,len=points.length;i<len;i++){var point=points[i];if(isLoop){prevPoint=points[i?i-1:len-1];nextPoint=points[(i+1)%len]}else{if(i===0||i===len-1){cps.push(vec2.clone(points[i]));continue}else{prevPoint=points[i-1];nextPoint=points[i+1]}}vec2.sub(v,nextPoint,prevPoint);v2Scale(v,v,smooth);var d0=v2Distance(point,prevPoint);var d1=v2Distance(point,nextPoint);var sum=d0+d1;if(sum!==0){d0/=sum;d1/=sum}v2Scale(v1,v,-d0);v2Scale(v2,v,d1);var cp0=v2Add([],point,v1);var cp1=v2Add([],point,v2);if(constraint){v2Max(cp0,cp0,min);v2Min(cp0,cp0,max);v2Max(cp1,cp1,min);v2Min(cp1,cp1,max)}cps.push(cp0);cps.push(cp1)}if(isLoop){cps.push(cps.shift())}return cps}}),(function(module,exports,__webpack_require__){var polyHelper=__webpack_require__(59);module.exports=__webpack_require__(22).extend({type:"polyline",shape:{points:null,smooth:false,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(ctx,shape){polyHelper.buildPath(ctx,shape,false)}})}),(function(module,exports,__webpack_require__){var roundRectHelper=__webpack_require__(38);module.exports=__webpack_require__(22).extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(ctx,shape){var x=shape.x;var y=shape.y;var width=shape.width;var height=shape.height;if(!shape.r){ctx.rect(x,y,width,height)}else{roundRectHelper.buildPath(ctx,shape)}ctx.closePath();return}})}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(22).extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(ctx,shape){var x1=shape.x1;var y1=shape.y1;var x2=shape.x2;var y2=shape.y2;var percent=shape.percent;if(percent===0){return}ctx.moveTo(x1,y1);if(percent<1){x2=x1*(1-percent)+x2*percent;y2=y1*(1-percent)+y2*percent}ctx.lineTo(x2,y2)},pointAt:function(p){var shape=this.shape;return[shape.x1*(1-p)+shape.x2*p,shape.y1*(1-p)+shape.y2*p]}})}),(function(module,exports,__webpack_require__){var curveTool=__webpack_require__(40);var vec2=__webpack_require__(10);var quadraticSubdivide=curveTool.quadraticSubdivide;var cubicSubdivide=curveTool.cubicSubdivide;var quadraticAt=curveTool.quadraticAt;var cubicAt=curveTool.cubicAt;var quadraticDerivativeAt=curveTool.quadraticDerivativeAt;var cubicDerivativeAt=curveTool.cubicDerivativeAt;var out=[];function someVectorAt(shape,t,isTangent){var cpx2=shape.cpx2;var cpy2=shape.cpy2;if(cpx2===null||cpy2===null){return[(isTangent?cubicDerivativeAt:cubicAt)(shape.x1,shape.cpx1,shape.cpx2,shape.x2,t),(isTangent?cubicDerivativeAt:cubicAt)(shape.y1,shape.cpy1,shape.cpy2,shape.y2,t)]}else{return[(isTangent?quadraticDerivativeAt:quadraticAt)(shape.x1,shape.cpx1,shape.x2,t),(isTangent?quadraticDerivativeAt:quadraticAt)(shape.y1,shape.cpy1,shape.y2,t)]}}module.exports=__webpack_require__(22).extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(ctx,shape){var x1=shape.x1;var y1=shape.y1;var x2=shape.x2;var y2=shape.y2;var cpx1=shape.cpx1;var cpy1=shape.cpy1;var cpx2=shape.cpx2;var cpy2=shape.cpy2;var percent=shape.percent;if(percent===0){return}ctx.moveTo(x1,y1);if(cpx2==null||cpy2==null){if(percent<1){quadraticSubdivide(x1,cpx1,x2,percent,out);cpx1=out[1];x2=out[2];quadraticSubdivide(y1,cpy1,y2,percent,out);cpy1=out[1];y2=out[2]}ctx.quadraticCurveTo(cpx1,cpy1,x2,y2)}else{if(percent<1){cubicSubdivide(x1,cpx1,cpx2,x2,percent,out);cpx1=out[1];cpx2=out[2];x2=out[3];cubicSubdivide(y1,cpy1,cpy2,y2,percent,out);cpy1=out[1];cpy2=out[2];y2=out[3]}ctx.bezierCurveTo(cpx1,cpy1,cpx2,cpy2,x2,y2)}},pointAt:function(t){return someVectorAt(this.shape,t,false)},tangentAt:function(t){var p=someVectorAt(this.shape,t,true);return vec2.normalize(p,p)}})}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(22).extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:true},style:{stroke:"#000",fill:null},buildPath:function(ctx,shape){var x=shape.cx;var y=shape.cy;var r=Math.max(shape.r,0);var startAngle=shape.startAngle;var endAngle=shape.endAngle;var clockwise=shape.clockwise;var unitX=Math.cos(startAngle);var unitY=Math.sin(startAngle);ctx.moveTo(unitX*r+x,unitY*r+y);ctx.arc(x,y,r,startAngle,endAngle,!clockwise)}})}),(function(module,exports,__webpack_require__){var Path=__webpack_require__(22);module.exports=Path.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){var dirtyPath=this.__dirtyPath;var paths=this.shape.paths;for(var i=0;i<paths.length;i++){dirtyPath=dirtyPath||paths[i].__dirtyPath}this.__dirtyPath=dirtyPath;this.__dirty=this.__dirty||dirtyPath},beforeBrush:function(){this._updatePathDirty();var paths=this.shape.paths||[];var scale=this.getGlobalScale();
for(var i=0;i<paths.length;i++){if(!paths[i].path){paths[i].createPathProxy()}paths[i].path.setScale(scale[0],scale[1])}},buildPath:function(ctx,shape){var paths=shape.paths||[];for(var i=0;i<paths.length;i++){paths[i].buildPath(ctx,paths[i].shape,true)}},afterBrush:function(){var paths=this.shape.paths;for(var i=0;i<paths.length;i++){paths[i].__dirtyPath=false}},getBoundingRect:function(){this._updatePathDirty();return Path.prototype.getBoundingRect.call(this)}})}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var Gradient=__webpack_require__(69);var LinearGradient=function(x,y,x2,y2,colorStops,globalCoord){this.x=x==null?0:x;this.y=y==null?0:y;this.x2=x2==null?1:x2;this.y2=y2==null?0:y2;this.type="linear";this.global=globalCoord||false;Gradient.call(this,colorStops)};LinearGradient.prototype={constructor:LinearGradient};zrUtil.inherits(LinearGradient,Gradient);module.exports=LinearGradient}),(function(module,exports){var Gradient=function(colorStops){this.colorStops=colorStops||[]};Gradient.prototype={constructor:Gradient,addColorStop:function(offset,color){this.colorStops.push({offset:offset,color:color})}};module.exports=Gradient}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var Gradient=__webpack_require__(69);var RadialGradient=function(x,y,r,colorStops,globalCoord){this.x=x==null?0.5:x;this.y=y==null?0.5:y;this.r=r==null?0.5:r;this.type="radial";this.global=globalCoord||false;Gradient.call(this,colorStops)};RadialGradient.prototype={constructor:RadialGradient};zrUtil.inherits(RadialGradient,Gradient);module.exports=RadialGradient}),(function(module,exports,__webpack_require__){var getItemStyle=__webpack_require__(17)([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]);module.exports={getItemStyle:function(excludes,includes){var style=getItemStyle.call(this,excludes,includes);var lineDash=this.getBorderLineDash();lineDash&&(style.lineDash=lineDash);return style},getBorderLineDash:function(){var lineType=this.get("borderType");return(lineType==="solid"||lineType==null)?null:(lineType==="dashed"?[5,5]:[1,1])}}}),(function(module,exports,__webpack_require__){var Model=__webpack_require__(14);var zrUtil=__webpack_require__(4);var arrayPush=Array.prototype.push;var componentUtil=__webpack_require__(73);var clazzUtil=__webpack_require__(15);var layout=__webpack_require__(74);var ComponentModel=Model.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(option,parentModel,ecModel,extraOpt){Model.call(this,option,parentModel,ecModel,extraOpt);this.uid=componentUtil.getUID("componentModel")},init:function(option,parentModel,ecModel,extraOpt){this.mergeDefaultAndTheme(option,ecModel)},mergeDefaultAndTheme:function(option,ecModel){var layoutMode=this.layoutMode;var inputPositionParams=layoutMode?layout.getLayoutParams(option):{};var themeModel=ecModel.getTheme();zrUtil.merge(option,themeModel.get(this.mainType));zrUtil.merge(option,this.getDefaultOption());if(layoutMode){layout.mergeLayoutParam(option,inputPositionParams,layoutMode)}},mergeOption:function(option,extraOpt){zrUtil.merge(this.option,option,true);var layoutMode=this.layoutMode;if(layoutMode){layout.mergeLayoutParam(this.option,option,layoutMode)}},optionUpdated:function(newCptOption,isInit){},getDefaultOption:function(){if(!clazzUtil.hasOwn(this,"__defaultOption")){var optList=[];var Class=this.constructor;while(Class){var opt=Class.prototype.defaultOption;opt&&optList.push(opt);Class=Class.superClass}var defaultOption={};for(var i=optList.length-1;i>=0;i--){defaultOption=zrUtil.merge(defaultOption,optList[i],true)}clazzUtil.set(this,"__defaultOption",defaultOption)}return clazzUtil.get(this,"__defaultOption")},getReferringComponents:function(mainType){return this.ecModel.queryComponents({mainType:mainType,index:this.get(mainType+"Index",true),id:this.get(mainType+"Id",true)})}});clazzUtil.enableClassManagement(ComponentModel,{registerWhenExtend:true});componentUtil.enableSubTypeDefaulter(ComponentModel);componentUtil.enableTopologicalTravel(ComponentModel,getDependencies);function getDependencies(componentType){var deps=[];zrUtil.each(ComponentModel.getClassesByMainType(componentType),function(Clazz){arrayPush.apply(deps,Clazz.prototype.dependencies||[])});return zrUtil.map(deps,function(type){return clazzUtil.parseClassType(type).main})}zrUtil.mixin(ComponentModel,__webpack_require__(75));module.exports=ComponentModel}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var clazz=__webpack_require__(15);var parseClassType=clazz.parseClassType;var base=0;var componentUtil={};var DELIMITER="_";componentUtil.getUID=function(type){return[(type||""),base++,Math.random()].join(DELIMITER)};componentUtil.enableSubTypeDefaulter=function(entity){var subTypeDefaulters={};
entity.registerSubTypeDefaulter=function(componentType,defaulter){componentType=parseClassType(componentType);subTypeDefaulters[componentType.main]=defaulter};entity.determineSubType=function(componentType,option){var type=option.type;if(!type){var componentTypeMain=parseClassType(componentType).main;if(entity.hasSubTypes(componentType)&&subTypeDefaulters[componentTypeMain]){type=subTypeDefaulters[componentTypeMain](option)}}return type};return entity};componentUtil.enableTopologicalTravel=function(entity,dependencyGetter){entity.topologicalTravel=function(targetNameList,fullNameList,callback,context){if(!targetNameList.length){return}var result=makeDepndencyGraph(fullNameList);var graph=result.graph;var stack=result.noEntryList;var targetNameSet={};zrUtil.each(targetNameList,function(name){targetNameSet[name]=true});while(stack.length){var currComponentType=stack.pop();var currVertex=graph[currComponentType];var isInTargetNameSet=!!targetNameSet[currComponentType];if(isInTargetNameSet){callback.call(context,currComponentType,currVertex.originalDeps.slice());delete targetNameSet[currComponentType]}zrUtil.each(currVertex.successor,isInTargetNameSet?removeEdgeAndAdd:removeEdge)}zrUtil.each(targetNameSet,function(){throw new Error("Circle dependency may exists")});function removeEdge(succComponentType){graph[succComponentType].entryCount--;if(graph[succComponentType].entryCount===0){stack.push(succComponentType)}}function removeEdgeAndAdd(succComponentType){targetNameSet[succComponentType]=true;removeEdge(succComponentType)}};function makeDepndencyGraph(fullNameList){var graph={};var noEntryList=[];zrUtil.each(fullNameList,function(name){var thisItem=createDependencyGraphItem(graph,name);var originalDeps=thisItem.originalDeps=dependencyGetter(name);var availableDeps=getAvailableDependencies(originalDeps,fullNameList);thisItem.entryCount=availableDeps.length;if(thisItem.entryCount===0){noEntryList.push(name)}zrUtil.each(availableDeps,function(dependentName){if(zrUtil.indexOf(thisItem.predecessor,dependentName)<0){thisItem.predecessor.push(dependentName)}var thatItem=createDependencyGraphItem(graph,dependentName);if(zrUtil.indexOf(thatItem.successor,dependentName)<0){thatItem.successor.push(name)}})});return{graph:graph,noEntryList:noEntryList}}function createDependencyGraphItem(graph,name){if(!graph[name]){graph[name]={predecessor:[],successor:[]}}return graph[name]}function getAvailableDependencies(originalDeps,fullNameList){var availableDeps=[];zrUtil.each(originalDeps,function(dep){zrUtil.indexOf(fullNameList,dep)>=0&&availableDeps.push(dep)});return availableDeps}};module.exports=componentUtil}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var BoundingRect=__webpack_require__(9);var numberUtil=__webpack_require__(7);var formatUtil=__webpack_require__(6);var parsePercent=numberUtil.parsePercent;var each=zrUtil.each;var layout={};var LOCATION_PARAMS=layout.LOCATION_PARAMS=["left","right","top","bottom","width","height"];var HV_NAMES=layout.HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(orient,group,gap,maxWidth,maxHeight){var x=0;var y=0;if(maxWidth==null){maxWidth=Infinity}if(maxHeight==null){maxHeight=Infinity}var currentLineMaxSize=0;group.eachChild(function(child,idx){var position=child.position;var rect=child.getBoundingRect();var nextChild=group.childAt(idx+1);var nextChildRect=nextChild&&nextChild.getBoundingRect();var nextX;var nextY;if(orient==="horizontal"){var moveX=rect.width+(nextChildRect?(-nextChildRect.x+rect.x):0);nextX=x+moveX;if(nextX>maxWidth||child.newline){x=0;nextX=moveX;y+=currentLineMaxSize+gap;currentLineMaxSize=rect.height}else{currentLineMaxSize=Math.max(currentLineMaxSize,rect.height)}}else{var moveY=rect.height+(nextChildRect?(-nextChildRect.y+rect.y):0);nextY=y+moveY;if(nextY>maxHeight||child.newline){x+=currentLineMaxSize+gap;y=0;nextY=moveY;currentLineMaxSize=rect.width}else{currentLineMaxSize=Math.max(currentLineMaxSize,rect.width)}}if(child.newline){return}position[0]=x;position[1]=y;orient==="horizontal"?(x=nextX+gap):(y=nextY+gap)})}layout.box=boxLayout;layout.vbox=zrUtil.curry(boxLayout,"vertical");layout.hbox=zrUtil.curry(boxLayout,"horizontal");layout.getAvailableSize=function(positionInfo,containerRect,margin){var containerWidth=containerRect.width;var containerHeight=containerRect.height;var x=parsePercent(positionInfo.x,containerWidth);var y=parsePercent(positionInfo.y,containerHeight);var x2=parsePercent(positionInfo.x2,containerWidth);var y2=parsePercent(positionInfo.y2,containerHeight);(isNaN(x)||isNaN(parseFloat(positionInfo.x)))&&(x=0);(isNaN(x2)||isNaN(parseFloat(positionInfo.x2)))&&(x2=containerWidth);(isNaN(y)||isNaN(parseFloat(positionInfo.y)))&&(y=0);(isNaN(y2)||isNaN(parseFloat(positionInfo.y2)))&&(y2=containerHeight);margin=formatUtil.normalizeCssArray(margin||0);return{width:Math.max(x2-x-margin[1]-margin[3],0),height:Math.max(y2-y-margin[0]-margin[2],0)}};layout.getLayoutRect=function(positionInfo,containerRect,margin){margin=formatUtil.normalizeCssArray(margin||0);
var containerWidth=containerRect.width;var containerHeight=containerRect.height;var left=parsePercent(positionInfo.left,containerWidth);var top=parsePercent(positionInfo.top,containerHeight);var right=parsePercent(positionInfo.right,containerWidth);var bottom=parsePercent(positionInfo.bottom,containerHeight);var width=parsePercent(positionInfo.width,containerWidth);var height=parsePercent(positionInfo.height,containerHeight);var verticalMargin=margin[2]+margin[0];var horizontalMargin=margin[1]+margin[3];var aspect=positionInfo.aspect;if(isNaN(width)){width=containerWidth-right-horizontalMargin-left}if(isNaN(height)){height=containerHeight-bottom-verticalMargin-top}if(aspect!=null){if(isNaN(width)&&isNaN(height)){if(aspect>containerWidth/containerHeight){width=containerWidth*0.8}else{height=containerHeight*0.8}}if(isNaN(width)){width=aspect*height}if(isNaN(height)){height=width/aspect}}if(isNaN(left)){left=containerWidth-right-width-horizontalMargin}if(isNaN(top)){top=containerHeight-bottom-height-verticalMargin}switch(positionInfo.left||positionInfo.right){case"center":left=containerWidth/2-width/2-margin[3];break;case"right":left=containerWidth-width-horizontalMargin;break}switch(positionInfo.top||positionInfo.bottom){case"middle":case"center":top=containerHeight/2-height/2-margin[0];break;case"bottom":top=containerHeight-height-verticalMargin;break}left=left||0;top=top||0;if(isNaN(width)){width=containerWidth-horizontalMargin-left-(right||0)}if(isNaN(height)){height=containerHeight-verticalMargin-top-(bottom||0)}var rect=new BoundingRect(left+margin[3],top+margin[0],width,height);rect.margin=margin;return rect};layout.positionElement=function(el,positionInfo,containerRect,margin,opt){var h=!opt||!opt.hv||opt.hv[0];var v=!opt||!opt.hv||opt.hv[1];var boundingMode=opt&&opt.boundingMode||"all";if(!h&&!v){return}var rect;if(boundingMode==="raw"){rect=el.type==="group"?new BoundingRect(0,0,+positionInfo.width||0,+positionInfo.height||0):el.getBoundingRect()}else{rect=el.getBoundingRect();if(el.needLocalTransform()){var transform=el.getLocalTransform();rect=rect.clone();rect.applyTransform(transform)}}positionInfo=layout.getLayoutRect(zrUtil.defaults({width:rect.width,height:rect.height},positionInfo),containerRect,margin);var elPos=el.position;var dx=h?positionInfo.x-rect.x:0;var dy=v?positionInfo.y-rect.y:0;el.attr("position",boundingMode==="raw"?[dx,dy]:[elPos[0]+dx,elPos[1]+dy])};layout.sizeCalculable=function(option,hvIdx){return option[HV_NAMES[hvIdx][0]]!=null||(option[HV_NAMES[hvIdx][1]]!=null&&option[HV_NAMES[hvIdx][2]]!=null)};layout.mergeLayoutParam=function(targetOption,newOption,opt){!zrUtil.isObject(opt)&&(opt={});var ignoreSize=opt.ignoreSize;!zrUtil.isArray(ignoreSize)&&(ignoreSize=[ignoreSize,ignoreSize]);var hResult=merge(HV_NAMES[0],0);var vResult=merge(HV_NAMES[1],1);copy(HV_NAMES[0],targetOption,hResult);copy(HV_NAMES[1],targetOption,vResult);function merge(names,hvIdx){var newParams={};var newValueCount=0;var merged={};var mergedValueCount=0;var enoughParamNumber=2;each(names,function(name){merged[name]=targetOption[name]});each(names,function(name){hasProp(newOption,name)&&(newParams[name]=merged[name]=newOption[name]);hasValue(newParams,name)&&newValueCount++;hasValue(merged,name)&&mergedValueCount++});if(ignoreSize[hvIdx]){if(hasValue(newOption,names[1])){merged[names[2]]=null}else{if(hasValue(newOption,names[2])){merged[names[1]]=null}}return merged}if(mergedValueCount===enoughParamNumber||!newValueCount){return merged}else{if(newValueCount>=enoughParamNumber){return newParams}else{for(var i=0;i<names.length;i++){var name=names[i];if(!hasProp(newParams,name)&&hasProp(targetOption,name)){newParams[name]=targetOption[name];break}}return newParams}}}function hasProp(obj,name){return obj.hasOwnProperty(name)}function hasValue(obj,name){return obj[name]!=null&&obj[name]!=="auto"}function copy(names,target,source){each(names,function(name){target[name]=source[name]})}};layout.getLayoutParams=function(source){return layout.copyLayoutParams({},source)};layout.copyLayoutParams=function(target,source){source&&target&&each(LOCATION_PARAMS,function(name){source.hasOwnProperty(name)&&(target[name]=source[name])});return target};module.exports=layout}),(function(module,exports){module.exports={getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}}}),(function(module,exports){var platform="";if(typeof navigator!=="undefined"){platform=navigator.platform||""}module.exports={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1000,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2000,progressiveThreshold:3000,progressive:400,hoverLayerThreshold:3000,useUTC:false}
}),(function(module,exports,__webpack_require__){var classUtil=__webpack_require__(15);var set=classUtil.set;var get=classUtil.get;module.exports={clearColorPalette:function(){set(this,"colorIdx",0);set(this,"colorNameMap",{})},getColorFromPalette:function(name,scope){scope=scope||this;var colorIdx=get(scope,"colorIdx")||0;var colorNameMap=get(scope,"colorNameMap")||set(scope,"colorNameMap",{});if(colorNameMap.hasOwnProperty(name)){return colorNameMap[name]}var colorPalette=this.get("color",true)||[];if(!colorPalette.length){return}var color=colorPalette[colorIdx];if(name){colorNameMap[name]=color}set(scope,"colorIdx",(colorIdx+1)%colorPalette.length);return color}}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var echartsAPIList=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function ExtensionAPI(chartInstance){zrUtil.each(echartsAPIList,function(name){this[name]=zrUtil.bind(chartInstance[name],chartInstance)},this)}module.exports=ExtensionAPI}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var coordinateSystemCreators={};function CoordinateSystemManager(){this._coordinateSystems=[]}CoordinateSystemManager.prototype={constructor:CoordinateSystemManager,create:function(ecModel,api){var coordinateSystems=[];zrUtil.each(coordinateSystemCreators,function(creater,type){var list=creater.create(ecModel,api);coordinateSystems=coordinateSystems.concat(list||[])});this._coordinateSystems=coordinateSystems},update:function(ecModel,api){zrUtil.each(this._coordinateSystems,function(coordSys){coordSys.update&&coordSys.update(ecModel,api)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}};CoordinateSystemManager.register=function(type,coordinateSystemCreator){coordinateSystemCreators[type]=coordinateSystemCreator};CoordinateSystemManager.get=function(type){return coordinateSystemCreators[type]};module.exports=CoordinateSystemManager}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var modelUtil=__webpack_require__(5);var ComponentModel=__webpack_require__(72);var each=zrUtil.each;var clone=zrUtil.clone;var map=zrUtil.map;var merge=zrUtil.merge;var QUERY_REG=/^(min|max)?(.+)$/;function OptionManager(api){this._api=api;this._timelineOptions=[];this._mediaList=[];this._mediaDefault;this._currentMediaIndices=[];this._optionBackup;this._newBaseOption}OptionManager.prototype={constructor:OptionManager,setOption:function(rawOption,optionPreprocessorFuncs){rawOption=clone(rawOption,true);var oldOptionBackup=this._optionBackup;var newParsedOption=parseRawOption.call(this,rawOption,optionPreprocessorFuncs,!oldOptionBackup);this._newBaseOption=newParsedOption.baseOption;if(oldOptionBackup){mergeOption(oldOptionBackup.baseOption,newParsedOption.baseOption);if(newParsedOption.timelineOptions.length){oldOptionBackup.timelineOptions=newParsedOption.timelineOptions}if(newParsedOption.mediaList.length){oldOptionBackup.mediaList=newParsedOption.mediaList}if(newParsedOption.mediaDefault){oldOptionBackup.mediaDefault=newParsedOption.mediaDefault}}else{this._optionBackup=newParsedOption}},mountOption:function(isRecreate){var optionBackup=this._optionBackup;this._timelineOptions=map(optionBackup.timelineOptions,clone);this._mediaList=map(optionBackup.mediaList,clone);this._mediaDefault=clone(optionBackup.mediaDefault);this._currentMediaIndices=[];return clone(isRecreate?optionBackup.baseOption:this._newBaseOption)},getTimelineOption:function(ecModel){var option;var timelineOptions=this._timelineOptions;if(timelineOptions.length){var timelineModel=ecModel.getComponent("timeline");if(timelineModel){option=clone(timelineOptions[timelineModel.getCurrentIndex()],true)}}return option},getMediaOption:function(ecModel){var ecWidth=this._api.getWidth();var ecHeight=this._api.getHeight();var mediaList=this._mediaList;var mediaDefault=this._mediaDefault;var indices=[];var result=[];if(!mediaList.length&&!mediaDefault){return result}for(var i=0,len=mediaList.length;i<len;i++){if(applyMediaQuery(mediaList[i].query,ecWidth,ecHeight)){indices.push(i)}}if(!indices.length&&mediaDefault){indices=[-1]}if(indices.length&&!indicesEquals(indices,this._currentMediaIndices)){result=map(indices,function(index){return clone(index===-1?mediaDefault.option:mediaList[index].option)})}this._currentMediaIndices=indices;return result}};function parseRawOption(rawOption,optionPreprocessorFuncs,isNew){var timelineOptions=[];var mediaList=[];var mediaDefault;var baseOption;var timelineOpt=rawOption.timeline;if(rawOption.baseOption){baseOption=rawOption.baseOption}if(timelineOpt||rawOption.options){baseOption=baseOption||{};timelineOptions=(rawOption.options||[]).slice()}if(rawOption.media){baseOption=baseOption||{};var media=rawOption.media;each(media,function(singleMedia){if(singleMedia&&singleMedia.option){if(singleMedia.query){mediaList.push(singleMedia)
}else{if(!mediaDefault){mediaDefault=singleMedia}}}})}if(!baseOption){baseOption=rawOption}if(!baseOption.timeline){baseOption.timeline=timelineOpt}each([baseOption].concat(timelineOptions).concat(zrUtil.map(mediaList,function(media){return media.option})),function(option){each(optionPreprocessorFuncs,function(preProcess){preProcess(option,isNew)})});return{baseOption:baseOption,timelineOptions:timelineOptions,mediaDefault:mediaDefault,mediaList:mediaList}}function applyMediaQuery(query,ecWidth,ecHeight){var realMap={width:ecWidth,height:ecHeight,aspectratio:ecWidth/ecHeight};var applicatable=true;zrUtil.each(query,function(value,attr){var matched=attr.match(QUERY_REG);if(!matched||!matched[1]||!matched[2]){return}var operator=matched[1];var realAttr=matched[2].toLowerCase();if(!compare(realMap[realAttr],value,operator)){applicatable=false}});return applicatable}function compare(real,expect,operator){if(operator==="min"){return real>=expect}else{if(operator==="max"){return real<=expect}else{return real===expect}}}function indicesEquals(indices1,indices2){return indices1.join(",")===indices2.join(",")}function mergeOption(oldOption,newOption){newOption=newOption||{};each(newOption,function(newCptOpt,mainType){if(newCptOpt==null){return}var oldCptOpt=oldOption[mainType];if(!ComponentModel.hasClass(mainType)){oldOption[mainType]=merge(oldCptOpt,newCptOpt,true)}else{newCptOpt=modelUtil.normalizeToArray(newCptOpt);oldCptOpt=modelUtil.normalizeToArray(oldCptOpt);var mapResult=modelUtil.mappingToExists(oldCptOpt,newCptOpt);oldOption[mainType]=map(mapResult,function(item){return(item.option&&item.exist)?merge(item.exist,item.option,true):(item.exist||item.option)})}})}module.exports=OptionManager}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var compatStyle=__webpack_require__(82);function get(opt,path){path=path.split(",");var obj=opt;for(var i=0;i<path.length;i++){obj=obj&&obj[path[i]];if(obj==null){break}}return obj}function set(opt,path,val,overwrite){path=path.split(",");var obj=opt;var key;for(var i=0;i<path.length-1;i++){key=path[i];if(obj[key]==null){obj[key]={}}obj=obj[key]}if(overwrite||obj[path[i]]==null){obj[path[i]]=val}}function compatLayoutProperties(option){each(LAYOUT_PROPERTIES,function(prop){if(prop[0] in option&&!(prop[1] in option)){option[prop[1]]=option[prop[0]]}})}var LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]];var COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"];var COMPATITABLE_SERIES=["bar","boxplot","candlestick","chord","effectScatter","funnel","gauge","lines","graph","heatmap","line","map","parallel","pie","radar","sankey","scatter","treemap"];var each=zrUtil.each;module.exports=function(option,isTheme){compatStyle(option,isTheme);var series=option.series;each(zrUtil.isArray(series)?series:[series],function(seriesOpt){if(!zrUtil.isObject(seriesOpt)){return}var seriesType=seriesOpt.type;if(seriesType==="pie"||seriesType==="gauge"){if(seriesOpt.clockWise!=null){seriesOpt.clockwise=seriesOpt.clockWise}}if(seriesType==="gauge"){var pointerColor=get(seriesOpt,"pointer.color");pointerColor!=null&&set(seriesOpt,"itemStyle.normal.color",pointerColor)}for(var i=0;i<COMPATITABLE_SERIES.length;i++){if(COMPATITABLE_SERIES[i]===seriesOpt.type){compatLayoutProperties(seriesOpt);break}}});if(option.dataRange){option.visualMap=option.dataRange}each(COMPATITABLE_COMPONENTS,function(componentName){var options=option[componentName];if(options){if(!zrUtil.isArray(options)){options=[options]}each(options,function(option){compatLayoutProperties(option)})}})}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var modelUtil=__webpack_require__(5);var each=zrUtil.each;var isObject=zrUtil.isObject;var POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function compatItemStyle(opt){var itemStyleOpt=opt&&opt.itemStyle;if(!itemStyleOpt){return}for(var i=0,len=POSSIBLE_STYLES.length;i<len;i++){var styleName=POSSIBLE_STYLES[i];var normalItemStyleOpt=itemStyleOpt.normal;var emphasisItemStyleOpt=itemStyleOpt.emphasis;if(normalItemStyleOpt&&normalItemStyleOpt[styleName]){opt[styleName]=opt[styleName]||{};if(!opt[styleName].normal){opt[styleName].normal=normalItemStyleOpt[styleName]}else{zrUtil.merge(opt[styleName].normal,normalItemStyleOpt[styleName])}normalItemStyleOpt[styleName]=null}if(emphasisItemStyleOpt&&emphasisItemStyleOpt[styleName]){opt[styleName]=opt[styleName]||{};if(!opt[styleName].emphasis){opt[styleName].emphasis=emphasisItemStyleOpt[styleName]}else{zrUtil.merge(opt[styleName].emphasis,emphasisItemStyleOpt[styleName])}emphasisItemStyleOpt[styleName]=null}}}function compatTextStyle(opt,propName){var labelOptSingle=isObject(opt)&&opt[propName];var textStyle=isObject(labelOptSingle)&&labelOptSingle.textStyle;if(textStyle){for(var i=0,len=modelUtil.TEXT_STYLE_OPTIONS.length;i<len;i++){var propName=modelUtil.TEXT_STYLE_OPTIONS[i];
if(textStyle.hasOwnProperty(propName)){labelOptSingle[propName]=textStyle[propName]}}}}function compatLabelTextStyle(labelOpt){if(isObject(labelOpt)){compatTextStyle(labelOpt,"normal");compatTextStyle(labelOpt,"emphasis")}}function processSeries(seriesOpt){if(!isObject(seriesOpt)){return}compatItemStyle(seriesOpt);compatLabelTextStyle(seriesOpt.label);compatLabelTextStyle(seriesOpt.upperLabel);compatLabelTextStyle(seriesOpt.edgeLabel);var markPoint=seriesOpt.markPoint;compatItemStyle(markPoint);compatLabelTextStyle(markPoint&&markPoint.label);var markLine=seriesOpt.markLine;compatItemStyle(seriesOpt.markLine);compatLabelTextStyle(markLine&&markLine.label);var markArea=seriesOpt.markArea;compatLabelTextStyle(markArea&&markArea.label);compatTextStyle(seriesOpt,"axisLabel");compatTextStyle(seriesOpt,"title");compatTextStyle(seriesOpt,"detail");var data=seriesOpt.data;if(data){for(var i=0;i<data.length;i++){compatItemStyle(data[i]);compatLabelTextStyle(data[i]&&data[i].label)}}var markPoint=seriesOpt.markPoint;if(markPoint&&markPoint.data){var mpData=markPoint.data;for(var i=0;i<mpData.length;i++){compatItemStyle(mpData[i]);compatLabelTextStyle(mpData[i]&&mpData[i].label)}}var markLine=seriesOpt.markLine;if(markLine&&markLine.data){var mlData=markLine.data;for(var i=0;i<mlData.length;i++){if(zrUtil.isArray(mlData[i])){compatItemStyle(mlData[i][0]);compatLabelTextStyle(mlData[i][0]&&mlData[i][0].label);compatItemStyle(mlData[i][1]);compatLabelTextStyle(mlData[i][1]&&mlData[i][1].label)}else{compatItemStyle(mlData[i]);compatLabelTextStyle(mlData[i]&&mlData[i].label)}}}}function toArr(o){return zrUtil.isArray(o)?o:o?[o]:[]}function toObj(o){return(zrUtil.isArray(o)?o[0]:o)||{}}module.exports=function(option,isTheme){each(toArr(option.series),function(seriesOpt){isObject(seriesOpt)&&processSeries(seriesOpt)});var axes=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];isTheme&&axes.push("valueAxis","categoryAxis","logAxis","timeAxis");each(axes,function(axisName){each(toArr(option[axisName]),function(axisOpt){if(axisOpt){compatTextStyle(axisOpt,"axisLabel");compatTextStyle(axisOpt.axisPointer,"label")}})});each(toArr(option.parallel),function(parallelOpt){var parallelAxisDefault=parallelOpt&&parallelOpt.parallelAxisDefault;compatTextStyle(parallelAxisDefault,"axisLabel");compatTextStyle(parallelAxisDefault&&parallelAxisDefault.axisPointer,"label")});each(toArr(option.calendar),function(calendarOpt){compatTextStyle(calendarOpt,"dayLabel");compatTextStyle(calendarOpt,"monthLabel");compatTextStyle(calendarOpt,"yearLabel")});each(toArr(option.radar),function(radarOpt){compatTextStyle(radarOpt,"name")});each(toArr(option.geo),function(geoOpt){if(isObject(geoOpt)){compatLabelTextStyle(geoOpt.label);each(toArr(geoOpt.regions),function(regionObj){compatLabelTextStyle(regionObj.label)})}});compatLabelTextStyle(toObj(option.timeline).label);compatTextStyle(toObj(option.axisPointer),"label");compatTextStyle(toObj(option.tooltip).axisPointer,"label")}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var formatUtil=__webpack_require__(6);var classUtil=__webpack_require__(15);var modelUtil=__webpack_require__(5);var ComponentModel=__webpack_require__(72);var colorPaletteMixin=__webpack_require__(77);var env=__webpack_require__(2);var layout=__webpack_require__(74);var set=classUtil.set;var get=classUtil.get;var encodeHTML=formatUtil.encodeHTML;var addCommas=formatUtil.addCommas;var SeriesModel=ComponentModel.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendDataProvider:null,visualColorAccessPath:"itemStyle.normal.color",layoutMode:null,init:function(option,parentModel,ecModel,extraOpt){this.seriesIndex=this.componentIndex;this.mergeDefaultAndTheme(option,ecModel);var data=this.getInitialData(option,ecModel);if(true){zrUtil.assert(data,"getInitialData returned invalid data.")}set(this,"dataBeforeProcessed",data);this.restoreData()},mergeDefaultAndTheme:function(option,ecModel){var layoutMode=this.layoutMode;var inputPositionParams=layoutMode?layout.getLayoutParams(option):{};var themeSubType=this.subType;if(ComponentModel.hasClass(themeSubType)){themeSubType+="Series"}zrUtil.merge(option,ecModel.getTheme().get(this.subType));zrUtil.merge(option,this.getDefaultOption());modelUtil.defaultEmphasis(option.label,["show"]);this.fillDataTextStyle(option.data);if(layoutMode){layout.mergeLayoutParam(option,inputPositionParams,layoutMode)}},mergeOption:function(newSeriesOption,ecModel){newSeriesOption=zrUtil.merge(this.option,newSeriesOption,true);this.fillDataTextStyle(newSeriesOption.data);var layoutMode=this.layoutMode;if(layoutMode){layout.mergeLayoutParam(this.option,newSeriesOption,layoutMode)}var data=this.getInitialData(newSeriesOption,ecModel);if(data){set(this,"data",data);set(this,"dataBeforeProcessed",data.cloneShallow())}},fillDataTextStyle:function(data){if(data){var props=["show"];for(var i=0;i<data.length;i++){if(data[i]&&data[i].label){modelUtil.defaultEmphasis(data[i].label,props)
}}}},getInitialData:function(){},getData:function(dataType){var data=get(this,"data");return dataType==null?data:data.getLinkedData(dataType)},setData:function(data){set(this,"data",data)},getRawData:function(){return get(this,"dataBeforeProcessed")},coordDimToDataDim:function(coordDim){return modelUtil.coordDimToDataDim(this.getData(),coordDim)},dataDimToCoordDim:function(dataDim){return modelUtil.dataDimToCoordDim(this.getData(),dataDim)},getBaseAxis:function(){var coordSys=this.coordinateSystem;return coordSys&&coordSys.getBaseAxis&&coordSys.getBaseAxis()},formatTooltip:function(dataIndex,multipleSeries,dataType){function formatArrayValue(value){var vertially=zrUtil.reduce(value,function(vertially,val,idx){var dimItem=data.getDimensionInfo(idx);return vertially|=dimItem&&dimItem.tooltip!==false&&dimItem.tooltipName!=null},0);var result=[];var tooltipDims=modelUtil.otherDimToDataDim(data,"tooltip");tooltipDims.length?zrUtil.each(tooltipDims,function(dimIdx){setEachItem(data.get(dimIdx,dataIndex),dimIdx)}):zrUtil.each(value,setEachItem);function setEachItem(val,dimIdx){var dimInfo=data.getDimensionInfo(dimIdx);if(!dimInfo||dimInfo.otherDims.tooltip===false){return}var dimType=dimInfo.type;var valStr=(vertially?"- "+(dimInfo.tooltipName||dimInfo.name)+": ":"")+(dimType==="ordinal"?val+"":dimType==="time"?(multipleSeries?"":formatUtil.formatTime("yyyy/MM/dd hh:mm:ss",val)):addCommas(val));valStr&&result.push(encodeHTML(valStr))}return(vertially?"<br/>":"")+result.join(vertially?"<br/>":", ")}var data=get(this,"data");var value=this.getRawValue(dataIndex);var formattedValue=zrUtil.isArray(value)?formatArrayValue(value):encodeHTML(addCommas(value));var name=data.getName(dataIndex);var color=data.getItemVisual(dataIndex,"color");if(zrUtil.isObject(color)&&color.colorStops){color=(color.colorStops[0]||{}).color}color=color||"transparent";var colorEl=formatUtil.getTooltipMarker(color);var seriesName=this.name;if(seriesName==="\0-"){seriesName=""}seriesName=seriesName?encodeHTML(seriesName)+(!multipleSeries?"<br/>":": "):"";return !multipleSeries?seriesName+colorEl+(name?encodeHTML(name)+": "+formattedValue:formattedValue):colorEl+seriesName+formattedValue},isAnimationEnabled:function(){if(env.node){return false}var animationEnabled=this.getShallow("animation");if(animationEnabled){if(this.getData().count()>this.getShallow("animationThreshold")){animationEnabled=false}}return animationEnabled},restoreData:function(){set(this,"data",get(this,"dataBeforeProcessed").cloneShallow())},getColorFromPalette:function(name,scope){var ecModel=this.ecModel;var color=colorPaletteMixin.getColorFromPalette.call(this,name,scope);if(!color){color=ecModel.getColorFromPalette(name,scope)}return color},getAxisTooltipData:null,getTooltipPosition:null});zrUtil.mixin(SeriesModel,modelUtil.dataFormatMixin);zrUtil.mixin(SeriesModel,colorPaletteMixin);module.exports=SeriesModel}),(function(module,exports,__webpack_require__){var Group=__webpack_require__(51);var componentUtil=__webpack_require__(73);var clazzUtil=__webpack_require__(15);var Component=function(){this.group=new Group();this.uid=componentUtil.getUID("viewComponent")};Component.prototype={constructor:Component,init:function(ecModel,api){},render:function(componentModel,ecModel,api,payload){},dispose:function(){}};var componentProto=Component.prototype;componentProto.updateView=componentProto.updateLayout=componentProto.updateVisual=function(seriesModel,ecModel,api,payload){};clazzUtil.enableClassExtend(Component);clazzUtil.enableClassManagement(Component,{registerWhenExtend:true});module.exports=Component}),(function(module,exports,__webpack_require__){var Group=__webpack_require__(51);var componentUtil=__webpack_require__(73);var clazzUtil=__webpack_require__(15);var modelUtil=__webpack_require__(5);var zrUtil=__webpack_require__(4);function Chart(){this.group=new Group();this.uid=componentUtil.getUID("viewChart")}Chart.prototype={type:"chart",init:function(ecModel,api){},render:function(seriesModel,ecModel,api,payload){},highlight:function(seriesModel,ecModel,api,payload){toggleHighlight(seriesModel.getData(),payload,"emphasis")},downplay:function(seriesModel,ecModel,api,payload){toggleHighlight(seriesModel.getData(),payload,"normal")},remove:function(ecModel,api){this.group.removeAll()},dispose:function(){}};var chartProto=Chart.prototype;chartProto.updateView=chartProto.updateLayout=chartProto.updateVisual=function(seriesModel,ecModel,api,payload){this.render(seriesModel,ecModel,api,payload)};function elSetState(el,state){if(el){el.trigger(state);if(el.type==="group"){for(var i=0;i<el.childCount();i++){elSetState(el.childAt(i),state)}}}}function toggleHighlight(data,payload,state){var dataIndex=modelUtil.queryDataIndex(data,payload);if(dataIndex!=null){zrUtil.each(modelUtil.normalizeToArray(dataIndex),function(dataIdx){elSetState(data.getItemGraphicEl(dataIdx),state)})}else{data.eachItemGraphicEl(function(el){elSetState(el,state)})}}clazzUtil.enableClassExtend(Chart,["dispose"]);
clazzUtil.enableClassManagement(Chart,{registerWhenExtend:true});module.exports=Chart}),(function(module,exports){var lib={};var ORIGIN_METHOD="\0__throttleOriginMethod";var RATE="\0__throttleRate";var THROTTLE_TYPE="\0__throttleType";lib.throttle=function(fn,delay,debounce){var currCall;var lastCall=0;var lastExec=0;var timer=null;var diff;var scope;var args;var debounceNextCall;delay=delay||0;function exec(){lastExec=(new Date()).getTime();timer=null;fn.apply(scope,args||[])}var cb=function(){currCall=(new Date()).getTime();scope=this;args=arguments;var thisDelay=debounceNextCall||delay;var thisDebounce=debounceNextCall||debounce;debounceNextCall=null;diff=currCall-(thisDebounce?lastCall:lastExec)-thisDelay;clearTimeout(timer);if(thisDebounce){timer=setTimeout(exec,thisDelay)}else{if(diff>=0){exec()}else{timer=setTimeout(exec,-diff)}}lastCall=currCall};cb.clear=function(){if(timer){clearTimeout(timer);timer=null}};cb.debounceNextCall=function(debounceDelay){debounceNextCall=debounceDelay};return cb};lib.createOrUpdate=function(obj,fnAttr,rate,throttleType){var fn=obj[fnAttr];if(!fn){return}var originFn=fn[ORIGIN_METHOD]||fn;var lastThrottleType=fn[THROTTLE_TYPE];var lastRate=fn[RATE];if(lastRate!==rate||lastThrottleType!==throttleType){if(rate==null||!throttleType){return(obj[fnAttr]=originFn)}fn=obj[fnAttr]=lib.throttle(originFn,rate,throttleType==="debounce");fn[ORIGIN_METHOD]=originFn;fn[THROTTLE_TYPE]=throttleType;fn[RATE]=rate}return fn};lib.clear=function(obj,fnAttr){var fn=obj[fnAttr];if(fn&&fn[ORIGIN_METHOD]){obj[fnAttr]=fn[ORIGIN_METHOD]}};module.exports=lib}),(function(module,exports,__webpack_require__){
/*!
	 * ZRender, a high performance 2d drawing library.
	 *
	 * Copyright (c) 2013, Baidu Inc.
	 * All rights reserved.
	 *
	 * LICENSE
	 * https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
	 */
var guid=__webpack_require__(26);var env=__webpack_require__(2);var zrUtil=__webpack_require__(4);var Handler=__webpack_require__(88);var Storage=__webpack_require__(90);var Animation=__webpack_require__(92);var HandlerProxy=__webpack_require__(95);var useVML=!env.canvasSupported;var painterCtors={canvas:__webpack_require__(97)};var instances={};var zrender={};zrender.version="3.6.2";zrender.init=function(dom,opts){var zr=new ZRender(guid(),dom,opts);instances[zr.id]=zr;return zr};zrender.dispose=function(zr){if(zr){zr.dispose()}else{for(var key in instances){if(instances.hasOwnProperty(key)){instances[key].dispose()}}instances={}}return zrender};zrender.getInstance=function(id){return instances[id]};zrender.registerPainter=function(name,Ctor){painterCtors[name]=Ctor};function delInstance(id){delete instances[id]}var ZRender=function(id,dom,opts){opts=opts||{};this.dom=dom;this.id=id;var self=this;var storage=new Storage();var rendererType=opts.renderer;if(useVML){if(!painterCtors.vml){throw new Error("You need to require 'zrender/vml/vml' to support IE8")}rendererType="vml"}else{if(!rendererType||!painterCtors[rendererType]){rendererType="canvas"}}var painter=new painterCtors[rendererType](dom,storage,opts);this.storage=storage;this.painter=painter;var handerProxy=!env.node?new HandlerProxy(painter.getViewportRoot()):null;this.handler=new Handler(storage,painter,handerProxy,painter.root);this.animation=new Animation({stage:{update:zrUtil.bind(this.flush,this)}});this.animation.start();this._needsRefresh;var oldDelFromStorage=storage.delFromStorage;var oldAddToStorage=storage.addToStorage;storage.delFromStorage=function(el){oldDelFromStorage.call(storage,el);el&&el.removeSelfFromZr(self)};storage.addToStorage=function(el){oldAddToStorage.call(storage,el);el.addSelfToZr(self)}};ZRender.prototype={constructor:ZRender,getId:function(){return this.id},add:function(el){this.storage.addRoot(el);this._needsRefresh=true},remove:function(el){this.storage.delRoot(el);this._needsRefresh=true},configLayer:function(zLevel,config){this.painter.configLayer(zLevel,config);this._needsRefresh=true},refreshImmediately:function(){this._needsRefresh=false;this.painter.refresh();this._needsRefresh=false},refresh:function(){this._needsRefresh=true},flush:function(){if(this._needsRefresh){this.refreshImmediately()}if(this._needsRefreshHover){this.refreshHoverImmediately()}},addHover:function(el,style){if(this.painter.addHover){this.painter.addHover(el,style);this.refreshHover()}},removeHover:function(el){if(this.painter.removeHover){this.painter.removeHover(el);this.refreshHover()}},clearHover:function(){if(this.painter.clearHover){this.painter.clearHover();this.refreshHover()}},refreshHover:function(){this._needsRefreshHover=true},refreshHoverImmediately:function(){this._needsRefreshHover=false;this.painter.refreshHover&&this.painter.refreshHover()},resize:function(opts){opts=opts||{};this.painter.resize(opts.width,opts.height);this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(e,dpr){return this.painter.pathToImage(e,dpr)
},setCursorStyle:function(cursorStyle){this.handler.setCursorStyle(cursorStyle)},findHover:function(x,y){return this.handler.findHover(x,y)},on:function(eventName,eventHandler,context){this.handler.on(eventName,eventHandler,context)},off:function(eventName,eventHandler){this.handler.off(eventName,eventHandler)},trigger:function(eventName,event){this.handler.trigger(eventName,event)},clear:function(){this.storage.delRoot();this.painter.clear()},dispose:function(){this.animation.stop();this.clear();this.storage.dispose();this.painter.dispose();this.handler.dispose();this.animation=this.storage=this.painter=this.handler=null;delInstance(this.id)}};module.exports=zrender}),(function(module,exports,__webpack_require__){var util=__webpack_require__(4);var vec2=__webpack_require__(10);var Draggable=__webpack_require__(89);var Eventful=__webpack_require__(27);var SILENT="silent";function makeEventPacket(eveType,targetInfo,event){return{type:eveType,event:event,target:targetInfo.target,topTarget:targetInfo.topTarget,cancelBubble:false,offsetX:event.zrX,offsetY:event.zrY,gestureEvent:event.gestureEvent,pinchX:event.pinchX,pinchY:event.pinchY,pinchScale:event.pinchScale,wheelDelta:event.zrDelta,zrByTouch:event.zrByTouch,which:event.which}}function EmptyProxy(){}EmptyProxy.prototype.dispose=function(){};var handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];var Handler=function(storage,painter,proxy,painterRoot){Eventful.call(this);this.storage=storage;this.painter=painter;this.painterRoot=painterRoot;proxy=proxy||new EmptyProxy();this.proxy=proxy;proxy.handler=this;this._hovered={};this._lastTouchMoment;this._lastX;this._lastY;Draggable.call(this);util.each(handlerNames,function(name){proxy.on&&proxy.on(name,this[name],this)},this)};Handler.prototype={constructor:Handler,mousemove:function(event){var x=event.zrX;var y=event.zrY;var lastHovered=this._hovered;var lastHoveredTarget=lastHovered.target;if(lastHoveredTarget&&!lastHoveredTarget.__zr){lastHovered=this.findHover(lastHovered.x,lastHovered.y);lastHoveredTarget=lastHovered.target}var hovered=this._hovered=this.findHover(x,y);var hoveredTarget=hovered.target;var proxy=this.proxy;proxy.setCursor&&proxy.setCursor(hoveredTarget?hoveredTarget.cursor:"default");if(lastHoveredTarget&&hoveredTarget!==lastHoveredTarget){this.dispatchToElement(lastHovered,"mouseout",event)}this.dispatchToElement(hovered,"mousemove",event);if(hoveredTarget&&hoveredTarget!==lastHoveredTarget){this.dispatchToElement(hovered,"mouseover",event)}},mouseout:function(event){this.dispatchToElement(this._hovered,"mouseout",event);var element=event.toElement||event.relatedTarget;var innerDom;do{element=element&&element.parentNode}while(element&&element.nodeType!=9&&!(innerDom=element===this.painterRoot));!innerDom&&this.trigger("globalout",{event:event})},resize:function(event){this._hovered={}},dispatch:function(eventName,eventArgs){var handler=this[eventName];handler&&handler.call(this,eventArgs)},dispose:function(){this.proxy.dispose();this.storage=this.proxy=this.painter=null},setCursorStyle:function(cursorStyle){var proxy=this.proxy;proxy.setCursor&&proxy.setCursor(cursorStyle)},dispatchToElement:function(targetInfo,eventName,event){targetInfo=targetInfo||{};var el=targetInfo.target;if(el&&el.silent){return}var eventHandler="on"+eventName;var eventPacket=makeEventPacket(eventName,targetInfo,event);while(el){el[eventHandler]&&(eventPacket.cancelBubble=el[eventHandler].call(el,eventPacket));el.trigger(eventName,eventPacket);el=el.parent;if(eventPacket.cancelBubble){break}}if(!eventPacket.cancelBubble){this.trigger(eventName,eventPacket);this.painter&&this.painter.eachOtherLayer(function(layer){if(typeof(layer[eventHandler])=="function"){layer[eventHandler].call(layer,eventPacket)}if(layer.trigger){layer.trigger(eventName,eventPacket)}})}},findHover:function(x,y,exclude){var list=this.storage.getDisplayList();var out={x:x,y:y};for(var i=list.length-1;i>=0;i--){var hoverCheckResult;if(list[i]!==exclude&&!list[i].ignore&&(hoverCheckResult=isHover(list[i],x,y))){!out.topTarget&&(out.topTarget=list[i]);if(hoverCheckResult!==SILENT){out.target=list[i];break}}}return out}};util.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(name){Handler.prototype[name]=function(event){var hovered=this.findHover(event.zrX,event.zrY);var hoveredTarget=hovered.target;if(name==="mousedown"){this._downEl=hoveredTarget;this._downPoint=[event.zrX,event.zrY];this._upEl=hoveredTarget}else{if(name==="mosueup"){this._upEl=hoveredTarget}else{if(name==="click"){if(this._downEl!==this._upEl||!this._downPoint||vec2.dist(this._downPoint,[event.zrX,event.zrY])>4){return}this._downPoint=null}}}this.dispatchToElement(hovered,name,event)}});function isHover(displayable,x,y){if(displayable[displayable.rectHover?"rectContain":"contain"](x,y)){var el=displayable;var isSilent;while(el){if(el.clipPath&&!el.clipPath.contain(x,y)){return false}if(el.silent){isSilent=true
}el=el.parent}return isSilent?SILENT:true}return false}util.mixin(Handler,Eventful);util.mixin(Handler,Draggable);module.exports=Handler}),(function(module,exports){function Draggable(){this.on("mousedown",this._dragStart,this);this.on("mousemove",this._drag,this);this.on("mouseup",this._dragEnd,this);this.on("globalout",this._dragEnd,this)}Draggable.prototype={constructor:Draggable,_dragStart:function(e){var draggingTarget=e.target;if(draggingTarget&&draggingTarget.draggable){this._draggingTarget=draggingTarget;draggingTarget.dragging=true;this._x=e.offsetX;this._y=e.offsetY;this.dispatchToElement(param(draggingTarget,e),"dragstart",e.event)}},_drag:function(e){var draggingTarget=this._draggingTarget;if(draggingTarget){var x=e.offsetX;var y=e.offsetY;var dx=x-this._x;var dy=y-this._y;this._x=x;this._y=y;draggingTarget.drift(dx,dy,e);this.dispatchToElement(param(draggingTarget,e),"drag",e.event);var dropTarget=this.findHover(x,y,draggingTarget).target;var lastDropTarget=this._dropTarget;this._dropTarget=dropTarget;if(draggingTarget!==dropTarget){if(lastDropTarget&&dropTarget!==lastDropTarget){this.dispatchToElement(param(lastDropTarget,e),"dragleave",e.event)}if(dropTarget&&dropTarget!==lastDropTarget){this.dispatchToElement(param(dropTarget,e),"dragenter",e.event)}}}},_dragEnd:function(e){var draggingTarget=this._draggingTarget;if(draggingTarget){draggingTarget.dragging=false}this.dispatchToElement(param(draggingTarget,e),"dragend",e.event);if(this._dropTarget){this.dispatchToElement(param(this._dropTarget,e),"drop",e.event)}this._draggingTarget=null;this._dropTarget=null}};function param(target,e){return{target:target,topTarget:e&&e.topTarget}}module.exports=Draggable}),(function(module,exports,__webpack_require__){var util=__webpack_require__(4);var env=__webpack_require__(2);var Group=__webpack_require__(51);var timsort=__webpack_require__(91);function shapeCompareFunc(a,b){if(a.zlevel===b.zlevel){if(a.z===b.z){return a.z2-b.z2}return a.z-b.z}return a.zlevel-b.zlevel}var Storage=function(){this._roots=[];this._displayList=[];this._displayListLen=0};Storage.prototype={constructor:Storage,traverse:function(cb,context){for(var i=0;i<this._roots.length;i++){this._roots[i].traverse(cb,context)}},getDisplayList:function(update,includeIgnore){includeIgnore=includeIgnore||false;if(update){this.updateDisplayList(includeIgnore)}return this._displayList},updateDisplayList:function(includeIgnore){this._displayListLen=0;var roots=this._roots;var displayList=this._displayList;for(var i=0,len=roots.length;i<len;i++){this._updateAndAddDisplayable(roots[i],null,includeIgnore)}displayList.length=this._displayListLen;env.canvasSupported&&timsort(displayList,shapeCompareFunc)},_updateAndAddDisplayable:function(el,clipPaths,includeIgnore){if(el.ignore&&!includeIgnore){return}el.beforeUpdate();if(el.__dirty){el.update()}el.afterUpdate();var userSetClipPath=el.clipPath;if(userSetClipPath){if(clipPaths){clipPaths=clipPaths.slice()}else{clipPaths=[]}var currentClipPath=userSetClipPath;var parentClipPath=el;while(currentClipPath){currentClipPath.parent=parentClipPath;currentClipPath.updateTransform();clipPaths.push(currentClipPath);parentClipPath=currentClipPath;currentClipPath=currentClipPath.clipPath}}if(el.isGroup){var children=el._children;for(var i=0;i<children.length;i++){var child=children[i];if(el.__dirty){child.__dirty=true}this._updateAndAddDisplayable(child,clipPaths,includeIgnore)}el.__dirty=false}else{el.__clipPaths=clipPaths;this._displayList[this._displayListLen++]=el}},addRoot:function(el){if(el.__storage===this){return}if(el instanceof Group){el.addChildrenToStorage(this)}this.addToStorage(el);this._roots.push(el)},delRoot:function(el){if(el==null){for(var i=0;i<this._roots.length;i++){var root=this._roots[i];if(root instanceof Group){root.delChildrenFromStorage(this)}}this._roots=[];this._displayList=[];this._displayListLen=0;return}if(el instanceof Array){for(var i=0,l=el.length;i<l;i++){this.delRoot(el[i])}return}var idx=util.indexOf(this._roots,el);if(idx>=0){this.delFromStorage(el);this._roots.splice(idx,1);if(el instanceof Group){el.delChildrenFromStorage(this)}}},addToStorage:function(el){el.__storage=this;el.dirty(false);return this},delFromStorage:function(el){if(el){el.__storage=null}return this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:shapeCompareFunc};module.exports=Storage}),(function(module,exports){var DEFAULT_MIN_MERGE=32;var DEFAULT_MIN_GALLOPING=7;var DEFAULT_TMP_STORAGE_LENGTH=256;function minRunLength(n){var r=0;while(n>=DEFAULT_MIN_MERGE){r|=n&1;n>>=1}return n+r}function makeAscendingRun(array,lo,hi,compare){var runHi=lo+1;if(runHi===hi){return 1}if(compare(array[runHi++],array[lo])<0){while(runHi<hi&&compare(array[runHi],array[runHi-1])<0){runHi++}reverseRun(array,lo,runHi)}else{while(runHi<hi&&compare(array[runHi],array[runHi-1])>=0){runHi++}}return runHi-lo}function reverseRun(array,lo,hi){hi--;while(lo<hi){var t=array[lo];array[lo++]=array[hi];array[hi--]=t
}}function binaryInsertionSort(array,lo,hi,start,compare){if(start===lo){start++}for(;start<hi;start++){var pivot=array[start];var left=lo;var right=start;var mid;while(left<right){mid=left+right>>>1;if(compare(pivot,array[mid])<0){right=mid}else{left=mid+1}}var n=start-left;switch(n){case 3:array[left+3]=array[left+2];case 2:array[left+2]=array[left+1];case 1:array[left+1]=array[left];break;default:while(n>0){array[left+n]=array[left+n-1];n--}}array[left]=pivot}}function gallopLeft(value,array,start,length,hint,compare){var lastOffset=0;var maxOffset=0;var offset=1;if(compare(value,array[start+hint])>0){maxOffset=length-hint;while(offset<maxOffset&&compare(value,array[start+hint+offset])>0){lastOffset=offset;offset=(offset<<1)+1;if(offset<=0){offset=maxOffset}}if(offset>maxOffset){offset=maxOffset}lastOffset+=hint;offset+=hint}else{maxOffset=hint+1;while(offset<maxOffset&&compare(value,array[start+hint-offset])<=0){lastOffset=offset;offset=(offset<<1)+1;if(offset<=0){offset=maxOffset}}if(offset>maxOffset){offset=maxOffset}var tmp=lastOffset;lastOffset=hint-offset;offset=hint-tmp}lastOffset++;while(lastOffset<offset){var m=lastOffset+(offset-lastOffset>>>1);if(compare(value,array[start+m])>0){lastOffset=m+1}else{offset=m}}return offset}function gallopRight(value,array,start,length,hint,compare){var lastOffset=0;var maxOffset=0;var offset=1;if(compare(value,array[start+hint])<0){maxOffset=hint+1;while(offset<maxOffset&&compare(value,array[start+hint-offset])<0){lastOffset=offset;offset=(offset<<1)+1;if(offset<=0){offset=maxOffset}}if(offset>maxOffset){offset=maxOffset}var tmp=lastOffset;lastOffset=hint-offset;offset=hint-tmp}else{maxOffset=length-hint;while(offset<maxOffset&&compare(value,array[start+hint+offset])>=0){lastOffset=offset;offset=(offset<<1)+1;if(offset<=0){offset=maxOffset}}if(offset>maxOffset){offset=maxOffset}lastOffset+=hint;offset+=hint}lastOffset++;while(lastOffset<offset){var m=lastOffset+(offset-lastOffset>>>1);if(compare(value,array[start+m])<0){offset=m}else{lastOffset=m+1}}return offset}function TimSort(array,compare){var minGallop=DEFAULT_MIN_GALLOPING;var length=0;var tmpStorageLength=DEFAULT_TMP_STORAGE_LENGTH;var stackLength=0;var runStart;var runLength;var stackSize=0;length=array.length;if(length<2*DEFAULT_TMP_STORAGE_LENGTH){tmpStorageLength=length>>>1}var tmp=[];stackLength=length<120?5:length<1542?10:length<119151?19:40;runStart=[];runLength=[];function pushRun(_runStart,_runLength){runStart[stackSize]=_runStart;runLength[stackSize]=_runLength;stackSize+=1}function mergeRuns(){while(stackSize>1){var n=stackSize-2;if(n>=1&&runLength[n-1]<=runLength[n]+runLength[n+1]||n>=2&&runLength[n-2]<=runLength[n]+runLength[n-1]){if(runLength[n-1]<runLength[n+1]){n--}}else{if(runLength[n]>runLength[n+1]){break}}mergeAt(n)}}function forceMergeRuns(){while(stackSize>1){var n=stackSize-2;if(n>0&&runLength[n-1]<runLength[n+1]){n--}mergeAt(n)}}function mergeAt(i){var start1=runStart[i];var length1=runLength[i];var start2=runStart[i+1];var length2=runLength[i+1];runLength[i]=length1+length2;if(i===stackSize-3){runStart[i+1]=runStart[i+2];runLength[i+1]=runLength[i+2]}stackSize--;var k=gallopRight(array[start2],array,start1,length1,0,compare);start1+=k;length1-=k;if(length1===0){return}length2=gallopLeft(array[start1+length1-1],array,start2,length2,length2-1,compare);if(length2===0){return}if(length1<=length2){mergeLow(start1,length1,start2,length2)}else{mergeHigh(start1,length1,start2,length2)}}function mergeLow(start1,length1,start2,length2){var i=0;for(i=0;i<length1;i++){tmp[i]=array[start1+i]}var cursor1=0;var cursor2=start2;var dest=start1;array[dest++]=array[cursor2++];if(--length2===0){for(i=0;i<length1;i++){array[dest+i]=tmp[cursor1+i]}return}if(length1===1){for(i=0;i<length2;i++){array[dest+i]=array[cursor2+i]}array[dest+length2]=tmp[cursor1];return}var _minGallop=minGallop;var count1,count2,exit;while(1){count1=0;count2=0;exit=false;do{if(compare(array[cursor2],tmp[cursor1])<0){array[dest++]=array[cursor2++];count2++;count1=0;if(--length2===0){exit=true;break}}else{array[dest++]=tmp[cursor1++];count1++;count2=0;if(--length1===1){exit=true;break}}}while((count1|count2)<_minGallop);if(exit){break}do{count1=gallopRight(array[cursor2],tmp,cursor1,length1,0,compare);if(count1!==0){for(i=0;i<count1;i++){array[dest+i]=tmp[cursor1+i]}dest+=count1;cursor1+=count1;length1-=count1;if(length1<=1){exit=true;break}}array[dest++]=array[cursor2++];if(--length2===0){exit=true;break}count2=gallopLeft(tmp[cursor1],array,cursor2,length2,0,compare);if(count2!==0){for(i=0;i<count2;i++){array[dest+i]=array[cursor2+i]}dest+=count2;cursor2+=count2;length2-=count2;if(length2===0){exit=true;break}}array[dest++]=tmp[cursor1++];if(--length1===1){exit=true;break}_minGallop--}while(count1>=DEFAULT_MIN_GALLOPING||count2>=DEFAULT_MIN_GALLOPING);if(exit){break}if(_minGallop<0){_minGallop=0}_minGallop+=2}minGallop=_minGallop;minGallop<1&&(minGallop=1);if(length1===1){for(i=0;i<length2;i++){array[dest+i]=array[cursor2+i]}array[dest+length2]=tmp[cursor1]
}else{if(length1===0){throw new Error()}else{for(i=0;i<length1;i++){array[dest+i]=tmp[cursor1+i]}}}}function mergeHigh(start1,length1,start2,length2){var i=0;for(i=0;i<length2;i++){tmp[i]=array[start2+i]}var cursor1=start1+length1-1;var cursor2=length2-1;var dest=start2+length2-1;var customCursor=0;var customDest=0;array[dest--]=array[cursor1--];if(--length1===0){customCursor=dest-(length2-1);for(i=0;i<length2;i++){array[customCursor+i]=tmp[i]}return}if(length2===1){dest-=length1;cursor1-=length1;customDest=dest+1;customCursor=cursor1+1;for(i=length1-1;i>=0;i--){array[customDest+i]=array[customCursor+i]}array[dest]=tmp[cursor2];return}var _minGallop=minGallop;while(true){var count1=0;var count2=0;var exit=false;do{if(compare(tmp[cursor2],array[cursor1])<0){array[dest--]=array[cursor1--];count1++;count2=0;if(--length1===0){exit=true;break}}else{array[dest--]=tmp[cursor2--];count2++;count1=0;if(--length2===1){exit=true;break}}}while((count1|count2)<_minGallop);if(exit){break}do{count1=length1-gallopRight(tmp[cursor2],array,start1,length1,length1-1,compare);if(count1!==0){dest-=count1;cursor1-=count1;length1-=count1;customDest=dest+1;customCursor=cursor1+1;for(i=count1-1;i>=0;i--){array[customDest+i]=array[customCursor+i]}if(length1===0){exit=true;break}}array[dest--]=tmp[cursor2--];if(--length2===1){exit=true;break}count2=length2-gallopLeft(array[cursor1],tmp,0,length2,length2-1,compare);if(count2!==0){dest-=count2;cursor2-=count2;length2-=count2;customDest=dest+1;customCursor=cursor2+1;for(i=0;i<count2;i++){array[customDest+i]=tmp[customCursor+i]}if(length2<=1){exit=true;break}}array[dest--]=array[cursor1--];if(--length1===0){exit=true;break}_minGallop--}while(count1>=DEFAULT_MIN_GALLOPING||count2>=DEFAULT_MIN_GALLOPING);if(exit){break}if(_minGallop<0){_minGallop=0}_minGallop+=2}minGallop=_minGallop;if(minGallop<1){minGallop=1}if(length2===1){dest-=length1;cursor1-=length1;customDest=dest+1;customCursor=cursor1+1;for(i=length1-1;i>=0;i--){array[customDest+i]=array[customCursor+i]}array[dest]=tmp[cursor2]}else{if(length2===0){throw new Error()}else{customCursor=dest-(length2-1);for(i=0;i<length2;i++){array[customCursor+i]=tmp[i]}}}}this.mergeRuns=mergeRuns;this.forceMergeRuns=forceMergeRuns;this.pushRun=pushRun}function sort(array,compare,lo,hi){if(!lo){lo=0}if(!hi){hi=array.length}var remaining=hi-lo;if(remaining<2){return}var runLength=0;if(remaining<DEFAULT_MIN_MERGE){runLength=makeAscendingRun(array,lo,hi,compare);binaryInsertionSort(array,lo,hi,lo+runLength,compare);return}var ts=new TimSort(array,compare);var minRun=minRunLength(remaining);do{runLength=makeAscendingRun(array,lo,hi,compare);if(runLength<minRun){var force=remaining;if(force>minRun){force=minRun}binaryInsertionSort(array,lo,lo+force,lo+runLength,compare);runLength=force}ts.pushRun(lo,runLength);ts.mergeRuns();remaining-=runLength;lo+=runLength}while(remaining!==0);ts.forceMergeRuns()}module.exports=sort}),(function(module,exports,__webpack_require__){var util=__webpack_require__(4);var Dispatcher=__webpack_require__(93).Dispatcher;var requestAnimationFrame=__webpack_require__(94);var Animator=__webpack_require__(30);var Animation=function(options){options=options||{};this.stage=options.stage||{};this.onframe=options.onframe||function(){};this._clips=[];this._running=false;this._time;this._pausedTime;this._pauseStart;this._paused=false;Dispatcher.call(this)};Animation.prototype={constructor:Animation,addClip:function(clip){this._clips.push(clip)},addAnimator:function(animator){animator.animation=this;var clips=animator.getClips();for(var i=0;i<clips.length;i++){this.addClip(clips[i])}},removeClip:function(clip){var idx=util.indexOf(this._clips,clip);if(idx>=0){this._clips.splice(idx,1)}},removeAnimator:function(animator){var clips=animator.getClips();for(var i=0;i<clips.length;i++){this.removeClip(clips[i])}animator.animation=null},_update:function(){var time=new Date().getTime()-this._pausedTime;var delta=time-this._time;var clips=this._clips;var len=clips.length;var deferredEvents=[];var deferredClips=[];for(var i=0;i<len;i++){var clip=clips[i];var e=clip.step(time,delta);if(e){deferredEvents.push(e);deferredClips.push(clip)}}for(var i=0;i<len;){if(clips[i]._needsRemove){clips[i]=clips[len-1];clips.pop();len--}else{i++}}len=deferredEvents.length;for(var i=0;i<len;i++){deferredClips[i].fire(deferredEvents[i])}this._time=time;this.onframe(delta);this.trigger("frame",delta);if(this.stage.update){this.stage.update()}},_startLoop:function(){var self=this;this._running=true;function step(){if(self._running){requestAnimationFrame(step);!self._paused&&self._update()}}requestAnimationFrame(step)},start:function(){this._time=new Date().getTime();this._pausedTime=0;this._startLoop()},stop:function(){this._running=false},pause:function(){if(!this._paused){this._pauseStart=new Date().getTime();this._paused=true}},resume:function(){if(this._paused){this._pausedTime+=(new Date().getTime())-this._pauseStart;this._paused=false}},clear:function(){this._clips=[]
},animate:function(target,options){options=options||{};var animator=new Animator(target,options.loop,options.getter,options.setter);this.addAnimator(animator);return animator}};util.mixin(Animation,Dispatcher);module.exports=Animation}),(function(module,exports,__webpack_require__){var Eventful=__webpack_require__(27);var env=__webpack_require__(2);var isDomLevel2=(typeof window!=="undefined")&&!!window.addEventListener;var MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/;function getBoundingClientRect(el){return el.getBoundingClientRect?el.getBoundingClientRect():{left:0,top:0}}function clientToLocal(el,e,out,calculate){out=out||{};if(calculate||!env.canvasSupported){defaultGetZrXY(el,e,out)}else{if(env.browser.firefox&&e.layerX!=null&&e.layerX!==e.offsetX){out.zrX=e.layerX;out.zrY=e.layerY}else{if(e.offsetX!=null){out.zrX=e.offsetX;out.zrY=e.offsetY}else{defaultGetZrXY(el,e,out)}}}return out}function defaultGetZrXY(el,e,out){var box=getBoundingClientRect(el);out.zrX=e.clientX-box.left;out.zrY=e.clientY-box.top}function normalizeEvent(el,e,calculate){e=e||window.event;if(e.zrX!=null){return e}var eventType=e.type;var isTouch=eventType&&eventType.indexOf("touch")>=0;if(!isTouch){clientToLocal(el,e,e,calculate);e.zrDelta=(e.wheelDelta)?e.wheelDelta/120:-(e.detail||0)/3}else{var touch=eventType!="touchend"?e.targetTouches[0]:e.changedTouches[0];touch&&clientToLocal(el,touch,e,calculate)}var button=e.button;if(e.which==null&&button!==undefined&&MOUSE_EVENT_REG.test(e.type)){e.which=(button&1?1:(button&2?3:(button&4?2:0)))}return e}function addEventListener(el,name,handler){if(isDomLevel2){el.addEventListener(name,handler)}else{el.attachEvent("on"+name,handler)}}function removeEventListener(el,name,handler){if(isDomLevel2){el.removeEventListener(name,handler)}else{el.detachEvent("on"+name,handler)}}var stop=isDomLevel2?function(e){e.preventDefault();e.stopPropagation();e.cancelBubble=true}:function(e){e.returnValue=false;e.cancelBubble=true};function notLeftMouse(e){return e.which>1}module.exports={clientToLocal:clientToLocal,normalizeEvent:normalizeEvent,addEventListener:addEventListener,removeEventListener:removeEventListener,notLeftMouse:notLeftMouse,stop:stop,Dispatcher:Eventful}}),(function(module,exports){module.exports=(typeof window!=="undefined"&&((window.requestAnimationFrame&&window.requestAnimationFrame.bind(window))||(window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window))||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame))||function(func){setTimeout(func,16)}}),(function(module,exports,__webpack_require__){var eventTool=__webpack_require__(93);var zrUtil=__webpack_require__(4);var Eventful=__webpack_require__(27);var env=__webpack_require__(2);var GestureMgr=__webpack_require__(96);var addEventListener=eventTool.addEventListener;var removeEventListener=eventTool.removeEventListener;var normalizeEvent=eventTool.normalizeEvent;var TOUCH_CLICK_DELAY=300;var mouseHandlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];var touchHandlerNames=["touchstart","touchend","touchmove"];var pointerEventNames={pointerdown:1,pointerup:1,pointermove:1,pointerout:1};var pointerHandlerNames=zrUtil.map(mouseHandlerNames,function(name){var nm=name.replace("mouse","pointer");return pointerEventNames[nm]?nm:name});function eventNameFix(name){return(name==="mousewheel"&&env.browser.firefox)?"DOMMouseScroll":name}function processGesture(proxy,event,stage){var gestureMgr=proxy._gestureMgr;stage==="start"&&gestureMgr.clear();var gestureInfo=gestureMgr.recognize(event,proxy.handler.findHover(event.zrX,event.zrY,null).target,proxy.dom);stage==="end"&&gestureMgr.clear();if(gestureInfo){var type=gestureInfo.type;event.gestureEvent=type;proxy.handler.dispatchToElement({target:gestureInfo.target},type,gestureInfo.event)}}function setTouchTimer(instance){instance._touching=true;clearTimeout(instance._touchTimer);instance._touchTimer=setTimeout(function(){instance._touching=false},700)}var domHandlers={mousemove:function(event){event=normalizeEvent(this.dom,event);this.trigger("mousemove",event)},mouseout:function(event){event=normalizeEvent(this.dom,event);var element=event.toElement||event.relatedTarget;if(element!=this.dom){while(element&&element.nodeType!=9){if(element===this.dom){return}element=element.parentNode}}this.trigger("mouseout",event)},touchstart:function(event){event=normalizeEvent(this.dom,event);event.zrByTouch=true;this._lastTouchMoment=new Date();processGesture(this,event,"start");domHandlers.mousemove.call(this,event);domHandlers.mousedown.call(this,event);setTouchTimer(this)},touchmove:function(event){event=normalizeEvent(this.dom,event);event.zrByTouch=true;processGesture(this,event,"change");domHandlers.mousemove.call(this,event);setTouchTimer(this)},touchend:function(event){event=normalizeEvent(this.dom,event);event.zrByTouch=true;processGesture(this,event,"end");domHandlers.mouseup.call(this,event);if(+new Date()-this._lastTouchMoment<TOUCH_CLICK_DELAY){domHandlers.click.call(this,event)
}setTouchTimer(this)},pointerdown:function(event){domHandlers.mousedown.call(this,event)},pointermove:function(event){if(!isPointerFromTouch(event)){domHandlers.mousemove.call(this,event)}},pointerup:function(event){domHandlers.mouseup.call(this,event)},pointerout:function(event){if(!isPointerFromTouch(event)){domHandlers.mouseout.call(this,event)}}};function isPointerFromTouch(event){var pointerType=event.pointerType;return pointerType==="pen"||pointerType==="touch"}zrUtil.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(name){domHandlers[name]=function(event){event=normalizeEvent(this.dom,event);this.trigger(name,event)}});function initDomHandler(instance){zrUtil.each(touchHandlerNames,function(name){instance._handlers[name]=zrUtil.bind(domHandlers[name],instance)});zrUtil.each(pointerHandlerNames,function(name){instance._handlers[name]=zrUtil.bind(domHandlers[name],instance)});zrUtil.each(mouseHandlerNames,function(name){instance._handlers[name]=makeMouseHandler(domHandlers[name],instance)});function makeMouseHandler(fn,instance){return function(){if(instance._touching){return}return fn.apply(instance,arguments)}}}function HandlerDomProxy(dom){Eventful.call(this);this.dom=dom;this._touching=false;this._touchTimer;this._gestureMgr=new GestureMgr();this._handlers={};initDomHandler(this);if(env.pointerEventsSupported){mountHandlers(pointerHandlerNames,this)}else{if(env.touchEventsSupported){mountHandlers(touchHandlerNames,this)}mountHandlers(mouseHandlerNames,this)}function mountHandlers(handlerNames,instance){zrUtil.each(handlerNames,function(name){addEventListener(dom,eventNameFix(name),instance._handlers[name])},instance)}}var handlerDomProxyProto=HandlerDomProxy.prototype;handlerDomProxyProto.dispose=function(){var handlerNames=mouseHandlerNames.concat(touchHandlerNames);for(var i=0;i<handlerNames.length;i++){var name=handlerNames[i];removeEventListener(this.dom,eventNameFix(name),this._handlers[name])}};handlerDomProxyProto.setCursor=function(cursorStyle){this.dom.style.cursor=cursorStyle||"default"};zrUtil.mixin(HandlerDomProxy,Eventful);module.exports=HandlerDomProxy}),(function(module,exports,__webpack_require__){var eventUtil=__webpack_require__(93);var GestureMgr=function(){this._track=[]};GestureMgr.prototype={constructor:GestureMgr,recognize:function(event,target,root){this._doTrack(event,target,root);return this._recognize(event)},clear:function(){this._track.length=0;return this},_doTrack:function(event,target,root){var touches=event.touches;if(!touches){return}var trackItem={points:[],touches:[],target:target,event:event};for(var i=0,len=touches.length;i<len;i++){var touch=touches[i];var pos=eventUtil.clientToLocal(root,touch,{});trackItem.points.push([pos.zrX,pos.zrY]);trackItem.touches.push(touch)}this._track.push(trackItem)},_recognize:function(event){for(var eventName in recognizers){if(recognizers.hasOwnProperty(eventName)){var gestureInfo=recognizers[eventName](this._track,event);if(gestureInfo){return gestureInfo}}}}};function dist(pointPair){var dx=pointPair[1][0]-pointPair[0][0];var dy=pointPair[1][1]-pointPair[0][1];return Math.sqrt(dx*dx+dy*dy)}function center(pointPair){return[(pointPair[0][0]+pointPair[1][0])/2,(pointPair[0][1]+pointPair[1][1])/2]}var recognizers={pinch:function(track,event){var trackLen=track.length;if(!trackLen){return}var pinchEnd=(track[trackLen-1]||{}).points;var pinchPre=(track[trackLen-2]||{}).points||pinchEnd;if(pinchPre&&pinchPre.length>1&&pinchEnd&&pinchEnd.length>1){var pinchScale=dist(pinchEnd)/dist(pinchPre);!isFinite(pinchScale)&&(pinchScale=1);event.pinchScale=pinchScale;var pinchCenter=center(pinchEnd);event.pinchX=pinchCenter[0];event.pinchY=pinchCenter[1];return{type:"pinch",target:track[0].target,event:event}}}};module.exports=GestureMgr}),(function(module,exports,__webpack_require__){var config=__webpack_require__(35);var util=__webpack_require__(4);var log=__webpack_require__(34);var BoundingRect=__webpack_require__(9);var timsort=__webpack_require__(91);var Layer=__webpack_require__(98);var requestAnimationFrame=__webpack_require__(94);var MAX_PROGRESSIVE_LAYER_NUMBER=5;function parseInt10(val){return parseInt(val,10)}function isLayerValid(layer){if(!layer){return false}if(layer.__builtin__){return true}if(typeof(layer.resize)!=="function"||typeof(layer.refresh)!=="function"){return false}return true}function preProcessLayer(layer){layer.__unusedCount++}function postProcessLayer(layer){if(layer.__unusedCount==1){layer.clear()}}var tmpRect=new BoundingRect(0,0,0,0);var viewRect=new BoundingRect(0,0,0,0);function isDisplayableCulled(el,width,height){tmpRect.copy(el.getBoundingRect());if(el.transform){tmpRect.applyTransform(el.transform)}viewRect.width=width;viewRect.height=height;return !tmpRect.intersect(viewRect)}function isClipPathChanged(clipPaths,prevClipPaths){if(clipPaths==prevClipPaths){return false}if(!clipPaths||!prevClipPaths||(clipPaths.length!==prevClipPaths.length)){return true}for(var i=0;i<clipPaths.length;
i++){if(clipPaths[i]!==prevClipPaths[i]){return true}}}function doClip(clipPaths,ctx){for(var i=0;i<clipPaths.length;i++){var clipPath=clipPaths[i];clipPath.setTransform(ctx);ctx.beginPath();clipPath.buildPath(ctx,clipPath.shape);ctx.clip();clipPath.restoreTransform(ctx)}}function createRoot(width,height){var domRoot=document.createElement("div");domRoot.style.cssText=["position:relative","overflow:hidden","width:"+width+"px","height:"+height+"px","padding:0","margin:0","border-width:0"].join(";")+";";return domRoot}var Painter=function(root,storage,opts){this.type="canvas";var singleCanvas=!root.nodeName||root.nodeName.toUpperCase()==="CANVAS";this._opts=opts=util.extend({},opts||{});this.dpr=opts.devicePixelRatio||config.devicePixelRatio;this._singleCanvas=singleCanvas;this.root=root;var rootStyle=root.style;if(rootStyle){rootStyle["-webkit-tap-highlight-color"]="transparent";rootStyle["-webkit-user-select"]=rootStyle["user-select"]=rootStyle["-webkit-touch-callout"]="none";root.innerHTML=""}this.storage=storage;var zlevelList=this._zlevelList=[];var layers=this._layers={};this._layerConfig={};if(!singleCanvas){this._width=this._getSize(0);this._height=this._getSize(1);var domRoot=this._domRoot=createRoot(this._width,this._height);root.appendChild(domRoot)}else{if(opts.width!=null){root.width=opts.width}if(opts.height!=null){root.height=opts.height}var width=root.width;var height=root.height;this._width=width;this._height=height;var mainLayer=new Layer(root,this,1);mainLayer.initContext();layers[0]=mainLayer;zlevelList.push(0);this._domRoot=root}this._progressiveLayers=[];this._hoverlayer;this._hoverElements=[]};Painter.prototype={constructor:Painter,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var viewportRoot=this.getViewportRoot();if(viewportRoot){return{offsetLeft:viewportRoot.offsetLeft||0,offsetTop:viewportRoot.offsetTop||0}}},refresh:function(paintAll){var list=this.storage.getDisplayList(true);var zlevelList=this._zlevelList;this._paintList(list,paintAll);for(var i=0;i<zlevelList.length;i++){var z=zlevelList[i];var layer=this._layers[z];if(!layer.__builtin__&&layer.refresh){layer.refresh()}}this.refreshHover();if(this._progressiveLayers.length){this._startProgessive()}return this},addHover:function(el,hoverStyle){if(el.__hoverMir){return}var elMirror=new el.constructor({style:el.style,shape:el.shape});elMirror.__from=el;el.__hoverMir=elMirror;elMirror.setStyle(hoverStyle);this._hoverElements.push(elMirror)},removeHover:function(el){var elMirror=el.__hoverMir;var hoverElements=this._hoverElements;var idx=util.indexOf(hoverElements,elMirror);if(idx>=0){hoverElements.splice(idx,1)}el.__hoverMir=null},clearHover:function(el){var hoverElements=this._hoverElements;for(var i=0;i<hoverElements.length;i++){var from=hoverElements[i].__from;if(from){from.__hoverMir=null}}hoverElements.length=0},refreshHover:function(){var hoverElements=this._hoverElements;var len=hoverElements.length;var hoverLayer=this._hoverlayer;hoverLayer&&hoverLayer.clear();if(!len){return}timsort(hoverElements,this.storage.displayableSortFunc);if(!hoverLayer){hoverLayer=this._hoverlayer=this.getLayer(100000)}var scope={};hoverLayer.ctx.save();for(var i=0;i<len;){var el=hoverElements[i];var originalEl=el.__from;if(!(originalEl&&originalEl.__zr)){hoverElements.splice(i,1);originalEl.__hoverMir=null;len--;continue}i++;if(!originalEl.invisible){el.transform=originalEl.transform;el.invTransform=originalEl.invTransform;el.__clipPaths=originalEl.__clipPaths;this._doPaintEl(el,hoverLayer,true,scope)}}hoverLayer.ctx.restore()},_startProgessive:function(){var self=this;if(!self._furtherProgressive){return}var token=self._progressiveToken=+new Date();self._progress++;requestAnimationFrame(step);function step(){if(token===self._progressiveToken&&self.storage){self._doPaintList(self.storage.getDisplayList());if(self._furtherProgressive){self._progress++;requestAnimationFrame(step)}else{self._progressiveToken=-1}}}},_clearProgressive:function(){this._progressiveToken=-1;this._progress=0;util.each(this._progressiveLayers,function(layer){layer.__dirty&&layer.clear()})},_paintList:function(list,paintAll){if(paintAll==null){paintAll=false}this._updateLayerStatus(list);this._clearProgressive();this.eachBuiltinLayer(preProcessLayer);this._doPaintList(list,paintAll);this.eachBuiltinLayer(postProcessLayer)},_doPaintList:function(list,paintAll){var currentLayer;var currentZLevel;var ctx;var scope;var progressiveLayerIdx=0;var currentProgressiveLayer;var width=this._width;var height=this._height;var layerProgress;var frame=this._progress;function flushProgressiveLayer(layer){var dpr=ctx.dpr||1;ctx.save();ctx.globalAlpha=1;ctx.shadowBlur=0;currentLayer.__dirty=true;ctx.setTransform(1,0,0,1,0,0);ctx.drawImage(layer.dom,0,0,width*dpr,height*dpr);ctx.restore()}for(var i=0,l=list.length;i<l;i++){var el=list[i];var elZLevel=this._singleCanvas?0:el.zlevel;
var elFrame=el.__frame;if(elFrame<0&&currentProgressiveLayer){flushProgressiveLayer(currentProgressiveLayer);currentProgressiveLayer=null}if(currentZLevel!==elZLevel){if(ctx){ctx.restore()}scope={};currentZLevel=elZLevel;currentLayer=this.getLayer(currentZLevel);if(!currentLayer.__builtin__){log("ZLevel "+currentZLevel+" has been used by unkown layer "+currentLayer.id)}ctx=currentLayer.ctx;ctx.save();currentLayer.__unusedCount=0;if(currentLayer.__dirty||paintAll){currentLayer.clear()}}if(!(currentLayer.__dirty||paintAll)){continue}if(elFrame>=0){if(!currentProgressiveLayer){currentProgressiveLayer=this._progressiveLayers[Math.min(progressiveLayerIdx++,MAX_PROGRESSIVE_LAYER_NUMBER-1)];currentProgressiveLayer.ctx.save();currentProgressiveLayer.renderScope={};if(currentProgressiveLayer&&(currentProgressiveLayer.__progress>currentProgressiveLayer.__maxProgress)){i=currentProgressiveLayer.__nextIdxNotProg-1;continue}layerProgress=currentProgressiveLayer.__progress;if(!currentProgressiveLayer.__dirty){frame=layerProgress}currentProgressiveLayer.__progress=frame+1}if(elFrame===frame){this._doPaintEl(el,currentProgressiveLayer,true,currentProgressiveLayer.renderScope)}}else{this._doPaintEl(el,currentLayer,paintAll,scope)}el.__dirty=false}if(currentProgressiveLayer){flushProgressiveLayer(currentProgressiveLayer)}ctx&&ctx.restore();this._furtherProgressive=false;util.each(this._progressiveLayers,function(layer){if(layer.__maxProgress>=layer.__progress){this._furtherProgressive=true}},this)},_doPaintEl:function(el,currentLayer,forcePaint,scope){var ctx=currentLayer.ctx;var m=el.transform;if((currentLayer.__dirty||forcePaint)&&!el.invisible&&el.style.opacity!==0&&!(m&&!m[0]&&!m[3])&&!(el.culling&&isDisplayableCulled(el,this._width,this._height))){var clipPaths=el.__clipPaths;if(scope.prevClipLayer!==currentLayer||isClipPathChanged(clipPaths,scope.prevElClipPaths)){if(scope.prevElClipPaths){scope.prevClipLayer.ctx.restore();scope.prevClipLayer=scope.prevElClipPaths=null;scope.prevEl=null}if(clipPaths){ctx.save();doClip(clipPaths,ctx);scope.prevClipLayer=currentLayer;scope.prevElClipPaths=clipPaths}}el.beforeBrush&&el.beforeBrush(ctx);el.brush(ctx,scope.prevEl||null);scope.prevEl=el;el.afterBrush&&el.afterBrush(ctx)}},getLayer:function(zlevel){if(this._singleCanvas){return this._layers[0]}var layer=this._layers[zlevel];if(!layer){layer=new Layer("zr_"+zlevel,this,this.dpr);layer.__builtin__=true;if(this._layerConfig[zlevel]){util.merge(layer,this._layerConfig[zlevel],true)}this.insertLayer(zlevel,layer);layer.initContext()}return layer},insertLayer:function(zlevel,layer){var layersMap=this._layers;var zlevelList=this._zlevelList;var len=zlevelList.length;var prevLayer=null;var i=-1;var domRoot=this._domRoot;if(layersMap[zlevel]){log("ZLevel "+zlevel+" has been used already");return}if(!isLayerValid(layer)){log("Layer of zlevel "+zlevel+" is not valid");return}if(len>0&&zlevel>zlevelList[0]){for(i=0;i<len-1;i++){if(zlevelList[i]<zlevel&&zlevelList[i+1]>zlevel){break}}prevLayer=layersMap[zlevelList[i]]}zlevelList.splice(i+1,0,zlevel);layersMap[zlevel]=layer;if(!layer.virtual){if(prevLayer){var prevDom=prevLayer.dom;if(prevDom.nextSibling){domRoot.insertBefore(layer.dom,prevDom.nextSibling)}else{domRoot.appendChild(layer.dom)}}else{if(domRoot.firstChild){domRoot.insertBefore(layer.dom,domRoot.firstChild)}else{domRoot.appendChild(layer.dom)}}}},eachLayer:function(cb,context){var zlevelList=this._zlevelList;var z;var i;for(i=0;i<zlevelList.length;i++){z=zlevelList[i];cb.call(context,this._layers[z],z)}},eachBuiltinLayer:function(cb,context){var zlevelList=this._zlevelList;var layer;var z;var i;for(i=0;i<zlevelList.length;i++){z=zlevelList[i];layer=this._layers[z];if(layer.__builtin__){cb.call(context,layer,z)}}},eachOtherLayer:function(cb,context){var zlevelList=this._zlevelList;var layer;var z;var i;for(i=0;i<zlevelList.length;i++){z=zlevelList[i];layer=this._layers[z];if(!layer.__builtin__){cb.call(context,layer,z)}}},getLayers:function(){return this._layers},_updateLayerStatus:function(list){var layers=this._layers;var progressiveLayers=this._progressiveLayers;var elCountsLastFrame={};var progressiveElCountsLastFrame={};this.eachBuiltinLayer(function(layer,z){elCountsLastFrame[z]=layer.elCount;layer.elCount=0;layer.__dirty=false});util.each(progressiveLayers,function(layer,idx){progressiveElCountsLastFrame[idx]=layer.elCount;layer.elCount=0;layer.__dirty=false});var progressiveLayerCount=0;var currentProgressiveLayer;var lastProgressiveKey;var frameCount=0;for(var i=0,l=list.length;i<l;i++){var el=list[i];var zlevel=this._singleCanvas?0:el.zlevel;var layer=layers[zlevel];var elProgress=el.progressive;if(layer){layer.elCount++;layer.__dirty=layer.__dirty||el.__dirty}if(elProgress>=0){if(lastProgressiveKey!==elProgress){lastProgressiveKey=elProgress;frameCount++}var elFrame=el.__frame=frameCount-1;if(!currentProgressiveLayer){var idx=Math.min(progressiveLayerCount,MAX_PROGRESSIVE_LAYER_NUMBER-1);currentProgressiveLayer=progressiveLayers[idx];
if(!currentProgressiveLayer){currentProgressiveLayer=progressiveLayers[idx]=new Layer("progressive",this,this.dpr);currentProgressiveLayer.initContext()}currentProgressiveLayer.__maxProgress=0}currentProgressiveLayer.__dirty=currentProgressiveLayer.__dirty||el.__dirty;currentProgressiveLayer.elCount++;currentProgressiveLayer.__maxProgress=Math.max(currentProgressiveLayer.__maxProgress,elFrame);if(currentProgressiveLayer.__maxProgress>=currentProgressiveLayer.__progress){layer.__dirty=true}}else{el.__frame=-1;if(currentProgressiveLayer){currentProgressiveLayer.__nextIdxNotProg=i;progressiveLayerCount++;currentProgressiveLayer=null}}}if(currentProgressiveLayer){progressiveLayerCount++;currentProgressiveLayer.__nextIdxNotProg=i}this.eachBuiltinLayer(function(layer,z){if(elCountsLastFrame[z]!==layer.elCount){layer.__dirty=true}});progressiveLayers.length=Math.min(progressiveLayerCount,MAX_PROGRESSIVE_LAYER_NUMBER);util.each(progressiveLayers,function(layer,idx){if(progressiveElCountsLastFrame[idx]!==layer.elCount){el.__dirty=true}if(layer.__dirty){layer.__progress=0}})},clear:function(){this.eachBuiltinLayer(this._clearLayer);return this},_clearLayer:function(layer){layer.clear()},configLayer:function(zlevel,config){if(config){var layerConfig=this._layerConfig;if(!layerConfig[zlevel]){layerConfig[zlevel]=config}else{util.merge(layerConfig[zlevel],config,true)}var layer=this._layers[zlevel];if(layer){util.merge(layer,layerConfig[zlevel],true)}}},delLayer:function(zlevel){var layers=this._layers;var zlevelList=this._zlevelList;var layer=layers[zlevel];if(!layer){return}layer.dom.parentNode.removeChild(layer.dom);delete layers[zlevel];zlevelList.splice(util.indexOf(zlevelList,zlevel),1)},resize:function(width,height){var domRoot=this._domRoot;domRoot.style.display="none";var opts=this._opts;width!=null&&(opts.width=width);height!=null&&(opts.height=height);width=this._getSize(0);height=this._getSize(1);domRoot.style.display="";if(this._width!=width||height!=this._height){domRoot.style.width=width+"px";domRoot.style.height=height+"px";for(var id in this._layers){if(this._layers.hasOwnProperty(id)){this._layers[id].resize(width,height)}}util.each(this._progressiveLayers,function(layer){layer.resize(width,height)});this.refresh(true)}this._width=width;this._height=height;return this},clearLayer:function(zlevel){var layer=this._layers[zlevel];if(layer){layer.clear()}},dispose:function(){this.root.innerHTML="";this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(opts){opts=opts||{};if(this._singleCanvas){return this._layers[0].dom}var imageLayer=new Layer("image",this,opts.pixelRatio||this.dpr);imageLayer.initContext();imageLayer.clearColor=opts.backgroundColor;imageLayer.clear();var displayList=this.storage.getDisplayList(true);var scope={};var zlevel;var self=this;function findAndDrawOtherLayer(smaller,larger){var zlevelList=self._zlevelList;if(smaller==null){smaller=-Infinity}var intermediateLayer;for(var i=0;i<zlevelList.length;i++){var z=zlevelList[i];var layer=self._layers[z];if(!layer.__builtin__&&z>smaller&&z<larger){intermediateLayer=layer;break}}if(intermediateLayer&&intermediateLayer.renderToCanvas){imageLayer.ctx.save();intermediateLayer.renderToCanvas(imageLayer.ctx);imageLayer.ctx.restore()}}for(var i=0;i<displayList.length;i++){var el=displayList[i];if(el.zlevel!==zlevel){findAndDrawOtherLayer(zlevel,el.zlevel);zlevel=el.zlevel}this._doPaintEl(el,imageLayer,true,scope)}findAndDrawOtherLayer(zlevel,Infinity);return imageLayer.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(whIdx){var opts=this._opts;var wh=["width","height"][whIdx];var cwh=["clientWidth","clientHeight"][whIdx];var plt=["paddingLeft","paddingTop"][whIdx];var prb=["paddingRight","paddingBottom"][whIdx];if(opts[wh]!=null&&opts[wh]!=="auto"){return parseFloat(opts[wh])}var root=this.root;var stl=document.defaultView.getComputedStyle(root);return((root[cwh]||parseInt10(stl[wh])||parseInt10(root.style[wh]))-(parseInt10(stl[plt])||0)-(parseInt10(stl[prb])||0))|0},pathToImage:function(path,dpr){dpr=dpr||this.dpr;var canvas=document.createElement("canvas");var ctx=canvas.getContext("2d");var rect=path.getBoundingRect();var style=path.style;var shadowBlurSize=style.shadowBlur;var shadowOffsetX=style.shadowOffsetX;var shadowOffsetY=style.shadowOffsetY;var lineWidth=style.hasStroke()?style.lineWidth:0;var leftMargin=Math.max(lineWidth/2,-shadowOffsetX+shadowBlurSize);var rightMargin=Math.max(lineWidth/2,shadowOffsetX+shadowBlurSize);var topMargin=Math.max(lineWidth/2,-shadowOffsetY+shadowBlurSize);var bottomMargin=Math.max(lineWidth/2,shadowOffsetY+shadowBlurSize);var width=rect.width+leftMargin+rightMargin;var height=rect.height+topMargin+bottomMargin;canvas.width=width*dpr;canvas.height=height*dpr;ctx.scale(dpr,dpr);ctx.clearRect(0,0,width,height);ctx.dpr=dpr;var pathTransform={position:path.position,rotation:path.rotation,scale:path.scale};path.position=[leftMargin-rect.x,topMargin-rect.y];
path.rotation=0;path.scale=[1,1];path.updateTransform();if(path){path.brush(ctx)}var ImageShape=__webpack_require__(52);var imgShape=new ImageShape({style:{x:0,y:0,image:canvas}});if(pathTransform.position!=null){imgShape.position=path.position=pathTransform.position}if(pathTransform.rotation!=null){imgShape.rotation=path.rotation=pathTransform.rotation}if(pathTransform.scale!=null){imgShape.scale=path.scale=pathTransform.scale}return imgShape}};module.exports=Painter}),(function(module,exports,__webpack_require__){var util=__webpack_require__(4);var config=__webpack_require__(35);var Style=__webpack_require__(24);var Pattern=__webpack_require__(49);function returnFalse(){return false}function createDom(id,type,painter,dpr){var newDom=document.createElement(type);var width=painter.getWidth();var height=painter.getHeight();var newDomStyle=newDom.style;newDomStyle.position="absolute";newDomStyle.left=0;newDomStyle.top=0;newDomStyle.width=width+"px";newDomStyle.height=height+"px";newDom.width=width*dpr;newDom.height=height*dpr;newDom.setAttribute("data-zr-dom-id",id);return newDom}var Layer=function(id,painter,dpr){var dom;dpr=dpr||config.devicePixelRatio;if(typeof id==="string"){dom=createDom(id,"canvas",painter,dpr)}else{if(util.isObject(id)){dom=id;id=dom.id}}this.id=id;this.dom=dom;var domStyle=dom.style;if(domStyle){dom.onselectstart=returnFalse;domStyle["-webkit-user-select"]="none";domStyle["user-select"]="none";domStyle["-webkit-touch-callout"]="none";domStyle["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";domStyle["padding"]=0;domStyle["margin"]=0;domStyle["border-width"]=0}this.domBack=null;this.ctxBack=null;this.painter=painter;this.config=null;this.clearColor=0;this.motionBlur=false;this.lastFrameAlpha=0.7;this.dpr=dpr};Layer.prototype={constructor:Layer,elCount:0,__dirty:true,initContext:function(){this.ctx=this.dom.getContext("2d");this.ctx.__currentValues={};this.ctx.dpr=this.dpr},createBackBuffer:function(){var dpr=this.dpr;this.domBack=createDom("back-"+this.id,"canvas",this.painter,dpr);this.ctxBack=this.domBack.getContext("2d");this.ctxBack.__currentValues={};if(dpr!=1){this.ctxBack.scale(dpr,dpr)}},resize:function(width,height){var dpr=this.dpr;var dom=this.dom;var domStyle=dom.style;var domBack=this.domBack;domStyle.width=width+"px";domStyle.height=height+"px";dom.width=width*dpr;dom.height=height*dpr;if(domBack){domBack.width=width*dpr;domBack.height=height*dpr;if(dpr!=1){this.ctxBack.scale(dpr,dpr)}}},clear:function(clearAll){var dom=this.dom;var ctx=this.ctx;var width=dom.width;var height=dom.height;var clearColor=this.clearColor;var haveMotionBLur=this.motionBlur&&!clearAll;var lastFrameAlpha=this.lastFrameAlpha;var dpr=this.dpr;if(haveMotionBLur){if(!this.domBack){this.createBackBuffer()}this.ctxBack.globalCompositeOperation="copy";this.ctxBack.drawImage(dom,0,0,width/dpr,height/dpr)}ctx.clearRect(0,0,width,height);if(clearColor){var clearColorGradientOrPattern;if(clearColor.colorStops){clearColorGradientOrPattern=clearColor.__canvasGradient||Style.getGradient(ctx,clearColor,{x:0,y:0,width:width,height:height});clearColor.__canvasGradient=clearColorGradientOrPattern}else{if(clearColor.image){clearColorGradientOrPattern=Pattern.prototype.getCanvasPattern.call(clearColor,ctx)}}ctx.save();ctx.fillStyle=clearColorGradientOrPattern||clearColor;ctx.fillRect(0,0,width,height);ctx.restore()}if(haveMotionBLur){var domBack=this.domBack;ctx.save();ctx.globalAlpha=lastFrameAlpha;ctx.drawImage(domBack,0,0,width,height);ctx.restore()}}};module.exports=Layer}),(function(module,exports,__webpack_require__){var Gradient=__webpack_require__(69);module.exports=function(ecModel){function encodeColor(seriesModel){var colorAccessPath=(seriesModel.visualColorAccessPath||"itemStyle.normal.color").split(".");var data=seriesModel.getData();var color=seriesModel.get(colorAccessPath)||seriesModel.getColorFromPalette(seriesModel.get("name"));data.setVisual("color",color);if(!ecModel.isSeriesFiltered(seriesModel)){if(typeof color==="function"&&!(color instanceof Gradient)){data.each(function(idx){data.setItemVisual(idx,"color",color(seriesModel.getDataParams(idx)))})}data.each(function(idx){var itemModel=data.getItemModel(idx);var color=itemModel.get(colorAccessPath,true);if(color!=null){data.setItemVisual(idx,"color",color)}})}}ecModel.eachRawSeries(encodeColor)}}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var zrUtil=__webpack_require__(4);var PI=Math.PI;module.exports=function(api,opts){opts=opts||{};zrUtil.defaults(opts,{text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0});var mask=new graphic.Rect({style:{fill:opts.maskColor},zlevel:opts.zlevel,z:10000});var arc=new graphic.Arc({shape:{startAngle:-PI/2,endAngle:-PI/2+0.1,r:10},style:{stroke:opts.color,lineCap:"round",lineWidth:5},zlevel:opts.zlevel,z:10001});var labelRect=new graphic.Rect({style:{fill:"none",text:opts.text,textPosition:"right",textDistance:10,textFill:opts.textColor},zlevel:opts.zlevel,z:10001});
arc.animateShape(true).when(1000,{endAngle:PI*3/2}).start("circularInOut");arc.animateShape(true).when(1000,{startAngle:PI*3/2}).delay(300).start("circularInOut");var group=new graphic.Group();group.add(arc);group.add(labelRect);group.add(mask);group.resize=function(){var cx=api.getWidth()/2;var cy=api.getHeight()/2;arc.setShape({cx:cx,cy:cy});var r=arc.shape.r;labelRect.setShape({x:cx-r,y:cy-r,width:r*2,height:r*2});mask.setShape({x:0,y:0,width:api.getWidth(),height:api.getHeight()})};group.resize();return group}}),(function(module,exports,__webpack_require__){(function(global){var UNDEFINED="undefined";var globalObj=typeof window==="undefined"?global:window;var Float64Array=typeof globalObj.Float64Array===UNDEFINED?Array:globalObj.Float64Array;var Int32Array=typeof globalObj.Int32Array===UNDEFINED?Array:globalObj.Int32Array;var dataCtors={"float":Float64Array,"int":Int32Array,"ordinal":Array,"number":Array,"time":Array};var Model=__webpack_require__(14);var DataDiffer=__webpack_require__(102);var zrUtil=__webpack_require__(4);var modelUtil=__webpack_require__(5);var isObject=zrUtil.isObject;var TRANSFERABLE_PROPERTIES=["stackedOn","hasItemOption","_nameList","_idList","_rawData"];function transferProperties(a,b){zrUtil.each(TRANSFERABLE_PROPERTIES.concat(b.__wrappedMethods||[]),function(propName){if(b.hasOwnProperty(propName)){a[propName]=b[propName]}});a.__wrappedMethods=b.__wrappedMethods}function DefaultDataProvider(dataArray){this._array=dataArray||[]}DefaultDataProvider.prototype.pure=false;DefaultDataProvider.prototype.count=function(){return this._array.length};DefaultDataProvider.prototype.getItem=function(idx){return this._array[idx]};var List=function(dimensions,hostModel){dimensions=dimensions||["x","y"];var dimensionInfos={};var dimensionNames=[];for(var i=0;i<dimensions.length;i++){var dimensionName;var dimensionInfo={};if(typeof dimensions[i]==="string"){dimensionName=dimensions[i];dimensionInfo={name:dimensionName,coordDim:dimensionName,coordDimIndex:0,stackable:false,type:"number"}}else{dimensionInfo=dimensions[i];dimensionName=dimensionInfo.name;dimensionInfo.type=dimensionInfo.type||"number";if(!dimensionInfo.coordDim){dimensionInfo.coordDim=dimensionName;dimensionInfo.coordDimIndex=0}}dimensionInfo.otherDims=dimensionInfo.otherDims||{};dimensionNames.push(dimensionName);dimensionInfos[dimensionName]=dimensionInfo}this.dimensions=dimensionNames;this._dimensionInfos=dimensionInfos;this.hostModel=hostModel;this.dataType;this.indices=[];this._storage={};this._nameList=[];this._idList=[];this._optionModels=[];this.stackedOn=null;this._visual={};this._layout={};this._itemVisuals=[];this._itemLayouts=[];this._graphicEls=[];this._rawData;this._extent};var listProto=List.prototype;listProto.type="list";listProto.hasItemOption=true;listProto.getDimension=function(dim){if(!isNaN(dim)){dim=this.dimensions[dim]||dim}return dim};listProto.getDimensionInfo=function(dim){return zrUtil.clone(this._dimensionInfos[this.getDimension(dim)])};listProto.initData=function(data,nameList,dimValueGetter){data=data||[];var isDataArray=zrUtil.isArray(data);if(isDataArray){data=new DefaultDataProvider(data)}if(true){if(!isDataArray&&(typeof data.getItem!="function"||typeof data.count!="function")){throw new Error("Inavlid data provider.")}}this._rawData=data;var storage=this._storage={};var indices=this.indices=[];var dimensions=this.dimensions;var dimensionInfoMap=this._dimensionInfos;var size=data.count();var idList=[];var nameRepeatCount={};var nameDimIdx;nameList=nameList||[];for(var i=0;i<dimensions.length;i++){var dimInfo=dimensionInfoMap[dimensions[i]];dimInfo.otherDims.itemName===0&&(nameDimIdx=i);var DataCtor=dataCtors[dimInfo.type];storage[dimensions[i]]=new DataCtor(size)}var self=this;if(!dimValueGetter){self.hasItemOption=false}dimValueGetter=dimValueGetter||function(dataItem,dimName,dataIndex,dimIndex){var value=modelUtil.getDataItemValue(dataItem);if(modelUtil.isDataItemOption(dataItem)){self.hasItemOption=true}return modelUtil.converDataValue((value instanceof Array)?value[dimIndex]:value,dimensionInfoMap[dimName])};for(var i=0;i<size;i++){var dataItem=data.getItem(i);for(var k=0;k<dimensions.length;k++){var dim=dimensions[k];var dimStorage=storage[dim];dimStorage[i]=dimValueGetter(dataItem,dim,i,k)}indices.push(i)}for(var i=0;i<size;i++){var dataItem=data.getItem(i);if(!nameList[i]&&dataItem){if(dataItem.name!=null){nameList[i]=dataItem.name}else{if(nameDimIdx!=null){nameList[i]=storage[dimensions[nameDimIdx]][i]}}}var name=nameList[i]||"";var id=dataItem&&dataItem.id;if(!id&&name){nameRepeatCount[name]=nameRepeatCount[name]||0;id=name;if(nameRepeatCount[name]>0){id+="__ec__"+nameRepeatCount[name]}nameRepeatCount[name]++}id&&(idList[i]=id)}this._nameList=nameList;this._idList=idList};listProto.count=function(){return this.indices.length};listProto.get=function(dim,idx,stack){var storage=this._storage;var dataIndex=this.indices[idx];if(dataIndex==null||!storage[dim]){return NaN}var value=storage[dim][dataIndex];
if(stack){var dimensionInfo=this._dimensionInfos[dim];if(dimensionInfo&&dimensionInfo.stackable){var stackedOn=this.stackedOn;while(stackedOn){var stackedValue=stackedOn.get(dim,idx);if((value>=0&&stackedValue>0)||(value<=0&&stackedValue<0)){value+=stackedValue}stackedOn=stackedOn.stackedOn}}}return value};listProto.getValues=function(dimensions,idx,stack){var values=[];if(!zrUtil.isArray(dimensions)){stack=idx;idx=dimensions;dimensions=this.dimensions}for(var i=0,len=dimensions.length;i<len;i++){values.push(this.get(dimensions[i],idx,stack))}return values};listProto.hasValue=function(idx){var dimensions=this.dimensions;var dimensionInfos=this._dimensionInfos;for(var i=0,len=dimensions.length;i<len;i++){if(dimensionInfos[dimensions[i]].type!=="ordinal"&&isNaN(this.get(dimensions[i],idx))){return false}}return true};listProto.getDataExtent=function(dim,stack,filter){dim=this.getDimension(dim);var dimData=this._storage[dim];var dimInfo=this.getDimensionInfo(dim);stack=(dimInfo&&dimInfo.stackable)&&stack;var dimExtent=(this._extent||(this._extent={}))[dim+(!!stack)];var value;if(dimExtent){return dimExtent}if(dimData){var min=Infinity;var max=-Infinity;for(var i=0,len=this.count();i<len;i++){value=this.get(dim,i,stack);if(!filter||filter(value,dim,i)){value<min&&(min=value);value>max&&(max=value)}}return(this._extent[dim+!!stack]=[min,max])}else{return[Infinity,-Infinity]}};listProto.getSum=function(dim,stack){var dimData=this._storage[dim];var sum=0;if(dimData){for(var i=0,len=this.count();i<len;i++){var value=this.get(dim,i,stack);if(!isNaN(value)){sum+=value}}}return sum};listProto.indexOf=function(dim,value){var storage=this._storage;var dimData=storage[dim];var indices=this.indices;if(dimData){for(var i=0,len=indices.length;i<len;i++){var rawIndex=indices[i];if(dimData[rawIndex]===value){return i}}}return -1};listProto.indexOfName=function(name){var indices=this.indices;var nameList=this._nameList;for(var i=0,len=indices.length;i<len;i++){var rawIndex=indices[i];if(nameList[rawIndex]===name){return i}}return -1};listProto.indexOfRawIndex=function(rawIndex){var indices=this.indices;var rawDataIndex=indices[rawIndex];if(rawDataIndex!=null&&rawDataIndex===rawIndex){return rawIndex}var left=0;var right=indices.length-1;while(left<=right){var mid=(left+right)/2|0;if(indices[mid]<rawIndex){left=mid+1}else{if(indices[mid]>rawIndex){right=mid-1}else{return mid}}}return -1};listProto.indicesOfNearest=function(dim,value,stack,maxDistance){var storage=this._storage;var dimData=storage[dim];var nearestIndices=[];if(!dimData){return nearestIndices}if(maxDistance==null){maxDistance=Infinity}var minDist=Number.MAX_VALUE;var minDiff=-1;for(var i=0,len=this.count();i<len;i++){var diff=value-this.get(dim,i,stack);var dist=Math.abs(diff);if(diff<=maxDistance&&dist<=minDist){if(dist<minDist||(diff>=0&&minDiff<0)){minDist=dist;minDiff=diff;nearestIndices.length=0}nearestIndices.push(i)}}return nearestIndices};listProto.getRawIndex=function(idx){var rawIdx=this.indices[idx];return rawIdx==null?-1:rawIdx};listProto.getRawDataItem=function(idx){return this._rawData.getItem(this.getRawIndex(idx))};listProto.getName=function(idx){return this._nameList[this.indices[idx]]||""};listProto.getId=function(idx){return this._idList[this.indices[idx]]||(this.getRawIndex(idx)+"")};function normalizeDimensions(dimensions){if(!zrUtil.isArray(dimensions)){dimensions=[dimensions]}return dimensions}listProto.each=function(dims,cb,stack,context){if(typeof dims==="function"){context=stack;stack=cb;cb=dims;dims=[]}dims=zrUtil.map(normalizeDimensions(dims),this.getDimension,this);var value=[];var dimSize=dims.length;var indices=this.indices;context=context||this;for(var i=0;i<indices.length;i++){switch(dimSize){case 0:cb.call(context,i);break;case 1:cb.call(context,this.get(dims[0],i,stack),i);break;case 2:cb.call(context,this.get(dims[0],i,stack),this.get(dims[1],i,stack),i);break;default:for(var k=0;k<dimSize;k++){value[k]=this.get(dims[k],i,stack)}value[k]=i;cb.apply(context,value)}}};listProto.filterSelf=function(dimensions,cb,stack,context){if(typeof dimensions==="function"){context=stack;stack=cb;cb=dimensions;dimensions=[]}dimensions=zrUtil.map(normalizeDimensions(dimensions),this.getDimension,this);var newIndices=[];var value=[];var dimSize=dimensions.length;var indices=this.indices;context=context||this;for(var i=0;i<indices.length;i++){var keep;if(!dimSize){keep=cb.call(context,i)}else{if(dimSize===1){keep=cb.call(context,this.get(dimensions[0],i,stack),i)}else{for(var k=0;k<dimSize;k++){value[k]=this.get(dimensions[k],i,stack)}value[k]=i;keep=cb.apply(context,value)}}if(keep){newIndices.push(indices[i])}}this.indices=newIndices;this._extent={};return this};listProto.mapArray=function(dimensions,cb,stack,context){if(typeof dimensions==="function"){context=stack;stack=cb;cb=dimensions;dimensions=[]}var result=[];this.each(dimensions,function(){result.push(cb&&cb.apply(this,arguments))},stack,context);return result};function cloneListForMapAndSample(original,excludeDimensions){var allDimensions=original.dimensions;
var list=new List(zrUtil.map(allDimensions,original.getDimensionInfo,original),original.hostModel);transferProperties(list,original);var storage=list._storage={};var originalStorage=original._storage;for(var i=0;i<allDimensions.length;i++){var dim=allDimensions[i];var dimStore=originalStorage[dim];if(zrUtil.indexOf(excludeDimensions,dim)>=0){storage[dim]=new dimStore.constructor(originalStorage[dim].length)}else{storage[dim]=originalStorage[dim]}}return list}listProto.map=function(dimensions,cb,stack,context){dimensions=zrUtil.map(normalizeDimensions(dimensions),this.getDimension,this);var list=cloneListForMapAndSample(this,dimensions);var indices=list.indices=this.indices;var storage=list._storage;var tmpRetValue=[];this.each(dimensions,function(){var idx=arguments[arguments.length-1];var retValue=cb&&cb.apply(this,arguments);if(retValue!=null){if(typeof retValue==="number"){tmpRetValue[0]=retValue;retValue=tmpRetValue}for(var i=0;i<retValue.length;i++){var dim=dimensions[i];var dimStore=storage[dim];var rawIdx=indices[idx];if(dimStore){dimStore[rawIdx]=retValue[i]}}}},stack,context);return list};listProto.downSample=function(dimension,rate,sampleValue,sampleIndex){var list=cloneListForMapAndSample(this,[dimension]);var storage=this._storage;var targetStorage=list._storage;var originalIndices=this.indices;var indices=list.indices=[];var frameValues=[];var frameIndices=[];var frameSize=Math.floor(1/rate);var dimStore=targetStorage[dimension];var len=this.count();for(var i=0;i<storage[dimension].length;i++){targetStorage[dimension][i]=storage[dimension][i]}for(var i=0;i<len;i+=frameSize){if(frameSize>len-i){frameSize=len-i;frameValues.length=frameSize}for(var k=0;k<frameSize;k++){var idx=originalIndices[i+k];frameValues[k]=dimStore[idx];frameIndices[k]=idx}var value=sampleValue(frameValues);var idx=frameIndices[sampleIndex(frameValues,value)||0];dimStore[idx]=value;indices.push(idx)}return list};listProto.getItemModel=function(idx){var hostModel=this.hostModel;idx=this.indices[idx];return new Model(this._rawData.getItem(idx),hostModel,hostModel&&hostModel.ecModel)};listProto.diff=function(otherList){var idList=this._idList;var otherIdList=otherList&&otherList._idList;var val;var prefix="e\0\0";return new DataDiffer(otherList?otherList.indices:[],this.indices,function(idx){return(val=otherIdList[idx])!=null?val:prefix+idx},function(idx){return(val=idList[idx])!=null?val:prefix+idx})};listProto.getVisual=function(key){var visual=this._visual;return visual&&visual[key]};listProto.setVisual=function(key,val){if(isObject(key)){for(var name in key){if(key.hasOwnProperty(name)){this.setVisual(name,key[name])}}return}this._visual=this._visual||{};this._visual[key]=val};listProto.setLayout=function(key,val){if(isObject(key)){for(var name in key){if(key.hasOwnProperty(name)){this.setLayout(name,key[name])}}return}this._layout[key]=val};listProto.getLayout=function(key){return this._layout[key]};listProto.getItemLayout=function(idx){return this._itemLayouts[idx]};listProto.setItemLayout=function(idx,layout,merge){this._itemLayouts[idx]=merge?zrUtil.extend(this._itemLayouts[idx]||{},layout):layout};listProto.clearItemLayouts=function(){this._itemLayouts.length=0};listProto.getItemVisual=function(idx,key,ignoreParent){var itemVisual=this._itemVisuals[idx];var val=itemVisual&&itemVisual[key];if(val==null&&!ignoreParent){return this.getVisual(key)}return val};listProto.setItemVisual=function(idx,key,value){var itemVisual=this._itemVisuals[idx]||{};this._itemVisuals[idx]=itemVisual;if(isObject(key)){for(var name in key){if(key.hasOwnProperty(name)){itemVisual[name]=key[name]}}return}itemVisual[key]=value};listProto.clearAllVisual=function(){this._visual={};this._itemVisuals=[]};var setItemDataAndSeriesIndex=function(child){child.seriesIndex=this.seriesIndex;child.dataIndex=this.dataIndex;child.dataType=this.dataType};listProto.setItemGraphicEl=function(idx,el){var hostModel=this.hostModel;if(el){el.dataIndex=idx;el.dataType=this.dataType;el.seriesIndex=hostModel&&hostModel.seriesIndex;if(el.type==="group"){el.traverse(setItemDataAndSeriesIndex,el)}}this._graphicEls[idx]=el};listProto.getItemGraphicEl=function(idx){return this._graphicEls[idx]};listProto.eachItemGraphicEl=function(cb,context){zrUtil.each(this._graphicEls,function(el,idx){if(el){cb&&cb.call(context,el,idx)}})};listProto.cloneShallow=function(){var dimensionInfoList=zrUtil.map(this.dimensions,this.getDimensionInfo,this);var list=new List(dimensionInfoList,this.hostModel);list._storage=this._storage;transferProperties(list,this);list.indices=this.indices.slice();if(this._extent){list._extent=zrUtil.extend({},this._extent)}return list};listProto.wrapMethod=function(methodName,injectFunction){var originalMethod=this[methodName];if(typeof originalMethod!=="function"){return}this.__wrappedMethods=this.__wrappedMethods||[];this.__wrappedMethods.push(methodName);this[methodName]=function(){var res=originalMethod.apply(this,arguments);return injectFunction.apply(this,[res].concat(zrUtil.slice(arguments)))
}};listProto.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"];listProto.CHANGABLE_METHODS=["filterSelf"];module.exports=List}.call(exports,(function(){return this}())))}),(function(module,exports){function defaultKeyGetter(item){return item}function DataDiffer(oldArr,newArr,oldKeyGetter,newKeyGetter,context){this._old=oldArr;this._new=newArr;this._oldKeyGetter=oldKeyGetter||defaultKeyGetter;this._newKeyGetter=newKeyGetter||defaultKeyGetter;this.context=context}DataDiffer.prototype={constructor:DataDiffer,add:function(func){this._add=func;return this},update:function(func){this._update=func;return this},remove:function(func){this._remove=func;return this},execute:function(){var oldArr=this._old;var newArr=this._new;var oldDataIndexMap={};var newDataIndexMap={};var oldDataKeyArr=[];var newDataKeyArr=[];var i;initIndexMap(oldArr,oldDataIndexMap,oldDataKeyArr,"_oldKeyGetter",this);initIndexMap(newArr,newDataIndexMap,newDataKeyArr,"_newKeyGetter",this);for(i=0;i<oldArr.length;i++){var key=oldDataKeyArr[i];var idx=newDataIndexMap[key];if(idx!=null){var len=idx.length;if(len){len===1&&(newDataIndexMap[key]=null);idx=idx.unshift()}else{newDataIndexMap[key]=null}this._update&&this._update(idx,i)}else{this._remove&&this._remove(i)}}for(var i=0;i<newDataKeyArr.length;i++){var key=newDataKeyArr[i];if(newDataIndexMap.hasOwnProperty(key)){var idx=newDataIndexMap[key];if(idx==null){continue}if(!idx.length){this._add&&this._add(idx)}else{for(var j=0,len=idx.length;j<len;j++){this._add&&this._add(idx[j])}}}}}};function initIndexMap(arr,map,keyArr,keyGetterName,dataDiffer){for(var i=0;i<arr.length;i++){var key="_ec_"+dataDiffer[keyGetterName](arr[i],i);var existence=map[key];if(existence==null){keyArr.push(key);map[key]=i}else{if(!existence.length){map[key]=existence=[existence]}existence.push(i)}}}module.exports=DataDiffer}),(function(module,exports,__webpack_require__){var numberUtil=__webpack_require__(7);var linearMap=numberUtil.linearMap;var zrUtil=__webpack_require__(4);var axisHelper=__webpack_require__(104);function fixExtentWithBands(extent,nTick){var size=extent[1]-extent[0];var len=nTick;var margin=size/len/2;extent[0]+=margin;extent[1]-=margin}var normalizedExtent=[0,1];var Axis=function(dim,scale,extent){this.dim=dim;this.scale=scale;this._extent=extent||[0,0];this.inverse=false;this.onBand=false;this._labelInterval};Axis.prototype={constructor:Axis,contain:function(coord){var extent=this._extent;var min=Math.min(extent[0],extent[1]);var max=Math.max(extent[0],extent[1]);return coord>=min&&coord<=max},containData:function(data){return this.contain(this.dataToCoord(data))},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(dataExtent){return numberUtil.getPixelPrecision(dataExtent||this.scale.getExtent(),this._extent)},setExtent:function(start,end){var extent=this._extent;extent[0]=start;extent[1]=end},dataToCoord:function(data,clamp){var extent=this._extent;var scale=this.scale;data=scale.normalize(data);if(this.onBand&&scale.type==="ordinal"){extent=extent.slice();fixExtentWithBands(extent,scale.count())}return linearMap(data,normalizedExtent,extent,clamp)},coordToData:function(coord,clamp){var extent=this._extent;var scale=this.scale;if(this.onBand&&scale.type==="ordinal"){extent=extent.slice();fixExtentWithBands(extent,scale.count())}var t=linearMap(coord,extent,normalizedExtent,clamp);return this.scale.scale(t)},pointToData:function(point,clamp){},getTicksCoords:function(alignWithLabel){if(this.onBand&&!alignWithLabel){var bands=this.getBands();var coords=[];for(var i=0;i<bands.length;i++){coords.push(bands[i][0])}if(bands[i-1]){coords.push(bands[i-1][1])}return coords}else{return zrUtil.map(this.scale.getTicks(),this.dataToCoord,this)}},getLabelsCoords:function(){return zrUtil.map(this.scale.getTicks(),this.dataToCoord,this)},getBands:function(){var extent=this.getExtent();var bands=[];var len=this.scale.count();var start=extent[0];var end=extent[1];var span=end-start;for(var i=0;i<len;i++){bands.push([span*i/len+start,span*(i+1)/len+start])}return bands},getBandWidth:function(){var axisExtent=this._extent;var dataExtent=this.scale.getExtent();var len=dataExtent[1]-dataExtent[0]+(this.onBand?1:0);len===0&&(len=1);var size=Math.abs(axisExtent[1]-axisExtent[0]);return Math.abs(size)/len},getLabelInterval:function(){var labelInterval=this._labelInterval;if(!labelInterval){var axisModel=this.model;var labelModel=axisModel.getModel("axisLabel");var interval=labelModel.get("interval");if(!(this.type==="category"&&interval==="auto")){labelInterval=interval==="auto"?0:interval}else{if(this.isHorizontal){labelInterval=axisHelper.getAxisLabelInterval(zrUtil.map(this.scale.getTicks(),this.dataToCoord,this),axisModel.getFormattedLabels(),labelModel.getFont(),this.isHorizontal())}}this._labelInterval=labelInterval}return labelInterval}};module.exports=Axis}),(function(module,exports,__webpack_require__){var OrdinalScale=__webpack_require__(105);var IntervalScale=__webpack_require__(107);
__webpack_require__(109);__webpack_require__(110);var Scale=__webpack_require__(106);var numberUtil=__webpack_require__(7);var zrUtil=__webpack_require__(4);var textContain=__webpack_require__(8);var axisHelper={};axisHelper.getScaleExtent=function(scale,model){var scaleType=scale.type;var min=model.getMin();var max=model.getMax();var fixMin=min!=null;var fixMax=max!=null;var originalExtent=scale.getExtent();var axisDataLen;var boundaryGap;var span;if(scaleType==="ordinal"){axisDataLen=(model.get("data")||[]).length}else{boundaryGap=model.get("boundaryGap");if(!zrUtil.isArray(boundaryGap)){boundaryGap=[boundaryGap||0,boundaryGap||0]}if(typeof boundaryGap[0]==="boolean"){if(true){console.warn("Boolean type for boundaryGap is only "+"allowed for ordinal axis. Please use string in "+'percentage instead, e.g., "20%". Currently, '+"boundaryGap is set to be 0.")}boundaryGap=[0,0]}boundaryGap[0]=numberUtil.parsePercent(boundaryGap[0],1);boundaryGap[1]=numberUtil.parsePercent(boundaryGap[1],1);span=(originalExtent[1]-originalExtent[0])||Math.abs(originalExtent[0])}if(min==null){min=scaleType==="ordinal"?(axisDataLen?0:NaN):originalExtent[0]-boundaryGap[0]*span}if(max==null){max=scaleType==="ordinal"?(axisDataLen?axisDataLen-1:NaN):originalExtent[1]+boundaryGap[1]*span}if(min==="dataMin"){min=originalExtent[0]}else{if(typeof min==="function"){min=min({min:originalExtent[0],max:originalExtent[1]})}}if(max==="dataMax"){max=originalExtent[1]}else{if(typeof max==="function"){max=max({min:originalExtent[0],max:originalExtent[1]})}}(min==null||!isFinite(min))&&(min=NaN);(max==null||!isFinite(max))&&(max=NaN);scale.setBlank(zrUtil.eqNaN(min)||zrUtil.eqNaN(max));if(model.getNeedCrossZero()){if(min>0&&max>0&&!fixMin){min=0}if(min<0&&max<0&&!fixMax){max=0}}return[min,max]};axisHelper.niceScaleExtent=function(scale,model){var extent=axisHelper.getScaleExtent(scale,model);var fixMin=model.getMin()!=null;var fixMax=model.getMax()!=null;var splitNumber=model.get("splitNumber");if(scale.type==="log"){scale.base=model.get("logBase")}var scaleType=scale.type;scale.setExtent(extent[0],extent[1]);scale.niceExtent({splitNumber:splitNumber,fixMin:fixMin,fixMax:fixMax,minInterval:(scaleType==="interval"||scaleType==="time")?model.get("minInterval"):null,maxInterval:(scaleType==="interval"||scaleType==="time")?model.get("maxInterval"):null});var interval=model.get("interval");if(interval!=null){scale.setInterval&&scale.setInterval(interval)}};axisHelper.createScaleByModel=function(model,axisType){axisType=axisType||model.get("type");if(axisType){switch(axisType){case"category":return new OrdinalScale(model.getCategories(),[Infinity,-Infinity]);case"value":return new IntervalScale();default:return(Scale.getClass(axisType)||IntervalScale).create(model)}}};axisHelper.ifAxisCrossZero=function(axis){var dataExtent=axis.scale.getExtent();var min=dataExtent[0];var max=dataExtent[1];return !((min>0&&max>0)||(min<0&&max<0))};axisHelper.getAxisLabelInterval=function(tickCoords,labels,font,isAxisHorizontal){var textSpaceTakenRect;var autoLabelInterval=0;var accumulatedLabelInterval=0;var step=1;if(labels.length>40){step=Math.floor(labels.length/40)}for(var i=0;i<tickCoords.length;i+=step){var tickCoord=tickCoords[i];var rect=textContain.getBoundingRect(labels[i],font,"center","top");rect[isAxisHorizontal?"x":"y"]+=tickCoord;rect[isAxisHorizontal?"width":"height"]*=1.3;if(!textSpaceTakenRect){textSpaceTakenRect=rect.clone()}else{if(textSpaceTakenRect.intersect(rect)){accumulatedLabelInterval++;autoLabelInterval=Math.max(autoLabelInterval,accumulatedLabelInterval)}else{textSpaceTakenRect.union(rect);accumulatedLabelInterval=0}}}if(autoLabelInterval===0&&step>1){return step}return(autoLabelInterval+1)*step-1};axisHelper.getFormattedLabels=function(axis,labelFormatter){var scale=axis.scale;var labels=scale.getTicksLabels();var ticks=scale.getTicks();if(typeof labelFormatter==="string"){labelFormatter=(function(tpl){return function(val){return tpl.replace("{value}",val!=null?val:"")}})(labelFormatter);return zrUtil.map(labels,labelFormatter)}else{if(typeof labelFormatter==="function"){return zrUtil.map(ticks,function(tick,idx){return labelFormatter(axisHelper.getAxisRawValue(axis,tick),idx)},this)}else{return labels}}};axisHelper.getAxisRawValue=function(axis,value){return axis.type==="category"?axis.scale.getLabel(value):value};module.exports=axisHelper}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var Scale=__webpack_require__(106);var scaleProto=Scale.prototype;var OrdinalScale=Scale.extend({type:"ordinal",init:function(data,extent){this._data=data;this._extent=extent||[0,data.length-1]},parse:function(val){return typeof val==="string"?zrUtil.indexOf(this._data,val):Math.round(val)},contain:function(rank){rank=this.parse(rank);return scaleProto.contain.call(this,rank)&&this._data[rank]!=null},normalize:function(val){return scaleProto.normalize.call(this,this.parse(val))},scale:function(val){return Math.round(scaleProto.scale.call(this,val))
},getTicks:function(){var ticks=[];var extent=this._extent;var rank=extent[0];while(rank<=extent[1]){ticks.push(rank);rank++}return ticks},getLabel:function(n){return this._data[n]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(data,dim){this.unionExtent(data.getDataExtent(dim,false))},niceTicks:zrUtil.noop,niceExtent:zrUtil.noop});OrdinalScale.create=function(){return new OrdinalScale()};module.exports=OrdinalScale}),(function(module,exports,__webpack_require__){var clazzUtil=__webpack_require__(15);function Scale(setting){this._setting=setting||{};this._extent=[Infinity,-Infinity];this._interval=0;this.init&&this.init.apply(this,arguments)}var scaleProto=Scale.prototype;scaleProto.parse=function(val){return val};scaleProto.getSetting=function(name){return this._setting[name]};scaleProto.contain=function(val){var extent=this._extent;return val>=extent[0]&&val<=extent[1]};scaleProto.normalize=function(val){var extent=this._extent;if(extent[1]===extent[0]){return 0.5}return(val-extent[0])/(extent[1]-extent[0])};scaleProto.scale=function(val){var extent=this._extent;return val*(extent[1]-extent[0])+extent[0]};scaleProto.unionExtent=function(other){var extent=this._extent;other[0]<extent[0]&&(extent[0]=other[0]);other[1]>extent[1]&&(extent[1]=other[1])};scaleProto.unionExtentFromData=function(data,dim){this.unionExtent(data.getDataExtent(dim,true))};scaleProto.getExtent=function(){return this._extent.slice()};scaleProto.setExtent=function(start,end){var thisExtent=this._extent;if(!isNaN(start)){thisExtent[0]=start}if(!isNaN(end)){thisExtent[1]=end}};scaleProto.getTicksLabels=function(){var labels=[];var ticks=this.getTicks();for(var i=0;i<ticks.length;i++){labels.push(this.getLabel(ticks[i]))}return labels};scaleProto.isBlank=function(){return this._isBlank},scaleProto.setBlank=function(isBlank){this._isBlank=isBlank};clazzUtil.enableClassExtend(Scale);clazzUtil.enableClassManagement(Scale,{registerWhenExtend:true});module.exports=Scale}),(function(module,exports,__webpack_require__){var numberUtil=__webpack_require__(7);var formatUtil=__webpack_require__(6);var Scale=__webpack_require__(106);var helper=__webpack_require__(108);var roundNumber=numberUtil.round;var IntervalScale=Scale.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(start,end){var thisExtent=this._extent;if(!isNaN(start)){thisExtent[0]=parseFloat(start)}if(!isNaN(end)){thisExtent[1]=parseFloat(end)}},unionExtent:function(other){var extent=this._extent;other[0]<extent[0]&&(extent[0]=other[0]);other[1]>extent[1]&&(extent[1]=other[1]);IntervalScale.prototype.setExtent.call(this,extent[0],extent[1])},getInterval:function(){return this._interval},setInterval:function(interval){this._interval=interval;this._niceExtent=this._extent.slice();this._intervalPrecision=helper.getIntervalPrecision(interval)},getTicks:function(){return helper.intervalScaleGetTicks(this._interval,this._extent,this._niceExtent,this._intervalPrecision)},getTicksLabels:function(){var labels=[];var ticks=this.getTicks();for(var i=0;i<ticks.length;i++){labels.push(this.getLabel(ticks[i]))}return labels},getLabel:function(data,opt){if(data==null){return""}var precision=opt&&opt.precision;if(precision==null){precision=numberUtil.getPrecisionSafe(data)||0}else{if(precision==="auto"){precision=this._intervalPrecision}}data=roundNumber(data,precision,true);return formatUtil.addCommas(data)},niceTicks:function(splitNumber,minInterval,maxInterval){splitNumber=splitNumber||5;var extent=this._extent;var span=extent[1]-extent[0];if(!isFinite(span)){return}if(span<0){span=-span;extent.reverse()}var result=helper.intervalScaleNiceTicks(extent,splitNumber,minInterval,maxInterval);this._intervalPrecision=result.intervalPrecision;this._interval=result.interval;this._niceExtent=result.niceTickExtent},niceExtent:function(opt){var extent=this._extent;if(extent[0]===extent[1]){if(extent[0]!==0){var expandSize=extent[0];if(!opt.fixMax){extent[1]+=expandSize/2;extent[0]-=expandSize/2}else{extent[0]-=expandSize/2}}else{extent[1]=1}}var span=extent[1]-extent[0];if(!isFinite(span)){extent[0]=0;extent[1]=1}this.niceTicks(opt.splitNumber,opt.minInterval,opt.maxInterval);var interval=this._interval;if(!opt.fixMin){extent[0]=roundNumber(Math.floor(extent[0]/interval)*interval)}if(!opt.fixMax){extent[1]=roundNumber(Math.ceil(extent[1]/interval)*interval)}}});IntervalScale.create=function(){return new IntervalScale()};module.exports=IntervalScale}),(function(module,exports,__webpack_require__){var numberUtil=__webpack_require__(7);var roundNumber=numberUtil.round;var helper={};helper.intervalScaleNiceTicks=function(extent,splitNumber,minInterval,maxInterval){var result={};var span=extent[1]-extent[0];var interval=result.interval=numberUtil.nice(span/splitNumber,true);if(minInterval!=null&&interval<minInterval){interval=result.interval=minInterval}if(maxInterval!=null&&interval>maxInterval){interval=result.interval=maxInterval}var precision=result.intervalPrecision=helper.getIntervalPrecision(interval);
var niceTickExtent=result.niceTickExtent=[roundNumber(Math.ceil(extent[0]/interval)*interval,precision),roundNumber(Math.floor(extent[1]/interval)*interval,precision)];helper.fixExtent(niceTickExtent,extent);return result};helper.getIntervalPrecision=function(interval){return numberUtil.getPrecisionSafe(interval)+2};function clamp(niceTickExtent,idx,extent){niceTickExtent[idx]=Math.max(Math.min(niceTickExtent[idx],extent[1]),extent[0])}helper.fixExtent=function(niceTickExtent,extent){!isFinite(niceTickExtent[0])&&(niceTickExtent[0]=extent[0]);!isFinite(niceTickExtent[1])&&(niceTickExtent[1]=extent[1]);clamp(niceTickExtent,0,extent);clamp(niceTickExtent,1,extent);if(niceTickExtent[0]>niceTickExtent[1]){niceTickExtent[0]=niceTickExtent[1]}};helper.intervalScaleGetTicks=function(interval,extent,niceTickExtent,intervalPrecision){var ticks=[];if(!interval){return ticks}var safeLimit=10000;if(extent[0]<niceTickExtent[0]){ticks.push(extent[0])}var tick=niceTickExtent[0];while(tick<=niceTickExtent[1]){ticks.push(tick);tick=roundNumber(tick+interval,intervalPrecision);if(tick===ticks[ticks.length-1]){break}if(ticks.length>safeLimit){return[]}}if(extent[1]>(ticks.length?ticks[ticks.length-1]:niceTickExtent[1])){ticks.push(extent[1])}return ticks};module.exports=helper}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var numberUtil=__webpack_require__(7);var formatUtil=__webpack_require__(6);var scaleHelper=__webpack_require__(108);var IntervalScale=__webpack_require__(107);var intervalScaleProto=IntervalScale.prototype;var mathCeil=Math.ceil;var mathFloor=Math.floor;var ONE_SECOND=1000;var ONE_MINUTE=ONE_SECOND*60;var ONE_HOUR=ONE_MINUTE*60;var ONE_DAY=ONE_HOUR*24;var bisect=function(a,x,lo,hi){while(lo<hi){var mid=lo+hi>>>1;if(a[mid][2]<x){lo=mid+1}else{hi=mid}}return lo};var TimeScale=IntervalScale.extend({type:"time",getLabel:function(val){var stepLvl=this._stepLvl;var date=new Date(val);return formatUtil.formatTime(stepLvl[0],date,this.getSetting("useUTC"))},niceExtent:function(opt){var extent=this._extent;if(extent[0]===extent[1]){extent[0]-=ONE_DAY;extent[1]+=ONE_DAY}if(extent[1]===-Infinity&&extent[0]===Infinity){var d=new Date();extent[1]=+new Date(d.getFullYear(),d.getMonth(),d.getDate());extent[0]=extent[1]-ONE_DAY}this.niceTicks(opt.splitNumber,opt.minInterval,opt.maxInterval);var interval=this._interval;if(!opt.fixMin){extent[0]=numberUtil.round(mathFloor(extent[0]/interval)*interval)}if(!opt.fixMax){extent[1]=numberUtil.round(mathCeil(extent[1]/interval)*interval)}},niceTicks:function(approxTickNum,minInterval,maxInterval){approxTickNum=approxTickNum||10;var extent=this._extent;var span=extent[1]-extent[0];var approxInterval=span/approxTickNum;if(minInterval!=null&&approxInterval<minInterval){approxInterval=minInterval}if(maxInterval!=null&&approxInterval>maxInterval){approxInterval=maxInterval}var scaleLevelsLen=scaleLevels.length;var idx=bisect(scaleLevels,approxInterval,0,scaleLevelsLen);var level=scaleLevels[Math.min(idx,scaleLevelsLen-1)];var interval=level[2];if(level[0]==="year"){var yearSpan=span/interval;var yearStep=numberUtil.nice(yearSpan/approxTickNum,true);interval*=yearStep}var timezoneOffset=this.getSetting("useUTC")?0:(new Date(+extent[0]||+extent[1])).getTimezoneOffset()*60*1000;var niceExtent=[Math.round(mathCeil((extent[0]-timezoneOffset)/interval)*interval+timezoneOffset),Math.round(mathFloor((extent[1]-timezoneOffset)/interval)*interval+timezoneOffset)];scaleHelper.fixExtent(niceExtent,extent);this._stepLvl=level;this._interval=interval;this._niceExtent=niceExtent},parse:function(val){return +numberUtil.parseDate(val)}});zrUtil.each(["contain","normalize"],function(methodName){TimeScale.prototype[methodName]=function(val){return intervalScaleProto[methodName].call(this,this.parse(val))}});var scaleLevels=[["hh:mm:ss",1,ONE_SECOND],["hh:mm:ss",5,ONE_SECOND*5],["hh:mm:ss",10,ONE_SECOND*10],["hh:mm:ss",15,ONE_SECOND*15],["hh:mm:ss",30,ONE_SECOND*30],["hh:mm\nMM-dd",1,ONE_MINUTE],["hh:mm\nMM-dd",5,ONE_MINUTE*5],["hh:mm\nMM-dd",10,ONE_MINUTE*10],["hh:mm\nMM-dd",15,ONE_MINUTE*15],["hh:mm\nMM-dd",30,ONE_MINUTE*30],["hh:mm\nMM-dd",1,ONE_HOUR],["hh:mm\nMM-dd",2,ONE_HOUR*2],["hh:mm\nMM-dd",6,ONE_HOUR*6],["hh:mm\nMM-dd",12,ONE_HOUR*12],["MM-dd\nyyyy",1,ONE_DAY],["week",7,ONE_DAY*7],["month",1,ONE_DAY*31],["quarter",3,ONE_DAY*380/4],["half-year",6,ONE_DAY*380/2],["year",1,ONE_DAY*380]];TimeScale.create=function(model){return new TimeScale({useUTC:model.ecModel.get("useUTC")})};module.exports=TimeScale}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var Scale=__webpack_require__(106);var numberUtil=__webpack_require__(7);var IntervalScale=__webpack_require__(107);var scaleProto=Scale.prototype;var intervalScaleProto=IntervalScale.prototype;var getPrecisionSafe=numberUtil.getPrecisionSafe;var roundingErrorFix=numberUtil.round;var mathFloor=Math.floor;var mathCeil=Math.ceil;var mathPow=Math.pow;var mathLog=Math.log;var LogScale=Scale.extend({type:"log",base:10,$constructor:function(){Scale.apply(this,arguments);
this._originalScale=new IntervalScale()},getTicks:function(){var originalScale=this._originalScale;var extent=this._extent;var originalExtent=originalScale.getExtent();return zrUtil.map(intervalScaleProto.getTicks.call(this),function(val){var powVal=numberUtil.round(mathPow(this.base,val));powVal=(val===extent[0]&&originalScale.__fixMin)?fixRoundingError(powVal,originalExtent[0]):powVal;powVal=(val===extent[1]&&originalScale.__fixMax)?fixRoundingError(powVal,originalExtent[1]):powVal;return powVal},this)},getLabel:intervalScaleProto.getLabel,scale:function(val){val=scaleProto.scale.call(this,val);return mathPow(this.base,val)},setExtent:function(start,end){var base=this.base;start=mathLog(start)/mathLog(base);end=mathLog(end)/mathLog(base);intervalScaleProto.setExtent.call(this,start,end)},getExtent:function(){var base=this.base;var extent=scaleProto.getExtent.call(this);extent[0]=mathPow(base,extent[0]);extent[1]=mathPow(base,extent[1]);var originalScale=this._originalScale;var originalExtent=originalScale.getExtent();originalScale.__fixMin&&(extent[0]=fixRoundingError(extent[0],originalExtent[0]));originalScale.__fixMax&&(extent[1]=fixRoundingError(extent[1],originalExtent[1]));return extent},unionExtent:function(extent){this._originalScale.unionExtent(extent);var base=this.base;extent[0]=mathLog(extent[0])/mathLog(base);extent[1]=mathLog(extent[1])/mathLog(base);scaleProto.unionExtent.call(this,extent)},unionExtentFromData:function(data,dim){this.unionExtent(data.getDataExtent(dim,true,function(val){return val>0}))},niceTicks:function(approxTickNum){approxTickNum=approxTickNum||10;var extent=this._extent;var span=extent[1]-extent[0];if(span===Infinity||span<=0){return}var interval=numberUtil.quantity(span);var err=approxTickNum/span*interval;if(err<=0.5){interval*=10}while(!isNaN(interval)&&Math.abs(interval)<1&&Math.abs(interval)>0){interval*=10}var niceExtent=[numberUtil.round(mathCeil(extent[0]/interval)*interval),numberUtil.round(mathFloor(extent[1]/interval)*interval)];this._interval=interval;this._niceExtent=niceExtent},niceExtent:function(opt){intervalScaleProto.niceExtent.call(this,opt);var originalScale=this._originalScale;originalScale.__fixMin=opt.fixMin;originalScale.__fixMax=opt.fixMax}});zrUtil.each(["contain","normalize"],function(methodName){LogScale.prototype[methodName]=function(val){val=mathLog(val)/mathLog(this.base);return scaleProto[methodName].call(this,val)}});LogScale.create=function(){return new LogScale()};function fixRoundingError(val,originalVal){return roundingErrorFix(val,getPrecisionSafe(originalVal))}module.exports=LogScale}),(function(module,exports,__webpack_require__){var createListFromArray=__webpack_require__(112);var symbolUtil=__webpack_require__(114);var axisHelper=__webpack_require__(104);var axisModelCommonMixin=__webpack_require__(115);var Model=__webpack_require__(14);var util=__webpack_require__(4);module.exports={createList:function(seriesModel){var data=seriesModel.get("data");return createListFromArray(data,seriesModel,seriesModel.ecModel)},completeDimensions:__webpack_require__(113),createSymbol:symbolUtil.createSymbol,createScale:function(dataExtent,option){var axisModel=option;if(!(option instanceof Model)){axisModel=new Model(option);util.mixin(axisModel,axisModelCommonMixin)}var scale=axisHelper.createScaleByModel(axisModel);scale.setExtent(dataExtent[0],dataExtent[1]);axisHelper.niceScaleExtent(scale,axisModel);return scale},mixinAxisModelCommonMethods:function(Model){util.mixin(Model,axisModelCommonMixin)}}}),(function(module,exports,__webpack_require__){var List=__webpack_require__(101);var completeDimensions=__webpack_require__(113);var zrUtil=__webpack_require__(4);var modelUtil=__webpack_require__(5);var CoordinateSystem=__webpack_require__(79);var getDataItemValue=modelUtil.getDataItemValue;var converDataValue=modelUtil.converDataValue;function firstDataNotNull(data){var i=0;while(i<data.length&&data[i]==null){i++}return data[i]}function ifNeedCompleteOrdinalData(data){var sampleItem=firstDataNotNull(data);return sampleItem!=null&&!zrUtil.isArray(getDataItemValue(sampleItem))}function createListFromArray(data,seriesModel,ecModel){data=data||[];if(true){if(!zrUtil.isArray(data)){throw new Error("Invalid data.")}}var coordSysName=seriesModel.get("coordinateSystem");var creator=creators[coordSysName];var registeredCoordSys=CoordinateSystem.get(coordSysName);var completeDimOpt={encodeDef:seriesModel.get("encode"),dimsDef:seriesModel.get("dimensions")};var axesInfo=creator&&creator(data,seriesModel,ecModel,completeDimOpt);var dimensions=axesInfo&&axesInfo.dimensions;if(!dimensions){dimensions=(registeredCoordSys&&(registeredCoordSys.getDimensionsInfo?registeredCoordSys.getDimensionsInfo():registeredCoordSys.dimensions.slice()))||["x","y"];dimensions=completeDimensions(dimensions,data,completeDimOpt)}var categoryIndex=axesInfo?axesInfo.categoryIndex:-1;var list=new List(dimensions,seriesModel);var nameList=createNameList(axesInfo,data);var categories={};
var dimValueGetter=(categoryIndex>=0&&ifNeedCompleteOrdinalData(data))?function(itemOpt,dimName,dataIndex,dimIndex){if(modelUtil.isDataItemOption(itemOpt)){list.hasItemOption=true}return dimIndex===categoryIndex?dataIndex:converDataValue(getDataItemValue(itemOpt),dimensions[dimIndex])}:function(itemOpt,dimName,dataIndex,dimIndex){var value=getDataItemValue(itemOpt);var val=converDataValue(value&&value[dimIndex],dimensions[dimIndex]);if(modelUtil.isDataItemOption(itemOpt)){list.hasItemOption=true}var categoryAxesModels=axesInfo&&axesInfo.categoryAxesModels;if(categoryAxesModels&&categoryAxesModels[dimName]){if(typeof val==="string"){categories[dimName]=categories[dimName]||categoryAxesModels[dimName].getCategories();val=zrUtil.indexOf(categories[dimName],val);if(val<0&&!isNaN(val)){val=+val}}}return val};list.hasItemOption=false;list.initData(data,nameList,dimValueGetter);return list}function isStackable(axisType){return axisType!=="category"&&axisType!=="time"}function getDimTypeByAxis(axisType){return axisType==="category"?"ordinal":axisType==="time"?"time":"float"}var creators={cartesian2d:function(data,seriesModel,ecModel,completeDimOpt){var axesModels=zrUtil.map(["xAxis","yAxis"],function(name){return ecModel.queryComponents({mainType:name,index:seriesModel.get(name+"Index"),id:seriesModel.get(name+"Id")})[0]});var xAxisModel=axesModels[0];var yAxisModel=axesModels[1];if(true){if(!xAxisModel){throw new Error('xAxis "'+zrUtil.retrieve(seriesModel.get("xAxisIndex"),seriesModel.get("xAxisId"),0)+'" not found')}if(!yAxisModel){throw new Error('yAxis "'+zrUtil.retrieve(seriesModel.get("xAxisIndex"),seriesModel.get("yAxisId"),0)+'" not found')}}var xAxisType=xAxisModel.get("type");var yAxisType=yAxisModel.get("type");var dimensions=[{name:"x",type:getDimTypeByAxis(xAxisType),stackable:isStackable(xAxisType)},{name:"y",type:getDimTypeByAxis(yAxisType),stackable:isStackable(yAxisType)}];var isXAxisCateogry=xAxisType==="category";var isYAxisCategory=yAxisType==="category";dimensions=completeDimensions(dimensions,data,completeDimOpt);var categoryAxesModels={};if(isXAxisCateogry){categoryAxesModels.x=xAxisModel}if(isYAxisCategory){categoryAxesModels.y=yAxisModel}return{dimensions:dimensions,categoryIndex:isXAxisCateogry?0:(isYAxisCategory?1:-1),categoryAxesModels:categoryAxesModels}},singleAxis:function(data,seriesModel,ecModel,completeDimOpt){var singleAxisModel=ecModel.queryComponents({mainType:"singleAxis",index:seriesModel.get("singleAxisIndex"),id:seriesModel.get("singleAxisId")})[0];if(true){if(!singleAxisModel){throw new Error("singleAxis should be specified.")}}var singleAxisType=singleAxisModel.get("type");var isCategory=singleAxisType==="category";var dimensions=[{name:"single",type:getDimTypeByAxis(singleAxisType),stackable:isStackable(singleAxisType)}];dimensions=completeDimensions(dimensions,data,completeDimOpt);var categoryAxesModels={};if(isCategory){categoryAxesModels.single=singleAxisModel}return{dimensions:dimensions,categoryIndex:isCategory?0:-1,categoryAxesModels:categoryAxesModels}},polar:function(data,seriesModel,ecModel,completeDimOpt){var polarModel=ecModel.queryComponents({mainType:"polar",index:seriesModel.get("polarIndex"),id:seriesModel.get("polarId")})[0];var angleAxisModel=polarModel.findAxisModel("angleAxis");var radiusAxisModel=polarModel.findAxisModel("radiusAxis");if(true){if(!angleAxisModel){throw new Error("angleAxis option not found")}if(!radiusAxisModel){throw new Error("radiusAxis option not found")}}var radiusAxisType=radiusAxisModel.get("type");var angleAxisType=angleAxisModel.get("type");var dimensions=[{name:"radius",type:getDimTypeByAxis(radiusAxisType),stackable:isStackable(radiusAxisType)},{name:"angle",type:getDimTypeByAxis(angleAxisType),stackable:isStackable(angleAxisType)}];var isAngleAxisCateogry=angleAxisType==="category";var isRadiusAxisCateogry=radiusAxisType==="category";dimensions=completeDimensions(dimensions,data,completeDimOpt);var categoryAxesModels={};if(isRadiusAxisCateogry){categoryAxesModels.radius=radiusAxisModel}if(isAngleAxisCateogry){categoryAxesModels.angle=angleAxisModel}return{dimensions:dimensions,categoryIndex:isAngleAxisCateogry?1:(isRadiusAxisCateogry?0:-1),categoryAxesModels:categoryAxesModels}},geo:function(data,seriesModel,ecModel,completeDimOpt){return{dimensions:completeDimensions([{name:"lng"},{name:"lat"}],data,completeDimOpt)}}};function createNameList(result,data){var nameList=[];var categoryDim=result&&result.dimensions[result.categoryIndex];var categoryAxisModel;if(categoryDim){categoryAxisModel=result.categoryAxesModels[categoryDim.name]}if(categoryAxisModel){var categories=categoryAxisModel.getCategories();if(categories){var dataLen=data.length;if(zrUtil.isArray(data[0])&&data[0].length>1){nameList=[];for(var i=0;i<dataLen;i++){nameList[i]=categories[data[i][result.categoryIndex||0]]}}else{nameList=categories.slice(0)}}}return nameList}module.exports=createListFromArray}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);
var modelUtil=__webpack_require__(5);var each=zrUtil.each;var isString=zrUtil.isString;var defaults=zrUtil.defaults;var normalizeToArray=modelUtil.normalizeToArray;var OTHER_DIMS={tooltip:1,label:1,itemName:1};function completeDimensions(sysDims,data,opt){data=data||[];opt=opt||{};sysDims=(sysDims||[]).slice();var dimsDef=(opt.dimsDef||[]).slice();var encodeDef=zrUtil.createHashMap(opt.encodeDef);var dataDimNameMap=zrUtil.createHashMap();var coordDimNameMap=zrUtil.createHashMap();var result=[];var dimCount=opt.dimCount;if(dimCount==null){var value0=retrieveValue(data[0]);dimCount=Math.max(zrUtil.isArray(value0)&&value0.length||1,sysDims.length,dimsDef.length);each(sysDims,function(sysDimItem){var sysDimItemDimsDef=sysDimItem.dimsDef;sysDimItemDimsDef&&(dimCount=Math.max(dimCount,sysDimItemDimsDef.length))})}for(var i=0;i<dimCount;i++){var dimDefItem=isString(dimsDef[i])?{name:dimsDef[i]}:(dimsDef[i]||{});var userDimName=dimDefItem.name;var resultItem=result[i]={otherDims:{}};if(userDimName!=null&&dataDimNameMap.get(userDimName)==null){resultItem.name=resultItem.tooltipName=userDimName;dataDimNameMap.set(userDimName,i)}dimDefItem.type!=null&&(resultItem.type=dimDefItem.type)}encodeDef.each(function(dataDims,coordDim){dataDims=encodeDef.set(coordDim,normalizeToArray(dataDims).slice());each(dataDims,function(resultDimIdx,coordDimIndex){isString(resultDimIdx)&&(resultDimIdx=dataDimNameMap.get(resultDimIdx));if(resultDimIdx!=null&&resultDimIdx<dimCount){dataDims[coordDimIndex]=resultDimIdx;applyDim(result[resultDimIdx],coordDim,coordDimIndex)}})});var availDimIdx=0;each(sysDims,function(sysDimItem,sysDimIndex){var coordDim;var sysDimItem;var sysDimItemDimsDef;var sysDimItemOtherDims;if(isString(sysDimItem)){coordDim=sysDimItem;sysDimItem={}}else{coordDim=sysDimItem.name;sysDimItem=zrUtil.clone(sysDimItem);sysDimItemDimsDef=sysDimItem.dimsDef;sysDimItemOtherDims=sysDimItem.otherDims;sysDimItem.name=sysDimItem.coordDim=sysDimItem.coordDimIndex=sysDimItem.dimsDef=sysDimItem.otherDims=null}var dataDims=normalizeToArray(encodeDef.get(coordDim));if(!dataDims.length){for(var i=0;i<(sysDimItemDimsDef&&sysDimItemDimsDef.length||1);i++){while(availDimIdx<result.length&&result[availDimIdx].coordDim!=null){availDimIdx++}availDimIdx<result.length&&dataDims.push(availDimIdx++)}}each(dataDims,function(resultDimIdx,coordDimIndex){var resultItem=result[resultDimIdx];applyDim(defaults(resultItem,sysDimItem),coordDim,coordDimIndex);if(resultItem.name==null&&sysDimItemDimsDef){resultItem.name=resultItem.tooltipName=sysDimItemDimsDef[coordDimIndex]}sysDimItemOtherDims&&defaults(resultItem.otherDims,sysDimItemOtherDims)})});var extra=opt.extraPrefix||"value";for(var resultDimIdx=0;resultDimIdx<dimCount;resultDimIdx++){var resultItem=result[resultDimIdx]=result[resultDimIdx]||{};var coordDim=resultItem.coordDim;coordDim==null&&(resultItem.coordDim=genName(extra,coordDimNameMap,opt.extraFromZero),resultItem.coordDimIndex=0,resultItem.isExtraCoord=true);resultItem.name==null&&(resultItem.name=genName(resultItem.coordDim,dataDimNameMap));resultItem.type==null&&guessOrdinal(data,resultDimIdx)&&(resultItem.type="ordinal")}return result;function applyDim(resultItem,coordDim,coordDimIndex){if(OTHER_DIMS[coordDim]){resultItem.otherDims[coordDim]=coordDimIndex}else{resultItem.coordDim=coordDim;resultItem.coordDimIndex=coordDimIndex;coordDimNameMap.set(coordDim,true)}}function genName(name,map,fromZero){if(fromZero||map.get(name)!=null){var i=0;while(map.get(name+i)!=null){i++}name+=i}map.set(name,true);return name}}var guessOrdinal=completeDimensions.guessOrdinal=function(data,dimIndex){for(var i=0,len=data.length;i<len;i++){var value=retrieveValue(data[i]);if(!zrUtil.isArray(value)){return false}var value=value[dimIndex];if(value!=null&&isFinite(value)&&value!==""){return false}else{if(isString(value)&&value!=="-"){return true}}}return false};function retrieveValue(o){return zrUtil.isArray(o)?o:zrUtil.isObject(o)?o.value:o}module.exports=completeDimensions}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var BoundingRect=__webpack_require__(9);var Triangle=graphic.extendShape({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(path,shape){var cx=shape.cx;var cy=shape.cy;var width=shape.width/2;var height=shape.height/2;path.moveTo(cx,cy-height);path.lineTo(cx+width,cy+height);path.lineTo(cx-width,cy+height);path.closePath()}});var Diamond=graphic.extendShape({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(path,shape){var cx=shape.cx;var cy=shape.cy;var width=shape.width/2;var height=shape.height/2;path.moveTo(cx,cy-height);path.lineTo(cx+width,cy);path.lineTo(cx,cy+height);path.lineTo(cx-width,cy);path.closePath()}});var Pin=graphic.extendShape({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(path,shape){var x=shape.x;var y=shape.y;var w=shape.width/5*3;var h=Math.max(w,shape.height);var r=w/2;var dy=r*r/(h-r);var cy=y-h+r+dy;var angle=Math.asin(dy/r);var dx=Math.cos(angle)*r;
var tanX=Math.sin(angle);var tanY=Math.cos(angle);path.arc(x,cy,r,Math.PI-angle,Math.PI*2+angle);var cpLen=r*0.6;var cpLen2=r*0.7;path.bezierCurveTo(x+dx-tanX*cpLen,cy+dy+tanY*cpLen,x,y-cpLen2,x,y);path.bezierCurveTo(x,y-cpLen2,x-dx+tanX*cpLen,cy+dy+tanY*cpLen,x-dx,cy+dy);path.closePath()}});var Arrow=graphic.extendShape({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(ctx,shape){var height=shape.height;var width=shape.width;var x=shape.x;var y=shape.y;var dx=width/3*2;ctx.moveTo(x,y);ctx.lineTo(x+dx,y+height);ctx.lineTo(x,y+height/4*3);ctx.lineTo(x-dx,y+height);ctx.lineTo(x,y);ctx.closePath()}});var symbolCtors={line:graphic.Line,rect:graphic.Rect,roundRect:graphic.Rect,square:graphic.Rect,circle:graphic.Circle,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle};var symbolShapeMakers={line:function(x,y,w,h,shape){shape.x1=x;shape.y1=y+h/2;shape.x2=x+w;shape.y2=y+h/2},rect:function(x,y,w,h,shape){shape.x=x;shape.y=y;shape.width=w;shape.height=h},roundRect:function(x,y,w,h,shape){shape.x=x;shape.y=y;shape.width=w;shape.height=h;shape.r=Math.min(w,h)/4},square:function(x,y,w,h,shape){var size=Math.min(w,h);shape.x=x;shape.y=y;shape.width=size;shape.height=size},circle:function(x,y,w,h,shape){shape.cx=x+w/2;shape.cy=y+h/2;shape.r=Math.min(w,h)/2},diamond:function(x,y,w,h,shape){shape.cx=x+w/2;shape.cy=y+h/2;shape.width=w;shape.height=h},pin:function(x,y,w,h,shape){shape.x=x+w/2;shape.y=y+h/2;shape.width=w;shape.height=h},arrow:function(x,y,w,h,shape){shape.x=x+w/2;shape.y=y+h/2;shape.width=w;shape.height=h},triangle:function(x,y,w,h,shape){shape.cx=x+w/2;shape.cy=y+h/2;shape.width=w;shape.height=h}};var symbolBuildProxies={};for(var name in symbolCtors){if(symbolCtors.hasOwnProperty(name)){symbolBuildProxies[name]=new symbolCtors[name]()}}var Symbol=graphic.extendShape({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},beforeBrush:function(){var style=this.style;var shape=this.shape;if(shape.symbolType==="pin"&&style.textPosition==="inside"){style.textPosition=["50%","40%"];style.textAlign="center";style.textVerticalAlign="middle"}},buildPath:function(ctx,shape,inBundle){var symbolType=shape.symbolType;var proxySymbol=symbolBuildProxies[symbolType];if(shape.symbolType!=="none"){if(!proxySymbol){symbolType="rect";proxySymbol=symbolBuildProxies[symbolType]}symbolShapeMakers[symbolType](shape.x,shape.y,shape.width,shape.height,proxySymbol.shape);proxySymbol.buildPath(ctx,proxySymbol.shape,inBundle)}}});var symbolPathSetColor=function(color){if(this.type!=="image"){var symbolStyle=this.style;var symbolShape=this.shape;if(symbolShape&&symbolShape.symbolType==="line"){symbolStyle.stroke=color}else{if(this.__isEmptyBrush){symbolStyle.stroke=color;symbolStyle.fill="#fff"}else{symbolStyle.fill&&(symbolStyle.fill=color);symbolStyle.stroke&&(symbolStyle.stroke=color)}}this.dirty(false)}};var symbolUtil={createSymbol:function(symbolType,x,y,w,h,color){var isEmpty=symbolType.indexOf("empty")===0;if(isEmpty){symbolType=symbolType.substr(5,1).toLowerCase()+symbolType.substr(6)}var symbolPath;if(symbolType.indexOf("image://")===0){symbolPath=new graphic.Image({style:{image:symbolType.slice(8),x:x,y:y,width:w,height:h}})}else{if(symbolType.indexOf("path://")===0){symbolPath=graphic.makePath(symbolType.slice(7),{},new BoundingRect(x,y,w,h))}else{symbolPath=new Symbol({shape:{symbolType:symbolType,x:x,y:y,width:w,height:h}})}}symbolPath.__isEmptyBrush=isEmpty;symbolPath.setColor=symbolPathSetColor;symbolPath.setColor(color);return symbolPath}};module.exports=symbolUtil}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var axisHelper=__webpack_require__(104);function getName(obj){if(zrUtil.isObject(obj)&&obj.value!=null){return obj.value}else{return obj+""}}module.exports={getFormattedLabels:function(){return axisHelper.getFormattedLabels(this.axis,this.get("axisLabel.formatter"))},getCategories:function(){return this.get("type")==="category"&&zrUtil.map(this.get("data"),getName)},getMin:function(origin){var option=this.option;var min=(!origin&&option.rangeStart!=null)?option.rangeStart:option.min;if(this.axis&&min!=null&&min!=="dataMin"&&typeof min!=="function"&&!zrUtil.eqNaN(min)){min=this.axis.scale.parse(min)}return min},getMax:function(origin){var option=this.option;var max=(!origin&&option.rangeEnd!=null)?option.rangeEnd:option.max;if(this.axis&&max!=null&&max!=="dataMax"&&typeof max!=="function"&&!zrUtil.eqNaN(max)){max=this.axis.scale.parse(max)}return max},getNeedCrossZero:function(){var option=this.option;return(option.rangeStart!=null||option.rangeEnd!=null)?false:!option.scale},getCoordSysModel:zrUtil.noop,setRange:function(rangeStart,rangeEnd){this.option.rangeStart=rangeStart;this.option.rangeEnd=rangeEnd},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var echarts=__webpack_require__(1);var PRIORITY=echarts.PRIORITY;__webpack_require__(117);__webpack_require__(118);
echarts.registerVisual(zrUtil.curry(__webpack_require__(124),"line","circle","line"));echarts.registerLayout(zrUtil.curry(__webpack_require__(125),"line"));echarts.registerProcessor(PRIORITY.PROCESSOR.STATISTIC,zrUtil.curry(__webpack_require__(126),"line"));__webpack_require__(127)}),(function(module,exports,__webpack_require__){var createListFromArray=__webpack_require__(112);var SeriesModel=__webpack_require__(83);module.exports=SeriesModel.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(option,ecModel){if(true){var coordSys=option.coordinateSystem;if(coordSys!=="polar"&&coordSys!=="cartesian2d"){throw new Error("Line not support coordinateSystem besides cartesian and polar")}}return createListFromArray(option.data,this,ecModel)},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:true,hoverAnimation:true,clipOverflow:true,label:{normal:{position:"top"}},lineStyle:{normal:{width:2,type:"solid"}},step:false,smooth:false,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:true,showAllSymbol:false,connectNulls:false,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:Infinity}})}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var SymbolDraw=__webpack_require__(119);var Symbol=__webpack_require__(120);var lineAnimationDiff=__webpack_require__(122);var graphic=__webpack_require__(20);var modelUtil=__webpack_require__(5);var polyHelper=__webpack_require__(123);var ChartView=__webpack_require__(85);function isPointsSame(points1,points2){if(points1.length!==points2.length){return}for(var i=0;i<points1.length;i++){var p1=points1[i];var p2=points2[i];if(p1[0]!==p2[0]||p1[1]!==p2[1]){return}}return true}function getSmooth(smooth){return typeof(smooth)==="number"?smooth:(smooth?0.3:0)}function getAxisExtentWithGap(axis){var extent=axis.getGlobalExtent();if(axis.onBand){var halfBandWidth=axis.getBandWidth()/2-1;var dir=extent[1]>extent[0]?1:-1;extent[0]+=dir*halfBandWidth;extent[1]-=dir*halfBandWidth}return extent}function sign(val){return val>=0?1:-1}function getStackedOnPoints(coordSys,data){var baseAxis=coordSys.getBaseAxis();var valueAxis=coordSys.getOtherAxis(baseAxis);var valueStart=0;if(!baseAxis.onZero){var extent=valueAxis.scale.getExtent();if(extent[0]>0){valueStart=extent[0]}else{if(extent[1]<0){valueStart=extent[1]}}}var valueDim=valueAxis.dim;var baseDataOffset=valueDim==="x"||valueDim==="radius"?1:0;return data.mapArray([valueDim],function(val,idx){var stackedOnSameSign;var stackedOn=data.stackedOn;while(stackedOn&&sign(stackedOn.get(valueDim,idx))===sign(val)){stackedOnSameSign=stackedOn;break}var stackedData=[];stackedData[baseDataOffset]=data.get(baseAxis.dim,idx);stackedData[1-baseDataOffset]=stackedOnSameSign?stackedOnSameSign.get(valueDim,idx,true):valueStart;return coordSys.dataToPoint(stackedData)},true)}function createGridClipShape(cartesian,hasAnimation,seriesModel){var xExtent=getAxisExtentWithGap(cartesian.getAxis("x"));var yExtent=getAxisExtentWithGap(cartesian.getAxis("y"));var isHorizontal=cartesian.getBaseAxis().isHorizontal();var x=Math.min(xExtent[0],xExtent[1]);var y=Math.min(yExtent[0],yExtent[1]);var width=Math.max(xExtent[0],xExtent[1])-x;var height=Math.max(yExtent[0],yExtent[1])-y;var lineWidth=seriesModel.get("lineStyle.normal.width")||2;var expandSize=seriesModel.get("clipOverflow")?lineWidth/2:Math.max(width,height);if(isHorizontal){y-=expandSize;height+=expandSize*2}else{x-=expandSize;width+=expandSize*2}var clipPath=new graphic.Rect({shape:{x:x,y:y,width:width,height:height}});if(hasAnimation){clipPath.shape[isHorizontal?"width":"height"]=0;graphic.initProps(clipPath,{shape:{width:width,height:height}},seriesModel)}return clipPath}function createPolarClipShape(polar,hasAnimation,seriesModel){var angleAxis=polar.getAngleAxis();var radiusAxis=polar.getRadiusAxis();var radiusExtent=radiusAxis.getExtent();var angleExtent=angleAxis.getExtent();var RADIAN=Math.PI/180;var clipPath=new graphic.Sector({shape:{cx:polar.cx,cy:polar.cy,r0:radiusExtent[0],r:radiusExtent[1],startAngle:-angleExtent[0]*RADIAN,endAngle:-angleExtent[1]*RADIAN,clockwise:angleAxis.inverse}});if(hasAnimation){clipPath.shape.endAngle=-angleExtent[0]*RADIAN;graphic.initProps(clipPath,{shape:{endAngle:-angleExtent[1]*RADIAN}},seriesModel)}return clipPath}function createClipShape(coordSys,hasAnimation,seriesModel){return coordSys.type==="polar"?createPolarClipShape(coordSys,hasAnimation,seriesModel):createGridClipShape(coordSys,hasAnimation,seriesModel)}function turnPointsIntoStep(points,coordSys,stepTurnAt){var baseAxis=coordSys.getBaseAxis();var baseIndex=baseAxis.dim==="x"||baseAxis.dim==="radius"?0:1;var stepPoints=[];for(var i=0;i<points.length-1;i++){var nextPt=points[i+1];var pt=points[i];stepPoints.push(pt);var stepPt=[];switch(stepTurnAt){case"end":stepPt[baseIndex]=nextPt[baseIndex];stepPt[1-baseIndex]=pt[1-baseIndex];stepPoints.push(stepPt);break;case"middle":var middle=(pt[baseIndex]+nextPt[baseIndex])/2;
var stepPt2=[];stepPt[baseIndex]=stepPt2[baseIndex]=middle;stepPt[1-baseIndex]=pt[1-baseIndex];stepPt2[1-baseIndex]=nextPt[1-baseIndex];stepPoints.push(stepPt);stepPoints.push(stepPt2);break;default:stepPt[baseIndex]=pt[baseIndex];stepPt[1-baseIndex]=nextPt[1-baseIndex];stepPoints.push(stepPt)}}points[i]&&stepPoints.push(points[i]);return stepPoints}function getVisualGradient(data,coordSys){var visualMetaList=data.getVisual("visualMeta");if(!visualMetaList||!visualMetaList.length||!data.count()){return}var visualMeta;for(var i=visualMetaList.length-1;i>=0;i--){if(visualMetaList[i].dimension<2){visualMeta=visualMetaList[i];break}}if(!visualMeta||coordSys.type!=="cartesian2d"){if(true){console.warn("Visual map on line style only support x or y dimension.")}return}var dimension=visualMeta.dimension;var dimName=data.dimensions[dimension];var axis=coordSys.getAxis(dimName);var colorStops=zrUtil.map(visualMeta.stops,function(stop){return{coord:axis.toGlobalCoord(axis.dataToCoord(stop.value)),color:stop.color}});var stopLen=colorStops.length;var outerColors=visualMeta.outerColors.slice();if(stopLen&&colorStops[0].coord>colorStops[stopLen-1].coord){colorStops.reverse();outerColors.reverse()}var tinyExtent=10;var minCoord=colorStops[0].coord-tinyExtent;var maxCoord=colorStops[stopLen-1].coord+tinyExtent;var coordSpan=maxCoord-minCoord;if(coordSpan<0.001){return"transparent"}zrUtil.each(colorStops,function(stop){stop.offset=(stop.coord-minCoord)/coordSpan});colorStops.push({offset:stopLen?colorStops[stopLen-1].offset:0.5,color:outerColors[1]||"transparent"});colorStops.unshift({offset:stopLen?colorStops[0].offset:0.5,color:outerColors[0]||"transparent"});var gradient=new graphic.LinearGradient(0,0,0,0,colorStops,true);gradient[dimName]=minCoord;gradient[dimName+"2"]=maxCoord;return gradient}module.exports=ChartView.extend({type:"line",init:function(){var lineGroup=new graphic.Group();var symbolDraw=new SymbolDraw();this.group.add(symbolDraw.group);this._symbolDraw=symbolDraw;this._lineGroup=lineGroup},render:function(seriesModel,ecModel,api){var coordSys=seriesModel.coordinateSystem;var group=this.group;var data=seriesModel.getData();var lineStyleModel=seriesModel.getModel("lineStyle.normal");var areaStyleModel=seriesModel.getModel("areaStyle.normal");var points=data.mapArray(data.getItemLayout,true);var isCoordSysPolar=coordSys.type==="polar";var prevCoordSys=this._coordSys;var symbolDraw=this._symbolDraw;var polyline=this._polyline;var polygon=this._polygon;var lineGroup=this._lineGroup;var hasAnimation=seriesModel.get("animation");var isAreaChart=!areaStyleModel.isEmpty();var stackedOnPoints=getStackedOnPoints(coordSys,data);var showSymbol=seriesModel.get("showSymbol");var isSymbolIgnore=showSymbol&&!isCoordSysPolar&&!seriesModel.get("showAllSymbol")&&this._getSymbolIgnoreFunc(data,coordSys);var oldData=this._data;oldData&&oldData.eachItemGraphicEl(function(el,idx){if(el.__temp){group.remove(el);oldData.setItemGraphicEl(idx,null)}});if(!showSymbol){symbolDraw.remove()}group.add(lineGroup);var step=!isCoordSysPolar&&seriesModel.get("step");if(!(polyline&&prevCoordSys.type===coordSys.type&&step===this._step)){showSymbol&&symbolDraw.updateData(data,isSymbolIgnore);if(step){points=turnPointsIntoStep(points,coordSys,step);stackedOnPoints=turnPointsIntoStep(stackedOnPoints,coordSys,step)}polyline=this._newPolyline(points,coordSys,hasAnimation);if(isAreaChart){polygon=this._newPolygon(points,stackedOnPoints,coordSys,hasAnimation)}lineGroup.setClipPath(createClipShape(coordSys,true,seriesModel))}else{if(isAreaChart&&!polygon){polygon=this._newPolygon(points,stackedOnPoints,coordSys,hasAnimation)}else{if(polygon&&!isAreaChart){lineGroup.remove(polygon);polygon=this._polygon=null}}lineGroup.setClipPath(createClipShape(coordSys,false,seriesModel));showSymbol&&symbolDraw.updateData(data,isSymbolIgnore);data.eachItemGraphicEl(function(el){el.stopAnimation(true)});if(!isPointsSame(this._stackedOnPoints,stackedOnPoints)||!isPointsSame(this._points,points)){if(hasAnimation){this._updateAnimation(data,stackedOnPoints,coordSys,api,step)}else{if(step){points=turnPointsIntoStep(points,coordSys,step);stackedOnPoints=turnPointsIntoStep(stackedOnPoints,coordSys,step)}polyline.setShape({points:points});polygon&&polygon.setShape({points:points,stackedOnPoints:stackedOnPoints})}}}var visualColor=getVisualGradient(data,coordSys)||data.getVisual("color");polyline.useStyle(zrUtil.defaults(lineStyleModel.getLineStyle(),{fill:"none",stroke:visualColor,lineJoin:"bevel"}));var smooth=seriesModel.get("smooth");smooth=getSmooth(seriesModel.get("smooth"));polyline.setShape({smooth:smooth,smoothMonotone:seriesModel.get("smoothMonotone"),connectNulls:seriesModel.get("connectNulls")});if(polygon){var stackedOn=data.stackedOn;var stackedOnSmooth=0;polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(),{fill:visualColor,opacity:0.7,lineJoin:"bevel"}));if(stackedOn){var stackedOnSeries=stackedOn.hostModel;stackedOnSmooth=getSmooth(stackedOnSeries.get("smooth"))
}polygon.setShape({smooth:smooth,stackedOnSmooth:stackedOnSmooth,smoothMonotone:seriesModel.get("smoothMonotone"),connectNulls:seriesModel.get("connectNulls")})}this._data=data;this._coordSys=coordSys;this._stackedOnPoints=stackedOnPoints;this._points=points;this._step=step},dispose:function(){},highlight:function(seriesModel,ecModel,api,payload){var data=seriesModel.getData();var dataIndex=modelUtil.queryDataIndex(data,payload);if(!(dataIndex instanceof Array)&&dataIndex!=null&&dataIndex>=0){var symbol=data.getItemGraphicEl(dataIndex);if(!symbol){var pt=data.getItemLayout(dataIndex);if(!pt){return}symbol=new Symbol(data,dataIndex);symbol.position=pt;symbol.setZ(seriesModel.get("zlevel"),seriesModel.get("z"));symbol.ignore=isNaN(pt[0])||isNaN(pt[1]);symbol.__temp=true;data.setItemGraphicEl(dataIndex,symbol);symbol.stopSymbolAnimation(true);this.group.add(symbol)}symbol.highlight()}else{ChartView.prototype.highlight.call(this,seriesModel,ecModel,api,payload)}},downplay:function(seriesModel,ecModel,api,payload){var data=seriesModel.getData();var dataIndex=modelUtil.queryDataIndex(data,payload);if(dataIndex!=null&&dataIndex>=0){var symbol=data.getItemGraphicEl(dataIndex);if(symbol){if(symbol.__temp){data.setItemGraphicEl(dataIndex,null);this.group.remove(symbol)}else{symbol.downplay()}}}else{ChartView.prototype.downplay.call(this,seriesModel,ecModel,api,payload)}},_newPolyline:function(points){var polyline=this._polyline;if(polyline){this._lineGroup.remove(polyline)}polyline=new polyHelper.Polyline({shape:{points:points},silent:true,z2:10});this._lineGroup.add(polyline);this._polyline=polyline;return polyline},_newPolygon:function(points,stackedOnPoints){var polygon=this._polygon;if(polygon){this._lineGroup.remove(polygon)}polygon=new polyHelper.Polygon({shape:{points:points,stackedOnPoints:stackedOnPoints},silent:true});this._lineGroup.add(polygon);this._polygon=polygon;return polygon},_getSymbolIgnoreFunc:function(data,coordSys){var categoryAxis=coordSys.getAxesByScale("ordinal")[0];if(categoryAxis&&categoryAxis.isLabelIgnored){return zrUtil.bind(categoryAxis.isLabelIgnored,categoryAxis)}},_updateAnimation:function(data,stackedOnPoints,coordSys,api,step){var polyline=this._polyline;var polygon=this._polygon;var seriesModel=data.hostModel;var diff=lineAnimationDiff(this._data,data,this._stackedOnPoints,stackedOnPoints,this._coordSys,coordSys);var current=diff.current;var stackedOnCurrent=diff.stackedOnCurrent;var next=diff.next;var stackedOnNext=diff.stackedOnNext;if(step){current=turnPointsIntoStep(diff.current,coordSys,step);stackedOnCurrent=turnPointsIntoStep(diff.stackedOnCurrent,coordSys,step);next=turnPointsIntoStep(diff.next,coordSys,step);stackedOnNext=turnPointsIntoStep(diff.stackedOnNext,coordSys,step)}polyline.shape.__points=diff.current;polyline.shape.points=current;graphic.updateProps(polyline,{shape:{points:next}},seriesModel);if(polygon){polygon.setShape({points:current,stackedOnPoints:stackedOnCurrent});graphic.updateProps(polygon,{shape:{points:next,stackedOnPoints:stackedOnNext}},seriesModel)}var updatedDataInfo=[];var diffStatus=diff.status;for(var i=0;i<diffStatus.length;i++){var cmd=diffStatus[i].cmd;if(cmd==="="){var el=data.getItemGraphicEl(diffStatus[i].idx1);if(el){updatedDataInfo.push({el:el,ptIdx:i})}}}if(polyline.animators&&polyline.animators.length){polyline.animators[0].during(function(){for(var i=0;i<updatedDataInfo.length;i++){var el=updatedDataInfo[i].el;el.attr("position",polyline.shape.__points[updatedDataInfo[i].ptIdx])}})}},remove:function(ecModel){var group=this.group;var oldData=this._data;this._lineGroup.removeAll();this._symbolDraw.remove(true);oldData&&oldData.eachItemGraphicEl(function(el,idx){if(el.__temp){group.remove(el);oldData.setItemGraphicEl(idx,null)}});this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}})}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var Symbol=__webpack_require__(120);function SymbolDraw(symbolCtor){this.group=new graphic.Group();this._symbolCtor=symbolCtor||Symbol}var symbolDrawProto=SymbolDraw.prototype;function symbolNeedsDraw(data,idx,isIgnore){var point=data.getItemLayout(idx);return point&&!isNaN(point[0])&&!isNaN(point[1])&&!(isIgnore&&isIgnore(idx))&&data.getItemVisual(idx,"symbol")!=="none"}symbolDrawProto.updateData=function(data,isIgnore){var group=this.group;var seriesModel=data.hostModel;var oldData=this._data;var SymbolCtor=this._symbolCtor;var seriesScope={itemStyle:seriesModel.getModel("itemStyle.normal").getItemStyle(["color"]),hoverItemStyle:seriesModel.getModel("itemStyle.emphasis").getItemStyle(),symbolRotate:seriesModel.get("symbolRotate"),symbolOffset:seriesModel.get("symbolOffset"),hoverAnimation:seriesModel.get("hoverAnimation"),labelModel:seriesModel.getModel("label.normal"),hoverLabelModel:seriesModel.getModel("label.emphasis"),cursorStyle:seriesModel.get("cursor")};data.diff(oldData).add(function(newIdx){var point=data.getItemLayout(newIdx);
if(symbolNeedsDraw(data,newIdx,isIgnore)){var symbolEl=new SymbolCtor(data,newIdx,seriesScope);symbolEl.attr("position",point);data.setItemGraphicEl(newIdx,symbolEl);group.add(symbolEl)}}).update(function(newIdx,oldIdx){var symbolEl=oldData.getItemGraphicEl(oldIdx);var point=data.getItemLayout(newIdx);if(!symbolNeedsDraw(data,newIdx,isIgnore)){group.remove(symbolEl);return}if(!symbolEl){symbolEl=new SymbolCtor(data,newIdx);symbolEl.attr("position",point)}else{symbolEl.updateData(data,newIdx,seriesScope);graphic.updateProps(symbolEl,{position:point},seriesModel)}group.add(symbolEl);data.setItemGraphicEl(newIdx,symbolEl)}).remove(function(oldIdx){var el=oldData.getItemGraphicEl(oldIdx);el&&el.fadeOut(function(){group.remove(el)})}).execute();this._data=data};symbolDrawProto.updateLayout=function(){var data=this._data;if(data){data.eachItemGraphicEl(function(el,idx){var point=data.getItemLayout(idx);el.attr("position",point)})}};symbolDrawProto.remove=function(enableAnimation){var group=this.group;var data=this._data;if(data){if(enableAnimation){data.eachItemGraphicEl(function(el){el.fadeOut(function(){group.remove(el)})})}else{group.removeAll()}}};module.exports=SymbolDraw}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var symbolUtil=__webpack_require__(114);var graphic=__webpack_require__(20);var numberUtil=__webpack_require__(7);var labelHelper=__webpack_require__(121);function getSymbolSize(data,idx){var symbolSize=data.getItemVisual(idx,"symbolSize");return symbolSize instanceof Array?symbolSize.slice():[+symbolSize,+symbolSize]}function getScale(symbolSize){return[symbolSize[0]/2,symbolSize[1]/2]}function Symbol(data,idx,seriesScope){graphic.Group.call(this);this.updateData(data,idx,seriesScope)}var symbolProto=Symbol.prototype;function driftSymbol(dx,dy){this.parent.drift(dx,dy)}symbolProto._createSymbol=function(symbolType,data,idx,symbolSize){this.removeAll();var seriesModel=data.hostModel;var color=data.getItemVisual(idx,"color");var symbolPath=symbolUtil.createSymbol(symbolType,-1,-1,2,2,color);symbolPath.attr({z2:100,culling:true,scale:[0,0]});symbolPath.drift=driftSymbol;graphic.initProps(symbolPath,{scale:getScale(symbolSize)},seriesModel,idx);this._symbolType=symbolType;this.add(symbolPath)};symbolProto.stopSymbolAnimation=function(toLastFrame){this.childAt(0).stopAnimation(toLastFrame)};symbolProto.getSymbolPath=function(){return this.childAt(0)};symbolProto.getScale=function(){return this.childAt(0).scale};symbolProto.highlight=function(){this.childAt(0).trigger("emphasis")};symbolProto.downplay=function(){this.childAt(0).trigger("normal")};symbolProto.setZ=function(zlevel,z){var symbolPath=this.childAt(0);symbolPath.zlevel=zlevel;symbolPath.z=z};symbolProto.setDraggable=function(draggable){var symbolPath=this.childAt(0);symbolPath.draggable=draggable;symbolPath.cursor=draggable?"move":"pointer"};symbolProto.updateData=function(data,idx,seriesScope){this.silent=false;var symbolType=data.getItemVisual(idx,"symbol")||"circle";var seriesModel=data.hostModel;var symbolSize=getSymbolSize(data,idx);if(symbolType!==this._symbolType){this._createSymbol(symbolType,data,idx,symbolSize)}else{var symbolPath=this.childAt(0);symbolPath.silent=false;graphic.updateProps(symbolPath,{scale:getScale(symbolSize)},seriesModel,idx)}this._updateCommon(data,idx,symbolSize,seriesScope);this._seriesModel=seriesModel};var normalStyleAccessPath=["itemStyle","normal"];var emphasisStyleAccessPath=["itemStyle","emphasis"];var normalLabelAccessPath=["label","normal"];var emphasisLabelAccessPath=["label","emphasis"];symbolProto._updateCommon=function(data,idx,symbolSize,seriesScope){var symbolPath=this.childAt(0);var seriesModel=data.hostModel;var color=data.getItemVisual(idx,"color");if(symbolPath.type!=="image"){symbolPath.useStyle({strokeNoScale:true})}seriesScope=seriesScope||null;var itemStyle=seriesScope&&seriesScope.itemStyle;var hoverItemStyle=seriesScope&&seriesScope.hoverItemStyle;var symbolRotate=seriesScope&&seriesScope.symbolRotate;var symbolOffset=seriesScope&&seriesScope.symbolOffset;var labelModel=seriesScope&&seriesScope.labelModel;var hoverLabelModel=seriesScope&&seriesScope.hoverLabelModel;var hoverAnimation=seriesScope&&seriesScope.hoverAnimation;var cursorStyle=seriesScope&&seriesScope.cursorStyle;if(!seriesScope||data.hasItemOption){var itemModel=data.getItemModel(idx);itemStyle=itemModel.getModel(normalStyleAccessPath).getItemStyle(["color"]);hoverItemStyle=itemModel.getModel(emphasisStyleAccessPath).getItemStyle();symbolRotate=itemModel.getShallow("symbolRotate");symbolOffset=itemModel.getShallow("symbolOffset");labelModel=itemModel.getModel(normalLabelAccessPath);hoverLabelModel=itemModel.getModel(emphasisLabelAccessPath);hoverAnimation=itemModel.getShallow("hoverAnimation");cursorStyle=itemModel.getShallow("cursor")}else{hoverItemStyle=zrUtil.extend({},hoverItemStyle)}var elStyle=symbolPath.style;symbolPath.attr("rotation",(symbolRotate||0)*Math.PI/180||0);if(symbolOffset){symbolPath.attr("position",[numberUtil.parsePercent(symbolOffset[0],symbolSize[0]),numberUtil.parsePercent(symbolOffset[1],symbolSize[1])])
}cursorStyle&&symbolPath.attr("cursor",cursorStyle);symbolPath.setColor(color);symbolPath.setStyle(itemStyle);var opacity=data.getItemVisual(idx,"opacity");if(opacity!=null){elStyle.opacity=opacity}var valueDim=labelHelper.findLabelValueDim(data);if(valueDim!=null){graphic.setLabelStyle(elStyle,hoverItemStyle,labelModel,hoverLabelModel,{labelFetcher:seriesModel,labelDataIndex:idx,defaultText:data.get(valueDim,idx),isRectText:true,autoColor:color})}symbolPath.off("mouseover").off("mouseout").off("emphasis").off("normal");symbolPath.hoverStyle=hoverItemStyle;graphic.setHoverStyle(symbolPath);var scale=getScale(symbolSize);if(hoverAnimation&&seriesModel.isAnimationEnabled()){var onEmphasis=function(){var ratio=scale[1]/scale[0];this.animateTo({scale:[Math.max(scale[0]*1.1,scale[0]+3),Math.max(scale[1]*1.1,scale[1]+3*ratio)]},400,"elasticOut")};var onNormal=function(){this.animateTo({scale:scale},400,"elasticOut")};symbolPath.on("mouseover",onEmphasis).on("mouseout",onNormal).on("emphasis",onEmphasis).on("normal",onNormal)}};symbolProto.fadeOut=function(cb){var symbolPath=this.childAt(0);this.silent=symbolPath.silent=true;symbolPath.style.text=null;graphic.updateProps(symbolPath,{scale:[0,0]},this._seriesModel,this.dataIndex,cb)};zrUtil.inherits(Symbol,graphic.Group);module.exports=Symbol}),(function(module,exports,__webpack_require__){var modelUtil=__webpack_require__(5);var helper={};helper.findLabelValueDim=function(data){var valueDim;var labelDims=modelUtil.otherDimToDataDim(data,"label");if(labelDims.length){valueDim=labelDims[0]}else{var dimensions=data.dimensions.slice();var dataType;while(dimensions.length&&(valueDim=dimensions.pop(),dataType=data.getDimensionInfo(valueDim).type,dataType==="ordinal"||dataType==="time")){}}return valueDim};module.exports=helper}),(function(module,exports){function sign(val){return val>=0?1:-1}function getStackedOnPoint(coordSys,data,idx){var baseAxis=coordSys.getBaseAxis();var valueAxis=coordSys.getOtherAxis(baseAxis);var valueStart=baseAxis.onZero?0:valueAxis.scale.getExtent()[0];var valueDim=valueAxis.dim;var baseDataOffset=valueDim==="x"||valueDim==="radius"?1:0;var stackedOnSameSign;var stackedOn=data.stackedOn;var val=data.get(valueDim,idx);while(stackedOn&&sign(stackedOn.get(valueDim,idx))===sign(val)){stackedOnSameSign=stackedOn;break}var stackedData=[];stackedData[baseDataOffset]=data.get(baseAxis.dim,idx);stackedData[1-baseDataOffset]=stackedOnSameSign?stackedOnSameSign.get(valueDim,idx,true):valueStart;return coordSys.dataToPoint(stackedData)}function diffData(oldData,newData){var diffResult=[];newData.diff(oldData).add(function(idx){diffResult.push({cmd:"+",idx:idx})}).update(function(newIdx,oldIdx){diffResult.push({cmd:"=",idx:oldIdx,idx1:newIdx})}).remove(function(idx){diffResult.push({cmd:"-",idx:idx})}).execute();return diffResult}module.exports=function(oldData,newData,oldStackedOnPoints,newStackedOnPoints,oldCoordSys,newCoordSys){var diff=diffData(oldData,newData);var currPoints=[];var nextPoints=[];var currStackedPoints=[];var nextStackedPoints=[];var status=[];var sortedIndices=[];var rawIndices=[];var dims=newCoordSys.dimensions;for(var i=0;i<diff.length;i++){var diffItem=diff[i];var pointAdded=true;switch(diffItem.cmd){case"=":var currentPt=oldData.getItemLayout(diffItem.idx);var nextPt=newData.getItemLayout(diffItem.idx1);if(isNaN(currentPt[0])||isNaN(currentPt[1])){currentPt=nextPt.slice()}currPoints.push(currentPt);nextPoints.push(nextPt);currStackedPoints.push(oldStackedOnPoints[diffItem.idx]);nextStackedPoints.push(newStackedOnPoints[diffItem.idx1]);rawIndices.push(newData.getRawIndex(diffItem.idx1));break;case"+":var idx=diffItem.idx;currPoints.push(oldCoordSys.dataToPoint([newData.get(dims[0],idx,true),newData.get(dims[1],idx,true)]));nextPoints.push(newData.getItemLayout(idx).slice());currStackedPoints.push(getStackedOnPoint(oldCoordSys,newData,idx));nextStackedPoints.push(newStackedOnPoints[idx]);rawIndices.push(newData.getRawIndex(idx));break;case"-":var idx=diffItem.idx;var rawIndex=oldData.getRawIndex(idx);if(rawIndex!==idx){currPoints.push(oldData.getItemLayout(idx));nextPoints.push(newCoordSys.dataToPoint([oldData.get(dims[0],idx,true),oldData.get(dims[1],idx,true)]));currStackedPoints.push(oldStackedOnPoints[idx]);nextStackedPoints.push(getStackedOnPoint(newCoordSys,oldData,idx));rawIndices.push(rawIndex)}else{pointAdded=false}}if(pointAdded){status.push(diffItem);sortedIndices.push(sortedIndices.length)}}sortedIndices.sort(function(a,b){return rawIndices[a]-rawIndices[b]});var sortedCurrPoints=[];var sortedNextPoints=[];var sortedCurrStackedPoints=[];var sortedNextStackedPoints=[];var sortedStatus=[];for(var i=0;i<sortedIndices.length;i++){var idx=sortedIndices[i];sortedCurrPoints[i]=currPoints[idx];sortedNextPoints[i]=nextPoints[idx];sortedCurrStackedPoints[i]=currStackedPoints[idx];sortedNextStackedPoints[i]=nextStackedPoints[idx];sortedStatus[i]=status[idx]}return{current:sortedCurrPoints,next:sortedNextPoints,stackedOnCurrent:sortedCurrStackedPoints,stackedOnNext:sortedNextStackedPoints,status:sortedStatus}
}}),(function(module,exports,__webpack_require__){var Path=__webpack_require__(22);var vec2=__webpack_require__(10);var fixClipWithShadow=__webpack_require__(56);var vec2Min=vec2.min;var vec2Max=vec2.max;var scaleAndAdd=vec2.scaleAndAdd;var v2Copy=vec2.copy;var v=[];var cp0=[];var cp1=[];function isPointNull(p){return isNaN(p[0])||isNaN(p[1])}function drawSegment(ctx,points,start,segLen,allLen,dir,smoothMin,smoothMax,smooth,smoothMonotone,connectNulls){var prevIdx=0;var idx=start;for(var k=0;k<segLen;k++){var p=points[idx];if(idx>=allLen||idx<0){break}if(isPointNull(p)){if(connectNulls){idx+=dir;continue}break}if(idx===start){ctx[dir>0?"moveTo":"lineTo"](p[0],p[1]);v2Copy(cp0,p)}else{if(smooth>0){var nextIdx=idx+dir;var nextP=points[nextIdx];if(connectNulls){while(nextP&&isPointNull(points[nextIdx])){nextIdx+=dir;nextP=points[nextIdx]}}var ratioNextSeg=0.5;var prevP=points[prevIdx];var nextP=points[nextIdx];if(!nextP||isPointNull(nextP)){v2Copy(cp1,p)}else{if(isPointNull(nextP)&&!connectNulls){nextP=p}vec2.sub(v,nextP,prevP);var lenPrevSeg;var lenNextSeg;if(smoothMonotone==="x"||smoothMonotone==="y"){var dim=smoothMonotone==="x"?0:1;lenPrevSeg=Math.abs(p[dim]-prevP[dim]);lenNextSeg=Math.abs(p[dim]-nextP[dim])}else{lenPrevSeg=vec2.dist(p,prevP);lenNextSeg=vec2.dist(p,nextP)}ratioNextSeg=lenNextSeg/(lenNextSeg+lenPrevSeg);scaleAndAdd(cp1,p,v,-smooth*(1-ratioNextSeg))}vec2Min(cp0,cp0,smoothMax);vec2Max(cp0,cp0,smoothMin);vec2Min(cp1,cp1,smoothMax);vec2Max(cp1,cp1,smoothMin);ctx.bezierCurveTo(cp0[0],cp0[1],cp1[0],cp1[1],p[0],p[1]);scaleAndAdd(cp0,p,v,smooth*ratioNextSeg)}else{ctx.lineTo(p[0],p[1])}}prevIdx=idx;idx+=dir}return k}function getBoundingBox(points,smoothConstraint){var ptMin=[Infinity,Infinity];var ptMax=[-Infinity,-Infinity];if(smoothConstraint){for(var i=0;i<points.length;i++){var pt=points[i];if(pt[0]<ptMin[0]){ptMin[0]=pt[0]}if(pt[1]<ptMin[1]){ptMin[1]=pt[1]}if(pt[0]>ptMax[0]){ptMax[0]=pt[0]}if(pt[1]>ptMax[1]){ptMax[1]=pt[1]}}}return{min:smoothConstraint?ptMin:ptMax,max:smoothConstraint?ptMax:ptMin}}module.exports={Polyline:Path.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:true,smoothMonotone:null,connectNulls:false},style:{fill:null,stroke:"#000"},brush:fixClipWithShadow(Path.prototype.brush),buildPath:function(ctx,shape){var points=shape.points;var i=0;var len=points.length;var result=getBoundingBox(points,shape.smoothConstraint);if(shape.connectNulls){for(;len>0;len--){if(!isPointNull(points[len-1])){break}}for(;i<len;i++){if(!isPointNull(points[i])){break}}}while(i<len){i+=drawSegment(ctx,points,i,len,len,1,result.min,result.max,shape.smooth,shape.smoothMonotone,shape.connectNulls)+1}}}),Polygon:Path.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:true,smoothMonotone:null,connectNulls:false},brush:fixClipWithShadow(Path.prototype.brush),buildPath:function(ctx,shape){var points=shape.points;var stackedOnPoints=shape.stackedOnPoints;var i=0;var len=points.length;var smoothMonotone=shape.smoothMonotone;var bbox=getBoundingBox(points,shape.smoothConstraint);var stackedOnBBox=getBoundingBox(stackedOnPoints,shape.smoothConstraint);if(shape.connectNulls){for(;len>0;len--){if(!isPointNull(points[len-1])){break}}for(;i<len;i++){if(!isPointNull(points[i])){break}}}while(i<len){var k=drawSegment(ctx,points,i,len,len,1,bbox.min,bbox.max,shape.smooth,smoothMonotone,shape.connectNulls);drawSegment(ctx,stackedOnPoints,i+k-1,k,len,-1,stackedOnBBox.min,stackedOnBBox.max,shape.stackedOnSmooth,smoothMonotone,shape.connectNulls);i+=k+1;ctx.closePath()}}})}}),(function(module,exports){module.exports=function(seriesType,defaultSymbolType,legendSymbol,ecModel,api){ecModel.eachRawSeriesByType(seriesType,function(seriesModel){var data=seriesModel.getData();var symbolType=seriesModel.get("symbol")||defaultSymbolType;var symbolSize=seriesModel.get("symbolSize");data.setVisual({legendSymbol:legendSymbol||symbolType,symbol:symbolType,symbolSize:symbolSize});if(!ecModel.isSeriesFiltered(seriesModel)){if(typeof symbolSize==="function"){data.each(function(idx){var rawValue=seriesModel.getRawValue(idx);var params=seriesModel.getDataParams(idx);data.setItemVisual(idx,"symbolSize",symbolSize(rawValue,params))})}data.each(function(idx){var itemModel=data.getItemModel(idx);var itemSymbolType=itemModel.getShallow("symbol",true);var itemSymbolSize=itemModel.getShallow("symbolSize",true);if(itemSymbolType!=null){data.setItemVisual(idx,"symbol",itemSymbolType)}if(itemSymbolSize!=null){data.setItemVisual(idx,"symbolSize",itemSymbolSize)}})}})}}),(function(module,exports){module.exports=function(seriesType,ecModel){ecModel.eachSeriesByType(seriesType,function(seriesModel){var data=seriesModel.getData();var coordSys=seriesModel.coordinateSystem;if(!coordSys){return}var dims=[];var coordDims=coordSys.dimensions;for(var i=0;i<coordDims.length;i++){dims.push(seriesModel.coordDimToDataDim(coordSys.dimensions[i])[0])}if(dims.length===1){data.each(dims[0],function(x,idx){data.setItemLayout(idx,isNaN(x)?[NaN,NaN]:coordSys.dataToPoint(x))
})}else{if(dims.length===2){data.each(dims,function(x,y,idx){data.setItemLayout(idx,(isNaN(x)||isNaN(y))?[NaN,NaN]:coordSys.dataToPoint([x,y]))},true)}}})}}),(function(module,exports){var samplers={average:function(frame){var sum=0;var count=0;for(var i=0;i<frame.length;i++){if(!isNaN(frame[i])){sum+=frame[i];count++}}return count===0?NaN:sum/count},sum:function(frame){var sum=0;for(var i=0;i<frame.length;i++){sum+=frame[i]||0}return sum},max:function(frame){var max=-Infinity;for(var i=0;i<frame.length;i++){frame[i]>max&&(max=frame[i])}return max},min:function(frame){var min=Infinity;for(var i=0;i<frame.length;i++){frame[i]<min&&(min=frame[i])}return min},nearest:function(frame){return frame[0]}};var indexSampler=function(frame,value){return Math.round(frame.length/2)};module.exports=function(seriesType,ecModel,api){ecModel.eachSeriesByType(seriesType,function(seriesModel){var data=seriesModel.getData();var sampling=seriesModel.get("sampling");var coordSys=seriesModel.coordinateSystem;if(coordSys.type==="cartesian2d"&&sampling){var baseAxis=coordSys.getBaseAxis();var valueAxis=coordSys.getOtherAxis(baseAxis);var extent=baseAxis.getExtent();var size=extent[1]-extent[0];var rate=Math.round(data.count()/size);if(rate>1){var sampler;if(typeof sampling==="string"){sampler=samplers[sampling]}else{if(typeof sampling==="function"){sampler=sampling}}if(sampler){data=data.downSample(valueAxis.dim,1/rate,sampler,indexSampler);seriesModel.setData(data)}}}},this)}}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var zrUtil=__webpack_require__(4);var echarts=__webpack_require__(1);__webpack_require__(128);__webpack_require__(136);echarts.extendComponentView({type:"grid",render:function(gridModel,ecModel){this.group.removeAll();if(gridModel.get("show")){this.group.add(new graphic.Rect({shape:gridModel.coordinateSystem.getRect(),style:zrUtil.defaults({fill:gridModel.get("backgroundColor")},gridModel.getItemStyle()),silent:true,z2:-1}))}}});echarts.registerPreprocessor(function(option){if(option.xAxis&&option.yAxis&&!option.grid){option.grid={}}})}),(function(module,exports,__webpack_require__){var factory=exports;var layout=__webpack_require__(74);var axisHelper=__webpack_require__(104);var zrUtil=__webpack_require__(4);var Cartesian2D=__webpack_require__(129);var Axis2D=__webpack_require__(131);var each=zrUtil.each;var ifAxisCrossZero=axisHelper.ifAxisCrossZero;var niceScaleExtent=axisHelper.niceScaleExtent;__webpack_require__(132);function isAxisUsedInTheGrid(axisModel,gridModel,ecModel){return axisModel.getCoordSysModel()===gridModel}function getLabelUnionRect(axis){var axisModel=axis.model;var labels=axisModel.getFormattedLabels();var axisLabelModel=axisModel.getModel("axisLabel");var rect;var step=1;var labelCount=labels.length;if(labelCount>40){step=Math.ceil(labelCount/40)}for(var i=0;i<labelCount;i+=step){if(!axis.isLabelIgnored(i)){var singleRect=axisLabelModel.getTextRect(labels[i]);rect?rect.union(singleRect):(rect=singleRect)}}return rect}function Grid(gridModel,ecModel,api){this._coordsMap={};this._coordsList=[];this._axesMap={};this._axesList=[];this._initCartesian(gridModel,ecModel,api);this.model=gridModel}var gridProto=Grid.prototype;gridProto.type="grid";gridProto.axisPointerEnabled=true;gridProto.getRect=function(){return this._rect};gridProto.update=function(ecModel,api){var axesMap=this._axesMap;this._updateScale(ecModel,this.model);each(axesMap.x,function(xAxis){niceScaleExtent(xAxis.scale,xAxis.model)});each(axesMap.y,function(yAxis){niceScaleExtent(yAxis.scale,yAxis.model)});each(axesMap.x,function(xAxis){fixAxisOnZero(axesMap,"y",xAxis)});each(axesMap.y,function(yAxis){fixAxisOnZero(axesMap,"x",yAxis)});this.resize(this.model,api)};function fixAxisOnZero(axesMap,otherAxisDim,axis){var axes=axesMap[otherAxisDim];if(!axis.onZero){return}var onZeroAxisIndex=axis.onZeroAxisIndex;if(onZeroAxisIndex!=null){var otherAxis=axes[onZeroAxisIndex];if(otherAxis&&canNotOnZeroToAxis(otherAxis)){axis.onZero=false}return}for(var idx in axes){if(axes.hasOwnProperty(idx)){var otherAxis=axes[idx];if(otherAxis&&!canNotOnZeroToAxis(otherAxis)){onZeroAxisIndex=+idx;break}}}if(onZeroAxisIndex==null){axis.onZero=false}axis.onZeroAxisIndex=onZeroAxisIndex}function canNotOnZeroToAxis(axis){return axis.type==="category"||axis.type==="time"||!ifAxisCrossZero(axis)}gridProto.resize=function(gridModel,api,ignoreContainLabel){var gridRect=layout.getLayoutRect(gridModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()});this._rect=gridRect;var axesList=this._axesList;adjustAxes();if(!ignoreContainLabel&&gridModel.get("containLabel")){each(axesList,function(axis){if(!axis.model.get("axisLabel.inside")){var labelUnionRect=getLabelUnionRect(axis);if(labelUnionRect){var dim=axis.isHorizontal()?"height":"width";var margin=axis.model.get("axisLabel.margin");gridRect[dim]-=labelUnionRect[dim]+margin;if(axis.position==="top"){gridRect.y+=labelUnionRect.height+margin}else{if(axis.position==="left"){gridRect.x+=labelUnionRect.width+margin
}}}}});adjustAxes()}function adjustAxes(){each(axesList,function(axis){var isHorizontal=axis.isHorizontal();var extent=isHorizontal?[0,gridRect.width]:[0,gridRect.height];var idx=axis.inverse?1:0;axis.setExtent(extent[idx],extent[1-idx]);updateAxisTransfrom(axis,isHorizontal?gridRect.x:gridRect.y)})}};gridProto.getAxis=function(axisType,axisIndex){var axesMapOnDim=this._axesMap[axisType];if(axesMapOnDim!=null){if(axisIndex==null){for(var name in axesMapOnDim){if(axesMapOnDim.hasOwnProperty(name)){return axesMapOnDim[name]}}}return axesMapOnDim[axisIndex]}};gridProto.getAxes=function(){return this._axesList.slice()};gridProto.getCartesian=function(xAxisIndex,yAxisIndex){if(xAxisIndex!=null&&yAxisIndex!=null){var key="x"+xAxisIndex+"y"+yAxisIndex;return this._coordsMap[key]}if(zrUtil.isObject(xAxisIndex)){yAxisIndex=xAxisIndex.yAxisIndex;xAxisIndex=xAxisIndex.xAxisIndex}for(var i=0,coordList=this._coordsList;i<coordList.length;i++){if(coordList[i].getAxis("x").index===xAxisIndex||coordList[i].getAxis("y").index===yAxisIndex){return coordList[i]}}};gridProto.getCartesians=function(){return this._coordsList.slice()};gridProto.convertToPixel=function(ecModel,finder,value){var target=this._findConvertTarget(ecModel,finder);return target.cartesian?target.cartesian.dataToPoint(value):target.axis?target.axis.toGlobalCoord(target.axis.dataToCoord(value)):null};gridProto.convertFromPixel=function(ecModel,finder,value){var target=this._findConvertTarget(ecModel,finder);return target.cartesian?target.cartesian.pointToData(value):target.axis?target.axis.coordToData(target.axis.toLocalCoord(value)):null};gridProto._findConvertTarget=function(ecModel,finder){var seriesModel=finder.seriesModel;var xAxisModel=finder.xAxisModel||(seriesModel&&seriesModel.getReferringComponents("xAxis")[0]);var yAxisModel=finder.yAxisModel||(seriesModel&&seriesModel.getReferringComponents("yAxis")[0]);var gridModel=finder.gridModel;var coordsList=this._coordsList;var cartesian;var axis;if(seriesModel){cartesian=seriesModel.coordinateSystem;zrUtil.indexOf(coordsList,cartesian)<0&&(cartesian=null)}else{if(xAxisModel&&yAxisModel){cartesian=this.getCartesian(xAxisModel.componentIndex,yAxisModel.componentIndex)}else{if(xAxisModel){axis=this.getAxis("x",xAxisModel.componentIndex)}else{if(yAxisModel){axis=this.getAxis("y",yAxisModel.componentIndex)}else{if(gridModel){var grid=gridModel.coordinateSystem;if(grid===this){cartesian=this._coordsList[0]}}}}}}return{cartesian:cartesian,axis:axis}};gridProto.containPoint=function(point){var coord=this._coordsList[0];if(coord){return coord.containPoint(point)}};gridProto._initCartesian=function(gridModel,ecModel,api){var axisPositionUsed={left:false,right:false,top:false,bottom:false};var axesMap={x:{},y:{}};var axesCount={x:0,y:0};ecModel.eachComponent("xAxis",createAxisCreator("x"),this);ecModel.eachComponent("yAxis",createAxisCreator("y"),this);if(!axesCount.x||!axesCount.y){this._axesMap={};this._axesList=[];return}this._axesMap=axesMap;each(axesMap.x,function(xAxis,xAxisIndex){each(axesMap.y,function(yAxis,yAxisIndex){var key="x"+xAxisIndex+"y"+yAxisIndex;var cartesian=new Cartesian2D(key);cartesian.grid=this;cartesian.model=gridModel;this._coordsMap[key]=cartesian;this._coordsList.push(cartesian);cartesian.addAxis(xAxis);cartesian.addAxis(yAxis)},this)},this);function createAxisCreator(axisType){return function(axisModel,idx){if(!isAxisUsedInTheGrid(axisModel,gridModel,ecModel)){return}var axisPosition=axisModel.get("position");if(axisType==="x"){if(axisPosition!=="top"&&axisPosition!=="bottom"){axisPosition="bottom";if(axisPositionUsed[axisPosition]){axisPosition=axisPosition==="top"?"bottom":"top"}}}else{if(axisPosition!=="left"&&axisPosition!=="right"){axisPosition="left";if(axisPositionUsed[axisPosition]){axisPosition=axisPosition==="left"?"right":"left"}}}axisPositionUsed[axisPosition]=true;var axis=new Axis2D(axisType,axisHelper.createScaleByModel(axisModel),[0,0],axisModel.get("type"),axisPosition);var isCategory=axis.type==="category";axis.onBand=isCategory&&axisModel.get("boundaryGap");axis.inverse=axisModel.get("inverse");axis.onZero=axisModel.get("axisLine.onZero");axis.onZeroAxisIndex=axisModel.get("axisLine.onZeroAxisIndex");axisModel.axis=axis;axis.model=axisModel;axis.grid=this;axis.index=idx;this._axesList.push(axis);axesMap[axisType][idx]=axis;axesCount[axisType]++}}};gridProto._updateScale=function(ecModel,gridModel){zrUtil.each(this._axesList,function(axis){axis.scale.setExtent(Infinity,-Infinity)});ecModel.eachSeries(function(seriesModel){if(isCartesian2D(seriesModel)){var axesModels=findAxesModels(seriesModel,ecModel);var xAxisModel=axesModels[0];var yAxisModel=axesModels[1];if(!isAxisUsedInTheGrid(xAxisModel,gridModel,ecModel)||!isAxisUsedInTheGrid(yAxisModel,gridModel,ecModel)){return}var cartesian=this.getCartesian(xAxisModel.componentIndex,yAxisModel.componentIndex);var data=seriesModel.getData();var xAxis=cartesian.getAxis("x");var yAxis=cartesian.getAxis("y");if(data.type==="list"){unionExtent(data,xAxis,seriesModel);
unionExtent(data,yAxis,seriesModel)}}},this);function unionExtent(data,axis,seriesModel){each(seriesModel.coordDimToDataDim(axis.dim),function(dim){axis.scale.unionExtentFromData(data,dim)})}};gridProto.getTooltipAxes=function(dim){var baseAxes=[];var otherAxes=[];each(this.getCartesians(),function(cartesian){var baseAxis=(dim!=null&&dim!=="auto")?cartesian.getAxis(dim):cartesian.getBaseAxis();var otherAxis=cartesian.getOtherAxis(baseAxis);zrUtil.indexOf(baseAxes,baseAxis)<0&&baseAxes.push(baseAxis);zrUtil.indexOf(otherAxes,otherAxis)<0&&otherAxes.push(otherAxis)});return{baseAxes:baseAxes,otherAxes:otherAxes}};function updateAxisTransfrom(axis,coordBase){var axisExtent=axis.getExtent();var axisExtentSum=axisExtent[0]+axisExtent[1];axis.toGlobalCoord=axis.dim==="x"?function(coord){return coord+coordBase}:function(coord){return axisExtentSum-coord+coordBase};axis.toLocalCoord=axis.dim==="x"?function(coord){return coord-coordBase}:function(coord){return axisExtentSum-coord+coordBase}}var axesTypes=["xAxis","yAxis"];function findAxesModels(seriesModel,ecModel){return zrUtil.map(axesTypes,function(axisType){var axisModel=seriesModel.getReferringComponents(axisType)[0];if(true){if(!axisModel){throw new Error(axisType+' "'+zrUtil.retrieve(seriesModel.get(axisType+"Index"),seriesModel.get(axisType+"Id"),0)+'" not found')}}return axisModel})}function isCartesian2D(seriesModel){return seriesModel.get("coordinateSystem")==="cartesian2d"}Grid.create=function(ecModel,api){var grids=[];ecModel.eachComponent("grid",function(gridModel,idx){var grid=new Grid(gridModel,ecModel,api);grid.name="grid_"+idx;grid.resize(gridModel,api,true);gridModel.coordinateSystem=grid;grids.push(grid)});ecModel.eachSeries(function(seriesModel){if(!isCartesian2D(seriesModel)){return}var axesModels=findAxesModels(seriesModel,ecModel);var xAxisModel=axesModels[0];var yAxisModel=axesModels[1];var gridModel=xAxisModel.getCoordSysModel();if(true){if(!gridModel){throw new Error('Grid "'+zrUtil.retrieve(xAxisModel.get("gridIndex"),xAxisModel.get("gridId"),0)+'" not found')}if(xAxisModel.getCoordSysModel()!==yAxisModel.getCoordSysModel()){throw new Error("xAxis and yAxis must use the same grid")}}var grid=gridModel.coordinateSystem;seriesModel.coordinateSystem=grid.getCartesian(xAxisModel.componentIndex,yAxisModel.componentIndex)});return grids};Grid.dimensions=Grid.prototype.dimensions=Cartesian2D.prototype.dimensions;__webpack_require__(79).register("cartesian2d",Grid);module.exports=Grid}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var Cartesian=__webpack_require__(130);function Cartesian2D(name){Cartesian.call(this,name)}Cartesian2D.prototype={constructor:Cartesian2D,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(point){var axisX=this.getAxis("x");var axisY=this.getAxis("y");return axisX.contain(axisX.toLocalCoord(point[0]))&&axisY.contain(axisY.toLocalCoord(point[1]))},containData:function(data){return this.getAxis("x").containData(data[0])&&this.getAxis("y").containData(data[1])},dataToPoint:function(data,clamp){var xAxis=this.getAxis("x");var yAxis=this.getAxis("y");return[xAxis.toGlobalCoord(xAxis.dataToCoord(data[0],clamp)),yAxis.toGlobalCoord(yAxis.dataToCoord(data[1],clamp))]},pointToData:function(point,clamp){var xAxis=this.getAxis("x");var yAxis=this.getAxis("y");return[xAxis.coordToData(xAxis.toLocalCoord(point[0]),clamp),yAxis.coordToData(yAxis.toLocalCoord(point[1]),clamp)]},getOtherAxis:function(axis){return this.getAxis(axis.dim==="x"?"y":"x")}};zrUtil.inherits(Cartesian2D,Cartesian);module.exports=Cartesian2D}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);function dimAxisMapper(dim){return this._axes[dim]}var Cartesian=function(name){this._axes={};this._dimList=[];this.name=name||""};Cartesian.prototype={constructor:Cartesian,type:"cartesian",getAxis:function(dim){return this._axes[dim]},getAxes:function(){return zrUtil.map(this._dimList,dimAxisMapper,this)},getAxesByScale:function(scaleType){scaleType=scaleType.toLowerCase();return zrUtil.filter(this.getAxes(),function(axis){return axis.scale.type===scaleType})},addAxis:function(axis){var dim=axis.dim;this._axes[dim]=axis;this._dimList.push(dim)},dataToCoord:function(val){return this._dataCoordConvert(val,"dataToCoord")},coordToData:function(val){return this._dataCoordConvert(val,"coordToData")},_dataCoordConvert:function(input,method){var dimList=this._dimList;var output=input instanceof Array?[]:{};for(var i=0;i<dimList.length;i++){var dim=dimList[i];var axis=this._axes[dim];output[dim]=axis[method](input[dim])}return output}};module.exports=Cartesian}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var Axis=__webpack_require__(103);var Axis2D=function(dim,scale,coordExtent,axisType,position){Axis.call(this,dim,scale,coordExtent);this.type=axisType||"value";
this.position=position||"bottom"};Axis2D.prototype={constructor:Axis2D,index:0,onZero:false,model:null,isHorizontal:function(){var position=this.position;return position==="top"||position==="bottom"},getGlobalExtent:function(asc){var ret=this.getExtent();ret[0]=this.toGlobalCoord(ret[0]);ret[1]=this.toGlobalCoord(ret[1]);asc&&ret[0]>ret[1]&&ret.reverse();return ret},getOtherAxis:function(){this.grid.getOtherAxis()},isLabelIgnored:function(idx){if(this.type==="category"){var labelInterval=this.getLabelInterval();return((typeof labelInterval==="function")&&!labelInterval(idx,this.scale.getLabel(idx)))||idx%(labelInterval+1)}},pointToData:function(point,clamp){return this.coordToData(this.toLocalCoord(point[this.dim==="x"?0:1]),clamp)},toLocalCoord:null,toGlobalCoord:null};zrUtil.inherits(Axis2D,Axis);module.exports=Axis2D}),(function(module,exports,__webpack_require__){__webpack_require__(133);var ComponentModel=__webpack_require__(72);module.exports=ComponentModel.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:false,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:false,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}})}),(function(module,exports,__webpack_require__){var ComponentModel=__webpack_require__(72);var zrUtil=__webpack_require__(4);var axisModelCreator=__webpack_require__(134);var AxisModel=ComponentModel.extend({type:"cartesian2dAxis",axis:null,init:function(){AxisModel.superApply(this,"init",arguments);this.resetRange()},mergeOption:function(){AxisModel.superApply(this,"mergeOption",arguments);this.resetRange()},restoreData:function(){AxisModel.superApply(this,"restoreData",arguments);this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function getAxisType(axisDim,option){return option.type||(option.data?"category":"value")}zrUtil.merge(AxisModel.prototype,__webpack_require__(115));var extraOption={offset:0};axisModelCreator("x",AxisModel,getAxisType,extraOption);axisModelCreator("y",AxisModel,getAxisType,extraOption);module.exports=AxisModel}),(function(module,exports,__webpack_require__){var axisDefault=__webpack_require__(135);var zrUtil=__webpack_require__(4);var ComponentModel=__webpack_require__(72);var layout=__webpack_require__(74);var AXIS_TYPES=["value","category","time","log"];module.exports=function(axisName,BaseAxisModelClass,axisTypeDefaulter,extraDefaultOption){zrUtil.each(AXIS_TYPES,function(axisType){BaseAxisModelClass.extend({type:axisName+"Axis."+axisType,mergeDefaultAndTheme:function(option,ecModel){var layoutMode=this.layoutMode;var inputPositionParams=layoutMode?layout.getLayoutParams(option):{};var themeModel=ecModel.getTheme();zrUtil.merge(option,themeModel.get(axisType+"Axis"));zrUtil.merge(option,this.getDefaultOption());option.type=axisTypeDefaulter(axisName,option);if(layoutMode){layout.mergeLayoutParam(option,inputPositionParams,layoutMode)}},defaultOption:zrUtil.mergeAll([{},axisDefault[axisType+"Axis"],extraDefaultOption],true)})});ComponentModel.registerSubTypeDefaulter(axisName+"Axis",zrUtil.curry(axisTypeDefaulter,axisName))}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var defaultOption={show:true,zlevel:0,z:0,inverse:false,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:false,triggerEvent:false,tooltip:{show:false},axisPointer:{},axisLine:{show:true,onZero:true,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"}},axisTick:{show:true,inside:false,length:5,lineStyle:{width:1}},axisLabel:{show:true,inside:false,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:true,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:false,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}};var categoryAxis=zrUtil.merge({boundaryGap:true,splitLine:{show:false},axisTick:{alignWithLabel:false,interval:"auto"},axisLabel:{interval:"auto"}},defaultOption);var valueAxis=zrUtil.merge({boundaryGap:[0,0],splitNumber:5},defaultOption);var timeAxis=zrUtil.defaults({scale:true,min:"dataMin",max:"dataMax"},valueAxis);var logAxis=zrUtil.defaults({scale:true,logBase:10},valueAxis);module.exports={categoryAxis:categoryAxis,valueAxis:valueAxis,timeAxis:timeAxis,logAxis:logAxis}}),(function(module,exports,__webpack_require__){__webpack_require__(133);__webpack_require__(137)}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var graphic=__webpack_require__(20);var AxisBuilder=__webpack_require__(138);var AxisView=__webpack_require__(139);var cartesianAxisHelper=__webpack_require__(141);var ifIgnoreOnTick=AxisBuilder.ifIgnoreOnTick;var getInterval=AxisBuilder.getInterval;var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"];var selfBuilderAttrs=["splitArea","splitLine"];
var CartesianAxisView=AxisView.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(axisModel,ecModel,api,payload){this.group.removeAll();var oldAxisGroup=this._axisGroup;this._axisGroup=new graphic.Group();this.group.add(this._axisGroup);if(!axisModel.get("show")){return}var gridModel=axisModel.getCoordSysModel();var layout=cartesianAxisHelper.layout(gridModel,axisModel);var axisBuilder=new AxisBuilder(axisModel,layout);zrUtil.each(axisBuilderAttrs,axisBuilder.add,axisBuilder);this._axisGroup.add(axisBuilder.getGroup());zrUtil.each(selfBuilderAttrs,function(name){if(axisModel.get(name+".show")){this["_"+name](axisModel,gridModel,layout.labelInterval)}},this);graphic.groupTransition(oldAxisGroup,this._axisGroup,axisModel);CartesianAxisView.superCall(this,"render",axisModel,ecModel,api,payload)},_splitLine:function(axisModel,gridModel,labelInterval){var axis=axisModel.axis;if(axis.scale.isBlank()){return}var splitLineModel=axisModel.getModel("splitLine");var lineStyleModel=splitLineModel.getModel("lineStyle");var lineColors=lineStyleModel.get("color");var lineInterval=getInterval(splitLineModel,labelInterval);lineColors=zrUtil.isArray(lineColors)?lineColors:[lineColors];var gridRect=gridModel.coordinateSystem.getRect();var isHorizontal=axis.isHorizontal();var lineCount=0;var ticksCoords=axis.getTicksCoords();var ticks=axis.scale.getTicks();var showMinLabel=axisModel.get("axisLabel.showMinLabel");var showMaxLabel=axisModel.get("axisLabel.showMaxLabel");var p1=[];var p2=[];var lineStyle=lineStyleModel.getLineStyle();for(var i=0;i<ticksCoords.length;i++){if(ifIgnoreOnTick(axis,i,lineInterval,ticksCoords.length,showMinLabel,showMaxLabel)){continue}var tickCoord=axis.toGlobalCoord(ticksCoords[i]);if(isHorizontal){p1[0]=tickCoord;p1[1]=gridRect.y;p2[0]=tickCoord;p2[1]=gridRect.y+gridRect.height}else{p1[0]=gridRect.x;p1[1]=tickCoord;p2[0]=gridRect.x+gridRect.width;p2[1]=tickCoord}var colorIndex=(lineCount++)%lineColors.length;this._axisGroup.add(new graphic.Line(graphic.subPixelOptimizeLine({anid:"line_"+ticks[i],shape:{x1:p1[0],y1:p1[1],x2:p2[0],y2:p2[1]},style:zrUtil.defaults({stroke:lineColors[colorIndex]},lineStyle),silent:true})))}},_splitArea:function(axisModel,gridModel,labelInterval){var axis=axisModel.axis;if(axis.scale.isBlank()){return}var splitAreaModel=axisModel.getModel("splitArea");var areaStyleModel=splitAreaModel.getModel("areaStyle");var areaColors=areaStyleModel.get("color");var gridRect=gridModel.coordinateSystem.getRect();var ticksCoords=axis.getTicksCoords();var ticks=axis.scale.getTicks();var prevX=axis.toGlobalCoord(ticksCoords[0]);var prevY=axis.toGlobalCoord(ticksCoords[0]);var count=0;var areaInterval=getInterval(splitAreaModel,labelInterval);var areaStyle=areaStyleModel.getAreaStyle();areaColors=zrUtil.isArray(areaColors)?areaColors:[areaColors];var showMinLabel=axisModel.get("axisLabel.showMinLabel");var showMaxLabel=axisModel.get("axisLabel.showMaxLabel");for(var i=1;i<ticksCoords.length;i++){if(ifIgnoreOnTick(axis,i,areaInterval,ticksCoords.length,showMinLabel,showMaxLabel)){continue}var tickCoord=axis.toGlobalCoord(ticksCoords[i]);var x;var y;var width;var height;if(axis.isHorizontal()){x=prevX;y=gridRect.y;width=tickCoord-x;height=gridRect.height}else{x=gridRect.x;y=prevY;width=gridRect.width;height=tickCoord-y}var colorIndex=(count++)%areaColors.length;this._axisGroup.add(new graphic.Rect({anid:"area_"+ticks[i],shape:{x:x,y:y,width:width,height:height},style:zrUtil.defaults({fill:areaColors[colorIndex]},areaStyle),silent:true}));prevX=x+width;prevY=y+height}}});CartesianAxisView.extend({type:"xAxis"});CartesianAxisView.extend({type:"yAxis"})}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var formatUtil=__webpack_require__(6);var graphic=__webpack_require__(20);var Model=__webpack_require__(14);var numberUtil=__webpack_require__(7);var remRadian=numberUtil.remRadian;var isRadianAroundZero=numberUtil.isRadianAroundZero;var vec2=__webpack_require__(10);var matrix=__webpack_require__(11);var v2ApplyTransform=vec2.applyTransform;var retrieve=zrUtil.retrieve;var PI=Math.PI;function makeAxisEventDataBase(axisModel){var eventData={componentType:axisModel.mainType};eventData[axisModel.mainType+"Index"]=axisModel.componentIndex;return eventData}var AxisBuilder=function(axisModel,opt){this.opt=opt;this.axisModel=axisModel;zrUtil.defaults(opt,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:true});this.group=new graphic.Group();var dumbGroup=new graphic.Group({position:opt.position.slice(),rotation:opt.rotation});dumbGroup.updateTransform();this._transform=dumbGroup.transform;this._dumbGroup=dumbGroup};AxisBuilder.prototype={constructor:AxisBuilder,hasBuilder:function(name){return !!builders[name]},add:function(name){builders[name].call(this)},getGroup:function(){return this.group}};var builders={axisLine:function(){var opt=this.opt;var axisModel=this.axisModel;if(!axisModel.get("axisLine.show")){return}var extent=this.axisModel.axis.getExtent();
var matrix=this._transform;var pt1=[extent[0],0];var pt2=[extent[1],0];if(matrix){v2ApplyTransform(pt1,pt1,matrix);v2ApplyTransform(pt2,pt2,matrix)}this.group.add(new graphic.Line(graphic.subPixelOptimizeLine({anid:"line",shape:{x1:pt1[0],y1:pt1[1],x2:pt2[0],y2:pt2[1]},style:zrUtil.extend({lineCap:"round"},axisModel.getModel("axisLine.lineStyle").getLineStyle()),strokeContainThreshold:opt.strokeContainThreshold||5,silent:true,z2:1})))},axisTickLabel:function(){var axisModel=this.axisModel;var opt=this.opt;var tickEls=buildAxisTick(this,axisModel,opt);var labelEls=buildAxisLabel(this,axisModel,opt);fixMinMaxLabelShow(axisModel,labelEls,tickEls)},axisName:function(){var opt=this.opt;var axisModel=this.axisModel;var name=retrieve(opt.axisName,axisModel.get("name"));if(!name){return}var nameLocation=axisModel.get("nameLocation");var nameDirection=opt.nameDirection;var textStyleModel=axisModel.getModel("nameTextStyle");var gap=axisModel.get("nameGap")||0;var extent=this.axisModel.axis.getExtent();var gapSignal=extent[0]>extent[1]?-1:1;var pos=[nameLocation==="start"?extent[0]-gapSignal*gap:nameLocation==="end"?extent[1]+gapSignal*gap:(extent[0]+extent[1])/2,isNameLocationCenter(nameLocation)?opt.labelOffset+nameDirection*gap:0];var labelLayout;var nameRotation=axisModel.get("nameRotate");if(nameRotation!=null){nameRotation=nameRotation*PI/180}var axisNameAvailableWidth;if(isNameLocationCenter(nameLocation)){labelLayout=innerTextLayout(opt.rotation,nameRotation!=null?nameRotation:opt.rotation,nameDirection)}else{labelLayout=endTextLayout(opt,nameLocation,nameRotation||0,extent);axisNameAvailableWidth=opt.axisNameAvailableWidth;if(axisNameAvailableWidth!=null){axisNameAvailableWidth=Math.abs(axisNameAvailableWidth/Math.sin(labelLayout.rotation));!isFinite(axisNameAvailableWidth)&&(axisNameAvailableWidth=null)}}var textFont=textStyleModel.getFont();var truncateOpt=axisModel.get("nameTruncate",true)||{};var ellipsis=truncateOpt.ellipsis;var maxWidth=retrieve(opt.nameTruncateMaxWidth,truncateOpt.maxWidth,axisNameAvailableWidth);var truncatedText=(ellipsis!=null&&maxWidth!=null)?formatUtil.truncateText(name,maxWidth,textFont,ellipsis,{minChar:2,placeholder:truncateOpt.placeholder}):name;var tooltipOpt=axisModel.get("tooltip",true);var mainType=axisModel.mainType;var formatterParams={componentType:mainType,name:name,$vars:["name"]};formatterParams[mainType+"Index"]=axisModel.componentIndex;var textEl=new graphic.Text({anid:"name",__fullText:name,__truncatedText:truncatedText,position:pos,rotation:labelLayout.rotation,silent:isSilent(axisModel),z2:1,tooltip:(tooltipOpt&&tooltipOpt.show)?zrUtil.extend({content:name,formatter:function(){return name},formatterParams:formatterParams},tooltipOpt):null});graphic.setTextStyle(textEl.style,textStyleModel,{text:truncatedText,textFont:textFont,textFill:textStyleModel.getTextColor()||axisModel.get("axisLine.lineStyle.color"),textAlign:labelLayout.textAlign,textVerticalAlign:labelLayout.textVerticalAlign});if(axisModel.get("triggerEvent")){textEl.eventData=makeAxisEventDataBase(axisModel);textEl.eventData.targetType="axisName";textEl.eventData.name=name}this._dumbGroup.add(textEl);textEl.updateTransform();this.group.add(textEl);textEl.decomposeTransform()}};var innerTextLayout=AxisBuilder.innerTextLayout=function(axisRotation,textRotation,direction){var rotationDiff=remRadian(textRotation-axisRotation);var textAlign;var textVerticalAlign;if(isRadianAroundZero(rotationDiff)){textVerticalAlign=direction>0?"top":"bottom";textAlign="center"}else{if(isRadianAroundZero(rotationDiff-PI)){textVerticalAlign=direction>0?"bottom":"top";textAlign="center"}else{textVerticalAlign="middle";if(rotationDiff>0&&rotationDiff<PI){textAlign=direction>0?"right":"left"}else{textAlign=direction>0?"left":"right"}}}return{rotation:rotationDiff,textAlign:textAlign,textVerticalAlign:textVerticalAlign}};function endTextLayout(opt,textPosition,textRotate,extent){var rotationDiff=remRadian(textRotate-opt.rotation);var textAlign;var textVerticalAlign;var inverse=extent[0]>extent[1];var onLeft=(textPosition==="start"&&!inverse)||(textPosition!=="start"&&inverse);if(isRadianAroundZero(rotationDiff-PI/2)){textVerticalAlign=onLeft?"bottom":"top";textAlign="center"}else{if(isRadianAroundZero(rotationDiff-PI*1.5)){textVerticalAlign=onLeft?"top":"bottom";textAlign="center"}else{textVerticalAlign="middle";if(rotationDiff<PI*1.5&&rotationDiff>PI/2){textAlign=onLeft?"left":"right"}else{textAlign=onLeft?"right":"left"}}}return{rotation:rotationDiff,textAlign:textAlign,textVerticalAlign:textVerticalAlign}}function isSilent(axisModel){var tooltipOpt=axisModel.get("tooltip");return axisModel.get("silent")||!(axisModel.get("triggerEvent")||(tooltipOpt&&tooltipOpt.show))}function fixMinMaxLabelShow(axisModel,labelEls,tickEls){var showMinLabel=axisModel.get("axisLabel.showMinLabel");var showMaxLabel=axisModel.get("axisLabel.showMaxLabel");labelEls=labelEls||[];tickEls=tickEls||[];var firstLabel=labelEls[0];var nextLabel=labelEls[1];
var lastLabel=labelEls[labelEls.length-1];var prevLabel=labelEls[labelEls.length-2];var firstTick=tickEls[0];var nextTick=tickEls[1];var lastTick=tickEls[tickEls.length-1];var prevTick=tickEls[tickEls.length-2];if(showMinLabel===false){ignoreEl(firstLabel);ignoreEl(firstTick)}else{if(isTwoLabelOverlapped(firstLabel,nextLabel)){if(showMinLabel){ignoreEl(nextLabel);ignoreEl(nextTick)}else{ignoreEl(firstLabel);ignoreEl(firstTick)}}}if(showMaxLabel===false){ignoreEl(lastLabel);ignoreEl(lastTick)}else{if(isTwoLabelOverlapped(prevLabel,lastLabel)){if(showMaxLabel){ignoreEl(prevLabel);ignoreEl(prevTick)}else{ignoreEl(lastLabel);ignoreEl(lastTick)}}}}function ignoreEl(el){el&&(el.ignore=true)}function isTwoLabelOverlapped(current,next,labelLayout){var firstRect=current&&current.getBoundingRect().clone();var nextRect=next&&next.getBoundingRect().clone();if(!firstRect||!nextRect){return}var mRotationBack=matrix.identity([]);matrix.rotate(mRotationBack,mRotationBack,-current.rotation);firstRect.applyTransform(matrix.mul([],mRotationBack,current.getLocalTransform()));nextRect.applyTransform(matrix.mul([],mRotationBack,next.getLocalTransform()));return firstRect.intersect(nextRect)}function isNameLocationCenter(nameLocation){return nameLocation==="middle"||nameLocation==="center"}var ifIgnoreOnTick=AxisBuilder.ifIgnoreOnTick=function(axis,i,interval,ticksCnt,showMinLabel,showMaxLabel){if(i===0&&showMinLabel||i===ticksCnt-1&&showMaxLabel){return false}var rawTick;var scale=axis.scale;return scale.type==="ordinal"&&(typeof interval==="function"?(rawTick=scale.getTicks()[i],!interval(rawTick,scale.getLabel(rawTick))):i%(interval+1))};var getInterval=AxisBuilder.getInterval=function(model,labelInterval){var interval=model.get("interval");if(interval==null||interval=="auto"){interval=labelInterval}return interval};function buildAxisTick(axisBuilder,axisModel,opt){var axis=axisModel.axis;if(!axisModel.get("axisTick.show")||axis.scale.isBlank()){return}var tickModel=axisModel.getModel("axisTick");var lineStyleModel=tickModel.getModel("lineStyle");var tickLen=tickModel.get("length");var tickInterval=getInterval(tickModel,opt.labelInterval);var ticksCoords=axis.getTicksCoords(tickModel.get("alignWithLabel"));var ticks=axis.scale.getTicks();var showMinLabel=axisModel.get("axisLabel.showMinLabel");var showMaxLabel=axisModel.get("axisLabel.showMaxLabel");var pt1=[];var pt2=[];var matrix=axisBuilder._transform;var tickEls=[];var ticksCnt=ticksCoords.length;for(var i=0;i<ticksCnt;i++){if(ifIgnoreOnTick(axis,i,tickInterval,ticksCnt,showMinLabel,showMaxLabel)){continue}var tickCoord=ticksCoords[i];pt1[0]=tickCoord;pt1[1]=0;pt2[0]=tickCoord;pt2[1]=opt.tickDirection*tickLen;if(matrix){v2ApplyTransform(pt1,pt1,matrix);v2ApplyTransform(pt2,pt2,matrix)}var tickEl=new graphic.Line(graphic.subPixelOptimizeLine({anid:"tick_"+ticks[i],shape:{x1:pt1[0],y1:pt1[1],x2:pt2[0],y2:pt2[1]},style:zrUtil.defaults(lineStyleModel.getLineStyle(),{stroke:axisModel.get("axisLine.lineStyle.color")}),z2:2,silent:true}));axisBuilder.group.add(tickEl);tickEls.push(tickEl)}return tickEls}function buildAxisLabel(axisBuilder,axisModel,opt){var axis=axisModel.axis;var show=retrieve(opt.axisLabelShow,axisModel.get("axisLabel.show"));if(!show||axis.scale.isBlank()){return}var labelModel=axisModel.getModel("axisLabel");var labelMargin=labelModel.get("margin");var ticks=axis.scale.getTicks();var labels=axisModel.getFormattedLabels();var labelRotation=(retrieve(opt.labelRotate,labelModel.get("rotate"))||0)*PI/180;var labelLayout=innerTextLayout(opt.rotation,labelRotation,opt.labelDirection);var categoryData=axisModel.get("data");var labelEls=[];var silent=isSilent(axisModel);var triggerEvent=axisModel.get("triggerEvent");var showMinLabel=axisModel.get("axisLabel.showMinLabel");var showMaxLabel=axisModel.get("axisLabel.showMaxLabel");zrUtil.each(ticks,function(tickVal,index){if(ifIgnoreOnTick(axis,index,opt.labelInterval,ticks.length,showMinLabel,showMaxLabel)){return}var itemLabelModel=labelModel;if(categoryData&&categoryData[tickVal]&&categoryData[tickVal].textStyle){itemLabelModel=new Model(categoryData[tickVal].textStyle,labelModel,axisModel.ecModel)}var textColor=itemLabelModel.getTextColor()||axisModel.get("axisLine.lineStyle.color");var tickCoord=axis.dataToCoord(tickVal);var pos=[tickCoord,opt.labelOffset+opt.labelDirection*labelMargin];var labelStr=axis.scale.getLabel(tickVal);var textEl=new graphic.Text({anid:"label_"+tickVal,position:pos,rotation:labelLayout.rotation,silent:silent,z2:10});graphic.setTextStyle(textEl.style,itemLabelModel,{text:labels[index],textAlign:itemLabelModel.getShallow("align",true)||labelLayout.textAlign,textVerticalAlign:itemLabelModel.getShallow("verticalAlign",true)||itemLabelModel.getShallow("baseline",true)||labelLayout.textVerticalAlign,textFill:typeof textColor==="function"?textColor(axis.type==="category"?labelStr:axis.type==="value"?tickVal+"":tickVal,index):textColor});if(triggerEvent){textEl.eventData=makeAxisEventDataBase(axisModel);
textEl.eventData.targetType="axisLabel";textEl.eventData.value=labelStr}axisBuilder._dumbGroup.add(textEl);textEl.updateTransform();labelEls.push(textEl);axisBuilder.group.add(textEl);textEl.decomposeTransform()});return labelEls}module.exports=AxisBuilder}),(function(module,exports,__webpack_require__){var axisPointerModelHelper=__webpack_require__(140);var AxisView=__webpack_require__(1).extendComponentView({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(axisModel,ecModel,api,payload){this.axisPointerClass&&axisPointerModelHelper.fixValue(axisModel);AxisView.superApply(this,"render",arguments);updateAxisPointer(this,axisModel,ecModel,api,payload,true)},updateAxisPointer:function(axisModel,ecModel,api,payload,force){updateAxisPointer(this,axisModel,ecModel,api,payload,false)},remove:function(ecModel,api){var axisPointer=this._axisPointer;axisPointer&&axisPointer.remove(api);AxisView.superApply(this,"remove",arguments)},dispose:function(ecModel,api){disposeAxisPointer(this,api);AxisView.superApply(this,"dispose",arguments)}});function updateAxisPointer(axisView,axisModel,ecModel,api,payload,forceRender){var Clazz=AxisView.getAxisPointerClass(axisView.axisPointerClass);if(!Clazz){return}var axisPointerModel=axisPointerModelHelper.getAxisPointerModel(axisModel);axisPointerModel?(axisView._axisPointer||(axisView._axisPointer=new Clazz())).render(axisModel,axisPointerModel,api,forceRender):disposeAxisPointer(axisView,api)}function disposeAxisPointer(axisView,ecModel,api){var axisPointer=axisView._axisPointer;axisPointer&&axisPointer.dispose(ecModel,api);axisView._axisPointer=null}var axisPointerClazz=[];AxisView.registerAxisPointerClass=function(type,clazz){if(true){if(axisPointerClazz[type]){throw new Error("axisPointer "+type+" exists")}}axisPointerClazz[type]=clazz};AxisView.getAxisPointerClass=function(type){return type&&axisPointerClazz[type]};module.exports=AxisView}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var Model=__webpack_require__(14);var each=zrUtil.each;var curry=zrUtil.curry;var helper={};helper.collect=function(ecModel,api){var result={axesInfo:{},seriesInvolved:false,coordSysAxesInfo:{},coordSysMap:{}};collectAxesInfo(result,ecModel,api);result.seriesInvolved&&collectSeriesInfo(result,ecModel);return result};function collectAxesInfo(result,ecModel,api){var globalTooltipModel=ecModel.getComponent("tooltip");var globalAxisPointerModel=ecModel.getComponent("axisPointer");var linksOption=globalAxisPointerModel.get("link",true)||[];var linkGroups=[];each(api.getCoordinateSystems(),function(coordSys){if(!coordSys.axisPointerEnabled){return}var coordSysKey=makeKey(coordSys.model);var axesInfoInCoordSys=result.coordSysAxesInfo[coordSysKey]={};result.coordSysMap[coordSysKey]=coordSys;var coordSysModel=coordSys.model;var baseTooltipModel=coordSysModel.getModel("tooltip",globalTooltipModel);each(coordSys.getAxes(),curry(saveTooltipAxisInfo,false,null));if(coordSys.getTooltipAxes&&globalTooltipModel&&baseTooltipModel.get("show")){var triggerAxis=baseTooltipModel.get("trigger")==="axis";var cross=baseTooltipModel.get("axisPointer.type")==="cross";var tooltipAxes=coordSys.getTooltipAxes(baseTooltipModel.get("axisPointer.axis"));if(triggerAxis||cross){each(tooltipAxes.baseAxes,curry(saveTooltipAxisInfo,cross?"cross":true,triggerAxis))}if(cross){each(tooltipAxes.otherAxes,curry(saveTooltipAxisInfo,"cross",false))}}function saveTooltipAxisInfo(fromTooltip,triggerTooltip,axis){var axisPointerModel=axis.model.getModel("axisPointer",globalAxisPointerModel);var axisPointerShow=axisPointerModel.get("show");if(!axisPointerShow||(axisPointerShow==="auto"&&!fromTooltip&&!isHandleTrigger(axisPointerModel))){return}if(triggerTooltip==null){triggerTooltip=axisPointerModel.get("triggerTooltip")}axisPointerModel=fromTooltip?makeAxisPointerModel(axis,baseTooltipModel,globalAxisPointerModel,ecModel,fromTooltip,triggerTooltip):axisPointerModel;var snap=axisPointerModel.get("snap");var key=makeKey(axis.model);var involveSeries=triggerTooltip||snap||axis.type==="category";var axisInfo=result.axesInfo[key]={key:key,axis:axis,coordSys:coordSys,axisPointerModel:axisPointerModel,triggerTooltip:triggerTooltip,involveSeries:involveSeries,snap:snap,useHandle:isHandleTrigger(axisPointerModel),seriesModels:[]};axesInfoInCoordSys[key]=axisInfo;result.seriesInvolved|=involveSeries;var groupIndex=getLinkGroupIndex(linksOption,axis);if(groupIndex!=null){var linkGroup=linkGroups[groupIndex]||(linkGroups[groupIndex]={axesInfo:{}});linkGroup.axesInfo[key]=axisInfo;linkGroup.mapper=linksOption[groupIndex].mapper;axisInfo.linkGroup=linkGroup}}})}function makeAxisPointerModel(axis,baseTooltipModel,globalAxisPointerModel,ecModel,fromTooltip,triggerTooltip){var tooltipAxisPointerModel=baseTooltipModel.getModel("axisPointer");var volatileOption={};each(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(field){volatileOption[field]=zrUtil.clone(tooltipAxisPointerModel.get(field))
});volatileOption.snap=axis.type!=="category"&&!!triggerTooltip;if(tooltipAxisPointerModel.get("type")==="cross"){volatileOption.type="line"}var labelOption=volatileOption.label||(volatileOption.label={});labelOption.show==null&&(labelOption.show=false);if(fromTooltip==="cross"){labelOption.show=true;if(!triggerTooltip){var crossStyle=volatileOption.lineStyle=tooltipAxisPointerModel.get("crossStyle");crossStyle&&zrUtil.defaults(labelOption,crossStyle.textStyle)}}return axis.model.getModel("axisPointer",new Model(volatileOption,globalAxisPointerModel,ecModel))}function collectSeriesInfo(result,ecModel){ecModel.eachSeries(function(seriesModel){var coordSys=seriesModel.coordinateSystem;var seriesTooltipTrigger=seriesModel.get("tooltip.trigger",true);var seriesTooltipShow=seriesModel.get("tooltip.show",true);if(!coordSys||seriesTooltipTrigger==="none"||seriesTooltipTrigger===false||seriesTooltipTrigger==="item"||seriesTooltipShow===false||seriesModel.get("axisPointer.show",true)===false){return}each(result.coordSysAxesInfo[makeKey(coordSys.model)],function(axisInfo){var axis=axisInfo.axis;if(coordSys.getAxis(axis.dim)===axis){axisInfo.seriesModels.push(seriesModel);axisInfo.seriesDataCount==null&&(axisInfo.seriesDataCount=0);axisInfo.seriesDataCount+=seriesModel.getData().count()}})},this)}function getLinkGroupIndex(linksOption,axis){var axisModel=axis.model;var dim=axis.dim;for(var i=0;i<linksOption.length;i++){var linkOption=linksOption[i]||{};if(checkPropInLink(linkOption[dim+"AxisId"],axisModel.id)||checkPropInLink(linkOption[dim+"AxisIndex"],axisModel.componentIndex)||checkPropInLink(linkOption[dim+"AxisName"],axisModel.name)){return i}}}function checkPropInLink(linkPropValue,axisPropValue){return linkPropValue==="all"||(zrUtil.isArray(linkPropValue)&&zrUtil.indexOf(linkPropValue,axisPropValue)>=0)||linkPropValue===axisPropValue}helper.fixValue=function(axisModel){var axisInfo=helper.getAxisInfo(axisModel);if(!axisInfo){return}var axisPointerModel=axisInfo.axisPointerModel;var scale=axisInfo.axis.scale;var option=axisPointerModel.option;var status=axisPointerModel.get("status");var value=axisPointerModel.get("value");if(value!=null){value=scale.parse(value)}var useHandle=isHandleTrigger(axisPointerModel);if(status==null){option.status=useHandle?"show":"hide"}var extent=scale.getExtent().slice();extent[0]>extent[1]&&extent.reverse();if(value==null||value>extent[1]){value=extent[1]}if(value<extent[0]){value=extent[0]}option.value=value;if(useHandle){option.status=axisInfo.axis.scale.isBlank()?"hide":"show"}};helper.getAxisInfo=function(axisModel){var coordSysAxesInfo=(axisModel.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return coordSysAxesInfo&&coordSysAxesInfo.axesInfo[makeKey(axisModel)]};helper.getAxisPointerModel=function(axisModel){var axisInfo=helper.getAxisInfo(axisModel);return axisInfo&&axisInfo.axisPointerModel};function isHandleTrigger(axisPointerModel){return !!axisPointerModel.get("handle.show")}var makeKey=helper.makeKey=function(model){return model.type+"||"+model.id};module.exports=helper}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var helper={};helper.layout=function(gridModel,axisModel,opt){opt=opt||{};var grid=gridModel.coordinateSystem;var axis=axisModel.axis;var layout={};var rawAxisPosition=axis.position;var axisPosition=axis.onZero?"onZero":rawAxisPosition;var axisDim=axis.dim;var rect=grid.getRect();var rectBound=[rect.x,rect.x+rect.width,rect.y,rect.y+rect.height];var idx={left:0,right:1,top:0,bottom:1,onZero:2};var axisOffset=axisModel.get("offset")||0;var posBound=axisDim==="x"?[rectBound[2]-axisOffset,rectBound[3]+axisOffset]:[rectBound[0]-axisOffset,rectBound[1]+axisOffset];if(axis.onZero){var otherAxis=grid.getAxis(axisDim==="x"?"y":"x",axis.onZeroAxisIndex);var onZeroCoord=otherAxis.toGlobalCoord(otherAxis.dataToCoord(0));posBound[idx["onZero"]]=Math.max(Math.min(onZeroCoord,posBound[1]),posBound[0])}layout.position=[axisDim==="y"?posBound[idx[axisPosition]]:rectBound[0],axisDim==="x"?posBound[idx[axisPosition]]:rectBound[3]];layout.rotation=Math.PI/2*(axisDim==="x"?0:1);var dirMap={top:-1,bottom:1,left:-1,right:1};layout.labelDirection=layout.tickDirection=layout.nameDirection=dirMap[rawAxisPosition];layout.labelOffset=axis.onZero?posBound[idx[rawAxisPosition]]-posBound[idx["onZero"]]:0;if(axisModel.get("axisTick.inside")){layout.tickDirection=-layout.tickDirection}if(zrUtil.retrieve(opt.labelInside,axisModel.get("axisLabel.inside"))){layout.labelDirection=-layout.labelDirection}var labelRotate=axisModel.get("axisLabel.rotate");layout.labelRotate=axisPosition==="top"?-labelRotate:labelRotate;layout.labelInterval=axis.getLabelInterval();layout.z2=1;return layout};module.exports=helper}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);__webpack_require__(128);__webpack_require__(143);__webpack_require__(145);var barLayoutGrid=__webpack_require__(148);var echarts=__webpack_require__(1);echarts.registerLayout(zrUtil.curry(barLayoutGrid,"bar"));
echarts.registerVisual(function(ecModel){ecModel.eachSeriesByType("bar",function(seriesModel){var data=seriesModel.getData();data.setVisual("legendSymbol","roundRect")})});__webpack_require__(127)}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(144).extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect"})}),(function(module,exports,__webpack_require__){var SeriesModel=__webpack_require__(83);var createListFromArray=__webpack_require__(112);module.exports=SeriesModel.extend({type:"series.__base_bar__",getInitialData:function(option,ecModel){return createListFromArray(option.data,this,ecModel)},getMarkerPosition:function(value){var coordSys=this.coordinateSystem;if(coordSys){var pt=coordSys.dataToPoint(value,true);var data=this.getData();var offset=data.getLayout("offset");var size=data.getLayout("size");var offsetIndex=coordSys.getBaseAxis().isHorizontal()?0:1;pt[offsetIndex]+=offset+size/2;return pt}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:true,barMinHeight:0,barMinAngle:0,itemStyle:{}}})}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var graphic=__webpack_require__(20);var helper=__webpack_require__(146);var BAR_BORDER_WIDTH_QUERY=["itemStyle","normal","barBorderWidth"];zrUtil.extend(__webpack_require__(14).prototype,__webpack_require__(147));var BarView=__webpack_require__(1).extendChartView({type:"bar",render:function(seriesModel,ecModel,api){var coordinateSystemType=seriesModel.get("coordinateSystem");if(coordinateSystemType==="cartesian2d"||coordinateSystemType==="polar"){this._render(seriesModel,ecModel,api)}else{if(true){console.warn("Only cartesian2d and polar supported for bar.")}}return this.group},dispose:zrUtil.noop,_render:function(seriesModel,ecModel,api){var group=this.group;var data=seriesModel.getData();var oldData=this._data;var coord=seriesModel.coordinateSystem;var baseAxis=coord.getBaseAxis();var isHorizontalOrRadial;if(coord.type==="cartesian2d"){isHorizontalOrRadial=baseAxis.isHorizontal()}else{if(coord.type==="polar"){isHorizontalOrRadial=baseAxis.dim==="angle"}}var animationModel=seriesModel.isAnimationEnabled()?seriesModel:null;data.diff(oldData).add(function(dataIndex){if(!data.hasValue(dataIndex)){return}var itemModel=data.getItemModel(dataIndex);var layout=getLayout[coord.type](data,dataIndex,itemModel);var el=elementCreator[coord.type](data,dataIndex,itemModel,layout,isHorizontalOrRadial,animationModel);data.setItemGraphicEl(dataIndex,el);group.add(el);updateStyle(el,data,dataIndex,itemModel,layout,seriesModel,isHorizontalOrRadial,coord.type==="polar")}).update(function(newIndex,oldIndex){var el=oldData.getItemGraphicEl(oldIndex);if(!data.hasValue(newIndex)){group.remove(el);return}var itemModel=data.getItemModel(newIndex);var layout=getLayout[coord.type](data,newIndex,itemModel);if(el){graphic.updateProps(el,{shape:layout},animationModel,newIndex)}else{el=elementCreator[coord.type](data,newIndex,itemModel,layout,isHorizontalOrRadial,animationModel,true)}data.setItemGraphicEl(newIndex,el);group.add(el);updateStyle(el,data,newIndex,itemModel,layout,seriesModel,isHorizontalOrRadial,coord.type==="polar")}).remove(function(dataIndex){var el=oldData.getItemGraphicEl(dataIndex);if(coord.type==="cartesian2d"){el&&removeRect(dataIndex,animationModel,el)}else{el&&removeSector(dataIndex,animationModel,el)}}).execute();this._data=data},remove:function(ecModel,api){var group=this.group;var data=this._data;if(ecModel.get("animation")){if(data){data.eachItemGraphicEl(function(el){if(el.type==="sector"){removeSector(el.dataIndex,ecModel,el)}else{removeRect(el.dataIndex,ecModel,el)}})}}else{group.removeAll()}}});var elementCreator={cartesian2d:function(data,dataIndex,itemModel,layout,isHorizontal,animationModel,isUpdate){var rect=new graphic.Rect({shape:zrUtil.extend({},layout)});if(animationModel){var rectShape=rect.shape;var animateProperty=isHorizontal?"height":"width";var animateTarget={};rectShape[animateProperty]=0;animateTarget[animateProperty]=layout[animateProperty];graphic[isUpdate?"updateProps":"initProps"](rect,{shape:animateTarget},animationModel,dataIndex)}return rect},polar:function(data,dataIndex,itemModel,layout,isRadial,animationModel,isUpdate){var sector=new graphic.Sector({shape:zrUtil.extend({},layout)});if(animationModel){var sectorShape=sector.shape;var animateProperty=isRadial?"r":"endAngle";var animateTarget={};sectorShape[animateProperty]=isRadial?0:layout.startAngle;animateTarget[animateProperty]=layout[animateProperty];graphic[isUpdate?"updateProps":"initProps"](sector,{shape:animateTarget},animationModel,dataIndex)}return sector}};function removeRect(dataIndex,animationModel,el){el.style.text=null;graphic.updateProps(el,{shape:{width:0}},animationModel,dataIndex,function(){el.parent&&el.parent.remove(el)})}function removeSector(dataIndex,animationModel,el){el.style.text=null;graphic.updateProps(el,{shape:{r:el.shape.r0}},animationModel,dataIndex,function(){el.parent&&el.parent.remove(el)
})}var getLayout={cartesian2d:function(data,dataIndex,itemModel){var layout=data.getItemLayout(dataIndex);var fixedLineWidth=getLineWidth(itemModel,layout);var signX=layout.width>0?1:-1;var signY=layout.height>0?1:-1;return{x:layout.x+signX*fixedLineWidth/2,y:layout.y+signY*fixedLineWidth/2,width:layout.width-signX*fixedLineWidth,height:layout.height-signY*fixedLineWidth}},polar:function(data,dataIndex,itemModel){var layout=data.getItemLayout(dataIndex);return{cx:layout.cx,cy:layout.cy,r0:layout.r0,r:layout.r,startAngle:layout.startAngle,endAngle:layout.endAngle}}};function updateStyle(el,data,dataIndex,itemModel,layout,seriesModel,isHorizontal,isPolar){var color=data.getItemVisual(dataIndex,"color");var opacity=data.getItemVisual(dataIndex,"opacity");var itemStyleModel=itemModel.getModel("itemStyle.normal");var hoverStyle=itemModel.getModel("itemStyle.emphasis").getBarItemStyle();if(!isPolar){el.setShape("r",itemStyleModel.get("barBorderRadius")||0)}el.useStyle(zrUtil.defaults({fill:color,opacity:opacity},itemStyleModel.getBarItemStyle()));var cursorStyle=itemModel.getShallow("cursor");cursorStyle&&el.attr("cursor",cursorStyle);var labelPositionOutside=isHorizontal?(layout.height>0?"bottom":"top"):(layout.width>0?"left":"right");if(!isPolar){helper.setLabel(el.style,hoverStyle,itemModel,color,seriesModel,dataIndex,labelPositionOutside)}graphic.setHoverStyle(el,hoverStyle)}function getLineWidth(itemModel,rawLayout){var lineWidth=itemModel.get(BAR_BORDER_WIDTH_QUERY)||0;return Math.min(lineWidth,Math.abs(rawLayout.width),Math.abs(rawLayout.height))}module.exports=BarView}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var helper={};helper.setLabel=function(normalStyle,hoverStyle,itemModel,color,seriesModel,dataIndex,labelPositionOutside){var labelModel=itemModel.getModel("label.normal");var hoverLabelModel=itemModel.getModel("label.emphasis");graphic.setLabelStyle(normalStyle,hoverStyle,labelModel,hoverLabelModel,{labelFetcher:seriesModel,labelDataIndex:dataIndex,defaultText:seriesModel.getRawValue(dataIndex),isRectText:true,autoColor:color});fixPosition(normalStyle);fixPosition(hoverStyle)};function fixPosition(style,labelPositionOutside){if(style.textPosition==="outside"){style.textPosition=labelPositionOutside}}module.exports=helper}),(function(module,exports,__webpack_require__){var getBarItemStyle=__webpack_require__(17)([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);module.exports={getBarItemStyle:function(excludes){var style=getBarItemStyle.call(this,excludes);if(this.getBorderLineDash){var lineDash=this.getBorderLineDash();lineDash&&(style.lineDash=lineDash)}return style}}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var numberUtil=__webpack_require__(7);var parsePercent=numberUtil.parsePercent;var STACK_PREFIX="__ec_stack_";function getSeriesStackId(seriesModel){return seriesModel.get("stack")||STACK_PREFIX+seriesModel.seriesIndex}function getAxisKey(axis){return axis.dim+axis.index}function getLayoutOnAxis(opt,api){var params=[];var baseAxis=opt.axis;var axisKey="axis0";if(baseAxis.type!=="category"){return}var bandWidth=baseAxis.getBandWidth();for(var i=0;i<opt.count||0;i++){params.push(zrUtil.defaults({bandWidth:bandWidth,axisKey:axisKey,stackId:STACK_PREFIX+i},opt))}var widthAndOffsets=doCalBarWidthAndOffset(params,api);var result=[];for(var i=0;i<opt.count;i++){var item=widthAndOffsets[axisKey][STACK_PREFIX+i];item.offsetCenter=item.offset+item.width/2;result.push(item)}return result}function calBarWidthAndOffset(barSeries,api){var seriesInfoList=zrUtil.map(barSeries,function(seriesModel){var data=seriesModel.getData();var cartesian=seriesModel.coordinateSystem;var baseAxis=cartesian.getBaseAxis();var axisExtent=baseAxis.getExtent();var bandWidth=baseAxis.type==="category"?baseAxis.getBandWidth():(Math.abs(axisExtent[1]-axisExtent[0])/data.count());var barWidth=parsePercent(seriesModel.get("barWidth"),bandWidth);var barMaxWidth=parsePercent(seriesModel.get("barMaxWidth"),bandWidth);var barGap=seriesModel.get("barGap");var barCategoryGap=seriesModel.get("barCategoryGap");return{bandWidth:bandWidth,barWidth:barWidth,barMaxWidth:barMaxWidth,barGap:barGap,barCategoryGap:barCategoryGap,axisKey:getAxisKey(baseAxis),stackId:getSeriesStackId(seriesModel)}});return doCalBarWidthAndOffset(seriesInfoList,api)}function doCalBarWidthAndOffset(seriesInfoList,api){var columnsMap={};zrUtil.each(seriesInfoList,function(seriesInfo,idx){var axisKey=seriesInfo.axisKey;var bandWidth=seriesInfo.bandWidth;var columnsOnAxis=columnsMap[axisKey]||{bandWidth:bandWidth,remainedWidth:bandWidth,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}};var stacks=columnsOnAxis.stacks;columnsMap[axisKey]=columnsOnAxis;var stackId=seriesInfo.stackId;if(!stacks[stackId]){columnsOnAxis.autoWidthCount++
}stacks[stackId]=stacks[stackId]||{width:0,maxWidth:0};var barWidth=seriesInfo.barWidth;if(barWidth&&!stacks[stackId].width){stacks[stackId].width=barWidth;barWidth=Math.min(columnsOnAxis.remainedWidth,barWidth);columnsOnAxis.remainedWidth-=barWidth}var barMaxWidth=seriesInfo.barMaxWidth;barMaxWidth&&(stacks[stackId].maxWidth=barMaxWidth);var barGap=seriesInfo.barGap;(barGap!=null)&&(columnsOnAxis.gap=barGap);var barCategoryGap=seriesInfo.barCategoryGap;(barCategoryGap!=null)&&(columnsOnAxis.categoryGap=barCategoryGap)});var result={};zrUtil.each(columnsMap,function(columnsOnAxis,coordSysName){result[coordSysName]={};var stacks=columnsOnAxis.stacks;var bandWidth=columnsOnAxis.bandWidth;var categoryGap=parsePercent(columnsOnAxis.categoryGap,bandWidth);var barGapPercent=parsePercent(columnsOnAxis.gap,1);var remainedWidth=columnsOnAxis.remainedWidth;var autoWidthCount=columnsOnAxis.autoWidthCount;var autoWidth=(remainedWidth-categoryGap)/(autoWidthCount+(autoWidthCount-1)*barGapPercent);autoWidth=Math.max(autoWidth,0);zrUtil.each(stacks,function(column,stack){var maxWidth=column.maxWidth;if(maxWidth&&maxWidth<autoWidth){maxWidth=Math.min(maxWidth,remainedWidth);if(column.width){maxWidth=Math.min(maxWidth,column.width)}remainedWidth-=maxWidth;column.width=maxWidth;autoWidthCount--}});autoWidth=(remainedWidth-categoryGap)/(autoWidthCount+(autoWidthCount-1)*barGapPercent);autoWidth=Math.max(autoWidth,0);var widthSum=0;var lastColumn;zrUtil.each(stacks,function(column,idx){if(!column.width){column.width=autoWidth}lastColumn=column;widthSum+=column.width*(1+barGapPercent)});if(lastColumn){widthSum-=lastColumn.width*barGapPercent}var offset=-widthSum/2;zrUtil.each(stacks,function(column,stackId){result[coordSysName][stackId]=result[coordSysName][stackId]||{offset:offset,width:column.width};offset+=column.width*(1+barGapPercent)})});return result}function barLayoutGrid(seriesType,ecModel,api){var barWidthAndOffset=calBarWidthAndOffset(zrUtil.filter(ecModel.getSeriesByType(seriesType),function(seriesModel){return !ecModel.isSeriesFiltered(seriesModel)&&seriesModel.coordinateSystem&&seriesModel.coordinateSystem.type==="cartesian2d"}));var lastStackCoords={};var lastStackCoordsOrigin={};ecModel.eachSeriesByType(seriesType,function(seriesModel){if(seriesModel.coordinateSystem.type!=="cartesian2d"){return}var data=seriesModel.getData();var cartesian=seriesModel.coordinateSystem;var baseAxis=cartesian.getBaseAxis();var stackId=getSeriesStackId(seriesModel);var columnLayoutInfo=barWidthAndOffset[getAxisKey(baseAxis)][stackId];var columnOffset=columnLayoutInfo.offset;var columnWidth=columnLayoutInfo.width;var valueAxis=cartesian.getOtherAxis(baseAxis);var barMinHeight=seriesModel.get("barMinHeight")||0;var valueAxisStart=baseAxis.onZero?valueAxis.toGlobalCoord(valueAxis.dataToCoord(0)):valueAxis.getGlobalExtent()[0];var coordDims=[seriesModel.coordDimToDataDim("x")[0],seriesModel.coordDimToDataDim("y")[0]];var coords=data.mapArray(coordDims,function(x,y){return cartesian.dataToPoint([x,y])},true);lastStackCoords[stackId]=lastStackCoords[stackId]||[];lastStackCoordsOrigin[stackId]=lastStackCoordsOrigin[stackId]||[];data.setLayout({offset:columnOffset,size:columnWidth});data.each(seriesModel.coordDimToDataDim(valueAxis.dim)[0],function(value,idx){if(isNaN(value)){return}if(!lastStackCoords[stackId][idx]){lastStackCoords[stackId][idx]={p:valueAxisStart,n:valueAxisStart};lastStackCoordsOrigin[stackId][idx]={p:valueAxisStart,n:valueAxisStart}}var sign=value>=0?"p":"n";var coord=coords[idx];var lastCoord=lastStackCoords[stackId][idx][sign];var lastCoordOrigin=lastStackCoordsOrigin[stackId][idx][sign];var x;var y;var width;var height;if(valueAxis.isHorizontal()){x=lastCoord;y=coord[1]+columnOffset;width=coord[0]-lastCoordOrigin;height=columnWidth;lastStackCoordsOrigin[stackId][idx][sign]+=width;if(Math.abs(width)<barMinHeight){width=(width<0?-1:1)*barMinHeight}lastStackCoords[stackId][idx][sign]+=width}else{x=coord[0]+columnOffset;y=lastCoord;width=columnWidth;height=coord[1]-lastCoordOrigin;lastStackCoordsOrigin[stackId][idx][sign]+=height;if(Math.abs(height)<barMinHeight){height=(height<=0?-1:1)*barMinHeight}lastStackCoords[stackId][idx][sign]+=height}data.setItemLayout(idx,{x:x,y:y,width:width,height:height})},true)},this)}barLayoutGrid.getLayoutOnAxis=getLayoutOnAxis;module.exports=barLayoutGrid}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var echarts=__webpack_require__(1);__webpack_require__(150);__webpack_require__(152);__webpack_require__(153)("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]);echarts.registerVisual(zrUtil.curry(__webpack_require__(154),"pie"));echarts.registerLayout(zrUtil.curry(__webpack_require__(155),"pie"));echarts.registerProcessor(zrUtil.curry(__webpack_require__(157),"pie"))}),(function(module,exports,__webpack_require__){var List=__webpack_require__(101);
var zrUtil=__webpack_require__(4);var modelUtil=__webpack_require__(5);var numberUtil=__webpack_require__(7);var completeDimensions=__webpack_require__(113);var dataSelectableMixin=__webpack_require__(151);var PieSeries=__webpack_require__(1).extendSeriesModel({type:"series.pie",init:function(option){PieSeries.superApply(this,"init",arguments);this.legendDataProvider=function(){return this.getRawData()};this.updateSelectedMap(option.data);this._defaultLabelLine(option)},mergeOption:function(newOption){PieSeries.superCall(this,"mergeOption",newOption);this.updateSelectedMap(this.option.data)},getInitialData:function(option,ecModel){var dimensions=completeDimensions(["value"],option.data);var list=new List(dimensions,this);list.initData(option.data);return list},getDataParams:function(dataIndex){var data=this.getData();var params=PieSeries.superCall(this,"getDataParams",dataIndex);var valueList=[];data.each("value",function(value){valueList.push(value)});params.percent=numberUtil.getPercentWithPrecision(valueList,dataIndex,data.hostModel.get("percentPrecision"));params.$vars.push("percent");return params},_defaultLabelLine:function(option){modelUtil.defaultEmphasis(option.labelLine,["show"]);var labelLineNormalOpt=option.labelLine.normal;var labelLineEmphasisOpt=option.labelLine.emphasis;labelLineNormalOpt.show=labelLineNormalOpt.show&&option.label.normal.show;labelLineEmphasisOpt.show=labelLineEmphasisOpt.show&&option.label.emphasis.show},defaultOption:{zlevel:0,z:2,legendHoverLink:true,hoverAnimation:true,center:["50%","50%"],radius:[0,"75%"],clockwise:true,startAngle:90,minAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:true,percentPrecision:2,stillShowZeroSum:true,label:{normal:{rotate:false,show:true,position:"outer"},emphasis:{}},labelLine:{normal:{show:true,length:15,length2:15,smooth:false,lineStyle:{width:1,type:"solid"}}},itemStyle:{normal:{borderWidth:1},emphasis:{}},animationType:"expansion",animationEasing:"cubicOut",data:[]}});zrUtil.mixin(PieSeries,dataSelectableMixin);module.exports=PieSeries}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);module.exports={updateSelectedMap:function(targetList){this._targetList=targetList.slice();this._selectTargetMap=zrUtil.reduce(targetList||[],function(targetMap,target){targetMap.set(target.name,target);return targetMap},zrUtil.createHashMap())},select:function(name,id){var target=id!=null?this._targetList[id]:this._selectTargetMap.get(name);var selectedMode=this.get("selectedMode");if(selectedMode==="single"){this._selectTargetMap.each(function(target){target.selected=false})}target&&(target.selected=true)},unSelect:function(name,id){var target=id!=null?this._targetList[id]:this._selectTargetMap.get(name);target&&(target.selected=false)},toggleSelected:function(name,id){var target=id!=null?this._targetList[id]:this._selectTargetMap.get(name);if(target!=null){this[target.selected?"unSelect":"select"](name,id);return target.selected}},isSelected:function(name,id){var target=id!=null?this._targetList[id]:this._selectTargetMap.get(name);return target&&target.selected}}}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var zrUtil=__webpack_require__(4);function updateDataSelected(uid,seriesModel,hasAnimation,api){var data=seriesModel.getData();var dataIndex=this.dataIndex;var name=data.getName(dataIndex);var selectedOffset=seriesModel.get("selectedOffset");api.dispatchAction({type:"pieToggleSelect",from:uid,name:name,seriesId:seriesModel.id});data.each(function(idx){toggleItemSelected(data.getItemGraphicEl(idx),data.getItemLayout(idx),seriesModel.isSelected(data.getName(idx)),selectedOffset,hasAnimation)})}function toggleItemSelected(el,layout,isSelected,selectedOffset,hasAnimation){var midAngle=(layout.startAngle+layout.endAngle)/2;var dx=Math.cos(midAngle);var dy=Math.sin(midAngle);var offset=isSelected?selectedOffset:0;var position=[dx*offset,dy*offset];hasAnimation?el.animate().when(200,{position:position}).start("bounceOut"):el.attr("position",position)}function PiePiece(data,idx){graphic.Group.call(this);var sector=new graphic.Sector({z2:2});var polyline=new graphic.Polyline();var text=new graphic.Text();this.add(sector);this.add(polyline);this.add(text);this.updateData(data,idx,true);function onEmphasis(){polyline.ignore=polyline.hoverIgnore;text.ignore=text.hoverIgnore}function onNormal(){polyline.ignore=polyline.normalIgnore;text.ignore=text.normalIgnore}this.on("emphasis",onEmphasis).on("normal",onNormal).on("mouseover",onEmphasis).on("mouseout",onNormal)}var piePieceProto=PiePiece.prototype;piePieceProto.updateData=function(data,idx,firstCreate){var sector=this.childAt(0);var seriesModel=data.hostModel;var itemModel=data.getItemModel(idx);var layout=data.getItemLayout(idx);var sectorShape=zrUtil.extend({},layout);sectorShape.label=null;if(firstCreate){sector.setShape(sectorShape);var animationType=seriesModel.getShallow("animationType");if(animationType==="scale"){sector.shape.r=layout.r0;
graphic.initProps(sector,{shape:{r:layout.r}},seriesModel,idx)}else{sector.shape.endAngle=layout.startAngle;graphic.updateProps(sector,{shape:{endAngle:layout.endAngle}},seriesModel,idx)}}else{graphic.updateProps(sector,{shape:sectorShape},seriesModel,idx)}var itemStyleModel=itemModel.getModel("itemStyle");var visualColor=data.getItemVisual(idx,"color");sector.useStyle(zrUtil.defaults({lineJoin:"bevel",fill:visualColor},itemStyleModel.getModel("normal").getItemStyle()));sector.hoverStyle=itemStyleModel.getModel("emphasis").getItemStyle();var cursorStyle=itemModel.getShallow("cursor");cursorStyle&&sector.attr("cursor",cursorStyle);toggleItemSelected(this,data.getItemLayout(idx),itemModel.get("selected"),seriesModel.get("selectedOffset"),seriesModel.get("animation"));function onEmphasis(){sector.stopAnimation(true);sector.animateTo({shape:{r:layout.r+seriesModel.get("hoverOffset")}},300,"elasticOut")}function onNormal(){sector.stopAnimation(true);sector.animateTo({shape:{r:layout.r}},300,"elasticOut")}sector.off("mouseover").off("mouseout").off("emphasis").off("normal");if(itemModel.get("hoverAnimation")&&seriesModel.isAnimationEnabled()){sector.on("mouseover",onEmphasis).on("mouseout",onNormal).on("emphasis",onEmphasis).on("normal",onNormal)}this._updateLabel(data,idx);graphic.setHoverStyle(this)};piePieceProto._updateLabel=function(data,idx){var labelLine=this.childAt(1);var labelText=this.childAt(2);var seriesModel=data.hostModel;var itemModel=data.getItemModel(idx);var layout=data.getItemLayout(idx);var labelLayout=layout.label;var visualColor=data.getItemVisual(idx,"color");graphic.updateProps(labelLine,{shape:{points:labelLayout.linePoints||[[labelLayout.x,labelLayout.y],[labelLayout.x,labelLayout.y],[labelLayout.x,labelLayout.y]]}},seriesModel,idx);graphic.updateProps(labelText,{style:{x:labelLayout.x,y:labelLayout.y}},seriesModel,idx);labelText.attr({rotation:labelLayout.rotation,origin:[labelLayout.x,labelLayout.y],z2:10});var labelModel=itemModel.getModel("label.normal");var labelHoverModel=itemModel.getModel("label.emphasis");var labelLineModel=itemModel.getModel("labelLine.normal");var labelLineHoverModel=itemModel.getModel("labelLine.emphasis");var visualColor=data.getItemVisual(idx,"color");graphic.setLabelStyle(labelText.style,labelText.hoverStyle={},labelModel,labelHoverModel,{labelFetcher:data.hostModel,labelDataIndex:idx,defaultText:data.getName(idx),autoColor:visualColor,useInsideStyle:!!labelLayout.inside},{textAlign:labelLayout.textAlign,textVerticalAlign:labelLayout.verticalAlign,opacity:data.getItemVisual(idx,"opacity")});labelText.ignore=labelText.normalIgnore=!labelModel.get("show");labelText.hoverIgnore=!labelHoverModel.get("show");labelLine.ignore=labelLine.normalIgnore=!labelLineModel.get("show");labelLine.hoverIgnore=!labelLineHoverModel.get("show");labelLine.setStyle({stroke:visualColor,opacity:data.getItemVisual(idx,"opacity")});labelLine.setStyle(labelLineModel.getModel("lineStyle").getLineStyle());labelLine.hoverStyle=labelLineHoverModel.getModel("lineStyle").getLineStyle();var smooth=labelLineModel.get("smooth");if(smooth&&smooth===true){smooth=0.4}labelLine.setShape({smooth:smooth})};zrUtil.inherits(PiePiece,graphic.Group);var Pie=__webpack_require__(85).extend({type:"pie",init:function(){var sectorGroup=new graphic.Group();this._sectorGroup=sectorGroup},render:function(seriesModel,ecModel,api,payload){if(payload&&(payload.from===this.uid)){return}var data=seriesModel.getData();var oldData=this._data;var group=this.group;var hasAnimation=ecModel.get("animation");var isFirstRender=!oldData;var animationType=seriesModel.get("animationType");var onSectorClick=zrUtil.curry(updateDataSelected,this.uid,seriesModel,hasAnimation,api);var selectedMode=seriesModel.get("selectedMode");data.diff(oldData).add(function(idx){var piePiece=new PiePiece(data,idx);if(isFirstRender&&animationType!=="scale"){piePiece.eachChild(function(child){child.stopAnimation(true)})}selectedMode&&piePiece.on("click",onSectorClick);data.setItemGraphicEl(idx,piePiece);group.add(piePiece)}).update(function(newIdx,oldIdx){var piePiece=oldData.getItemGraphicEl(oldIdx);piePiece.updateData(data,newIdx);piePiece.off("click");selectedMode&&piePiece.on("click",onSectorClick);group.add(piePiece);data.setItemGraphicEl(newIdx,piePiece)}).remove(function(idx){var piePiece=oldData.getItemGraphicEl(idx);group.remove(piePiece)}).execute();if(hasAnimation&&isFirstRender&&data.count()>0&&animationType!=="scale"){var shape=data.getItemLayout(0);var r=Math.max(api.getWidth(),api.getHeight())/2;var removeClipPath=zrUtil.bind(group.removeClipPath,group);group.setClipPath(this._createClipPath(shape.cx,shape.cy,r,shape.startAngle,shape.clockwise,removeClipPath,seriesModel))}this._data=data},dispose:function(){},_createClipPath:function(cx,cy,r,startAngle,clockwise,cb,seriesModel){var clipPath=new graphic.Sector({shape:{cx:cx,cy:cy,r0:0,r:r,startAngle:startAngle,endAngle:startAngle,clockwise:clockwise}});graphic.initProps(clipPath,{shape:{endAngle:startAngle+(clockwise?1:-1)*Math.PI*2}},seriesModel,cb);
return clipPath},containPoint:function(point,seriesModel){var data=seriesModel.getData();var itemLayout=data.getItemLayout(0);if(itemLayout){var dx=point[0]-itemLayout.cx;var dy=point[1]-itemLayout.cy;var radius=Math.sqrt(dx*dx+dy*dy);return radius<=itemLayout.r&&radius>=itemLayout.r0}}});module.exports=Pie}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);var zrUtil=__webpack_require__(4);module.exports=function(seriesType,actionInfos){zrUtil.each(actionInfos,function(actionInfo){actionInfo.update="updateView";echarts.registerAction(actionInfo,function(payload,ecModel){var selected={};ecModel.eachComponent({mainType:"series",subType:seriesType,query:payload},function(seriesModel){if(seriesModel[actionInfo.method]){seriesModel[actionInfo.method](payload.name,payload.dataIndex)}var data=seriesModel.getData();data.each(function(idx){var name=data.getName(idx);selected[name]=seriesModel.isSelected(name)||false})});return{name:payload.name,selected:selected}})})}}),(function(module,exports){module.exports=function(seriesType,ecModel){var paletteScope={};ecModel.eachRawSeriesByType(seriesType,function(seriesModel){var dataAll=seriesModel.getRawData();var idxMap={};if(!ecModel.isSeriesFiltered(seriesModel)){var data=seriesModel.getData();data.each(function(idx){var rawIdx=data.getRawIndex(idx);idxMap[rawIdx]=idx});dataAll.each(function(rawIdx){var filteredIdx=idxMap[rawIdx];var singleDataColor=filteredIdx!=null&&data.getItemVisual(filteredIdx,"color",true);if(!singleDataColor){var itemModel=dataAll.getItemModel(rawIdx);var color=itemModel.get("itemStyle.normal.color")||seriesModel.getColorFromPalette(dataAll.getName(rawIdx),paletteScope);dataAll.setItemVisual(rawIdx,"color",color);if(filteredIdx!=null){data.setItemVisual(filteredIdx,"color",color)}}else{dataAll.setItemVisual(rawIdx,"color",singleDataColor)}})}})}}),(function(module,exports,__webpack_require__){var numberUtil=__webpack_require__(7);var parsePercent=numberUtil.parsePercent;var labelLayout=__webpack_require__(156);var zrUtil=__webpack_require__(4);var PI2=Math.PI*2;var RADIAN=Math.PI/180;module.exports=function(seriesType,ecModel,api,payload){ecModel.eachSeriesByType(seriesType,function(seriesModel){var center=seriesModel.get("center");var radius=seriesModel.get("radius");if(!zrUtil.isArray(radius)){radius=[0,radius]}if(!zrUtil.isArray(center)){center=[center,center]}var width=api.getWidth();var height=api.getHeight();var size=Math.min(width,height);var cx=parsePercent(center[0],width);var cy=parsePercent(center[1],height);var r0=parsePercent(radius[0],size/2);var r=parsePercent(radius[1],size/2);var data=seriesModel.getData();var startAngle=-seriesModel.get("startAngle")*RADIAN;var minAngle=seriesModel.get("minAngle")*RADIAN;var validDataCount=0;data.each("value",function(value){!isNaN(value)&&validDataCount++});var sum=data.getSum("value");var unitRadian=Math.PI/(sum||validDataCount)*2;var clockwise=seriesModel.get("clockwise");var roseType=seriesModel.get("roseType");var stillShowZeroSum=seriesModel.get("stillShowZeroSum");var extent=data.getDataExtent("value");extent[0]=0;var restAngle=PI2;var valueSumLargerThanMinAngle=0;var currentAngle=startAngle;var dir=clockwise?1:-1;data.each("value",function(value,idx){var angle;if(isNaN(value)){data.setItemLayout(idx,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:clockwise,cx:cx,cy:cy,r0:r0,r:roseType?NaN:r});return}if(roseType!=="area"){angle=(sum===0&&stillShowZeroSum)?unitRadian:(value*unitRadian)}else{angle=PI2/validDataCount}if(angle<minAngle){angle=minAngle;restAngle-=minAngle}else{valueSumLargerThanMinAngle+=value}var endAngle=currentAngle+dir*angle;data.setItemLayout(idx,{angle:angle,startAngle:currentAngle,endAngle:endAngle,clockwise:clockwise,cx:cx,cy:cy,r0:r0,r:roseType?numberUtil.linearMap(value,extent,[r0,r]):r});currentAngle=endAngle},true);if(restAngle<PI2&&validDataCount){if(restAngle<=0.001){var angle=PI2/validDataCount;data.each("value",function(value,idx){if(!isNaN(value)){var layout=data.getItemLayout(idx);layout.angle=angle;layout.startAngle=startAngle+dir*idx*angle;layout.endAngle=startAngle+dir*(idx+1)*angle}})}else{unitRadian=restAngle/valueSumLargerThanMinAngle;currentAngle=startAngle;data.each("value",function(value,idx){if(!isNaN(value)){var layout=data.getItemLayout(idx);var angle=layout.angle===minAngle?minAngle:value*unitRadian;layout.startAngle=currentAngle;layout.endAngle=currentAngle+dir*angle;currentAngle+=dir*angle}})}}labelLayout(seriesModel,r,width,height)})}}),(function(module,exports,__webpack_require__){var textContain=__webpack_require__(8);function adjustSingleSide(list,cx,cy,r,dir,viewWidth,viewHeight){list.sort(function(a,b){return a.y-b.y});function shiftDown(start,end,delta,dir){for(var j=start;j<end;j++){list[j].y+=delta;if(j>start&&j+1<end&&list[j+1].y>list[j].y+list[j].height){shiftUp(j,delta/2);return}}shiftUp(end-1,delta/2)}function shiftUp(end,delta){for(var j=end;j>=0;j--){list[j].y-=delta;if(j>0&&list[j].y>list[j-1].y+list[j-1].height){break
}}}function changeX(list,isDownList,cx,cy,r,dir){var lastDeltaX=dir>0?isDownList?Number.MAX_VALUE:0:isDownList?Number.MAX_VALUE:0;for(var i=0,l=list.length;i<l;i++){if(list[i].position==="center"){continue}var deltaY=Math.abs(list[i].y-cy);var length=list[i].len;var length2=list[i].len2;var deltaX=(deltaY<r+length)?Math.sqrt((r+length+length2)*(r+length+length2)-deltaY*deltaY):Math.abs(list[i].x-cx);if(isDownList&&deltaX>=lastDeltaX){deltaX=lastDeltaX-10}if(!isDownList&&deltaX<=lastDeltaX){deltaX=lastDeltaX+10}list[i].x=cx+deltaX*dir;lastDeltaX=deltaX}}var lastY=0;var delta;var len=list.length;var upList=[];var downList=[];for(var i=0;i<len;i++){delta=list[i].y-lastY;if(delta<0){shiftDown(i,len,-delta,dir)}lastY=list[i].y+list[i].height}if(viewHeight-lastY<0){shiftUp(len-1,lastY-viewHeight)}for(var i=0;i<len;i++){if(list[i].y>=cy){downList.push(list[i])}else{upList.push(list[i])}}changeX(upList,false,cx,cy,r,dir);changeX(downList,true,cx,cy,r,dir)}function avoidOverlap(labelLayoutList,cx,cy,r,viewWidth,viewHeight){var leftList=[];var rightList=[];for(var i=0;i<labelLayoutList.length;i++){if(labelLayoutList[i].x<cx){leftList.push(labelLayoutList[i])}else{rightList.push(labelLayoutList[i])}}adjustSingleSide(rightList,cx,cy,r,1,viewWidth,viewHeight);adjustSingleSide(leftList,cx,cy,r,-1,viewWidth,viewHeight);for(var i=0;i<labelLayoutList.length;i++){var linePoints=labelLayoutList[i].linePoints;if(linePoints){var dist=linePoints[1][0]-linePoints[2][0];if(labelLayoutList[i].x<cx){linePoints[2][0]=labelLayoutList[i].x+3}else{linePoints[2][0]=labelLayoutList[i].x-3}linePoints[1][1]=linePoints[2][1]=labelLayoutList[i].y;linePoints[1][0]=linePoints[2][0]+dist}}}module.exports=function(seriesModel,r,viewWidth,viewHeight){var data=seriesModel.getData();var labelLayoutList=[];var cx;var cy;var hasLabelRotate=false;data.each(function(idx){var layout=data.getItemLayout(idx);var itemModel=data.getItemModel(idx);var labelModel=itemModel.getModel("label.normal");var labelPosition=labelModel.get("position")||itemModel.get("label.emphasis.position");var labelLineModel=itemModel.getModel("labelLine.normal");var labelLineLen=labelLineModel.get("length");var labelLineLen2=labelLineModel.get("length2");var midAngle=(layout.startAngle+layout.endAngle)/2;var dx=Math.cos(midAngle);var dy=Math.sin(midAngle);var textX;var textY;var linePoints;var textAlign;cx=layout.cx;cy=layout.cy;var isLabelInside=labelPosition==="inside"||labelPosition==="inner";if(labelPosition==="center"){textX=layout.cx;textY=layout.cy;textAlign="center"}else{var x1=(isLabelInside?(layout.r+layout.r0)/2*dx:layout.r*dx)+cx;var y1=(isLabelInside?(layout.r+layout.r0)/2*dy:layout.r*dy)+cy;textX=x1+dx*3;textY=y1+dy*3;if(!isLabelInside){var x2=x1+dx*(labelLineLen+r-layout.r);var y2=y1+dy*(labelLineLen+r-layout.r);var x3=x2+((dx<0?-1:1)*labelLineLen2);var y3=y2;textX=x3+(dx<0?-5:5);textY=y3;linePoints=[[x1,y1],[x2,y2],[x3,y3]]}textAlign=isLabelInside?"center":(dx>0?"left":"right")}var font=labelModel.getFont();var labelRotate=labelModel.get("rotate")?(dx<0?-midAngle+Math.PI:-midAngle):0;var text=seriesModel.getFormattedLabel(idx,"normal")||data.getName(idx);var textRect=textContain.getBoundingRect(text,font,textAlign,"top");hasLabelRotate=!!labelRotate;layout.label={x:textX,y:textY,position:labelPosition,height:textRect.height,len:labelLineLen,len2:labelLineLen2,linePoints:linePoints,textAlign:textAlign,verticalAlign:"middle",rotation:labelRotate,inside:isLabelInside};if(!isLabelInside){labelLayoutList.push(layout.label)}});if(!hasLabelRotate&&seriesModel.get("avoidLabelOverlap")){avoidOverlap(labelLayoutList,cx,cy,r,viewWidth,viewHeight)}}}),(function(module,exports){module.exports=function(seriesType,ecModel){var legendModels=ecModel.findComponents({mainType:"legend"});if(!legendModels||!legendModels.length){return}ecModel.eachSeriesByType(seriesType,function(series){var data=series.getData();data.filterSelf(function(idx){var name=data.getName(idx);for(var i=0;i<legendModels.length;i++){if(!legendModels[i].isSelected(name)){return false}}return true},this)},this)}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var echarts=__webpack_require__(1);__webpack_require__(159);__webpack_require__(160);echarts.registerVisual(zrUtil.curry(__webpack_require__(124),"scatter","circle",null));echarts.registerLayout(zrUtil.curry(__webpack_require__(125),"scatter"));__webpack_require__(127)}),(function(module,exports,__webpack_require__){var createListFromArray=__webpack_require__(112);var SeriesModel=__webpack_require__(83);module.exports=SeriesModel.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(option,ecModel){return createListFromArray(option.data,this,ecModel)},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:true,hoverAnimation:true,symbolSize:10,large:false,largeThreshold:2000,itemStyle:{normal:{opacity:0.8}}}})}),(function(module,exports,__webpack_require__){var SymbolDraw=__webpack_require__(119);
var LargeSymbolDraw=__webpack_require__(161);__webpack_require__(1).extendChartView({type:"scatter",init:function(){this._normalSymbolDraw=new SymbolDraw();this._largeSymbolDraw=new LargeSymbolDraw()},render:function(seriesModel,ecModel,api){var data=seriesModel.getData();var largeSymbolDraw=this._largeSymbolDraw;var normalSymbolDraw=this._normalSymbolDraw;var group=this.group;var symbolDraw=seriesModel.get("large")&&data.count()>seriesModel.get("largeThreshold")?largeSymbolDraw:normalSymbolDraw;this._symbolDraw=symbolDraw;symbolDraw.updateData(data);group.add(symbolDraw.group);group.remove(symbolDraw===largeSymbolDraw?normalSymbolDraw.group:largeSymbolDraw.group)},updateLayout:function(seriesModel){this._symbolDraw.updateLayout(seriesModel)},remove:function(ecModel,api){this._symbolDraw&&this._symbolDraw.remove(api,true)},dispose:function(){}})}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var symbolUtil=__webpack_require__(114);var LargeSymbolPath=graphic.extendShape({shape:{points:null,sizes:null},symbolProxy:null,buildPath:function(path,shape){var points=shape.points;var sizes=shape.sizes;var symbolProxy=this.symbolProxy;var symbolProxyShape=symbolProxy.shape;for(var i=0;i<points.length;i++){var pt=points[i];if(isNaN(pt[0])||isNaN(pt[1])){continue}var size=sizes[i];if(size[0]<4){path.rect(pt[0]-size[0]/2,pt[1]-size[1]/2,size[0],size[1])}else{symbolProxyShape.x=pt[0]-size[0]/2;symbolProxyShape.y=pt[1]-size[1]/2;symbolProxyShape.width=size[0];symbolProxyShape.height=size[1];symbolProxy.buildPath(path,symbolProxyShape,true)}}},findDataIndex:function(x,y){var shape=this.shape;var points=shape.points;var sizes=shape.sizes;for(var i=points.length-1;i>=0;i--){var pt=points[i];var size=sizes[i];var x0=pt[0]-size[0]/2;var y0=pt[1]-size[1]/2;if(x>=x0&&y>=y0&&x<=x0+size[0]&&y<=y0+size[1]){return i}}return -1}});function LargeSymbolDraw(){this.group=new graphic.Group();this._symbolEl=new LargeSymbolPath({})}var largeSymbolProto=LargeSymbolDraw.prototype;largeSymbolProto.updateData=function(data){this.group.removeAll();var symbolEl=this._symbolEl;var seriesModel=data.hostModel;symbolEl.setShape({points:data.mapArray(data.getItemLayout),sizes:data.mapArray(function(idx){var size=data.getItemVisual(idx,"symbolSize");if(!(size instanceof Array)){size=[size,size]}return size})});symbolEl.symbolProxy=symbolUtil.createSymbol(data.getVisual("symbol"),0,0,0,0);symbolEl.setColor=symbolEl.symbolProxy.setColor;symbolEl.useStyle(seriesModel.getModel("itemStyle.normal").getItemStyle(["color"]));var visualColor=data.getVisual("color");if(visualColor){symbolEl.setColor(visualColor)}symbolEl.seriesIndex=seriesModel.seriesIndex;symbolEl.on("mousemove",function(e){symbolEl.dataIndex=null;var dataIndex=symbolEl.findDataIndex(e.offsetX,e.offsetY);if(dataIndex>=0){symbolEl.dataIndex=dataIndex}});this.group.add(symbolEl)};largeSymbolProto.updateLayout=function(seriesModel){var data=seriesModel.getData();this._symbolEl.setShape({points:data.mapArray(data.getItemLayout)})};largeSymbolProto.remove=function(){this.group.removeAll()};module.exports=LargeSymbolDraw}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var echarts=__webpack_require__(1);__webpack_require__(163);__webpack_require__(168);__webpack_require__(169);echarts.registerVisual(zrUtil.curry(__webpack_require__(154),"radar"));echarts.registerVisual(zrUtil.curry(__webpack_require__(124),"radar","circle",null));echarts.registerLayout(__webpack_require__(170));echarts.registerProcessor(zrUtil.curry(__webpack_require__(157),"radar"));echarts.registerPreprocessor(__webpack_require__(171))}),(function(module,exports,__webpack_require__){__webpack_require__(164);__webpack_require__(166);__webpack_require__(167)}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var IndicatorAxis=__webpack_require__(165);var IntervalScale=__webpack_require__(107);var numberUtil=__webpack_require__(7);var axisHelper=__webpack_require__(104);function Radar(radarModel,ecModel,api){this._model=radarModel;this.dimensions=[];this._indicatorAxes=zrUtil.map(radarModel.getIndicatorModels(),function(indicatorModel,idx){var dim="indicator_"+idx;var indicatorAxis=new IndicatorAxis(dim,new IntervalScale());indicatorAxis.name=indicatorModel.get("name");indicatorAxis.model=indicatorModel;indicatorModel.axis=indicatorAxis;this.dimensions.push(dim);return indicatorAxis},this);this.resize(radarModel,api);this.cx;this.cy;this.r;this.startAngle}Radar.prototype.getIndicatorAxes=function(){return this._indicatorAxes};Radar.prototype.dataToPoint=function(value,indicatorIndex){var indicatorAxis=this._indicatorAxes[indicatorIndex];return this.coordToPoint(indicatorAxis.dataToCoord(value),indicatorIndex)};Radar.prototype.coordToPoint=function(coord,indicatorIndex){var indicatorAxis=this._indicatorAxes[indicatorIndex];var angle=indicatorAxis.angle;var x=this.cx+coord*Math.cos(angle);var y=this.cy-coord*Math.sin(angle);return[x,y]};
Radar.prototype.pointToData=function(pt){var dx=pt[0]-this.cx;var dy=pt[1]-this.cy;var radius=Math.sqrt(dx*dx+dy*dy);dx/=radius;dy/=radius;var radian=Math.atan2(-dy,dx);var minRadianDiff=Infinity;var closestAxis;var closestAxisIdx=-1;for(var i=0;i<this._indicatorAxes.length;i++){var indicatorAxis=this._indicatorAxes[i];var diff=Math.abs(radian-indicatorAxis.angle);if(diff<minRadianDiff){closestAxis=indicatorAxis;closestAxisIdx=i;minRadianDiff=diff}}return[closestAxisIdx,+(closestAxis&&closestAxis.coodToData(radius))]};Radar.prototype.resize=function(radarModel,api){var center=radarModel.get("center");var viewWidth=api.getWidth();var viewHeight=api.getHeight();var viewSize=Math.min(viewWidth,viewHeight)/2;this.cx=numberUtil.parsePercent(center[0],viewWidth);this.cy=numberUtil.parsePercent(center[1],viewHeight);this.startAngle=radarModel.get("startAngle")*Math.PI/180;this.r=numberUtil.parsePercent(radarModel.get("radius"),viewSize);zrUtil.each(this._indicatorAxes,function(indicatorAxis,idx){indicatorAxis.setExtent(0,this.r);var angle=(this.startAngle+idx*Math.PI*2/this._indicatorAxes.length);angle=Math.atan2(Math.sin(angle),Math.cos(angle));indicatorAxis.angle=angle},this)};Radar.prototype.update=function(ecModel,api){var indicatorAxes=this._indicatorAxes;var radarModel=this._model;zrUtil.each(indicatorAxes,function(indicatorAxis){indicatorAxis.scale.setExtent(Infinity,-Infinity)});ecModel.eachSeriesByType("radar",function(radarSeries,idx){if(radarSeries.get("coordinateSystem")!=="radar"||ecModel.getComponent("radar",radarSeries.get("radarIndex"))!==radarModel){return}var data=radarSeries.getData();zrUtil.each(indicatorAxes,function(indicatorAxis){indicatorAxis.scale.unionExtentFromData(data,indicatorAxis.dim)})},this);var splitNumber=radarModel.get("splitNumber");function increaseInterval(interval){var exp10=Math.pow(10,Math.floor(Math.log(interval)/Math.LN10));var f=interval/exp10;if(f===2){f=5}else{f*=2}return f*exp10}zrUtil.each(indicatorAxes,function(indicatorAxis,idx){var rawExtent=axisHelper.getScaleExtent(indicatorAxis.scale,indicatorAxis.model);axisHelper.niceScaleExtent(indicatorAxis.scale,indicatorAxis.model);var axisModel=indicatorAxis.model;var scale=indicatorAxis.scale;var fixedMin=axisModel.getMin();var fixedMax=axisModel.getMax();var interval=scale.getInterval();if(fixedMin!=null&&fixedMax!=null){scale.setExtent(+fixedMin,+fixedMax);scale.setInterval((fixedMax-fixedMin)/splitNumber)}else{if(fixedMin!=null){var max;do{max=fixedMin+interval*splitNumber;scale.setExtent(+fixedMin,max);scale.setInterval(interval);interval=increaseInterval(interval)}while(max<rawExtent[1]&&isFinite(max)&&isFinite(rawExtent[1]))}else{if(fixedMax!=null){var min;do{min=fixedMax-interval*splitNumber;scale.setExtent(min,+fixedMax);scale.setInterval(interval);interval=increaseInterval(interval)}while(min>rawExtent[0]&&isFinite(min)&&isFinite(rawExtent[0]))}else{var nicedSplitNumber=scale.getTicks().length-1;if(nicedSplitNumber>splitNumber){interval=increaseInterval(interval)}var center=Math.round((rawExtent[0]+rawExtent[1])/2/interval)*interval;var halfSplitNumber=Math.round(splitNumber/2);scale.setExtent(numberUtil.round(center-halfSplitNumber*interval),numberUtil.round(center+(splitNumber-halfSplitNumber)*interval));scale.setInterval(interval)}}}})};Radar.dimensions=[];Radar.create=function(ecModel,api){var radarList=[];ecModel.eachComponent("radar",function(radarModel){var radar=new Radar(radarModel,ecModel,api);radarList.push(radar);radarModel.coordinateSystem=radar});ecModel.eachSeriesByType("radar",function(radarSeries){if(radarSeries.get("coordinateSystem")==="radar"){radarSeries.coordinateSystem=radarList[radarSeries.get("radarIndex")||0]}});return radarList};__webpack_require__(79).register("radar",Radar);module.exports=Radar}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var Axis=__webpack_require__(103);function IndicatorAxis(dim,scale,radiusExtent){Axis.call(this,dim,scale,radiusExtent);this.type="value";this.angle=0;this.name="";this.model}zrUtil.inherits(IndicatorAxis,Axis);module.exports=IndicatorAxis}),(function(module,exports,__webpack_require__){var axisDefault=__webpack_require__(135);var valueAxisDefault=axisDefault.valueAxis;var Model=__webpack_require__(14);var zrUtil=__webpack_require__(4);var axisModelCommonMixin=__webpack_require__(115);function defaultsShow(opt,show){return zrUtil.defaults({show:show},opt)}var RadarModel=__webpack_require__(1).extendComponentModel({type:"radar",optionUpdated:function(){var boundaryGap=this.get("boundaryGap");var splitNumber=this.get("splitNumber");var scale=this.get("scale");var axisLine=this.get("axisLine");var axisTick=this.get("axisTick");var axisLabel=this.get("axisLabel");var nameTextStyle=this.get("name");var showName=this.get("name.show");var nameFormatter=this.get("name.formatter");var nameGap=this.get("nameGap");var triggerEvent=this.get("triggerEvent");var indicatorModels=zrUtil.map(this.get("indicator")||[],function(indicatorOpt){if(indicatorOpt.max!=null&&indicatorOpt.max>0&&!indicatorOpt.min){indicatorOpt.min=0
}else{if(indicatorOpt.min!=null&&indicatorOpt.min<0&&!indicatorOpt.max){indicatorOpt.max=0}}var iNameTextStyle=nameTextStyle;if(indicatorOpt.color!=null){iNameTextStyle=zrUtil.defaults({color:indicatorOpt.color},nameTextStyle)}indicatorOpt=zrUtil.merge(zrUtil.clone(indicatorOpt),{boundaryGap:boundaryGap,splitNumber:splitNumber,scale:scale,axisLine:axisLine,axisTick:axisTick,axisLabel:axisLabel,name:indicatorOpt.text,nameLocation:"end",nameGap:nameGap,nameTextStyle:iNameTextStyle,triggerEvent:triggerEvent},false);if(!showName){indicatorOpt.name=""}if(typeof nameFormatter==="string"){var indName=indicatorOpt.name;indicatorOpt.name=nameFormatter.replace("{value}",indName!=null?indName:"")}else{if(typeof nameFormatter==="function"){indicatorOpt.name=nameFormatter(indicatorOpt.name,indicatorOpt)}}var model=zrUtil.extend(new Model(indicatorOpt,null,this.ecModel),axisModelCommonMixin);model.mainType="radar";model.componentIndex=this.componentIndex;return model},this);this.getIndicatorModels=function(){return indicatorModels}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:true},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:false,shape:"polygon",axisLine:zrUtil.merge({lineStyle:{color:"#bbb"}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,false),axisTick:defaultsShow(valueAxisDefault.axisTick,false),splitLine:defaultsShow(valueAxisDefault.splitLine,true),splitArea:defaultsShow(valueAxisDefault.splitArea,true),indicator:[]}});module.exports=RadarModel}),(function(module,exports,__webpack_require__){var AxisBuilder=__webpack_require__(138);var zrUtil=__webpack_require__(4);var graphic=__webpack_require__(20);var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"];module.exports=__webpack_require__(1).extendComponentView({type:"radar",render:function(radarModel,ecModel,api){var group=this.group;group.removeAll();this._buildAxes(radarModel);this._buildSplitLineAndArea(radarModel)},_buildAxes:function(radarModel){var radar=radarModel.coordinateSystem;var indicatorAxes=radar.getIndicatorAxes();var axisBuilders=zrUtil.map(indicatorAxes,function(indicatorAxis){var axisBuilder=new AxisBuilder(indicatorAxis.model,{position:[radar.cx,radar.cy],rotation:indicatorAxis.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return axisBuilder});zrUtil.each(axisBuilders,function(axisBuilder){zrUtil.each(axisBuilderAttrs,axisBuilder.add,axisBuilder);this.group.add(axisBuilder.getGroup())},this)},_buildSplitLineAndArea:function(radarModel){var radar=radarModel.coordinateSystem;var indicatorAxes=radar.getIndicatorAxes();if(!indicatorAxes.length){return}var shape=radarModel.get("shape");var splitLineModel=radarModel.getModel("splitLine");var splitAreaModel=radarModel.getModel("splitArea");var lineStyleModel=splitLineModel.getModel("lineStyle");var areaStyleModel=splitAreaModel.getModel("areaStyle");var showSplitLine=splitLineModel.get("show");var showSplitArea=splitAreaModel.get("show");var splitLineColors=lineStyleModel.get("color");var splitAreaColors=areaStyleModel.get("color");splitLineColors=zrUtil.isArray(splitLineColors)?splitLineColors:[splitLineColors];splitAreaColors=zrUtil.isArray(splitAreaColors)?splitAreaColors:[splitAreaColors];var splitLines=[];var splitAreas=[];function getColorIndex(areaOrLine,areaOrLineColorList,idx){var colorIndex=idx%areaOrLineColorList.length;areaOrLine[colorIndex]=areaOrLine[colorIndex]||[];return colorIndex}if(shape==="circle"){var ticksRadius=indicatorAxes[0].getTicksCoords();var cx=radar.cx;var cy=radar.cy;for(var i=0;i<ticksRadius.length;i++){if(showSplitLine){var colorIndex=getColorIndex(splitLines,splitLineColors,i);splitLines[colorIndex].push(new graphic.Circle({shape:{cx:cx,cy:cy,r:ticksRadius[i]}}))}if(showSplitArea&&i<ticksRadius.length-1){var colorIndex=getColorIndex(splitAreas,splitAreaColors,i);splitAreas[colorIndex].push(new graphic.Ring({shape:{cx:cx,cy:cy,r0:ticksRadius[i],r:ticksRadius[i+1]}}))}}}else{var realSplitNumber;var axesTicksPoints=zrUtil.map(indicatorAxes,function(indicatorAxis,idx){var ticksCoords=indicatorAxis.getTicksCoords();realSplitNumber=realSplitNumber==null?ticksCoords.length-1:Math.min(ticksCoords.length-1,realSplitNumber);return zrUtil.map(ticksCoords,function(tickCoord){return radar.coordToPoint(tickCoord,idx)})});var prevPoints=[];for(var i=0;i<=realSplitNumber;i++){var points=[];for(var j=0;j<indicatorAxes.length;j++){points.push(axesTicksPoints[j][i])}if(points[0]){points.push(points[0].slice())}else{if(true){console.error("Can't draw value axis "+i)}}if(showSplitLine){var colorIndex=getColorIndex(splitLines,splitLineColors,i);splitLines[colorIndex].push(new graphic.Polyline({shape:{points:points}}))}if(showSplitArea&&prevPoints){var colorIndex=getColorIndex(splitAreas,splitAreaColors,i-1);splitAreas[colorIndex].push(new graphic.Polygon({shape:{points:points.concat(prevPoints)}}))}prevPoints=points.slice().reverse()}}var lineStyle=lineStyleModel.getLineStyle();var areaStyle=areaStyleModel.getAreaStyle();
zrUtil.each(splitAreas,function(splitAreas,idx){this.group.add(graphic.mergePath(splitAreas,{style:zrUtil.defaults({stroke:"none",fill:splitAreaColors[idx%splitAreaColors.length]},areaStyle),silent:true}))},this);zrUtil.each(splitLines,function(splitLines,idx){this.group.add(graphic.mergePath(splitLines,{style:zrUtil.defaults({fill:"none",stroke:splitLineColors[idx%splitLineColors.length]},lineStyle),silent:true}))},this)}})}),(function(module,exports,__webpack_require__){var SeriesModel=__webpack_require__(83);var List=__webpack_require__(101);var completeDimensions=__webpack_require__(113);var zrUtil=__webpack_require__(4);var encodeHTML=__webpack_require__(6).encodeHTML;var RadarSeries=SeriesModel.extend({type:"series.radar",dependencies:["radar"],init:function(option){RadarSeries.superApply(this,"init",arguments);this.legendDataProvider=function(){return this.getRawData()}},getInitialData:function(option,ecModel){var data=option.data||[];var dimensions=completeDimensions([],data,{extraPrefix:"indicator_",extraFromZero:true});var list=new List(dimensions,this);list.initData(data);return list},formatTooltip:function(dataIndex){var value=this.getRawValue(dataIndex);var coordSys=this.coordinateSystem;var indicatorAxes=coordSys.getIndicatorAxes();var name=this.getData().getName(dataIndex);return encodeHTML(name===""?this.name:name)+"<br/>"+zrUtil.map(indicatorAxes,function(axis,idx){return encodeHTML(axis.name+" : "+value[idx])}).join("<br />")},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:true,radarIndex:0,lineStyle:{normal:{width:2,type:"solid"}},label:{normal:{position:"top"}},symbol:"emptyCircle",symbolSize:4}});module.exports=RadarSeries}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var zrUtil=__webpack_require__(4);var symbolUtil=__webpack_require__(114);function normalizeSymbolSize(symbolSize){if(!zrUtil.isArray(symbolSize)){symbolSize=[+symbolSize,+symbolSize]}return symbolSize}module.exports=__webpack_require__(1).extendChartView({type:"radar",render:function(seriesModel,ecModel,api){var polar=seriesModel.coordinateSystem;var group=this.group;var data=seriesModel.getData();var oldData=this._data;function createSymbol(data,idx){var symbolType=data.getItemVisual(idx,"symbol")||"circle";var color=data.getItemVisual(idx,"color");if(symbolType==="none"){return}var symbolSize=normalizeSymbolSize(data.getItemVisual(idx,"symbolSize"));var symbolPath=symbolUtil.createSymbol(symbolType,-1,-1,2,2,color);symbolPath.attr({style:{strokeNoScale:true},z2:100,scale:[symbolSize[0]/2,symbolSize[1]/2]});return symbolPath}function updateSymbols(oldPoints,newPoints,symbolGroup,data,idx,isInit){symbolGroup.removeAll();for(var i=0;i<newPoints.length-1;i++){var symbolPath=createSymbol(data,idx);if(symbolPath){symbolPath.__dimIdx=i;if(oldPoints[i]){symbolPath.attr("position",oldPoints[i]);graphic[isInit?"initProps":"updateProps"](symbolPath,{position:newPoints[i]},seriesModel,idx)}else{symbolPath.attr("position",newPoints[i])}symbolGroup.add(symbolPath)}}}function getInitialPoints(points){return zrUtil.map(points,function(pt){return[polar.cx,polar.cy]})}data.diff(oldData).add(function(idx){var points=data.getItemLayout(idx);if(!points){return}var polygon=new graphic.Polygon();var polyline=new graphic.Polyline();var target={shape:{points:points}};polygon.shape.points=getInitialPoints(points);polyline.shape.points=getInitialPoints(points);graphic.initProps(polygon,target,seriesModel,idx);graphic.initProps(polyline,target,seriesModel,idx);var itemGroup=new graphic.Group();var symbolGroup=new graphic.Group();itemGroup.add(polyline);itemGroup.add(polygon);itemGroup.add(symbolGroup);updateSymbols(polyline.shape.points,points,symbolGroup,data,idx,true);data.setItemGraphicEl(idx,itemGroup)}).update(function(newIdx,oldIdx){var itemGroup=oldData.getItemGraphicEl(oldIdx);var polyline=itemGroup.childAt(0);var polygon=itemGroup.childAt(1);var symbolGroup=itemGroup.childAt(2);var target={shape:{points:data.getItemLayout(newIdx)}};if(!target.shape.points){return}updateSymbols(polyline.shape.points,target.shape.points,symbolGroup,data,newIdx,false);graphic.updateProps(polyline,target,seriesModel);graphic.updateProps(polygon,target,seriesModel);data.setItemGraphicEl(newIdx,itemGroup)}).remove(function(idx){group.remove(oldData.getItemGraphicEl(idx))}).execute();data.eachItemGraphicEl(function(itemGroup,idx){var itemModel=data.getItemModel(idx);var polyline=itemGroup.childAt(0);var polygon=itemGroup.childAt(1);var symbolGroup=itemGroup.childAt(2);var color=data.getItemVisual(idx,"color");group.add(itemGroup);polyline.useStyle(zrUtil.defaults(itemModel.getModel("lineStyle.normal").getLineStyle(),{fill:"none",stroke:color}));polyline.hoverStyle=itemModel.getModel("lineStyle.emphasis").getLineStyle();var areaStyleModel=itemModel.getModel("areaStyle.normal");var hoverAreaStyleModel=itemModel.getModel("areaStyle.emphasis");var polygonIgnore=areaStyleModel.isEmpty()&&areaStyleModel.parentModel.isEmpty();
var hoverPolygonIgnore=hoverAreaStyleModel.isEmpty()&&hoverAreaStyleModel.parentModel.isEmpty();hoverPolygonIgnore=hoverPolygonIgnore&&polygonIgnore;polygon.ignore=polygonIgnore;polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(),{fill:color,opacity:0.7}));polygon.hoverStyle=hoverAreaStyleModel.getAreaStyle();var itemStyle=itemModel.getModel("itemStyle.normal").getItemStyle(["color"]);var itemHoverStyle=itemModel.getModel("itemStyle.emphasis").getItemStyle();var labelModel=itemModel.getModel("label.normal");var labelHoverModel=itemModel.getModel("label.emphasis");symbolGroup.eachChild(function(symbolPath){symbolPath.setStyle(itemStyle);symbolPath.hoverStyle=zrUtil.clone(itemHoverStyle);graphic.setLabelStyle(symbolPath.style,symbolPath.hoverStyle,labelModel,labelHoverModel,{labelFetcher:data.hostModel,labelDataIndex:idx,labelDimIndex:symbolPath.__dimIdx,defaultText:data.get(data.dimensions[symbolPath.__dimIdx],idx),autoColor:color,isRectText:true})});function onEmphasis(){polygon.attr("ignore",hoverPolygonIgnore)}function onNormal(){polygon.attr("ignore",polygonIgnore)}itemGroup.off("mouseover").off("mouseout").off("normal").off("emphasis");itemGroup.on("emphasis",onEmphasis).on("mouseover",onEmphasis).on("normal",onNormal).on("mouseout",onNormal);graphic.setHoverStyle(itemGroup)});this._data=data},remove:function(){this.group.removeAll();this._data=null},dispose:function(){}})}),(function(module,exports){module.exports=function(ecModel){ecModel.eachSeriesByType("radar",function(seriesModel){var data=seriesModel.getData();var points=[];var coordSys=seriesModel.coordinateSystem;if(!coordSys){return}function pointsConverter(val,idx){points[idx]=points[idx]||[];points[idx][i]=coordSys.dataToPoint(val,i)}for(var i=0;i<coordSys.getIndicatorAxes().length;i++){var dim=data.dimensions[i];data.each(dim,pointsConverter)}data.each(function(idx){points[idx][0]&&points[idx].push(points[idx][0].slice());data.setItemLayout(idx,points[idx])})})}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);module.exports=function(option){var polarOptArr=option.polar;if(polarOptArr){if(!zrUtil.isArray(polarOptArr)){polarOptArr=[polarOptArr]}var polarNotRadar=[];zrUtil.each(polarOptArr,function(polarOpt,idx){if(polarOpt.indicator){if(polarOpt.type&&!polarOpt.shape){polarOpt.shape=polarOpt.type}option.radar=option.radar||[];if(!zrUtil.isArray(option.radar)){option.radar=[option.radar]}option.radar.push(polarOpt)}else{polarNotRadar.push(polarOpt)}});option.polar=polarNotRadar}zrUtil.each(option.series,function(seriesOpt){if(seriesOpt.type==="radar"&&seriesOpt.polarIndex){seriesOpt.radarIndex=seriesOpt.polarIndex}})}}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);var PRIORITY=echarts.PRIORITY;__webpack_require__(173);__webpack_require__(184);__webpack_require__(190);__webpack_require__(174);echarts.registerLayout(__webpack_require__(192));echarts.registerVisual(__webpack_require__(193));echarts.registerProcessor(PRIORITY.PROCESSOR.STATISTIC,__webpack_require__(194));echarts.registerPreprocessor(__webpack_require__(195));__webpack_require__(153)("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}])}),(function(module,exports,__webpack_require__){var List=__webpack_require__(101);var SeriesModel=__webpack_require__(83);var zrUtil=__webpack_require__(4);var completeDimensions=__webpack_require__(113);var formatUtil=__webpack_require__(6);var encodeHTML=formatUtil.encodeHTML;var addCommas=formatUtil.addCommas;var dataSelectableMixin=__webpack_require__(151);var geoCreator=__webpack_require__(174);var MapSeries=SeriesModel.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:false,seriesGroup:[],init:function(option){option=this._fillOption(option,this.getMapType());this.option=option;MapSeries.superApply(this,"init",arguments);this.updateSelectedMap(option.data)},getInitialData:function(option){var dimensions=completeDimensions(["value"],option.data||[]);var list=new List(dimensions,this);list.initData(option.data);return list},mergeOption:function(newOption){if(newOption.data){newOption=this._fillOption(newOption,this.getMapType())}MapSeries.superCall(this,"mergeOption",newOption);this.updateSelectedMap(this.option.data)},getHostGeoModel:function(){var geoIndex=this.option.geoIndex;return geoIndex!=null?this.dependentModels.geo[geoIndex]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},_fillOption:function(option,mapName){option=zrUtil.extend({},option);option.data=geoCreator.getFilledRegions(option.data,mapName,option.nameMap);return option},getRawValue:function(dataIndex){return this.getData().get("value",dataIndex)},getRegionModel:function(regionName){var data=this.getData();return data.getItemModel(data.indexOfName(regionName))},formatTooltip:function(dataIndex){var data=this.getData();
var formattedValue=addCommas(this.getRawValue(dataIndex));var name=data.getName(dataIndex);var seriesGroup=this.seriesGroup;var seriesNames=[];for(var i=0;i<seriesGroup.length;i++){var otherIndex=seriesGroup[i].originalData.indexOfName(name);if(!isNaN(seriesGroup[i].originalData.get("value",otherIndex))){seriesNames.push(encodeHTML(seriesGroup[i].name))}}return seriesNames.join(", ")+"<br />"+encodeHTML(name+" : "+formattedValue)},getTooltipPosition:function(dataIndex){if(dataIndex!=null){var name=this.getData().getName(dataIndex);var geo=this.coordinateSystem;var region=geo.getRegion(name);return region&&geo.dataToPoint(region.center)}},setZoom:function(zoom){this.option.zoom=zoom},setCenter:function(center){this.option.center=center},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:0.75,showLegendSymbol:true,dataRangeHoverLink:true,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{normal:{show:false,color:"#000"},emphasis:{show:true,color:"rgb(100,0,0)"}},itemStyle:{normal:{borderWidth:0.5,borderColor:"#444",areaColor:"#eee"},emphasis:{areaColor:"rgba(255,215,0,0.8)"}}}});zrUtil.mixin(MapSeries,dataSelectableMixin);module.exports=MapSeries}),(function(module,exports,__webpack_require__){var Geo=__webpack_require__(175);var layout=__webpack_require__(74);var zrUtil=__webpack_require__(4);var numberUtil=__webpack_require__(7);var mapDataStores={};function resizeGeo(geoModel,api){var boundingCoords=geoModel.get("boundingCoords");if(boundingCoords!=null){var leftTop=boundingCoords[0];var rightBottom=boundingCoords[1];if(isNaN(leftTop[0])||isNaN(leftTop[1])||isNaN(rightBottom[0])||isNaN(rightBottom[1])){if(true){console.error("Invalid boundingCoords")}}else{this.setBoundingRect(leftTop[0],leftTop[1],rightBottom[0]-leftTop[0],rightBottom[1]-leftTop[1])}}var rect=this.getBoundingRect();var boxLayoutOption;var center=geoModel.get("layoutCenter");var size=geoModel.get("layoutSize");var viewWidth=api.getWidth();var viewHeight=api.getHeight();var aspectScale=geoModel.get("aspectScale")||0.75;var aspect=rect.width/rect.height*aspectScale;var useCenterAndSize=false;if(center&&size){center=[numberUtil.parsePercent(center[0],viewWidth),numberUtil.parsePercent(center[1],viewHeight)];size=numberUtil.parsePercent(size,Math.min(viewWidth,viewHeight));if(!isNaN(center[0])&&!isNaN(center[1])&&!isNaN(size)){useCenterAndSize=true}else{if(true){console.warn("Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead.")}}}var viewRect;if(useCenterAndSize){var viewRect={};if(aspect>1){viewRect.width=size;viewRect.height=size/aspect}else{viewRect.height=size;viewRect.width=size*aspect}viewRect.y=center[1]-viewRect.height/2;viewRect.x=center[0]-viewRect.width/2}else{boxLayoutOption=geoModel.getBoxLayoutParams();boxLayoutOption.aspect=aspect;viewRect=layout.getLayoutRect(boxLayoutOption,{width:viewWidth,height:viewHeight})}this.setViewRect(viewRect.x,viewRect.y,viewRect.width,viewRect.height);this.setCenter(geoModel.get("center"));this.setZoom(geoModel.get("zoom"))}function setGeoCoords(geo,model){zrUtil.each(model.get("geoCoord"),function(geoCoord,name){geo.addGeoCoord(name,geoCoord)})}if(true){var mapNotExistsError=function(name){console.error("Map "+name+" not exists. You can download map file on http://echarts.baidu.com/download-map.html")}}var geoCreator={dimensions:Geo.prototype.dimensions,create:function(ecModel,api){var geoList=[];ecModel.eachComponent("geo",function(geoModel,idx){var name=geoModel.get("map");var mapData=mapDataStores[name];if(true){if(!mapData){mapNotExistsError(name)}}var geo=new Geo(name+idx,name,mapData&&mapData.geoJson,mapData&&mapData.specialAreas,geoModel.get("nameMap"));geo.zoomLimit=geoModel.get("scaleLimit");geoList.push(geo);setGeoCoords(geo,geoModel);geoModel.coordinateSystem=geo;geo.model=geoModel;geo.resize=resizeGeo;geo.resize(geoModel,api)});ecModel.eachSeries(function(seriesModel){var coordSys=seriesModel.get("coordinateSystem");if(coordSys==="geo"){var geoIndex=seriesModel.get("geoIndex")||0;seriesModel.coordinateSystem=geoList[geoIndex]}});var mapModelGroupBySeries={};ecModel.eachSeriesByType("map",function(seriesModel){if(!seriesModel.getHostGeoModel()){var mapType=seriesModel.getMapType();mapModelGroupBySeries[mapType]=mapModelGroupBySeries[mapType]||[];mapModelGroupBySeries[mapType].push(seriesModel)}});zrUtil.each(mapModelGroupBySeries,function(mapSeries,mapType){var mapData=mapDataStores[mapType];if(true){if(!mapData){mapNotExistsError(mapSeries[0].get("map"))}}var nameMapList=zrUtil.map(mapSeries,function(singleMapSeries){return singleMapSeries.get("nameMap")});var geo=new Geo(mapType,mapType,mapData&&mapData.geoJson,mapData&&mapData.specialAreas,zrUtil.mergeAll(nameMapList));geo.zoomLimit=zrUtil.retrieve.apply(null,zrUtil.map(mapSeries,function(singleMapSeries){return singleMapSeries.get("scaleLimit")}));geoList.push(geo);geo.resize=resizeGeo;geo.resize(mapSeries[0],api);zrUtil.each(mapSeries,function(singleMapSeries){singleMapSeries.coordinateSystem=geo;
setGeoCoords(geo,singleMapSeries)})});return geoList},registerMap:function(mapName,geoJson,specialAreas){if(geoJson.geoJson&&!geoJson.features){specialAreas=geoJson.specialAreas;geoJson=geoJson.geoJson}if(typeof geoJson==="string"){geoJson=(typeof JSON!=="undefined"&&JSON.parse)?JSON.parse(geoJson):(new Function("return ("+geoJson+");"))()}mapDataStores[mapName]={geoJson:geoJson,specialAreas:specialAreas}},getMap:function(mapName){return mapDataStores[mapName]},getFilledRegions:function(originRegionArr,mapName,nameMap){var regionsArr=(originRegionArr||[]).slice();nameMap=nameMap||{};var map=geoCreator.getMap(mapName);var geoJson=map&&map.geoJson;if(!geoJson){if(true){mapNotExistsError(mapName)}return originRegionArr}var dataNameMap=zrUtil.createHashMap();var features=geoJson.features;for(var i=0;i<regionsArr.length;i++){dataNameMap.set(regionsArr[i].name,regionsArr[i])}for(var i=0;i<features.length;i++){var name=features[i].properties.name;if(!dataNameMap.get(name)){if(nameMap.hasOwnProperty(name)){name=nameMap[name]}regionsArr.push({name:name})}}return regionsArr}};var echarts=__webpack_require__(1);echarts.registerMap=geoCreator.registerMap;echarts.getMap=geoCreator.getMap;echarts.parseGeoJSON=__webpack_require__(176);echarts.loadMap=function(){};echarts.registerCoordinateSystem("geo",geoCreator);module.exports=geoCreator}),(function(module,exports,__webpack_require__){var parseGeoJson=__webpack_require__(176);var zrUtil=__webpack_require__(4);var BoundingRect=__webpack_require__(9);var View=__webpack_require__(179);var geoFixFuncs=[__webpack_require__(180),__webpack_require__(181),__webpack_require__(182),__webpack_require__(183)];function Geo(name,map,geoJson,specialAreas,nameMap){View.call(this,name);this.map=map;this._nameCoordMap=zrUtil.createHashMap();this.loadGeoJson(geoJson,specialAreas,nameMap)}Geo.prototype={constructor:Geo,type:"geo",dimensions:["lng","lat"],containCoord:function(coord){var regions=this.regions;for(var i=0;i<regions.length;i++){if(regions[i].contain(coord)){return true}}return false},loadGeoJson:function(geoJson,specialAreas,nameMap){try{this.regions=geoJson?parseGeoJson(geoJson):[]}catch(e){throw"Invalid geoJson format\n"+e.message}specialAreas=specialAreas||{};nameMap=nameMap||{};var regions=this.regions;var regionsMap=zrUtil.createHashMap();for(var i=0;i<regions.length;i++){var regionName=regions[i].name;regionName=nameMap.hasOwnProperty(regionName)?nameMap[regionName]:regionName;regions[i].name=regionName;regionsMap.set(regionName,regions[i]);this.addGeoCoord(regionName,regions[i].center);var specialArea=specialAreas[regionName];if(specialArea){regions[i].transformTo(specialArea.left,specialArea.top,specialArea.width,specialArea.height)}}this._regionsMap=regionsMap;this._rect=null;zrUtil.each(geoFixFuncs,function(fixFunc){fixFunc(this)},this)},transformTo:function(x,y,width,height){var rect=this.getBoundingRect();rect=rect.clone();rect.y=-rect.y-rect.height;var viewTransform=this._viewTransform;viewTransform.transform=rect.calculateTransform(new BoundingRect(x,y,width,height));viewTransform.decomposeTransform();var scale=viewTransform.scale;scale[1]=-scale[1];viewTransform.updateTransform();this._updateTransform()},getRegion:function(name){return this._regionsMap.get(name)},getRegionByCoord:function(coord){var regions=this.regions;for(var i=0;i<regions.length;i++){if(regions[i].contain(coord)){return regions[i]}}},addGeoCoord:function(name,geoCoord){this._nameCoordMap.set(name,geoCoord)},getGeoCoord:function(name){return this._nameCoordMap.get(name)},getBoundingRect:function(){if(this._rect){return this._rect}var rect;var regions=this.regions;for(var i=0;i<regions.length;i++){var regionRect=regions[i].getBoundingRect();rect=rect||regionRect.clone();rect.union(regionRect)}return(this._rect=rect||new BoundingRect(0,0,0,0))},dataToPoint:function(data){if(typeof data==="string"){data=this.getGeoCoord(data)}if(data){return View.prototype.dataToPoint.call(this,data)}},convertToPixel:zrUtil.curry(doConvert,"dataToPoint"),convertFromPixel:zrUtil.curry(doConvert,"pointToData")};zrUtil.mixin(Geo,View);function doConvert(methodName,ecModel,finder,value){var geoModel=finder.geoModel;var seriesModel=finder.seriesModel;var coordSys=geoModel?geoModel.coordinateSystem:seriesModel?(seriesModel.coordinateSystem||(seriesModel.getReferringComponents("geo")[0]||{}).coordinateSystem):null;return coordSys===this?coordSys[methodName](value):null}module.exports=Geo}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var Region=__webpack_require__(177);function decode(json){if(!json.UTF8Encoding){return json}var encodeScale=json.UTF8Scale;if(encodeScale==null){encodeScale=1024}var features=json.features;for(var f=0;f<features.length;f++){var feature=features[f];var geometry=feature.geometry;var coordinates=geometry.coordinates;var encodeOffsets=geometry.encodeOffsets;for(var c=0;c<coordinates.length;c++){var coordinate=coordinates[c];if(geometry.type==="Polygon"){coordinates[c]=decodePolygon(coordinate,encodeOffsets[c],encodeScale)
}else{if(geometry.type==="MultiPolygon"){for(var c2=0;c2<coordinate.length;c2++){var polygon=coordinate[c2];coordinate[c2]=decodePolygon(polygon,encodeOffsets[c][c2],encodeScale)}}}}}json.UTF8Encoding=false;return json}function decodePolygon(coordinate,encodeOffsets,encodeScale){var result=[];var prevX=encodeOffsets[0];var prevY=encodeOffsets[1];for(var i=0;i<coordinate.length;i+=2){var x=coordinate.charCodeAt(i)-64;var y=coordinate.charCodeAt(i+1)-64;x=(x>>1)^(-(x&1));y=(y>>1)^(-(y&1));x+=prevX;y+=prevY;prevX=x;prevY=y;result.push([x/encodeScale,y/encodeScale])}return result}module.exports=function(geoJson){decode(geoJson);return zrUtil.map(zrUtil.filter(geoJson.features,function(featureObj){return featureObj.geometry&&featureObj.properties&&featureObj.geometry.coordinates.length>0}),function(featureObj){var properties=featureObj.properties;var geo=featureObj.geometry;var coordinates=geo.coordinates;var geometries=[];if(geo.type==="Polygon"){geometries.push({type:"polygon",exterior:coordinates[0],interiors:coordinates.slice(1)})}if(geo.type==="MultiPolygon"){zrUtil.each(coordinates,function(item){if(item[0]){geometries.push({type:"polygon",exterior:item[0],interiors:item.slice(1)})}})}var region=new Region(properties.name,geometries,properties.cp);region.properties=properties;return region})}}),(function(module,exports,__webpack_require__){var polygonContain=__webpack_require__(178);var BoundingRect=__webpack_require__(9);var bbox=__webpack_require__(41);var vec2=__webpack_require__(10);function Region(name,geometries,cp){this.name=name;this.geometries=geometries;if(!cp){var rect=this.getBoundingRect();cp=[rect.x+rect.width/2,rect.y+rect.height/2]}else{cp=[cp[0],cp[1]]}this.center=cp}Region.prototype={constructor:Region,properties:null,getBoundingRect:function(){var rect=this._rect;if(rect){return rect}var MAX_NUMBER=Number.MAX_VALUE;var min=[MAX_NUMBER,MAX_NUMBER];var max=[-MAX_NUMBER,-MAX_NUMBER];var min2=[];var max2=[];var geometries=this.geometries;for(var i=0;i<geometries.length;i++){if(geometries[i].type!=="polygon"){continue}var exterior=geometries[i].exterior;bbox.fromPoints(exterior,min2,max2);vec2.min(min,min,min2);vec2.max(max,max,max2)}if(i===0){min[0]=min[1]=max[0]=max[1]=0}return(this._rect=new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1]))},contain:function(coord){var rect=this.getBoundingRect();var geometries=this.geometries;if(!rect.contain(coord[0],coord[1])){return false}loopGeo:for(var i=0,len=geometries.length;i<len;i++){if(geometries[i].type!=="polygon"){continue}var exterior=geometries[i].exterior;var interiors=geometries[i].interiors;if(polygonContain.contain(exterior,coord[0],coord[1])){for(var k=0;k<(interiors?interiors.length:0);k++){if(polygonContain.contain(interiors[k])){continue loopGeo}}return true}}return false},transformTo:function(x,y,width,height){var rect=this.getBoundingRect();var aspect=rect.width/rect.height;if(!width){width=aspect*height}else{if(!height){height=width/aspect}}var target=new BoundingRect(x,y,width,height);var transform=rect.calculateTransform(target);var geometries=this.geometries;for(var i=0;i<geometries.length;i++){if(geometries[i].type!=="polygon"){continue}var exterior=geometries[i].exterior;var interiors=geometries[i].interiors;for(var p=0;p<exterior.length;p++){vec2.applyTransform(exterior[p],exterior[p],transform)}for(var h=0;h<(interiors?interiors.length:0);h++){for(var p=0;p<interiors[h].length;p++){vec2.applyTransform(interiors[h][p],interiors[h][p],transform)}}}rect=this._rect;rect.copy(target);this.center=[rect.x+rect.width/2,rect.y+rect.height/2]}};module.exports=Region}),(function(module,exports,__webpack_require__){var windingLine=__webpack_require__(48);var EPSILON=1e-8;function isAroundEqual(a,b){return Math.abs(a-b)<EPSILON}function contain(points,x,y){var w=0;var p=points[0];if(!p){return false}for(var i=1;i<points.length;i++){var p2=points[i];w+=windingLine(p[0],p[1],p2[0],p2[1],x,y);p=p2}var p0=points[0];if(!isAroundEqual(p[0],p0[0])||!isAroundEqual(p[1],p0[1])){w+=windingLine(p[0],p[1],p0[0],p0[1],x,y)}return w!==0}module.exports={contain:contain}}),(function(module,exports,__webpack_require__){var vector=__webpack_require__(10);var matrix=__webpack_require__(11);var Transformable=__webpack_require__(28);var zrUtil=__webpack_require__(4);var BoundingRect=__webpack_require__(9);var v2ApplyTransform=vector.applyTransform;function TransformDummy(){Transformable.call(this)}zrUtil.mixin(TransformDummy,Transformable);function View(name){this.name=name;this.zoomLimit;Transformable.call(this);this._roamTransform=new TransformDummy();this._viewTransform=new TransformDummy();this._center;this._zoom}View.prototype={constructor:View,type:"view",dimensions:["x","y"],setBoundingRect:function(x,y,width,height){this._rect=new BoundingRect(x,y,width,height);return this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(x,y,width,height){this.transformTo(x,y,width,height);this._viewRect=new BoundingRect(x,y,width,height)
},transformTo:function(x,y,width,height){var rect=this.getBoundingRect();var viewTransform=this._viewTransform;viewTransform.transform=rect.calculateTransform(new BoundingRect(x,y,width,height));viewTransform.decomposeTransform();this._updateTransform()},setCenter:function(centerCoord){if(!centerCoord){return}this._center=centerCoord;this._updateCenterAndZoom()},setZoom:function(zoom){zoom=zoom||1;var zoomLimit=this.zoomLimit;if(zoomLimit){if(zoomLimit.max!=null){zoom=Math.min(zoomLimit.max,zoom)}if(zoomLimit.min!=null){zoom=Math.max(zoomLimit.min,zoom)}}this._zoom=zoom;this._updateCenterAndZoom()},getDefaultCenter:function(){var rawRect=this.getBoundingRect();var cx=rawRect.x+rawRect.width/2;var cy=rawRect.y+rawRect.height/2;return[cx,cy]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransform},_updateCenterAndZoom:function(){var viewTransformMatrix=this._viewTransform.getLocalTransform();var roamTransform=this._roamTransform;var defaultCenter=this.getDefaultCenter();var center=this.getCenter();var zoom=this.getZoom();center=vector.applyTransform([],center,viewTransformMatrix);defaultCenter=vector.applyTransform([],defaultCenter,viewTransformMatrix);roamTransform.origin=center;roamTransform.position=[defaultCenter[0]-center[0],defaultCenter[1]-center[1]];roamTransform.scale=[zoom,zoom];this._updateTransform()},_updateTransform:function(){var roamTransform=this._roamTransform;var viewTransform=this._viewTransform;viewTransform.parent=roamTransform;roamTransform.updateTransform();viewTransform.updateTransform();viewTransform.transform&&matrix.copy(this.transform||(this.transform=[]),viewTransform.transform);if(this.transform){this.invTransform=this.invTransform||[];matrix.invert(this.invTransform,this.transform)}else{this.invTransform=null}this.decomposeTransform()},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var rect=this.getBoundingRect().clone();rect.applyTransform(this.transform);return rect},dataToPoint:function(data){var transform=this.transform;return transform?v2ApplyTransform([],data,transform):[data[0],data[1]]},pointToData:function(point){var invTransform=this.invTransform;return invTransform?v2ApplyTransform([],point,invTransform):[point[0],point[1]]},convertToPixel:zrUtil.curry(doConvert,"dataToPoint"),convertFromPixel:zrUtil.curry(doConvert,"pointToData"),containPoint:function(point){return this.getViewRectAfterRoam().contain(point[0],point[1])}};zrUtil.mixin(View,Transformable);function doConvert(methodName,ecModel,finder,value){var seriesModel=finder.seriesModel;var coordSys=seriesModel?seriesModel.coordinateSystem:null;return coordSys===this?coordSys[methodName](value):null}module.exports=View}),(function(module,exports,__webpack_require__){var Region=__webpack_require__(177);var zrUtil=__webpack_require__(4);var geoCoord=[126,25];var points=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,0.7],[52,0.7],[56,7.7],[59,0.7],[64,0.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var i=0;i<points.length;i++){for(var k=0;k<points[i].length;k++){points[i][k][0]/=10.5;points[i][k][1]/=-10.5/0.75;points[i][k][0]+=geoCoord[0];points[i][k][1]+=geoCoord[1]}}module.exports=function(geo){if(geo.map==="china"){geo.regions.push(new Region("南海诸岛",zrUtil.map(points,function(exterior){return{type:"polygon",exterior:exterior}}),geoCoord))}}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var coordsOffsetMap={"南海诸岛":[32,80],"广东":[0,-10],"香港":[10,5],"澳门":[-10,10],"天津":[5,5]};module.exports=function(geo){zrUtil.each(geo.regions,function(region){var coordFix=coordsOffsetMap[region.name];if(coordFix){var cp=region.center;cp[0]+=coordFix[0]/10.5;cp[1]+=-coordFix[1]/(10.5/0.75)}})}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var geoCoordMap={"Russia":[100,60],"United States":[-99,38],"United States of America":[-99,38]};module.exports=function(geo){zrUtil.each(geo.regions,function(region){var geoCoord=geoCoordMap[region.name];if(geoCoord){var cp=region.center;cp[0]=geoCoord[0];cp[1]=geoCoord[1]}})}}),(function(module,exports){var points=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];module.exports=function(geo){if(geo.map==="china"){for(var i=0,len=geo.regions.length;
i<len;++i){if(geo.regions[i].name==="台湾"){geo.regions[i].geometries.push({type:"polygon",exterior:points[0]})}}}}}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var zrUtil=__webpack_require__(4);var MapDraw=__webpack_require__(185);__webpack_require__(1).extendChartView({type:"map",render:function(mapModel,ecModel,api,payload){if(payload&&payload.type==="mapToggleSelect"&&payload.from===this.uid){return}var group=this.group;group.removeAll();if(mapModel.getHostGeoModel()){return}if(!(payload&&payload.type==="geoRoam"&&payload.componentType==="series"&&payload.seriesId===mapModel.id)){if(mapModel.needsDrawMap){var mapDraw=this._mapDraw||new MapDraw(api,true);group.add(mapDraw.group);mapDraw.draw(mapModel,ecModel,api,this,payload);this._mapDraw=mapDraw}else{this._mapDraw&&this._mapDraw.remove();this._mapDraw=null}}else{var mapDraw=this._mapDraw;mapDraw&&group.add(mapDraw.group)}mapModel.get("showLegendSymbol")&&ecModel.getComponent("legend")&&this._renderSymbols(mapModel,ecModel,api)},remove:function(){this._mapDraw&&this._mapDraw.remove();this._mapDraw=null;this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove();this._mapDraw=null},_renderSymbols:function(mapModel,ecModel,api){var originalData=mapModel.originalData;var group=this.group;originalData.each("value",function(value,idx){if(isNaN(value)){return}var layout=originalData.getItemLayout(idx);if(!layout||!layout.point){return}var point=layout.point;var offset=layout.offset;var circle=new graphic.Circle({style:{fill:mapModel.getData().getVisual("color")},shape:{cx:point[0]+offset*9,cy:point[1],r:3},silent:true,z2:!offset?10:8});if(!offset){var fullData=mapModel.mainSeries.getData();var name=originalData.getName(idx);var fullIndex=fullData.indexOfName(name);var itemModel=originalData.getItemModel(idx);var labelModel=itemModel.getModel("label.normal");var hoverLabelModel=itemModel.getModel("label.emphasis");var polygonGroups=fullData.getItemGraphicEl(fullIndex);var normalText=zrUtil.retrieve2(mapModel.getFormattedLabel(idx,"normal"),name);var emphasisText=zrUtil.retrieve2(mapModel.getFormattedLabel(idx,"emphasis"),normalText);var onEmphasis=function(){var hoverStyle=graphic.setTextStyle({},hoverLabelModel,{text:hoverLabelModel.get("show")?emphasisText:null},{isRectText:true,useInsideStyle:false},true);circle.style.extendFrom(hoverStyle);circle.__mapOriginalZ2=circle.z2;circle.z2+=1};var onNormal=function(){graphic.setTextStyle(circle.style,labelModel,{text:labelModel.get("show")?normalText:null,textPosition:labelModel.getShallow("position")||"bottom"},{isRectText:true,useInsideStyle:false});if(circle.__mapOriginalZ2!=null){circle.z2=circle.__mapOriginalZ2;circle.__mapOriginalZ2=null}};polygonGroups.on("mouseover",onEmphasis).on("mouseout",onNormal).on("emphasis",onEmphasis).on("normal",onNormal);onNormal()}group.add(circle)})}})}),(function(module,exports,__webpack_require__){var RoamController=__webpack_require__(186);var roamHelper=__webpack_require__(188);var cursorHelper=__webpack_require__(189);var graphic=__webpack_require__(20);var zrUtil=__webpack_require__(4);function getFixedItemStyle(model,scale){var itemStyle=model.getItemStyle();var areaColor=model.get("areaColor");if(areaColor!=null){itemStyle.fill=areaColor}return itemStyle}function updateMapSelectHandler(mapDraw,mapOrGeoModel,group,api,fromView){group.off("click");group.off("mousedown");if(mapOrGeoModel.get("selectedMode")){group.on("mousedown",function(){mapDraw._mouseDownFlag=true});group.on("click",function(e){if(!mapDraw._mouseDownFlag){return}mapDraw._mouseDownFlag=false;var el=e.target;while(!el.__regions){el=el.parent}if(!el){return}var action={type:(mapOrGeoModel.mainType==="geo"?"geo":"map")+"ToggleSelect",batch:zrUtil.map(el.__regions,function(region){return{name:region.name,from:fromView.uid}})};action[mapOrGeoModel.mainType+"Id"]=mapOrGeoModel.id;api.dispatchAction(action);updateMapSelected(mapOrGeoModel,group)})}}function updateMapSelected(mapOrGeoModel,group){group.eachChild(function(otherRegionEl){zrUtil.each(otherRegionEl.__regions,function(region){otherRegionEl.trigger(mapOrGeoModel.isSelected(region.name)?"emphasis":"normal")})})}function MapDraw(api,updateGroup){var group=new graphic.Group();this._controller=new RoamController(api.getZr());this._controllerHost={target:updateGroup?group:null};this.group=group;this._updateGroup=updateGroup;this._mouseDownFlag}MapDraw.prototype={constructor:MapDraw,draw:function(mapOrGeoModel,ecModel,api,fromView,payload){var isGeo=mapOrGeoModel.mainType==="geo";var data=mapOrGeoModel.getData&&mapOrGeoModel.getData();isGeo&&ecModel.eachComponent({mainType:"series",subType:"map"},function(mapSeries){if(!data&&mapSeries.getHostGeoModel()===mapOrGeoModel){data=mapSeries.getData()}});var geo=mapOrGeoModel.coordinateSystem;var group=this.group;var scale=geo.scale;var groupNewProp={position:geo.position,scale:scale};if(!group.childAt(0)||payload){group.attr(groupNewProp)}else{graphic.updateProps(group,groupNewProp,mapOrGeoModel)
}group.removeAll();var itemStyleAccessPath=["itemStyle","normal"];var hoverItemStyleAccessPath=["itemStyle","emphasis"];var labelAccessPath=["label","normal"];var hoverLabelAccessPath=["label","emphasis"];var nameMap=zrUtil.createHashMap();zrUtil.each(geo.regions,function(region){var regionGroup=nameMap.get(region.name)||nameMap.set(region.name,new graphic.Group());var compoundPath=new graphic.CompoundPath({shape:{paths:[]}});regionGroup.add(compoundPath);var regionModel=mapOrGeoModel.getRegionModel(region.name)||mapOrGeoModel;var itemStyleModel=regionModel.getModel(itemStyleAccessPath);var hoverItemStyleModel=regionModel.getModel(hoverItemStyleAccessPath);var itemStyle=getFixedItemStyle(itemStyleModel,scale);var hoverItemStyle=getFixedItemStyle(hoverItemStyleModel,scale);var labelModel=regionModel.getModel(labelAccessPath);var hoverLabelModel=regionModel.getModel(hoverLabelAccessPath);var dataIdx;if(data){dataIdx=data.indexOfName(region.name);var visualColor=data.getItemVisual(dataIdx,"color",true);if(visualColor){itemStyle.fill=visualColor}}zrUtil.each(region.geometries,function(geometry){if(geometry.type!=="polygon"){return}compoundPath.shape.paths.push(new graphic.Polygon({shape:{points:geometry.exterior}}));for(var i=0;i<(geometry.interiors?geometry.interiors.length:0);i++){compoundPath.shape.paths.push(new graphic.Polygon({shape:{points:geometry.interiors[i]}}))}});compoundPath.setStyle(itemStyle);compoundPath.style.strokeNoScale=true;compoundPath.culling=true;var showLabel=labelModel.get("show");var hoverShowLabel=hoverLabelModel.get("show");var isDataNaN=data&&isNaN(data.get("value",dataIdx));var itemLayout=data&&data.getItemLayout(dataIdx);if((isGeo||isDataNaN&&(showLabel||hoverShowLabel))||(itemLayout&&itemLayout.showLabel)){var query=!isGeo?dataIdx:region.name;var labelFetcher;if(!data||dataIdx>=0){labelFetcher=mapOrGeoModel}var textEl=new graphic.Text({position:region.center.slice(),scale:[1/scale[0],1/scale[1]],z2:10,silent:true});graphic.setLabelStyle(textEl.style,textEl.hoverStyle={},labelModel,hoverLabelModel,{labelFetcher:labelFetcher,labelDataIndex:query,defaultText:region.name,useInsideStyle:false},{textAlign:"center",textVerticalAlign:"middle"});regionGroup.add(textEl)}if(data){data.setItemGraphicEl(dataIdx,regionGroup)}else{var regionModel=mapOrGeoModel.getRegionModel(region.name);compoundPath.eventData={componentType:"geo",geoIndex:mapOrGeoModel.componentIndex,name:region.name,region:(regionModel&&regionModel.option)||{}}}var groupRegions=regionGroup.__regions||(regionGroup.__regions=[]);groupRegions.push(region);graphic.setHoverStyle(regionGroup,hoverItemStyle,{hoverSilentOnTouch:!!mapOrGeoModel.get("selectedMode")});group.add(regionGroup)});this._updateController(mapOrGeoModel,ecModel,api);updateMapSelectHandler(this,mapOrGeoModel,group,api,fromView);updateMapSelected(mapOrGeoModel,group)},remove:function(){this.group.removeAll();this._controller.dispose();this._controllerHost={}},_updateController:function(mapOrGeoModel,ecModel,api){var geo=mapOrGeoModel.coordinateSystem;var controller=this._controller;var controllerHost=this._controllerHost;controllerHost.zoomLimit=mapOrGeoModel.get("scaleLimit");controllerHost.zoom=geo.getZoom();controller.enable(mapOrGeoModel.get("roam")||false);var mainType=mapOrGeoModel.mainType;function makeActionBase(){var action={type:"geoRoam",componentType:mainType};action[mainType+"Id"]=mapOrGeoModel.id;return action}controller.off("pan").on("pan",function(dx,dy){this._mouseDownFlag=false;roamHelper.updateViewOnPan(controllerHost,dx,dy);api.dispatchAction(zrUtil.extend(makeActionBase(),{dx:dx,dy:dy}))},this);controller.off("zoom").on("zoom",function(zoom,mouseX,mouseY){this._mouseDownFlag=false;roamHelper.updateViewOnZoom(controllerHost,zoom,mouseX,mouseY);api.dispatchAction(zrUtil.extend(makeActionBase(),{zoom:zoom,originX:mouseX,originY:mouseY}));if(this._updateGroup){var group=this.group;var scale=group.scale;group.traverse(function(el){if(el.type==="text"){el.attr("scale",[1/scale[0],1/scale[1]])}})}},this);controller.setPointerChecker(function(e,x,y){return geo.getViewRectAfterRoam().contain(x,y)&&!cursorHelper.onIrrelevantElement(e,api,mapOrGeoModel)})}};module.exports=MapDraw}),(function(module,exports,__webpack_require__){var Eventful=__webpack_require__(27);var zrUtil=__webpack_require__(4);var eventTool=__webpack_require__(93);var interactionMutex=__webpack_require__(187);function RoamController(zr){this.pointerChecker;this._zr=zr;this._opt={};var bind=zrUtil.bind;var mousedownHandler=bind(mousedown,this);var mousemoveHandler=bind(mousemove,this);var mouseupHandler=bind(mouseup,this);var mousewheelHandler=bind(mousewheel,this);var pinchHandler=bind(pinch,this);Eventful.call(this);this.setPointerChecker=function(pointerChecker){this.pointerChecker=pointerChecker};this.enable=function(controlType,opt){this.disable();this._opt=zrUtil.defaults(zrUtil.clone(opt)||{},{zoomOnMouseWheel:true,moveOnMouseMove:true,preventDefaultMouseMove:true});if(controlType==null){controlType=true
}if(controlType===true||(controlType==="move"||controlType==="pan")){zr.on("mousedown",mousedownHandler);zr.on("mousemove",mousemoveHandler);zr.on("mouseup",mouseupHandler)}if(controlType===true||(controlType==="scale"||controlType==="zoom")){zr.on("mousewheel",mousewheelHandler);zr.on("pinch",pinchHandler)}};this.disable=function(){zr.off("mousedown",mousedownHandler);zr.off("mousemove",mousemoveHandler);zr.off("mouseup",mouseupHandler);zr.off("mousewheel",mousewheelHandler);zr.off("pinch",pinchHandler)};this.dispose=this.disable;this.isDragging=function(){return this._dragging};this.isPinching=function(){return this._pinching}}zrUtil.mixin(RoamController,Eventful);function mousedown(e){if(eventTool.notLeftMouse(e)||(e.target&&e.target.draggable)){return}var x=e.offsetX;var y=e.offsetY;if(this.pointerChecker&&this.pointerChecker(e,x,y)){this._x=x;this._y=y;this._dragging=true}}function mousemove(e){if(eventTool.notLeftMouse(e)||!checkKeyBinding(this,"moveOnMouseMove",e)||!this._dragging||e.gestureEvent==="pinch"||interactionMutex.isTaken(this._zr,"globalPan")){return}var x=e.offsetX;var y=e.offsetY;var oldX=this._x;var oldY=this._y;var dx=x-oldX;var dy=y-oldY;this._x=x;this._y=y;this._opt.preventDefaultMouseMove&&eventTool.stop(e.event);this.trigger("pan",dx,dy,oldX,oldY,x,y)}function mouseup(e){if(!eventTool.notLeftMouse(e)){this._dragging=false}}function mousewheel(e){if(!checkKeyBinding(this,"zoomOnMouseWheel",e)||e.wheelDelta===0){return}var zoomDelta=e.wheelDelta>0?1.1:1/1.1;zoom.call(this,e,zoomDelta,e.offsetX,e.offsetY)}function pinch(e){if(interactionMutex.isTaken(this._zr,"globalPan")){return}var zoomDelta=e.pinchScale>1?1.1:1/1.1;zoom.call(this,e,zoomDelta,e.pinchX,e.pinchY)}function zoom(e,zoomDelta,zoomX,zoomY){if(this.pointerChecker&&this.pointerChecker(e,zoomX,zoomY)){eventTool.stop(e.event);this.trigger("zoom",zoomDelta,zoomX,zoomY)}}function checkKeyBinding(roamController,prop,e){var setting=roamController._opt[prop];return setting&&(!zrUtil.isString(setting)||e.event[setting+"Key"])}module.exports=RoamController}),(function(module,exports,__webpack_require__){var ATTR="\0_ec_interaction_mutex";var interactionMutex={take:function(zr,resourceKey,userKey){var store=getStore(zr);store[resourceKey]=userKey},release:function(zr,resourceKey,userKey){var store=getStore(zr);var uKey=store[resourceKey];if(uKey===userKey){store[resourceKey]=null}},isTaken:function(zr,resourceKey){return !!getStore(zr)[resourceKey]}};function getStore(zr){return zr[ATTR]||(zr[ATTR]={})}__webpack_require__(1).registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){});module.exports=interactionMutex}),(function(module,exports){var helper={};helper.updateViewOnPan=function(controllerHost,dx,dy){var target=controllerHost.target;var pos=target.position;pos[0]+=dx;pos[1]+=dy;target.dirty()};helper.updateViewOnZoom=function(controllerHost,zoomDelta,zoomX,zoomY){var target=controllerHost.target;var zoomLimit=controllerHost.zoomLimit;var pos=target.position;var scale=target.scale;var newZoom=controllerHost.zoom=controllerHost.zoom||1;newZoom*=zoomDelta;if(zoomLimit){var zoomMin=zoomLimit.min||0;var zoomMax=zoomLimit.max||Infinity;newZoom=Math.max(Math.min(zoomMax,newZoom),zoomMin)}var zoomScale=newZoom/controllerHost.zoom;controllerHost.zoom=newZoom;pos[0]-=(zoomX-pos[0])*(zoomScale-1);pos[1]-=(zoomY-pos[1])*(zoomScale-1);scale[0]*=zoomScale;scale[1]*=zoomScale;target.dirty()};module.exports=helper}),(function(module,exports){var helper={};var IRRELEVANT_EXCLUDES={"axisPointer":1,"tooltip":1,"brush":1};helper.onIrrelevantElement=function(e,api,targetCoordSysModel){var model=api.getComponentByElement(e.topTarget);var coordSys=model&&model.coordinateSystem;return model&&model!==targetCoordSysModel&&!IRRELEVANT_EXCLUDES[model.mainType]&&(coordSys&&coordSys.model!==targetCoordSysModel)};module.exports=helper}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var roamHelper=__webpack_require__(191);var echarts=__webpack_require__(1);echarts.registerAction({type:"geoRoam",event:"geoRoam",update:"updateLayout"},function(payload,ecModel){var componentType=payload.componentType||"series";ecModel.eachComponent({mainType:componentType,query:payload},function(componentModel){var geo=componentModel.coordinateSystem;if(geo.type!=="geo"){return}var res=roamHelper.updateCenterAndZoom(geo,payload,componentModel.get("scaleLimit"));componentModel.setCenter&&componentModel.setCenter(res.center);componentModel.setZoom&&componentModel.setZoom(res.zoom);if(componentType==="series"){zrUtil.each(componentModel.seriesGroup,function(seriesModel){seriesModel.setCenter(res.center);seriesModel.setZoom(res.zoom)})}})})}),(function(module,exports){var roamHelper={};roamHelper.updateCenterAndZoom=function(view,payload,zoomLimit){var previousZoom=view.getZoom();var center=view.getCenter();var zoom=payload.zoom;var point=view.dataToPoint(center);if(payload.dx!=null&&payload.dy!=null){point[0]-=payload.dx;
point[1]-=payload.dy;var center=view.pointToData(point);view.setCenter(center)}if(zoom!=null){if(zoomLimit){var zoomMin=zoomLimit.min||0;var zoomMax=zoomLimit.max||Infinity;zoom=Math.max(Math.min(previousZoom*zoom,zoomMax),zoomMin)/previousZoom}view.scale[0]*=zoom;view.scale[1]*=zoom;var position=view.position;var fixX=(payload.originX-position[0])*(zoom-1);var fixY=(payload.originY-position[1])*(zoom-1);position[0]-=fixX;position[1]-=fixY;view.updateTransform();var center=view.pointToData(point);view.setCenter(center);view.setZoom(zoom*previousZoom)}return{center:view.getCenter(),zoom:view.getZoom()}};module.exports=roamHelper}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);module.exports=function(ecModel){var processedMapType={};ecModel.eachSeriesByType("map",function(mapSeries){var mapType=mapSeries.getMapType();if(mapSeries.getHostGeoModel()||processedMapType[mapType]){return}var mapSymbolOffsets={};zrUtil.each(mapSeries.seriesGroup,function(subMapSeries){var geo=subMapSeries.coordinateSystem;var data=subMapSeries.originalData;if(subMapSeries.get("showLegendSymbol")&&ecModel.getComponent("legend")){data.each("value",function(value,idx){var name=data.getName(idx);var region=geo.getRegion(name);if(!region||isNaN(value)){return}var offset=mapSymbolOffsets[name]||0;var point=geo.dataToPoint(region.center);mapSymbolOffsets[name]=offset+1;data.setItemLayout(idx,{point:point,offset:offset})})}});var data=mapSeries.getData();data.each(function(idx){var name=data.getName(idx);var layout=data.getItemLayout(idx)||{};layout.showLabel=!mapSymbolOffsets[name];data.setItemLayout(idx,layout)});processedMapType[mapType]=true})}}),(function(module,exports){module.exports=function(ecModel){ecModel.eachSeriesByType("map",function(seriesModel){var colorList=seriesModel.get("color");var itemStyleModel=seriesModel.getModel("itemStyle.normal");var areaColor=itemStyleModel.get("areaColor");var color=itemStyleModel.get("color")||colorList[seriesModel.seriesIndex%colorList.length];seriesModel.getData().setVisual({"areaColor":areaColor,"color":color})})}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);function dataStatistics(datas,statisticType){var dataNameMap={};var dims=["value"];zrUtil.each(datas,function(data){data.each(dims,function(value,idx){var mapKey="ec-"+data.getName(idx);dataNameMap[mapKey]=dataNameMap[mapKey]||[];if(!isNaN(value)){dataNameMap[mapKey].push(value)}})});return datas[0].map(dims,function(value,idx){var mapKey="ec-"+datas[0].getName(idx);var sum=0;var min=Infinity;var max=-Infinity;var len=dataNameMap[mapKey].length;for(var i=0;i<len;i++){min=Math.min(min,dataNameMap[mapKey][i]);max=Math.max(max,dataNameMap[mapKey][i]);sum+=dataNameMap[mapKey][i]}var result;if(statisticType==="min"){result=min}else{if(statisticType==="max"){result=max}else{if(statisticType==="average"){result=sum/len}else{result=sum}}}return len===0?NaN:result})}module.exports=function(ecModel){var seriesGroups={};ecModel.eachSeriesByType("map",function(seriesModel){var hostGeoModel=seriesModel.getHostGeoModel();var key=hostGeoModel?"o"+hostGeoModel.id:"i"+seriesModel.getMapType();(seriesGroups[key]=seriesGroups[key]||[]).push(seriesModel)});zrUtil.each(seriesGroups,function(seriesList,key){var data=dataStatistics(zrUtil.map(seriesList,function(seriesModel){return seriesModel.getData()}),seriesList[0].get("mapValueCalculation"));for(var i=0;i<seriesList.length;i++){seriesList[i].originalData=seriesList[i].getData()}for(var i=0;i<seriesList.length;i++){seriesList[i].seriesGroup=seriesList;seriesList[i].needsDrawMap=i===0&&!seriesList[i].getHostGeoModel();seriesList[i].setData(data.cloneShallow());seriesList[i].mainSeries=seriesList[0]}})}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);module.exports=function(option){var mapSeries=[];zrUtil.each(option.series,function(seriesOpt){if(seriesOpt.type==="map"){mapSeries.push(seriesOpt)}});zrUtil.each(mapSeries,function(seriesOpt){seriesOpt.map=seriesOpt.map||seriesOpt.mapType;zrUtil.defaults(seriesOpt,seriesOpt.mapLocation)})}}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);__webpack_require__(197);__webpack_require__(201);__webpack_require__(204);echarts.registerVisual(__webpack_require__(205));echarts.registerLayout(__webpack_require__(207))}),(function(module,exports,__webpack_require__){var SeriesModel=__webpack_require__(83);var Tree=__webpack_require__(198);var zrUtil=__webpack_require__(4);var Model=__webpack_require__(14);var formatUtil=__webpack_require__(6);var helper=__webpack_require__(200);var encodeHTML=formatUtil.encodeHTML;var addCommas=formatUtil.addCommas;module.exports=SeriesModel.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],_viewRoot:null,defaultOption:{progressive:0,hoverLayerThreshold:Infinity,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:true,clipWindow:"origin",squareRatio:0.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:0.32*0.32,roam:true,nodeClick:"zoomToNode",animation:true,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:true,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{normal:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}}},label:{normal:{show:true,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:true}},upperLabel:{normal:{show:false,position:[0,"50%"],height:20,color:"#fff",ellipsis:true,verticalAlign:"middle"},emphasis:{show:true,position:[0,"50%"],color:"#fff",ellipsis:true,verticalAlign:"middle"}},itemStyle:{normal:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(option,ecModel){var root={name:option.name,children:option.data};
completeTreeValue(root);var levels=option.levels||[];levels=option.levels=setDefault(levels,ecModel);return Tree.createTree(root,this,levels).data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(dataIndex){var data=this.getData();var value=this.getRawValue(dataIndex);var formattedValue=zrUtil.isArray(value)?addCommas(value[0]):addCommas(value);var name=data.getName(dataIndex);return encodeHTML(name+": "+formattedValue)},getDataParams:function(dataIndex){var params=SeriesModel.prototype.getDataParams.apply(this,arguments);var node=this.getData().tree.getNodeByDataIndex(dataIndex);params.treePathInfo=helper.wrapTreePathInfo(node,this);return params},setLayoutInfo:function(layoutInfo){this.layoutInfo=this.layoutInfo||{};zrUtil.extend(this.layoutInfo,layoutInfo)},mapIdToIndex:function(id){var idIndexMap=this._idIndexMap;if(!idIndexMap){idIndexMap=this._idIndexMap=zrUtil.createHashMap();this._idIndexMapCount=0}var index=idIndexMap.get(id);if(index==null){idIndexMap.set(id,index=this._idIndexMapCount++)}return index},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(viewRoot){viewRoot?(this._viewRoot=viewRoot):(viewRoot=this._viewRoot);var root=this.getData().tree.root;if(!viewRoot||(viewRoot!==root&&!root.contains(viewRoot))){this._viewRoot=root}}});function completeTreeValue(dataNode){var sum=0;zrUtil.each(dataNode.children,function(child){completeTreeValue(child);var childValue=child.value;zrUtil.isArray(childValue)&&(childValue=childValue[0]);sum+=childValue});var thisValue=dataNode.value;if(zrUtil.isArray(thisValue)){thisValue=thisValue[0]}if(thisValue==null||isNaN(thisValue)){thisValue=sum}if(thisValue<0){thisValue=0}zrUtil.isArray(dataNode.value)?(dataNode.value[0]=thisValue):(dataNode.value=thisValue)}function setDefault(levels,ecModel){var globalColorList=ecModel.get("color");if(!globalColorList){return}levels=levels||[];var hasColorDefine;zrUtil.each(levels,function(levelDefine){var model=new Model(levelDefine);var modelColor=model.get("color");if(model.get("itemStyle.normal.color")||(modelColor&&modelColor!=="none")){hasColorDefine=true}});if(!hasColorDefine){var level0=levels[0]||(levels[0]={});level0.color=globalColorList.slice()}return levels}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var Model=__webpack_require__(14);var List=__webpack_require__(101);var linkList=__webpack_require__(199);var completeDimensions=__webpack_require__(113);var TreeNode=function(name,hostTree){this.name=name||"";this.depth=0;this.height=0;this.parentNode=null;this.dataIndex=-1;this.children=[];this.viewChildren=[];this.hostTree=hostTree};TreeNode.prototype={constructor:TreeNode,isRemoved:function(){return this.dataIndex<0},eachNode:function(options,cb,context){if(typeof options==="function"){context=cb;cb=options;options=null}options=options||{};if(zrUtil.isString(options)){options={order:options}}var order=options.order||"preorder";var children=this[options.attr||"children"];var suppressVisitSub;order==="preorder"&&(suppressVisitSub=cb.call(context,this));for(var i=0;!suppressVisitSub&&i<children.length;i++){children[i].eachNode(options,cb,context)}order==="postorder"&&cb.call(context,this)},updateDepthAndHeight:function(depth){var height=0;this.depth=depth;for(var i=0;i<this.children.length;i++){var child=this.children[i];child.updateDepthAndHeight(depth+1);if(child.height>height){height=child.height}}this.height=height+1},getNodeById:function(id){if(this.getId()===id){return this}for(var i=0,children=this.children,len=children.length;i<len;i++){var res=children[i].getNodeById(id);if(res){return res}}},contains:function(node){if(node===this){return true}for(var i=0,children=this.children,len=children.length;i<len;i++){var res=children[i].contains(node);if(res){return res}}},getAncestors:function(includeSelf){var ancestors=[];var node=includeSelf?this:this.parentNode;while(node){ancestors.push(node);node=node.parentNode}ancestors.reverse();return ancestors},getValue:function(dimension){var data=this.hostTree.data;return data.get(data.getDimension(dimension||"value"),this.dataIndex)},setLayout:function(layout,merge){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,layout,merge)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(path){if(this.dataIndex<0){return}var hostTree=this.hostTree;var itemModel=hostTree.data.getItemModel(this.dataIndex);var levelModel=this.getLevelModel();return itemModel.getModel(path,(levelModel||hostTree.hostModel).getModel(path))},getLevelModel:function(){return(this.hostTree.levelModels||[])[this.depth]},setVisual:function(key,value){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,key,value)},getVisual:function(key,ignoreParent){return this.hostTree.data.getItemVisual(this.dataIndex,key,ignoreParent)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)
}};function Tree(hostModel,levelOptions){this.root;this.data;this._nodes=[];this.hostModel=hostModel;this.levelModels=zrUtil.map(levelOptions||[],function(levelDefine){return new Model(levelDefine,hostModel,hostModel.ecModel)})}Tree.prototype={constructor:Tree,type:"tree",eachNode:function(options,cb,context){this.root.eachNode(options,cb,context)},getNodeByDataIndex:function(dataIndex){var rawIndex=this.data.getRawIndex(dataIndex);return this._nodes[rawIndex]},getNodeByName:function(name){return this.root.getNodeByName(name)},update:function(){var data=this.data;var nodes=this._nodes;for(var i=0,len=nodes.length;i<len;i++){nodes[i].dataIndex=-1}for(var i=0,len=data.count();i<len;i++){nodes[data.getRawIndex(i)].dataIndex=i}},clearLayouts:function(){this.data.clearItemLayouts()}};Tree.createTree=function(dataRoot,hostModel,levelOptions){var tree=new Tree(hostModel,levelOptions);var listData=[];var dimMax=1;buildHierarchy(dataRoot);function buildHierarchy(dataNode,parentNode){var value=dataNode.value;dimMax=Math.max(dimMax,zrUtil.isArray(value)?value.length:1);listData.push(dataNode);var node=new TreeNode(dataNode.name,tree);parentNode?addChild(node,parentNode):(tree.root=node);tree._nodes.push(node);var children=dataNode.children;if(children){for(var i=0;i<children.length;i++){buildHierarchy(children[i],node)}}}tree.root.updateDepthAndHeight(0);var dimensions=completeDimensions([{name:"value"}],listData,{dimCount:dimMax});var list=new List(dimensions,hostModel);list.initData(listData);linkList({mainData:list,struct:tree,structAttr:"tree"});tree.update();return tree};function addChild(child,node){var children=node.children;if(child.parentNode===node){return}children.push(child);child.parentNode=node}module.exports=Tree}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var each=zrUtil.each;var DATAS="\0__link_datas";var MAIN_DATA="\0__link_mainData";function linkList(opt){var mainData=opt.mainData;var datas=opt.datas;if(!datas){datas={main:mainData};opt.datasAttr={main:"data"}}opt.datas=opt.mainData=null;linkAll(mainData,datas,opt);each(datas,function(data){each(mainData.TRANSFERABLE_METHODS,function(methodName){data.wrapMethod(methodName,zrUtil.curry(transferInjection,opt))})});mainData.wrapMethod("cloneShallow",zrUtil.curry(cloneShallowInjection,opt));each(mainData.CHANGABLE_METHODS,function(methodName){mainData.wrapMethod(methodName,zrUtil.curry(changeInjection,opt))});zrUtil.assert(datas[mainData.dataType]===mainData)}function transferInjection(opt,res){if(isMainData(this)){var datas=zrUtil.extend({},this[DATAS]);datas[this.dataType]=res;linkAll(res,datas,opt)}else{linkSingle(res,this.dataType,this[MAIN_DATA],opt)}return res}function changeInjection(opt,res){opt.struct&&opt.struct.update(this);return res}function cloneShallowInjection(opt,res){each(res[DATAS],function(data,dataType){data!==res&&linkSingle(data.cloneShallow(),dataType,res,opt)});return res}function getLinkedData(dataType){var mainData=this[MAIN_DATA];return(dataType==null||mainData==null)?mainData:mainData[DATAS][dataType]}function isMainData(data){return data[MAIN_DATA]===data}function linkAll(mainData,datas,opt){mainData[DATAS]={};each(datas,function(data,dataType){linkSingle(data,dataType,mainData,opt)})}function linkSingle(data,dataType,mainData,opt){mainData[DATAS][dataType]=data;data[MAIN_DATA]=mainData;data.dataType=dataType;if(opt.struct){data[opt.structAttr]=opt.struct;opt.struct[opt.datasAttr[dataType]]=data}data.getLinkedData=getLinkedData}module.exports=linkList}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var helper={retrieveTargetInfo:function(payload,seriesModel){if(payload&&(payload.type==="treemapZoomToNode"||payload.type==="treemapRootToNode")){var root=seriesModel.getData().tree.root;var targetNode=payload.targetNode;if(targetNode&&root.contains(targetNode)){return{node:targetNode}}var targetNodeId=payload.targetNodeId;if(targetNodeId!=null&&(targetNode=root.getNodeById(targetNodeId))){return{node:targetNode}}}},getPathToRoot:function(node){var path=[];while(node){node=node.parentNode;node&&path.push(node)}return path.reverse()},aboveViewRoot:function(viewRoot,node){var viewPath=helper.getPathToRoot(viewRoot);return zrUtil.indexOf(viewPath,node)>=0},wrapTreePathInfo:function(node,seriesModel){var treePathInfo=[];while(node){var nodeDataIndex=node.dataIndex;treePathInfo.push({name:node.name,dataIndex:nodeDataIndex,value:seriesModel.getRawValue(nodeDataIndex)});node=node.parentNode}treePathInfo.reverse();return treePathInfo}};module.exports=helper}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var graphic=__webpack_require__(20);var DataDiffer=__webpack_require__(102);var helper=__webpack_require__(200);var Breadcrumb=__webpack_require__(202);var RoamController=__webpack_require__(186);var BoundingRect=__webpack_require__(9);var matrix=__webpack_require__(11);var animationUtil=__webpack_require__(203);var bind=zrUtil.bind;
var Group=graphic.Group;var Rect=graphic.Rect;var each=zrUtil.each;var DRAG_THRESHOLD=3;var PATH_LABEL_NOAMAL=["label","normal"];var PATH_LABEL_EMPHASIS=["label","emphasis"];var PATH_UPPERLABEL_NORMAL=["upperLabel","normal"];var PATH_UPPERLABEL_EMPHASIS=["upperLabel","emphasis"];var Z_BASE=10;var Z_BG=1;var Z_CONTENT=2;module.exports=__webpack_require__(1).extendChartView({type:"treemap",init:function(o,api){this._containerGroup;this._storage=createStorage();this._oldTree;this._breadcrumb;this._controller;this._state="ready"},render:function(seriesModel,ecModel,api,payload){var models=ecModel.findComponents({mainType:"series",subType:"treemap",query:payload});if(zrUtil.indexOf(models,seriesModel)<0){return}this.seriesModel=seriesModel;this.api=api;this.ecModel=ecModel;var targetInfo=helper.retrieveTargetInfo(payload,seriesModel);var payloadType=payload&&payload.type;var layoutInfo=seriesModel.layoutInfo;var isInit=!this._oldTree;var thisStorage=this._storage;var reRoot=(payloadType==="treemapRootToNode"&&targetInfo&&thisStorage)?{rootNodeGroup:thisStorage.nodeGroup[targetInfo.node.getRawIndex()],direction:payload.direction}:null;var containerGroup=this._giveContainerGroup(layoutInfo);var renderResult=this._doRender(containerGroup,seriesModel,reRoot);(!isInit&&(!payloadType||payloadType==="treemapZoomToNode"||payloadType==="treemapRootToNode"))?this._doAnimation(containerGroup,renderResult,seriesModel,reRoot):renderResult.renderFinally();this._resetController(api);this._renderBreadcrumb(seriesModel,api,targetInfo)},_giveContainerGroup:function(layoutInfo){var containerGroup=this._containerGroup;if(!containerGroup){containerGroup=this._containerGroup=new Group();this._initEvents(containerGroup);this.group.add(containerGroup)}containerGroup.attr("position",[layoutInfo.x,layoutInfo.y]);return containerGroup},_doRender:function(containerGroup,seriesModel,reRoot){var thisTree=seriesModel.getData().tree;var oldTree=this._oldTree;var lastsForAnimation=createStorage();var thisStorage=createStorage();var oldStorage=this._storage;var willInvisibleEls=[];var doRenderNode=zrUtil.curry(renderNode,seriesModel,thisStorage,oldStorage,reRoot,lastsForAnimation,willInvisibleEls);dualTravel(thisTree.root?[thisTree.root]:[],(oldTree&&oldTree.root)?[oldTree.root]:[],containerGroup,thisTree===oldTree||!oldTree,0);var willDeleteEls=clearStorage(oldStorage);this._oldTree=thisTree;this._storage=thisStorage;return{lastsForAnimation:lastsForAnimation,willDeleteEls:willDeleteEls,renderFinally:renderFinally};function dualTravel(thisViewChildren,oldViewChildren,parentGroup,sameTree,depth){if(sameTree){oldViewChildren=thisViewChildren;each(thisViewChildren,function(child,index){!child.isRemoved()&&processNode(index,index)})}else{(new DataDiffer(oldViewChildren,thisViewChildren,getKey,getKey)).add(processNode).update(processNode).remove(zrUtil.curry(processNode,null)).execute()}function getKey(node){return node.getId()}function processNode(newIndex,oldIndex){var thisNode=newIndex!=null?thisViewChildren[newIndex]:null;var oldNode=oldIndex!=null?oldViewChildren[oldIndex]:null;var group=doRenderNode(thisNode,oldNode,parentGroup,depth);group&&dualTravel(thisNode&&thisNode.viewChildren||[],oldNode&&oldNode.viewChildren||[],group,sameTree,depth+1)}}function clearStorage(storage){var willDeleteEls=createStorage();storage&&each(storage,function(store,storageName){var delEls=willDeleteEls[storageName];each(store,function(el){el&&(delEls.push(el),el.__tmWillDelete=1)})});return willDeleteEls}function renderFinally(){each(willDeleteEls,function(els){each(els,function(el){el.parent&&el.parent.remove(el)})});each(willInvisibleEls,function(el){el.invisible=true;el.dirty()})}},_doAnimation:function(containerGroup,renderResult,seriesModel,reRoot){if(!seriesModel.get("animation")){return}var duration=seriesModel.get("animationDurationUpdate");var easing=seriesModel.get("animationEasing");var animationWrap=animationUtil.createWrap();each(renderResult.willDeleteEls,function(store,storageName){each(store,function(el,rawIndex){if(el.invisible){return}var parent=el.parent;var target;if(reRoot&&reRoot.direction==="drillDown"){target=parent===reRoot.rootNodeGroup?{shape:{x:0,y:0,width:parent.__tmNodeWidth,height:parent.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}}}else{var targetX=0;var targetY=0;if(!parent.__tmWillDelete){targetX=parent.__tmNodeWidth/2;targetY=parent.__tmNodeHeight/2}target=storageName==="nodeGroup"?{position:[targetX,targetY],style:{opacity:0}}:{shape:{x:targetX,y:targetY,width:0,height:0},style:{opacity:0}}}target&&animationWrap.add(el,target,duration,easing)})});each(this._storage,function(store,storageName){each(store,function(el,rawIndex){var last=renderResult.lastsForAnimation[storageName][rawIndex];var target={};if(!last){return}if(storageName==="nodeGroup"){if(last.old){target.position=el.position.slice();el.attr("position",last.old)}}else{if(last.old){target.shape=zrUtil.extend({},el.shape);el.setShape(last.old)}if(last.fadein){el.setStyle("opacity",0);
target.style={opacity:1}}else{if(el.style.opacity!==1){target.style={opacity:1}}}}animationWrap.add(el,target,duration,easing)})},this);this._state="animating";animationWrap.done(bind(function(){this._state="ready";renderResult.renderFinally()},this)).start()},_resetController:function(api){var controller=this._controller;if(!controller){controller=this._controller=new RoamController(api.getZr());controller.enable(this.seriesModel.get("roam"));controller.on("pan",bind(this._onPan,this));controller.on("zoom",bind(this._onZoom,this))}var rect=new BoundingRect(0,0,api.getWidth(),api.getHeight());controller.setPointerChecker(function(e,x,y){return rect.contain(x,y)})},_clearController:function(){var controller=this._controller;if(controller){controller.dispose();controller=null}},_onPan:function(dx,dy){if(this._state!=="animating"&&(Math.abs(dx)>DRAG_THRESHOLD||Math.abs(dy)>DRAG_THRESHOLD)){var root=this.seriesModel.getData().tree.root;if(!root){return}var rootLayout=root.getLayout();if(!rootLayout){return}this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:rootLayout.x+dx,y:rootLayout.y+dy,width:rootLayout.width,height:rootLayout.height}})}},_onZoom:function(scale,mouseX,mouseY){if(this._state!=="animating"){var root=this.seriesModel.getData().tree.root;if(!root){return}var rootLayout=root.getLayout();if(!rootLayout){return}var rect=new BoundingRect(rootLayout.x,rootLayout.y,rootLayout.width,rootLayout.height);var layoutInfo=this.seriesModel.layoutInfo;mouseX-=layoutInfo.x;mouseY-=layoutInfo.y;var m=matrix.create();matrix.translate(m,m,[-mouseX,-mouseY]);matrix.scale(m,m,[scale,scale]);matrix.translate(m,m,[mouseX,mouseY]);rect.applyTransform(m);this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:rect.x,y:rect.y,width:rect.width,height:rect.height}})}},_initEvents:function(containerGroup){containerGroup.on("click",function(e){if(this._state!=="ready"){return}var nodeClick=this.seriesModel.get("nodeClick",true);if(!nodeClick){return}var targetInfo=this.findTarget(e.offsetX,e.offsetY);if(!targetInfo){return}var node=targetInfo.node;if(node.getLayout().isLeafRoot){this._rootToNode(targetInfo)}else{if(nodeClick==="zoomToNode"){this._zoomToNode(targetInfo)}else{if(nodeClick==="link"){var itemModel=node.hostTree.data.getItemModel(node.dataIndex);var link=itemModel.get("link",true);var linkTarget=itemModel.get("target",true)||"blank";link&&window.open(link,linkTarget)}}}},this)},_renderBreadcrumb:function(seriesModel,api,targetInfo){if(!targetInfo){targetInfo=seriesModel.get("leafDepth",true)!=null?{node:seriesModel.getViewRoot()}:this.findTarget(api.getWidth()/2,api.getHeight()/2);if(!targetInfo){targetInfo={node:seriesModel.getData().tree.root}}}(this._breadcrumb||(this._breadcrumb=new Breadcrumb(this.group))).render(seriesModel,api,targetInfo.node,bind(onSelect,this));function onSelect(node){if(this._state!=="animating"){helper.aboveViewRoot(seriesModel.getViewRoot(),node)?this._rootToNode({node:node}):this._zoomToNode({node:node})}}},remove:function(){this._clearController();this._containerGroup&&this._containerGroup.removeAll();this._storage=createStorage();this._state="ready";this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(targetInfo){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:targetInfo.node})},_rootToNode:function(targetInfo){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:targetInfo.node})},findTarget:function(x,y){var targetInfo;var viewRoot=this.seriesModel.getViewRoot();viewRoot.eachNode({attr:"viewChildren",order:"preorder"},function(node){var bgEl=this._storage.background[node.getRawIndex()];if(bgEl){var point=bgEl.transformCoordToLocal(x,y);var shape=bgEl.shape;if(shape.x<=point[0]&&point[0]<=shape.x+shape.width&&shape.y<=point[1]&&point[1]<=shape.y+shape.height){targetInfo={node:node,offsetX:point[0],offsetY:point[1]}}else{return false}}},this);return targetInfo}});function createStorage(){return{nodeGroup:[],background:[],content:[]}}function renderNode(seriesModel,thisStorage,oldStorage,reRoot,lastsForAnimation,willInvisibleEls,thisNode,oldNode,parentGroup,depth){if(!thisNode){return}var thisLayout=thisNode.getLayout();if(!thisLayout||!thisLayout.isInView){return}var thisWidth=thisLayout.width;var thisHeight=thisLayout.height;var borderWidth=thisLayout.borderWidth;var thisInvisible=thisLayout.invisible;var thisRawIndex=thisNode.getRawIndex();var oldRawIndex=oldNode&&oldNode.getRawIndex();var thisViewChildren=thisNode.viewChildren;var upperHeight=thisLayout.upperHeight;var isParent=thisViewChildren&&thisViewChildren.length;var itemStyleEmphasisModel=thisNode.getModel("itemStyle.emphasis");var group=giveGraphic("nodeGroup",Group);if(!group){return}parentGroup.add(group);group.attr("position",[thisLayout.x||0,thisLayout.y||0]);group.__tmNodeWidth=thisWidth;
group.__tmNodeHeight=thisHeight;if(thisLayout.isAboveViewRoot){return group}var bg=giveGraphic("background",Rect,depth,Z_BG);bg&&renderBackground(group,bg,isParent&&thisLayout.upperHeight);if(!isParent){var content=giveGraphic("content",Rect,depth,Z_CONTENT);content&&renderContent(group,content)}return group;function renderBackground(group,bg,useUpperLabel){bg.dataIndex=thisNode.dataIndex;bg.seriesIndex=seriesModel.seriesIndex;bg.setShape({x:0,y:0,width:thisWidth,height:thisHeight});var visualBorderColor=thisNode.getVisual("borderColor",true);var emphasisBorderColor=itemStyleEmphasisModel.get("borderColor");updateStyle(bg,function(){var normalStyle={fill:visualBorderColor};var emphasisStyle={fill:emphasisBorderColor};if(useUpperLabel){var upperLabelWidth=thisWidth-2*borderWidth;prepareText(normalStyle,emphasisStyle,visualBorderColor,upperLabelWidth,upperHeight,{x:borderWidth,y:0,width:upperLabelWidth,height:upperHeight})}else{normalStyle.text=emphasisStyle.text=null}bg.setStyle(normalStyle);graphic.setHoverStyle(bg,emphasisStyle)});group.add(bg)}function renderContent(group,content){content.dataIndex=thisNode.dataIndex;content.seriesIndex=seriesModel.seriesIndex;var contentWidth=Math.max(thisWidth-2*borderWidth,0);var contentHeight=Math.max(thisHeight-2*borderWidth,0);content.culling=true;content.setShape({x:borderWidth,y:borderWidth,width:contentWidth,height:contentHeight});var visualColor=thisNode.getVisual("color",true);updateStyle(content,function(){var normalStyle={fill:visualColor};var emphasisStyle=itemStyleEmphasisModel.getItemStyle();prepareText(normalStyle,emphasisStyle,visualColor,contentWidth,contentHeight);content.setStyle(normalStyle);graphic.setHoverStyle(content,emphasisStyle)});group.add(content)}function updateStyle(element,cb){if(!thisInvisible){cb();if(!element.__tmWillVisible){element.invisible=false}}else{!element.invisible&&willInvisibleEls.push(element)}}function prepareText(normalStyle,emphasisStyle,visualColor,width,height,upperLabelRect){var nodeModel=thisNode.getModel();var text=zrUtil.retrieve(seriesModel.getFormattedLabel(thisNode.dataIndex,"normal",null,null,upperLabelRect?"upperLabel":"label"),nodeModel.get("name"));if(!upperLabelRect&&thisLayout.isLeafRoot){var iconChar=seriesModel.get("drillDownIcon",true);text=iconChar?iconChar+" "+text:text}var normalLabelModel=nodeModel.getModel(upperLabelRect?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL);var emphasisLabelModel=nodeModel.getModel(upperLabelRect?PATH_UPPERLABEL_EMPHASIS:PATH_LABEL_EMPHASIS);var isShow=normalLabelModel.getShallow("show");graphic.setLabelStyle(normalStyle,emphasisStyle,normalLabelModel,emphasisLabelModel,{defaultText:isShow?text:null,autoColor:visualColor,isRectText:true});upperLabelRect&&(normalStyle.textRect=zrUtil.clone(upperLabelRect));normalStyle.truncate=(isShow&&normalLabelModel.get("ellipsis"))?{outerWidth:width,outerHeight:height,minChar:2}:null}function giveGraphic(storageName,Ctor,depth,z){var element=oldRawIndex!=null&&oldStorage[storageName][oldRawIndex];var lasts=lastsForAnimation[storageName];if(element){oldStorage[storageName][oldRawIndex]=null;prepareAnimationWhenHasOld(lasts,element,storageName)}else{if(!thisInvisible){element=new Ctor({z:calculateZ(depth,z)});element.__tmDepth=depth;element.__tmStorageName=storageName;prepareAnimationWhenNoOld(lasts,element,storageName)}}return(thisStorage[storageName][thisRawIndex]=element)}function prepareAnimationWhenHasOld(lasts,element,storageName){var lastCfg=lasts[thisRawIndex]={};lastCfg.old=storageName==="nodeGroup"?element.position.slice():zrUtil.extend({},element.shape)}function prepareAnimationWhenNoOld(lasts,element,storageName){var lastCfg=lasts[thisRawIndex]={};var parentNode=thisNode.parentNode;if(parentNode&&(!reRoot||reRoot.direction==="drillDown")){var parentOldX=0;var parentOldY=0;var parentOldBg=lastsForAnimation.background[parentNode.getRawIndex()];if(!reRoot&&parentOldBg&&parentOldBg.old){parentOldX=parentOldBg.old.width;parentOldY=parentOldBg.old.height}lastCfg.old=storageName==="nodeGroup"?[0,parentOldY]:{x:parentOldX,y:parentOldY,width:0,height:0}}lastCfg.fadein=storageName!=="nodeGroup"}}function calculateZ(depth,zInLevel){var zb=depth*Z_BASE+zInLevel;return(zb-1)/zb}}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var layout=__webpack_require__(74);var zrUtil=__webpack_require__(4);var helper=__webpack_require__(200);var TEXT_PADDING=8;var ITEM_GAP=8;var ARRAY_LENGTH=5;function Breadcrumb(containerGroup){this.group=new graphic.Group();containerGroup.add(this.group)}Breadcrumb.prototype={constructor:Breadcrumb,render:function(seriesModel,api,targetNode,onSelect){var model=seriesModel.getModel("breadcrumb");var thisGroup=this.group;thisGroup.removeAll();if(!model.get("show")||!targetNode){return}var normalStyleModel=model.getModel("itemStyle.normal");var textStyleModel=normalStyleModel.getModel("textStyle");var layoutParam={pos:{left:model.get("left"),right:model.get("right"),top:model.get("top"),bottom:model.get("bottom")},box:{width:api.getWidth(),height:api.getHeight()},emptyItemWidth:model.get("emptyItemWidth"),totalWidth:0,renderList:[]};
this._prepare(targetNode,layoutParam,textStyleModel);this._renderContent(seriesModel,layoutParam,normalStyleModel,textStyleModel,onSelect);layout.positionElement(thisGroup,layoutParam.pos,layoutParam.box)},_prepare:function(targetNode,layoutParam,textStyleModel){for(var node=targetNode;node;node=node.parentNode){var text=node.getModel().get("name");var textRect=textStyleModel.getTextRect(text);var itemWidth=Math.max(textRect.width+TEXT_PADDING*2,layoutParam.emptyItemWidth);layoutParam.totalWidth+=itemWidth+ITEM_GAP;layoutParam.renderList.push({node:node,text:text,width:itemWidth})}},_renderContent:function(seriesModel,layoutParam,normalStyleModel,textStyleModel,onSelect){var lastX=0;var emptyItemWidth=layoutParam.emptyItemWidth;var height=seriesModel.get("breadcrumb.height");var availableSize=layout.getAvailableSize(layoutParam.pos,layoutParam.box);var totalWidth=layoutParam.totalWidth;var renderList=layoutParam.renderList;for(var i=renderList.length-1;i>=0;i--){var item=renderList[i];var itemNode=item.node;var itemWidth=item.width;var text=item.text;if(totalWidth>availableSize.width){totalWidth-=itemWidth-emptyItemWidth;itemWidth=emptyItemWidth;text=null}var el=new graphic.Polygon({shape:{points:makeItemPoints(lastX,0,itemWidth,height,i===renderList.length-1,i===0)},style:zrUtil.defaults(normalStyleModel.getItemStyle(),{lineJoin:"bevel",text:text,textFill:textStyleModel.getTextColor(),textFont:textStyleModel.getFont()}),z:10,onclick:zrUtil.curry(onSelect,itemNode)});this.group.add(el);packEventData(el,seriesModel,itemNode);lastX+=itemWidth+ITEM_GAP}},remove:function(){this.group.removeAll()}};function makeItemPoints(x,y,itemWidth,itemHeight,head,tail){var points=[[head?x:x-ARRAY_LENGTH,y],[x+itemWidth,y],[x+itemWidth,y+itemHeight],[head?x:x-ARRAY_LENGTH,y+itemHeight]];!tail&&points.splice(2,0,[x+itemWidth+ARRAY_LENGTH,y+itemHeight/2]);!head&&points.push([x,y+itemHeight/2]);return points}function packEventData(el,seriesModel,itemNode){el.eventData={componentType:"series",componentSubType:"treemap",seriesIndex:seriesModel.componentIndex,seriesName:seriesModel.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:itemNode&&itemNode.dataIndex,name:itemNode&&itemNode.name},treePathInfo:itemNode&&helper.wrapTreePathInfo(itemNode,seriesModel)}}module.exports=Breadcrumb}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);function createWrap(){var storage=[];var elExistsMap={};var doneCallback;return{add:function(el,target,time,delay,easing){if(zrUtil.isString(delay)){easing=delay;delay=0}if(elExistsMap[el.id]){return false}elExistsMap[el.id]=1;storage.push({el:el,target:target,time:time,delay:delay,easing:easing});return true},done:function(callback){doneCallback=callback;return this},start:function(){var count=storage.length;for(var i=0,len=storage.length;i<len;i++){var item=storage[i];item.el.animateTo(item.target,item.time,item.delay,item.easing,done)}return this;function done(){count--;if(!count){storage.length=0;elExistsMap={};doneCallback&&doneCallback()}}}}}module.exports={createWrap:createWrap}}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);var helper=__webpack_require__(200);var noop=function(){};var actionTypes=["treemapZoomToNode","treemapRender","treemapMove"];for(var i=0;i<actionTypes.length;i++){echarts.registerAction({type:actionTypes[i],update:"updateView"},noop)}echarts.registerAction({type:"treemapRootToNode",update:"updateView"},function(payload,ecModel){ecModel.eachComponent({mainType:"series",subType:"treemap",query:payload},handleRootToNode);function handleRootToNode(model,index){var targetInfo=helper.retrieveTargetInfo(payload,model);if(targetInfo){var originViewRoot=model.getViewRoot();if(originViewRoot){payload.direction=helper.aboveViewRoot(originViewRoot,targetInfo.node)?"rollUp":"drillDown"}model.resetViewRoot(targetInfo.node)}}})}),(function(module,exports,__webpack_require__){var VisualMapping=__webpack_require__(206);var zrColor=__webpack_require__(33);var zrUtil=__webpack_require__(4);var isArray=zrUtil.isArray;var ITEM_STYLE_NORMAL="itemStyle.normal";module.exports=function(ecModel,api,payload){var condition={mainType:"series",subType:"treemap",query:payload};ecModel.eachComponent(condition,function(seriesModel){var tree=seriesModel.getData().tree;var root=tree.root;var seriesItemStyleModel=seriesModel.getModel(ITEM_STYLE_NORMAL);if(root.isRemoved()){return}var levelItemStyles=zrUtil.map(tree.levelModels,function(levelModel){return levelModel?levelModel.get(ITEM_STYLE_NORMAL):null});travelTree(root,{},levelItemStyles,seriesItemStyleModel,seriesModel.getViewRoot().getAncestors(),seriesModel)})};function travelTree(node,designatedVisual,levelItemStyles,seriesItemStyleModel,viewRootAncestors,seriesModel){var nodeModel=node.getModel();var nodeLayout=node.getLayout();if(!nodeLayout||nodeLayout.invisible||!nodeLayout.isInView){return}var nodeItemStyleModel=node.getModel(ITEM_STYLE_NORMAL);var levelItemStyle=levelItemStyles[node.depth];
var visuals=buildVisuals(nodeItemStyleModel,designatedVisual,levelItemStyle,seriesItemStyleModel);var borderColor=nodeItemStyleModel.get("borderColor");var borderColorSaturation=nodeItemStyleModel.get("borderColorSaturation");var thisNodeColor;if(borderColorSaturation!=null){thisNodeColor=calculateColor(visuals,node);borderColor=calculateBorderColor(borderColorSaturation,thisNodeColor)}node.setVisual("borderColor",borderColor);var viewChildren=node.viewChildren;if(!viewChildren||!viewChildren.length){thisNodeColor=calculateColor(visuals,node);node.setVisual("color",thisNodeColor)}else{var mapping=buildVisualMapping(node,nodeModel,nodeLayout,nodeItemStyleModel,visuals,viewChildren);zrUtil.each(viewChildren,function(child,index){if(child.depth>=viewRootAncestors.length||child===viewRootAncestors[child.depth]){var childVisual=mapVisual(nodeModel,visuals,child,index,mapping,seriesModel);travelTree(child,childVisual,levelItemStyles,seriesItemStyleModel,viewRootAncestors,seriesModel)}})}}function buildVisuals(nodeItemStyleModel,designatedVisual,levelItemStyle,seriesItemStyleModel){var visuals=zrUtil.extend({},designatedVisual);zrUtil.each(["color","colorAlpha","colorSaturation"],function(visualName){var val=nodeItemStyleModel.get(visualName,true);val==null&&levelItemStyle&&(val=levelItemStyle[visualName]);val==null&&(val=designatedVisual[visualName]);val==null&&(val=seriesItemStyleModel.get(visualName));val!=null&&(visuals[visualName]=val)});return visuals}function calculateColor(visuals){var color=getValueVisualDefine(visuals,"color");if(color){var colorAlpha=getValueVisualDefine(visuals,"colorAlpha");var colorSaturation=getValueVisualDefine(visuals,"colorSaturation");if(colorSaturation){color=zrColor.modifyHSL(color,null,null,colorSaturation)}if(colorAlpha){color=zrColor.modifyAlpha(color,colorAlpha)}return color}}function calculateBorderColor(borderColorSaturation,thisNodeColor){return thisNodeColor!=null?zrColor.modifyHSL(thisNodeColor,null,null,borderColorSaturation):null}function getValueVisualDefine(visuals,name){var value=visuals[name];if(value!=null&&value!=="none"){return value}}function buildVisualMapping(node,nodeModel,nodeLayout,nodeItemStyleModel,visuals,viewChildren){if(!viewChildren||!viewChildren.length){return}var rangeVisual=getRangeVisual(nodeModel,"color")||(visuals.color!=null&&visuals.color!=="none"&&(getRangeVisual(nodeModel,"colorAlpha")||getRangeVisual(nodeModel,"colorSaturation")));if(!rangeVisual){return}var visualMin=nodeModel.get("visualMin");var visualMax=nodeModel.get("visualMax");var dataExtent=nodeLayout.dataExtent.slice();visualMin!=null&&visualMin<dataExtent[0]&&(dataExtent[0]=visualMin);visualMax!=null&&visualMax>dataExtent[1]&&(dataExtent[1]=visualMax);var colorMappingBy=nodeModel.get("colorMappingBy");var opt={type:rangeVisual.name,dataExtent:dataExtent,visual:rangeVisual.range};if(opt.type==="color"&&(colorMappingBy==="index"||colorMappingBy==="id")){opt.mappingMethod="category";opt.loop=true}else{opt.mappingMethod="linear"}var mapping=new VisualMapping(opt);mapping.__drColorMappingBy=colorMappingBy;return mapping}function getRangeVisual(nodeModel,name){var range=nodeModel.get(name);return(isArray(range)&&range.length)?{name:name,range:range}:null}function mapVisual(nodeModel,visuals,child,index,mapping,seriesModel){var childVisuals=zrUtil.extend({},visuals);if(mapping){var mappingType=mapping.type;var colorMappingBy=mappingType==="color"&&mapping.__drColorMappingBy;var value=colorMappingBy==="index"?index:colorMappingBy==="id"?seriesModel.mapIdToIndex(child.getId()):child.getValue(nodeModel.get("visualDimension"));childVisuals[mappingType]=mapping.mapValueToVisual(value)}return childVisuals}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var zrColor=__webpack_require__(33);var linearMap=__webpack_require__(7).linearMap;var each=zrUtil.each;var isObject=zrUtil.isObject;var CATEGORY_DEFAULT_VISUAL_INDEX=-1;var VisualMapping=function(option){var mappingMethod=option.mappingMethod;var visualType=option.type;var thisOption=this.option=zrUtil.clone(option);this.type=visualType;this.mappingMethod=mappingMethod;this._normalizeData=normalizers[mappingMethod];var visualHandler=visualHandlers[visualType];this.applyVisual=visualHandler.applyVisual;this.getColorMapper=visualHandler.getColorMapper;this._doMap=visualHandler._doMap[mappingMethod];if(mappingMethod==="piecewise"){normalizeVisualRange(thisOption);preprocessForPiecewise(thisOption)}else{if(mappingMethod==="category"){thisOption.categories?preprocessForSpecifiedCategory(thisOption):normalizeVisualRange(thisOption,true)}else{zrUtil.assert(mappingMethod!=="linear"||thisOption.dataExtent);normalizeVisualRange(thisOption)}}};VisualMapping.prototype={constructor:VisualMapping,mapValueToVisual:function(value){var normalized=this._normalizeData(value);return this._doMap(normalized,value)},getNormalizer:function(){return zrUtil.bind(this._normalizeData,this)}};var visualHandlers=VisualMapping.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var thisOption=this.option;
return zrUtil.bind(thisOption.mappingMethod==="category"?function(value,isNormalized){!isNormalized&&(value=this._normalizeData(value));return doMapCategory.call(this,value)}:function(value,isNormalized,out){var returnRGBArray=!!out;!isNormalized&&(value=this._normalizeData(value));out=zrColor.fastLerp(value,thisOption.parsedVisual,out);return returnRGBArray?out:zrColor.stringify(out,"rgba")},this)},_doMap:{linear:function(normalized){return zrColor.stringify(zrColor.fastLerp(normalized,this.option.parsedVisual),"rgba")},category:doMapCategory,piecewise:function(normalized,value){var result=getSpecifiedVisual.call(this,value);if(result==null){result=zrColor.stringify(zrColor.fastLerp(normalized,this.option.parsedVisual),"rgba")}return result},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(color,value){return zrColor.modifyHSL(color,value)}),colorSaturation:makePartialColorVisualHandler(function(color,value){return zrColor.modifyHSL(color,null,value)}),colorLightness:makePartialColorVisualHandler(function(color,value){return zrColor.modifyHSL(color,null,null,value)}),colorAlpha:makePartialColorVisualHandler(function(color,value){return zrColor.modifyAlpha(color,value)}),opacity:{applyVisual:makeApplyVisual("opacity"),_doMap:makeDoMap([0,1])},symbol:{applyVisual:function(value,getter,setter){var symbolCfg=this.mapValueToVisual(value);if(zrUtil.isString(symbolCfg)){setter("symbol",symbolCfg)}else{if(isObject(symbolCfg)){for(var name in symbolCfg){if(symbolCfg.hasOwnProperty(name)){setter(name,symbolCfg[name])}}}}},_doMap:{linear:doMapToArray,category:doMapCategory,piecewise:function(normalized,value){var result=getSpecifiedVisual.call(this,value);if(result==null){result=doMapToArray.call(this,normalized)}return result},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_doMap:makeDoMap([0,1])}};function preprocessForPiecewise(thisOption){var pieceList=thisOption.pieceList;thisOption.hasSpecialVisual=false;zrUtil.each(pieceList,function(piece,index){piece.originIndex=index;if(piece.visual!=null){thisOption.hasSpecialVisual=true}})}function preprocessForSpecifiedCategory(thisOption){var categories=thisOption.categories;var visual=thisOption.visual;var categoryMap=thisOption.categoryMap={};each(categories,function(cate,index){categoryMap[cate]=index});if(!zrUtil.isArray(visual)){var visualArr=[];if(zrUtil.isObject(visual)){each(visual,function(v,cate){var index=categoryMap[cate];visualArr[index!=null?index:CATEGORY_DEFAULT_VISUAL_INDEX]=v})}else{visualArr[CATEGORY_DEFAULT_VISUAL_INDEX]=visual}visual=setVisualToOption(thisOption,visualArr)}for(var i=categories.length-1;i>=0;i--){if(visual[i]==null){delete categoryMap[categories[i]];categories.pop()}}}function normalizeVisualRange(thisOption,isCategory){var visual=thisOption.visual;var visualArr=[];if(zrUtil.isObject(visual)){each(visual,function(v){visualArr.push(v)})}else{if(visual!=null){visualArr.push(visual)}}var doNotNeedPair={color:1,symbol:1};if(!isCategory&&visualArr.length===1&&!doNotNeedPair.hasOwnProperty(thisOption.type)){visualArr[1]=visualArr[0]}setVisualToOption(thisOption,visualArr)}function makePartialColorVisualHandler(applyValue){return{applyVisual:function(value,getter,setter){value=this.mapValueToVisual(value);setter("color",applyValue(getter("color"),value))},_doMap:makeDoMap([0,1])}}function doMapToArray(normalized){var visual=this.option.visual;return visual[Math.round(linearMap(normalized,[0,1],[0,visual.length-1],true))]||{}}function makeApplyVisual(visualType){return function(value,getter,setter){setter(visualType,this.mapValueToVisual(value))}}function doMapCategory(normalized){var visual=this.option.visual;return visual[(this.option.loop&&normalized!==CATEGORY_DEFAULT_VISUAL_INDEX)?normalized%visual.length:normalized]}function doMapFixed(){return this.option.visual[0]}function makeDoMap(sourceExtent){return{linear:function(normalized){return linearMap(normalized,sourceExtent,this.option.visual,true)},category:doMapCategory,piecewise:function(normalized,value){var result=getSpecifiedVisual.call(this,value);if(result==null){result=linearMap(normalized,sourceExtent,this.option.visual,true)}return result},fixed:doMapFixed}}function getSpecifiedVisual(value){var thisOption=this.option;var pieceList=thisOption.pieceList;if(thisOption.hasSpecialVisual){var pieceIndex=VisualMapping.findPieceIndex(value,pieceList);var piece=pieceList[pieceIndex];if(piece&&piece.visual){return piece.visual[this.type]}}}function setVisualToOption(thisOption,visualArr){thisOption.visual=visualArr;if(thisOption.type==="color"){thisOption.parsedVisual=zrUtil.map(visualArr,function(item){return zrColor.parse(item)})}return visualArr}var normalizers={linear:function(value){return linearMap(value,this.option.dataExtent,[0,1],true)},piecewise:function(value){var pieceList=this.option.pieceList;var pieceIndex=VisualMapping.findPieceIndex(value,pieceList,true);if(pieceIndex!=null){return linearMap(pieceIndex,[0,pieceList.length-1],[0,1],true)
}},category:function(value){var index=this.option.categories?this.option.categoryMap[value]:value;return index==null?CATEGORY_DEFAULT_VISUAL_INDEX:index},fixed:zrUtil.noop};VisualMapping.listVisualTypes=function(){var visualTypes=[];zrUtil.each(visualHandlers,function(handler,key){visualTypes.push(key)});return visualTypes};VisualMapping.addVisualHandler=function(name,handler){visualHandlers[name]=handler};VisualMapping.isValidType=function(visualType){return visualHandlers.hasOwnProperty(visualType)};VisualMapping.eachVisual=function(visual,callback,context){if(zrUtil.isObject(visual)){zrUtil.each(visual,callback,context)}else{callback.call(context,visual)}};VisualMapping.mapVisual=function(visual,callback,context){var isPrimary;var newVisual=zrUtil.isArray(visual)?[]:zrUtil.isObject(visual)?{}:(isPrimary=true,null);VisualMapping.eachVisual(visual,function(v,key){var newVal=callback.call(context,v,key);isPrimary?(newVisual=newVal):(newVisual[key]=newVal)});return newVisual};VisualMapping.retrieveVisuals=function(obj){var ret={};var hasVisual;obj&&each(visualHandlers,function(h,visualType){if(obj.hasOwnProperty(visualType)){ret[visualType]=obj[visualType];hasVisual=true}});return hasVisual?ret:null};VisualMapping.prepareVisualTypes=function(visualTypes){if(isObject(visualTypes)){var types=[];each(visualTypes,function(item,type){types.push(type)});visualTypes=types}else{if(zrUtil.isArray(visualTypes)){visualTypes=visualTypes.slice()}else{return[]}}visualTypes.sort(function(type1,type2){return(type2==="color"&&type1!=="color"&&type1.indexOf("color")===0)?1:-1});return visualTypes};VisualMapping.dependsOn=function(visualType1,visualType2){return visualType2==="color"?!!(visualType1&&visualType1.indexOf(visualType2)===0):visualType1===visualType2};VisualMapping.findPieceIndex=function(value,pieceList,findClosestWhenOutside){var possibleI;var abs=Infinity;for(var i=0,len=pieceList.length;i<len;i++){var pieceValue=pieceList[i].value;if(pieceValue!=null){if(pieceValue===value||(typeof pieceValue==="string"&&pieceValue===value+"")){return i}findClosestWhenOutside&&updatePossible(pieceValue,i)}}for(var i=0,len=pieceList.length;i<len;i++){var piece=pieceList[i];var interval=piece.interval;var close=piece.close;if(interval){if(interval[0]===-Infinity){if(littleThan(close[1],value,interval[1])){return i}}else{if(interval[1]===Infinity){if(littleThan(close[0],interval[0],value)){return i}}else{if(littleThan(close[0],interval[0],value)&&littleThan(close[1],value,interval[1])){return i}}}findClosestWhenOutside&&updatePossible(interval[0],i);findClosestWhenOutside&&updatePossible(interval[1],i)}}if(findClosestWhenOutside){return value===Infinity?pieceList.length-1:value===-Infinity?0:possibleI}function updatePossible(val,index){var newAbs=Math.abs(val-value);if(newAbs<abs){abs=newAbs;possibleI=index}}};function littleThan(close,a,b){return close?a<=b:a<b}module.exports=VisualMapping}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var numberUtil=__webpack_require__(7);var layout=__webpack_require__(74);var helper=__webpack_require__(200);var BoundingRect=__webpack_require__(9);var helper=__webpack_require__(200);var mathMax=Math.max;var mathMin=Math.min;var parsePercent=numberUtil.parsePercent;var retrieveValue=zrUtil.retrieve;var each=zrUtil.each;var PATH_BORDER_WIDTH=["itemStyle","normal","borderWidth"];var PATH_GAP_WIDTH=["itemStyle","normal","gapWidth"];var PATH_UPPER_LABEL_SHOW=["upperLabel","normal","show"];var PATH_UPPER_LABEL_HEIGHT=["upperLabel","normal","height"];function update(ecModel,api,payload){var condition={mainType:"series",subType:"treemap",query:payload};ecModel.eachComponent(condition,function(seriesModel){var ecWidth=api.getWidth();var ecHeight=api.getHeight();var seriesOption=seriesModel.option;var layoutInfo=layout.getLayoutRect(seriesModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()});var size=seriesOption.size||[];var containerWidth=parsePercent(retrieveValue(layoutInfo.width,size[0]),ecWidth);var containerHeight=parsePercent(retrieveValue(layoutInfo.height,size[1]),ecHeight);var payloadType=payload&&payload.type;var targetInfo=helper.retrieveTargetInfo(payload,seriesModel);var rootRect=(payloadType==="treemapRender"||payloadType==="treemapMove")?payload.rootRect:null;var viewRoot=seriesModel.getViewRoot();var viewAbovePath=helper.getPathToRoot(viewRoot);if(payloadType!=="treemapMove"){var rootSize=payloadType==="treemapZoomToNode"?estimateRootSize(seriesModel,targetInfo,viewRoot,containerWidth,containerHeight):rootRect?[rootRect.width,rootRect.height]:[containerWidth,containerHeight];var sort=seriesOption.sort;if(sort&&sort!=="asc"&&sort!=="desc"){sort="desc"}var options={squareRatio:seriesOption.squareRatio,sort:sort,leafDepth:seriesOption.leafDepth};viewRoot.hostTree.clearLayouts();var viewRootLayout={x:0,y:0,width:rootSize[0],height:rootSize[1],area:rootSize[0]*rootSize[1]};viewRoot.setLayout(viewRootLayout);squarify(viewRoot,options,false,0);
var viewRootLayout=viewRoot.getLayout();each(viewAbovePath,function(node,index){var childValue=(viewAbovePath[index+1]||viewRoot).getValue();node.setLayout(zrUtil.extend({dataExtent:[childValue,childValue],borderWidth:0,upperHeight:0},viewRootLayout))})}var treeRoot=seriesModel.getData().tree.root;treeRoot.setLayout(calculateRootPosition(layoutInfo,rootRect,targetInfo),true);seriesModel.setLayoutInfo(layoutInfo);prunning(treeRoot,new BoundingRect(-layoutInfo.x,-layoutInfo.y,ecWidth,ecHeight),viewAbovePath,viewRoot,0)})}function squarify(node,options,hideChildren,depth){var width;var height;if(node.isRemoved()){return}var thisLayout=node.getLayout();width=thisLayout.width;height=thisLayout.height;var nodeModel=node.getModel();var borderWidth=nodeModel.get(PATH_BORDER_WIDTH);var halfGapWidth=nodeModel.get(PATH_GAP_WIDTH)/2;var upperLabelHeight=getUpperLabelHeight(nodeModel);var upperHeight=Math.max(borderWidth,upperLabelHeight);var layoutOffset=borderWidth-halfGapWidth;var layoutOffsetUpper=upperHeight-halfGapWidth;var nodeModel=node.getModel();node.setLayout({borderWidth:borderWidth,upperHeight:upperHeight,upperLabelHeight:upperLabelHeight},true);width=mathMax(width-2*layoutOffset,0);height=mathMax(height-layoutOffset-layoutOffsetUpper,0);var totalArea=width*height;var viewChildren=initChildren(node,nodeModel,totalArea,options,hideChildren,depth);if(!viewChildren.length){return}var rect={x:layoutOffset,y:layoutOffsetUpper,width:width,height:height};var rowFixedLength=mathMin(width,height);var best=Infinity;var row=[];row.area=0;for(var i=0,len=viewChildren.length;i<len;){var child=viewChildren[i];row.push(child);row.area+=child.getLayout().area;var score=worst(row,rowFixedLength,options.squareRatio);if(score<=best){i++;best=score}else{row.area-=row.pop().getLayout().area;position(row,rowFixedLength,rect,halfGapWidth,false);rowFixedLength=mathMin(rect.width,rect.height);row.length=row.area=0;best=Infinity}}if(row.length){position(row,rowFixedLength,rect,halfGapWidth,true)}if(!hideChildren){var childrenVisibleMin=nodeModel.get("childrenVisibleMin");if(childrenVisibleMin!=null&&totalArea<childrenVisibleMin){hideChildren=true}}for(var i=0,len=viewChildren.length;i<len;i++){squarify(viewChildren[i],options,hideChildren,depth+1)}}function initChildren(node,nodeModel,totalArea,options,hideChildren,depth){var viewChildren=node.children||[];var orderBy=options.sort;orderBy!=="asc"&&orderBy!=="desc"&&(orderBy=null);var overLeafDepth=options.leafDepth!=null&&options.leafDepth<=depth;if(hideChildren&&!overLeafDepth){return(node.viewChildren=[])}viewChildren=zrUtil.filter(viewChildren,function(child){return !child.isRemoved()});sort(viewChildren,orderBy);var info=statistic(nodeModel,viewChildren,orderBy);if(info.sum===0){return(node.viewChildren=[])}info.sum=filterByThreshold(nodeModel,totalArea,info.sum,orderBy,viewChildren);if(info.sum===0){return(node.viewChildren=[])}for(var i=0,len=viewChildren.length;i<len;i++){var area=viewChildren[i].getValue()/info.sum*totalArea;viewChildren[i].setLayout({area:area})}if(overLeafDepth){viewChildren.length&&node.setLayout({isLeafRoot:true},true);viewChildren.length=0}node.viewChildren=viewChildren;node.setLayout({dataExtent:info.dataExtent},true);return viewChildren}function filterByThreshold(nodeModel,totalArea,sum,orderBy,orderedChildren){if(!orderBy){return sum}var visibleMin=nodeModel.get("visibleMin");var len=orderedChildren.length;var deletePoint=len;for(var i=len-1;i>=0;i--){var value=orderedChildren[orderBy==="asc"?len-i-1:i].getValue();if(value/sum*totalArea<visibleMin){deletePoint=i;sum-=value}}orderBy==="asc"?orderedChildren.splice(0,len-deletePoint):orderedChildren.splice(deletePoint,len-deletePoint);return sum}function sort(viewChildren,orderBy){if(orderBy){viewChildren.sort(function(a,b){var diff=orderBy==="asc"?a.getValue()-b.getValue():b.getValue()-a.getValue();return diff===0?(orderBy==="asc"?a.dataIndex-b.dataIndex:b.dataIndex-a.dataIndex):diff})}return viewChildren}function statistic(nodeModel,children,orderBy){var sum=0;for(var i=0,len=children.length;i<len;i++){sum+=children[i].getValue()}var dimension=nodeModel.get("visualDimension");var dataExtent;if(!children||!children.length){dataExtent=[NaN,NaN]}else{if(dimension==="value"&&orderBy){dataExtent=[children[children.length-1].getValue(),children[0].getValue()];orderBy==="asc"&&dataExtent.reverse()}else{var dataExtent=[Infinity,-Infinity];each(children,function(child){var value=child.getValue(dimension);value<dataExtent[0]&&(dataExtent[0]=value);value>dataExtent[1]&&(dataExtent[1]=value)})}}return{sum:sum,dataExtent:dataExtent}}function worst(row,rowFixedLength,ratio){var areaMax=0;var areaMin=Infinity;for(var i=0,area,len=row.length;i<len;i++){area=row[i].getLayout().area;if(area){area<areaMin&&(areaMin=area);area>areaMax&&(areaMax=area)}}var squareArea=row.area*row.area;var f=rowFixedLength*rowFixedLength*ratio;return squareArea?mathMax((f*areaMax)/squareArea,squareArea/(f*areaMin)):Infinity}function position(row,rowFixedLength,rect,halfGapWidth,flush){var idx0WhenH=rowFixedLength===rect.width?0:1;
var idx1WhenH=1-idx0WhenH;var xy=["x","y"];var wh=["width","height"];var last=rect[xy[idx0WhenH]];var rowOtherLength=rowFixedLength?row.area/rowFixedLength:0;if(flush||rowOtherLength>rect[wh[idx1WhenH]]){rowOtherLength=rect[wh[idx1WhenH]]}for(var i=0,rowLen=row.length;i<rowLen;i++){var node=row[i];var nodeLayout={};var step=rowOtherLength?node.getLayout().area/rowOtherLength:0;var wh1=nodeLayout[wh[idx1WhenH]]=mathMax(rowOtherLength-2*halfGapWidth,0);var remain=rect[xy[idx0WhenH]]+rect[wh[idx0WhenH]]-last;var modWH=(i===rowLen-1||remain<step)?remain:step;var wh0=nodeLayout[wh[idx0WhenH]]=mathMax(modWH-2*halfGapWidth,0);nodeLayout[xy[idx1WhenH]]=rect[xy[idx1WhenH]]+mathMin(halfGapWidth,wh1/2);nodeLayout[xy[idx0WhenH]]=last+mathMin(halfGapWidth,wh0/2);last+=modWH;node.setLayout(nodeLayout,true)}rect[xy[idx1WhenH]]+=rowOtherLength;rect[wh[idx1WhenH]]-=rowOtherLength}function estimateRootSize(seriesModel,targetInfo,viewRoot,containerWidth,containerHeight){var currNode=(targetInfo||{}).node;var defaultSize=[containerWidth,containerHeight];if(!currNode||currNode===viewRoot){return defaultSize}var parent;var viewArea=containerWidth*containerHeight;var area=viewArea*seriesModel.option.zoomToNodeRatio;while(parent=currNode.parentNode){var sum=0;var siblings=parent.children;for(var i=0,len=siblings.length;i<len;i++){sum+=siblings[i].getValue()}var currNodeValue=currNode.getValue();if(currNodeValue===0){return defaultSize}area*=sum/currNodeValue;var parentModel=parent.getModel();var borderWidth=parentModel.get(PATH_BORDER_WIDTH);var upperHeight=Math.max(borderWidth,getUpperLabelHeight(parentModel,borderWidth));area+=4*borderWidth*borderWidth+(3*borderWidth+upperHeight)*Math.pow(area,0.5);area>numberUtil.MAX_SAFE_INTEGER&&(area=numberUtil.MAX_SAFE_INTEGER);currNode=parent}area<viewArea&&(area=viewArea);var scale=Math.pow(area/viewArea,0.5);return[containerWidth*scale,containerHeight*scale]}function calculateRootPosition(layoutInfo,rootRect,targetInfo){if(rootRect){return{x:rootRect.x,y:rootRect.y}}var defaultPosition={x:0,y:0};if(!targetInfo){return defaultPosition}var targetNode=targetInfo.node;var layout=targetNode.getLayout();if(!layout){return defaultPosition}var targetCenter=[layout.width/2,layout.height/2];var node=targetNode;while(node){var nodeLayout=node.getLayout();targetCenter[0]+=nodeLayout.x;targetCenter[1]+=nodeLayout.y;node=node.parentNode}return{x:layoutInfo.width/2-targetCenter[0],y:layoutInfo.height/2-targetCenter[1]}}function prunning(node,clipRect,viewAbovePath,viewRoot,depth){var nodeLayout=node.getLayout();var nodeInViewAbovePath=viewAbovePath[depth];var isAboveViewRoot=nodeInViewAbovePath&&nodeInViewAbovePath===node;if((nodeInViewAbovePath&&!isAboveViewRoot)||(depth===viewAbovePath.length&&node!==viewRoot)){return}node.setLayout({isInView:true,invisible:!isAboveViewRoot&&!clipRect.intersect(nodeLayout),isAboveViewRoot:isAboveViewRoot},true);var childClipRect=new BoundingRect(clipRect.x-nodeLayout.x,clipRect.y-nodeLayout.y,clipRect.width,clipRect.height);each(node.viewChildren||[],function(child){prunning(child,childClipRect,viewAbovePath,viewRoot,depth+1)})}function getUpperLabelHeight(model){return model.get(PATH_UPPER_LABEL_SHOW)?model.get(PATH_UPPER_LABEL_HEIGHT):0}module.exports=update}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);var zrUtil=__webpack_require__(4);__webpack_require__(209);__webpack_require__(212);__webpack_require__(217);echarts.registerProcessor(__webpack_require__(218));echarts.registerVisual(zrUtil.curry(__webpack_require__(124),"graph","circle",null));echarts.registerVisual(__webpack_require__(219));echarts.registerVisual(__webpack_require__(220));echarts.registerLayout(__webpack_require__(221));echarts.registerLayout(__webpack_require__(224));echarts.registerLayout(__webpack_require__(226));echarts.registerCoordinateSystem("graphView",{create:__webpack_require__(228)})}),(function(module,exports,__webpack_require__){var List=__webpack_require__(101);var zrUtil=__webpack_require__(4);var modelUtil=__webpack_require__(5);var Model=__webpack_require__(14);var formatUtil=__webpack_require__(6);var createGraphFromNodeEdge=__webpack_require__(210);var GraphSeries=__webpack_require__(1).extendSeriesModel({type:"series.graph",init:function(option){GraphSeries.superApply(this,"init",arguments);this.legendDataProvider=function(){return this._categoriesData};this.fillDataTextStyle(option.edges||option.links);this._updateCategoriesData()},mergeOption:function(option){GraphSeries.superApply(this,"mergeOption",arguments);this.fillDataTextStyle(option.edges||option.links);this._updateCategoriesData()},mergeDefaultAndTheme:function(option){GraphSeries.superApply(this,"mergeDefaultAndTheme",arguments);modelUtil.defaultEmphasis(option.edgeLabel,["show"])},getInitialData:function(option,ecModel){var edges=option.edges||option.links||[];var nodes=option.data||option.nodes||[];var self=this;if(nodes&&edges){return createGraphFromNodeEdge(nodes,edges,this,true,beforeLink).data
}function beforeLink(nodeData,edgeData){nodeData.wrapMethod("getItemModel",function(model){var categoriesModels=self._categoriesModels;var categoryIdx=model.getShallow("category");var categoryModel=categoriesModels[categoryIdx];if(categoryModel){categoryModel.parentModel=model.parentModel;model.parentModel=categoryModel}return model});var edgeLabelModel=self.getModel("edgeLabel");var fakeSeriesModel=new Model({label:edgeLabelModel.option},edgeLabelModel.parentModel,ecModel);edgeData.wrapMethod("getItemModel",function(model){model.customizeGetParent(edgeGetParent);return model});function edgeGetParent(path){path=this.parsePath(path);return(path&&path[0]==="label")?fakeSeriesModel:this.parentModel}}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(dataIndex,multipleSeries,dataType){if(dataType==="edge"){var nodeData=this.getData();var params=this.getDataParams(dataIndex,dataType);var edge=nodeData.graph.getEdgeByIndex(dataIndex);var sourceName=nodeData.getName(edge.node1.dataIndex);var targetName=nodeData.getName(edge.node2.dataIndex);var html=[];sourceName!=null&&html.push(sourceName);targetName!=null&&html.push(targetName);html=formatUtil.encodeHTML(html.join(" > "));if(params.value){html+=" : "+formatUtil.encodeHTML(params.value)}return html}else{return GraphSeries.superApply(this,"formatTooltip",arguments)}},_updateCategoriesData:function(){var categories=zrUtil.map(this.option.categories||[],function(category){return category.value!=null?category:zrUtil.extend({value:0},category)});var categoriesData=new List(["value"],this);categoriesData.initData(categories);this._categoriesData=categoriesData;this._categoriesModels=categoriesData.mapArray(function(idx){return categoriesData.getItemModel(idx,true)})},setZoom:function(zoom){this.option.zoom=zoom},setCenter:function(center){this.option.center=center},isAnimationEnabled:function(){return GraphSeries.superCall(this,"isAnimationEnabled")&&!(this.get("layout")==="force"&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:true,hoverAnimation:true,layout:null,focusNodeAdjacency:false,circular:{rotateLabel:false},force:{initLayout:null,repulsion:[0,50],gravity:0.1,edgeLength:30,layoutAnimation:true},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{normal:{position:"middle"},emphasis:{}},draggable:false,roam:false,center:null,zoom:1,nodeScaleRatio:0.6,label:{normal:{show:false,formatter:"{b}"},emphasis:{show:true}},itemStyle:{normal:{},emphasis:{}},lineStyle:{normal:{color:"#aaa",width:1,curveness:0,opacity:0.5},emphasis:{}}}});module.exports=GraphSeries}),(function(module,exports,__webpack_require__){var List=__webpack_require__(101);var Graph=__webpack_require__(211);var linkList=__webpack_require__(199);var completeDimensions=__webpack_require__(113);var CoordinateSystem=__webpack_require__(79);var zrUtil=__webpack_require__(4);var createListFromArray=__webpack_require__(112);module.exports=function(nodes,edges,hostModel,directed,beforeLink){var graph=new Graph(directed);for(var i=0;i<nodes.length;i++){graph.addNode(zrUtil.retrieve(nodes[i].id,nodes[i].name,i),i)}var linkNameList=[];var validEdges=[];var linkCount=0;for(var i=0;i<edges.length;i++){var link=edges[i];var source=link.source;var target=link.target;if(graph.addEdge(source,target,linkCount)){validEdges.push(link);linkNameList.push(zrUtil.retrieve(link.id,source+" > "+target));linkCount++}}var coordSys=hostModel.get("coordinateSystem");var nodeData;if(coordSys==="cartesian2d"||coordSys==="polar"){nodeData=createListFromArray(nodes,hostModel,hostModel.ecModel)}else{var coordSysCtor=CoordinateSystem.get(coordSys);var dimensionNames=completeDimensions(((coordSysCtor&&coordSysCtor.type!=="view")?(coordSysCtor.dimensions||[]):[]).concat(["value"]),nodes);nodeData=new List(dimensionNames,hostModel);nodeData.initData(nodes)}var edgeData=new List(["value"],hostModel);edgeData.initData(validEdges,linkNameList);beforeLink&&beforeLink(nodeData,edgeData);linkList({mainData:nodeData,struct:graph,structAttr:"graph",datas:{node:nodeData,edge:edgeData},datasAttr:{node:"data",edge:"edgeData"}});graph.update();return graph}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);function generateNodeKey(id){return"_EC_"+id}var Graph=function(directed){this._directed=directed||false;this.nodes=[];this.edges=[];this._nodesMap={};this._edgesMap={};this.data;this.edgeData};var graphProto=Graph.prototype;graphProto.type="graph";graphProto.isDirected=function(){return this._directed};graphProto.addNode=function(id,dataIndex){id=id||(""+dataIndex);var nodesMap=this._nodesMap;if(nodesMap[generateNodeKey(id)]){if(true){console.error("Graph nodes have duplicate name or id")}return}var node=new Node(id,dataIndex);node.hostGraph=this;this.nodes.push(node);
nodesMap[generateNodeKey(id)]=node;return node};graphProto.getNodeByIndex=function(dataIndex){var rawIdx=this.data.getRawIndex(dataIndex);return this.nodes[rawIdx]};graphProto.getNodeById=function(id){return this._nodesMap[generateNodeKey(id)]};graphProto.addEdge=function(n1,n2,dataIndex){var nodesMap=this._nodesMap;var edgesMap=this._edgesMap;if(typeof n1==="number"){n1=this.nodes[n1]}if(typeof n2==="number"){n2=this.nodes[n2]}if(!(n1 instanceof Node)){n1=nodesMap[generateNodeKey(n1)]}if(!(n2 instanceof Node)){n2=nodesMap[generateNodeKey(n2)]}if(!n1||!n2){return}var key=n1.id+"-"+n2.id;if(edgesMap[key]){return}var edge=new Edge(n1,n2,dataIndex);edge.hostGraph=this;if(this._directed){n1.outEdges.push(edge);n2.inEdges.push(edge)}n1.edges.push(edge);if(n1!==n2){n2.edges.push(edge)}this.edges.push(edge);edgesMap[key]=edge;return edge};graphProto.getEdgeByIndex=function(dataIndex){var rawIdx=this.edgeData.getRawIndex(dataIndex);return this.edges[rawIdx]};graphProto.getEdge=function(n1,n2){if(n1 instanceof Node){n1=n1.id}if(n2 instanceof Node){n2=n2.id}var edgesMap=this._edgesMap;if(this._directed){return edgesMap[n1+"-"+n2]}else{return edgesMap[n1+"-"+n2]||edgesMap[n2+"-"+n1]}};graphProto.eachNode=function(cb,context){var nodes=this.nodes;var len=nodes.length;for(var i=0;i<len;i++){if(nodes[i].dataIndex>=0){cb.call(context,nodes[i],i)}}};graphProto.eachEdge=function(cb,context){var edges=this.edges;var len=edges.length;for(var i=0;i<len;i++){if(edges[i].dataIndex>=0&&edges[i].node1.dataIndex>=0&&edges[i].node2.dataIndex>=0){cb.call(context,edges[i],i)}}};graphProto.breadthFirstTraverse=function(cb,startNode,direction,context){if(!(startNode instanceof Node)){startNode=this._nodesMap[generateNodeKey(startNode)]}if(!startNode){return}var edgeType=direction==="out"?"outEdges":(direction==="in"?"inEdges":"edges");for(var i=0;i<this.nodes.length;i++){this.nodes[i].__visited=false}if(cb.call(context,startNode,null)){return}var queue=[startNode];while(queue.length){var currentNode=queue.shift();var edges=currentNode[edgeType];for(var i=0;i<edges.length;i++){var e=edges[i];var otherNode=e.node1===currentNode?e.node2:e.node1;if(!otherNode.__visited){if(cb.call(context,otherNode,currentNode)){return}queue.push(otherNode);otherNode.__visited=true}}}};graphProto.update=function(){var data=this.data;var edgeData=this.edgeData;var nodes=this.nodes;var edges=this.edges;for(var i=0,len=nodes.length;i<len;i++){nodes[i].dataIndex=-1}for(var i=0,len=data.count();i<len;i++){nodes[data.getRawIndex(i)].dataIndex=i}edgeData.filterSelf(function(idx){var edge=edges[edgeData.getRawIndex(idx)];return edge.node1.dataIndex>=0&&edge.node2.dataIndex>=0});for(var i=0,len=edges.length;i<len;i++){edges[i].dataIndex=-1}for(var i=0,len=edgeData.count();i<len;i++){edges[edgeData.getRawIndex(i)].dataIndex=i}};graphProto.clone=function(){var graph=new Graph(this._directed);var nodes=this.nodes;var edges=this.edges;for(var i=0;i<nodes.length;i++){graph.addNode(nodes[i].id,nodes[i].dataIndex)}for(var i=0;i<edges.length;i++){var e=edges[i];graph.addEdge(e.node1.id,e.node2.id,e.dataIndex)}return graph};function Node(id,dataIndex){this.id=id==null?"":id;this.inEdges=[];this.outEdges=[];this.edges=[];this.hostGraph;this.dataIndex=dataIndex==null?-1:dataIndex}Node.prototype={constructor:Node,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(path){if(this.dataIndex<0){return}var graph=this.hostGraph;var itemModel=graph.data.getItemModel(this.dataIndex);return itemModel.getModel(path)}};function Edge(n1,n2,dataIndex){this.node1=n1;this.node2=n2;this.dataIndex=dataIndex==null?-1:dataIndex}Edge.prototype.getModel=function(path){if(this.dataIndex<0){return}var graph=this.hostGraph;var itemModel=graph.edgeData.getItemModel(this.dataIndex);return itemModel.getModel(path)};var createGraphDataProxyMixin=function(hostName,dataName){return{getValue:function(dimension){var data=this[hostName][dataName];return data.get(data.getDimension(dimension||"value"),this.dataIndex)},setVisual:function(key,value){this.dataIndex>=0&&this[hostName][dataName].setItemVisual(this.dataIndex,key,value)},getVisual:function(key,ignoreParent){return this[hostName][dataName].getItemVisual(this.dataIndex,key,ignoreParent)},setLayout:function(layout,merge){this.dataIndex>=0&&this[hostName][dataName].setItemLayout(this.dataIndex,layout,merge)},getLayout:function(){return this[hostName][dataName].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[hostName][dataName].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[hostName][dataName].getRawIndex(this.dataIndex)}}};zrUtil.mixin(Node,createGraphDataProxyMixin("hostGraph","data"));zrUtil.mixin(Edge,createGraphDataProxyMixin("hostGraph","edgeData"));Graph.Node=Node;Graph.Edge=Edge;module.exports=Graph}),(function(module,exports,__webpack_require__){var SymbolDraw=__webpack_require__(119);var LineDraw=__webpack_require__(213);
var RoamController=__webpack_require__(186);var roamHelper=__webpack_require__(188);var cursorHelper=__webpack_require__(189);var graphic=__webpack_require__(20);var adjustEdge=__webpack_require__(216);var zrUtil=__webpack_require__(4);var nodeOpacityPath=["itemStyle","normal","opacity"];var lineOpacityPath=["lineStyle","normal","opacity"];function getItemOpacity(item,opacityPath){return item.getVisual("opacity")||item.getModel().get(opacityPath)}function fadeOutItem(item,opacityPath,opacityRatio){var el=item.getGraphicEl();var opacity=getItemOpacity(item,opacityPath);if(opacityRatio!=null){opacity==null&&(opacity=1);opacity*=opacityRatio}el.downplay&&el.downplay();el.traverse(function(child){if(child.type!=="group"){child.setStyle("opacity",opacity)}})}function fadeInItem(item,opacityPath){var opacity=getItemOpacity(item,opacityPath);var el=item.getGraphicEl();el.highlight&&el.highlight();el.traverse(function(child){if(child.type!=="group"){child.setStyle("opacity",opacity)}})}__webpack_require__(1).extendChartView({type:"graph",init:function(ecModel,api){var symbolDraw=new SymbolDraw();var lineDraw=new LineDraw();var group=this.group;this._controller=new RoamController(api.getZr());this._controllerHost={target:group};group.add(symbolDraw.group);group.add(lineDraw.group);this._symbolDraw=symbolDraw;this._lineDraw=lineDraw;this._firstRender=true},render:function(seriesModel,ecModel,api){var coordSys=seriesModel.coordinateSystem;this._model=seriesModel;this._nodeScaleRatio=seriesModel.get("nodeScaleRatio");var symbolDraw=this._symbolDraw;var lineDraw=this._lineDraw;var group=this.group;if(coordSys.type==="view"){var groupNewProp={position:coordSys.position,scale:coordSys.scale};if(this._firstRender){group.attr(groupNewProp)}else{graphic.updateProps(group,groupNewProp,seriesModel)}}adjustEdge(seriesModel.getGraph(),this._getNodeGlobalScale(seriesModel));var data=seriesModel.getData();symbolDraw.updateData(data);var edgeData=seriesModel.getEdgeData();lineDraw.updateData(edgeData);this._updateNodeAndLinkScale();this._updateController(seriesModel,ecModel,api);clearTimeout(this._layoutTimeout);var forceLayout=seriesModel.forceLayout;var layoutAnimation=seriesModel.get("force.layoutAnimation");if(forceLayout){this._startForceLayoutIteration(forceLayout,layoutAnimation)}data.eachItemGraphicEl(function(el,idx){var itemModel=data.getItemModel(idx);el.off("drag").off("dragend");var draggable=data.getItemModel(idx).get("draggable");if(draggable){el.on("drag",function(){if(forceLayout){forceLayout.warmUp();!this._layouting&&this._startForceLayoutIteration(forceLayout,layoutAnimation);forceLayout.setFixed(idx);data.setItemLayout(idx,el.position)}},this).on("dragend",function(){if(forceLayout){forceLayout.setUnfixed(idx)}},this)}el.setDraggable(draggable&&forceLayout);el.off("mouseover",el.__focusNodeAdjacency);el.off("mouseout",el.__unfocusNodeAdjacency);if(itemModel.get("focusNodeAdjacency")){el.on("mouseover",el.__focusNodeAdjacency=function(){api.dispatchAction({type:"focusNodeAdjacency",seriesId:seriesModel.id,dataIndex:el.dataIndex})});el.on("mouseout",el.__unfocusNodeAdjacency=function(){api.dispatchAction({type:"unfocusNodeAdjacency",seriesId:seriesModel.id})})}},this);var circularRotateLabel=seriesModel.get("layout")==="circular"&&seriesModel.get("circular.rotateLabel");var cx=data.getLayout("cx");var cy=data.getLayout("cy");data.eachItemGraphicEl(function(el,idx){var symbolPath=el.getSymbolPath();if(circularRotateLabel){var pos=data.getItemLayout(idx);var rad=Math.atan2(pos[1]-cy,pos[0]-cx);if(rad<0){rad=Math.PI*2+rad}var isLeft=pos[0]<cx;if(isLeft){rad=rad-Math.PI}var textPosition=isLeft?"left":"right";symbolPath.setStyle({textRotation:-rad,textPosition:textPosition,textOrigin:"center"});symbolPath.hoverStyle&&(symbolPath.hoverStyle.textPosition=textPosition)}else{symbolPath.setStyle({textRotation:0})}});this._firstRender=false},dispose:function(){this._controller&&this._controller.dispose();this._controllerHost={}},focusNodeAdjacency:function(seriesModel,ecModel,api,payload){var data=this._model.getData();var dataIndex=payload.dataIndex;var el=data.getItemGraphicEl(dataIndex);if(!el){return}var graph=data.graph;var dataType=el.dataType;if(dataIndex!==null&&dataType!=="edge"){graph.eachNode(function(node){fadeOutItem(node,nodeOpacityPath,0.1)});graph.eachEdge(function(edge){fadeOutItem(edge,lineOpacityPath,0.1)});var node=graph.getNodeByIndex(dataIndex);fadeInItem(node,nodeOpacityPath);zrUtil.each(node.edges,function(edge){if(edge.dataIndex<0){return}fadeInItem(edge,lineOpacityPath);fadeInItem(edge.node1,nodeOpacityPath);fadeInItem(edge.node2,nodeOpacityPath)})}},unfocusNodeAdjacency:function(seriesModel,ecModel,api,payload){var graph=this._model.getData().graph;graph.eachNode(function(node){fadeOutItem(node,nodeOpacityPath)});graph.eachEdge(function(edge){fadeOutItem(edge,lineOpacityPath)})},_startForceLayoutIteration:function(forceLayout,layoutAnimation){var self=this;(function step(){forceLayout.step(function(stopped){self.updateLayout(self._model);
(self._layouting=!stopped)&&(layoutAnimation?(self._layoutTimeout=setTimeout(step,16)):step())})})()},_updateController:function(seriesModel,ecModel,api){var controller=this._controller;var controllerHost=this._controllerHost;var group=this.group;controller.setPointerChecker(function(e,x,y){var rect=group.getBoundingRect();rect.applyTransform(group.transform);return rect.contain(x,y)&&!cursorHelper.onIrrelevantElement(e,api,seriesModel)});if(seriesModel.coordinateSystem.type!=="view"){controller.disable();return}controller.enable(seriesModel.get("roam"));controllerHost.zoomLimit=seriesModel.get("scaleLimit");controllerHost.zoom=seriesModel.coordinateSystem.getZoom();controller.off("pan").off("zoom").on("pan",function(dx,dy){roamHelper.updateViewOnPan(controllerHost,dx,dy);api.dispatchAction({seriesId:seriesModel.id,type:"graphRoam",dx:dx,dy:dy})}).on("zoom",function(zoom,mouseX,mouseY){roamHelper.updateViewOnZoom(controllerHost,zoom,mouseX,mouseY);api.dispatchAction({seriesId:seriesModel.id,type:"graphRoam",zoom:zoom,originX:mouseX,originY:mouseY});this._updateNodeAndLinkScale();adjustEdge(seriesModel.getGraph(),this._getNodeGlobalScale(seriesModel));this._lineDraw.updateLayout()},this)},_updateNodeAndLinkScale:function(){var seriesModel=this._model;var data=seriesModel.getData();var nodeScale=this._getNodeGlobalScale(seriesModel);var invScale=[nodeScale,nodeScale];data.eachItemGraphicEl(function(el,idx){el.attr("scale",invScale)})},_getNodeGlobalScale:function(seriesModel){var coordSys=seriesModel.coordinateSystem;if(coordSys.type!=="view"){return 1}var nodeScaleRatio=this._nodeScaleRatio;var groupScale=coordSys.scale;var groupZoom=(groupScale&&groupScale[0])||1;var roamZoom=coordSys.getZoom();var nodeScale=(roamZoom-1)*nodeScaleRatio+1;return nodeScale/groupZoom},updateLayout:function(seriesModel){adjustEdge(seriesModel.getGraph(),this._getNodeGlobalScale(seriesModel));this._symbolDraw.updateLayout();this._lineDraw.updateLayout()},remove:function(ecModel,api){this._symbolDraw&&this._symbolDraw.remove();this._lineDraw&&this._lineDraw.remove()}})}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var LineGroup=__webpack_require__(214);function isPointNaN(pt){return isNaN(pt[0])||isNaN(pt[1])}function lineNeedsDraw(pts){return !isPointNaN(pts[0])&&!isPointNaN(pts[1])}function LineDraw(ctor){this._ctor=ctor||LineGroup;this.group=new graphic.Group()}var lineDrawProto=LineDraw.prototype;lineDrawProto.updateData=function(lineData){var oldLineData=this._lineData;var group=this.group;var LineCtor=this._ctor;var hostModel=lineData.hostModel;var seriesScope={lineStyle:hostModel.getModel("lineStyle.normal").getLineStyle(),hoverLineStyle:hostModel.getModel("lineStyle.emphasis").getLineStyle(),labelModel:hostModel.getModel("label.normal"),hoverLabelModel:hostModel.getModel("label.emphasis")};lineData.diff(oldLineData).add(function(idx){if(!lineNeedsDraw(lineData.getItemLayout(idx))){return}var lineGroup=new LineCtor(lineData,idx,seriesScope);lineData.setItemGraphicEl(idx,lineGroup);group.add(lineGroup)}).update(function(newIdx,oldIdx){var lineGroup=oldLineData.getItemGraphicEl(oldIdx);if(!lineNeedsDraw(lineData.getItemLayout(newIdx))){group.remove(lineGroup);return}if(!lineGroup){lineGroup=new LineCtor(lineData,newIdx,seriesScope)}else{lineGroup.updateData(lineData,newIdx,seriesScope)}lineData.setItemGraphicEl(newIdx,lineGroup);group.add(lineGroup)}).remove(function(idx){group.remove(oldLineData.getItemGraphicEl(idx))}).execute();this._lineData=lineData};lineDrawProto.updateLayout=function(){var lineData=this._lineData;lineData.eachItemGraphicEl(function(el,idx){el.updateLayout(lineData,idx)},this)};lineDrawProto.remove=function(){this.group.removeAll()};module.exports=LineDraw}),(function(module,exports,__webpack_require__){var symbolUtil=__webpack_require__(114);var vector=__webpack_require__(10);var LinePath=__webpack_require__(215);var graphic=__webpack_require__(20);var zrUtil=__webpack_require__(4);var numberUtil=__webpack_require__(7);var SYMBOL_CATEGORIES=["fromSymbol","toSymbol"];function makeSymbolTypeKey(symbolCategory){return"_"+symbolCategory+"Type"}function createSymbol(name,lineData,idx){var color=lineData.getItemVisual(idx,"color");var symbolType=lineData.getItemVisual(idx,name);var symbolSize=lineData.getItemVisual(idx,name+"Size");if(!symbolType||symbolType==="none"){return}if(!zrUtil.isArray(symbolSize)){symbolSize=[symbolSize,symbolSize]}var symbolPath=symbolUtil.createSymbol(symbolType,-symbolSize[0]/2,-symbolSize[1]/2,symbolSize[0],symbolSize[1],color);symbolPath.name=name;return symbolPath}function createLine(points){var line=new LinePath({name:"line"});setLinePoints(line.shape,points);return line}function setLinePoints(targetShape,points){var p1=points[0];var p2=points[1];var cp1=points[2];targetShape.x1=p1[0];targetShape.y1=p1[1];targetShape.x2=p2[0];targetShape.y2=p2[1];targetShape.percent=1;if(cp1){targetShape.cpx1=cp1[0];targetShape.cpy1=cp1[1]}else{targetShape.cpx1=NaN;
targetShape.cpy1=NaN}}function updateSymbolAndLabelBeforeLineUpdate(){var lineGroup=this;var symbolFrom=lineGroup.childOfName("fromSymbol");var symbolTo=lineGroup.childOfName("toSymbol");var label=lineGroup.childOfName("label");if(!symbolFrom&&!symbolTo&&label.ignore){return}var invScale=1;var parentNode=this.parent;while(parentNode){if(parentNode.scale){invScale/=parentNode.scale[0]}parentNode=parentNode.parent}var line=lineGroup.childOfName("line");if(!this.__dirty&&!line.__dirty){return}var percent=line.shape.percent;var fromPos=line.pointAt(0);var toPos=line.pointAt(percent);var d=vector.sub([],toPos,fromPos);vector.normalize(d,d);if(symbolFrom){symbolFrom.attr("position",fromPos);var tangent=line.tangentAt(0);symbolFrom.attr("rotation",Math.PI/2-Math.atan2(tangent[1],tangent[0]));symbolFrom.attr("scale",[invScale*percent,invScale*percent])}if(symbolTo){symbolTo.attr("position",toPos);var tangent=line.tangentAt(1);symbolTo.attr("rotation",-Math.PI/2-Math.atan2(tangent[1],tangent[0]));symbolTo.attr("scale",[invScale*percent,invScale*percent])}if(!label.ignore){label.attr("position",toPos);var textPosition;var textAlign;var textVerticalAlign;var distance=5*invScale;if(label.__position==="end"){textPosition=[d[0]*distance+toPos[0],d[1]*distance+toPos[1]];textAlign=d[0]>0.8?"left":(d[0]<-0.8?"right":"center");textVerticalAlign=d[1]>0.8?"top":(d[1]<-0.8?"bottom":"middle")}else{if(label.__position==="middle"){var halfPercent=percent/2;var tangent=line.tangentAt(halfPercent);var n=[tangent[1],-tangent[0]];var cp=line.pointAt(halfPercent);if(n[1]>0){n[0]=-n[0];n[1]=-n[1]}textPosition=[cp[0]+n[0]*distance,cp[1]+n[1]*distance];textAlign="center";textVerticalAlign="bottom";var rotation=-Math.atan2(tangent[1],tangent[0]);if(toPos[0]<fromPos[0]){rotation=Math.PI+rotation}label.attr("rotation",rotation)}else{textPosition=[-d[0]*distance+fromPos[0],-d[1]*distance+fromPos[1]];textAlign=d[0]>0.8?"right":(d[0]<-0.8?"left":"center");textVerticalAlign=d[1]>0.8?"bottom":(d[1]<-0.8?"top":"middle")}}label.attr({style:{textVerticalAlign:label.__verticalAlign||textVerticalAlign,textAlign:label.__textAlign||textAlign},position:textPosition,scale:[invScale,invScale]})}}function Line(lineData,idx,seriesScope){graphic.Group.call(this);this._createLine(lineData,idx,seriesScope)}var lineProto=Line.prototype;lineProto.beforeUpdate=updateSymbolAndLabelBeforeLineUpdate;lineProto._createLine=function(lineData,idx,seriesScope){var seriesModel=lineData.hostModel;var linePoints=lineData.getItemLayout(idx);var line=createLine(linePoints);line.shape.percent=0;graphic.initProps(line,{shape:{percent:1}},seriesModel,idx);this.add(line);var label=new graphic.Text({name:"label"});this.add(label);zrUtil.each(SYMBOL_CATEGORIES,function(symbolCategory){var symbol=createSymbol(symbolCategory,lineData,idx);this.add(symbol);this[makeSymbolTypeKey(symbolCategory)]=lineData.getItemVisual(idx,symbolCategory)},this);this._updateCommonStl(lineData,idx,seriesScope)};lineProto.updateData=function(lineData,idx,seriesScope){var seriesModel=lineData.hostModel;var line=this.childOfName("line");var linePoints=lineData.getItemLayout(idx);var target={shape:{}};setLinePoints(target.shape,linePoints);graphic.updateProps(line,target,seriesModel,idx);zrUtil.each(SYMBOL_CATEGORIES,function(symbolCategory){var symbolType=lineData.getItemVisual(idx,symbolCategory);var key=makeSymbolTypeKey(symbolCategory);if(this[key]!==symbolType){this.remove(this.childOfName(symbolCategory));var symbol=createSymbol(symbolCategory,lineData,idx);this.add(symbol)}this[key]=symbolType},this);this._updateCommonStl(lineData,idx,seriesScope)};lineProto._updateCommonStl=function(lineData,idx,seriesScope){var seriesModel=lineData.hostModel;var line=this.childOfName("line");var lineStyle=seriesScope&&seriesScope.lineStyle;var hoverLineStyle=seriesScope&&seriesScope.hoverLineStyle;var labelModel=seriesScope&&seriesScope.labelModel;var hoverLabelModel=seriesScope&&seriesScope.hoverLabelModel;if(!seriesScope||lineData.hasItemOption){var itemModel=lineData.getItemModel(idx);lineStyle=itemModel.getModel("lineStyle.normal").getLineStyle();hoverLineStyle=itemModel.getModel("lineStyle.emphasis").getLineStyle();labelModel=itemModel.getModel("label.normal");hoverLabelModel=itemModel.getModel("label.emphasis")}var visualColor=lineData.getItemVisual(idx,"color");var visualOpacity=zrUtil.retrieve3(lineData.getItemVisual(idx,"opacity"),lineStyle.opacity,1);line.useStyle(zrUtil.defaults({strokeNoScale:true,fill:"none",stroke:visualColor,opacity:visualOpacity},lineStyle));line.hoverStyle=hoverLineStyle;zrUtil.each(SYMBOL_CATEGORIES,function(symbolCategory){var symbol=this.childOfName(symbolCategory);if(symbol){symbol.setColor(visualColor);symbol.setStyle({opacity:visualOpacity})}},this);var showLabel=labelModel.getShallow("show");var hoverShowLabel=hoverLabelModel.getShallow("show");var label=this.childOfName("label");var defaultLabelColor;var defaultText;var normalText;var emphasisText;if(showLabel||hoverShowLabel){var rawVal=seriesModel.getRawValue(idx);
defaultText=rawVal==null?defaultText=lineData.getName(idx):isFinite(rawVal)?numberUtil.round(rawVal):rawVal;defaultLabelColor=visualColor||"#000";normalText=zrUtil.retrieve2(seriesModel.getFormattedLabel(idx,"normal",lineData.dataType),defaultText);emphasisText=zrUtil.retrieve2(seriesModel.getFormattedLabel(idx,"emphasis",lineData.dataType),normalText)}if(showLabel){var labelStyle=graphic.setTextStyle(label.style,labelModel,{text:normalText},{autoColor:defaultLabelColor});label.__textAlign=labelStyle.textAlign;label.__verticalAlign=labelStyle.textVerticalAlign;label.__position=labelModel.get("position")||"middle"}else{label.setStyle("text",null)}if(hoverShowLabel){label.hoverStyle={text:emphasisText,textFill:hoverLabelModel.getTextColor(true),fontStyle:hoverLabelModel.getShallow("fontStyle"),fontWeight:hoverLabelModel.getShallow("fontWeight"),fontSize:hoverLabelModel.getShallow("fontSize"),fontFamily:hoverLabelModel.getShallow("fontFamily")}}else{label.hoverStyle={text:null}}label.ignore=!showLabel&&!hoverShowLabel;graphic.setHoverStyle(this)};lineProto.highlight=function(){this.trigger("emphasis")};lineProto.downplay=function(){this.trigger("normal")};lineProto.updateLayout=function(lineData,idx){this.setLinePoints(lineData.getItemLayout(idx))};lineProto.setLinePoints=function(points){var linePath=this.childOfName("line");setLinePoints(linePath.shape,points);linePath.dirty()};zrUtil.inherits(Line,graphic.Group);module.exports=Line}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var vec2=__webpack_require__(10);var straightLineProto=graphic.Line.prototype;var bezierCurveProto=graphic.BezierCurve.prototype;function isLine(shape){return isNaN(+shape.cpx1)||isNaN(+shape.cpy1)}module.exports=graphic.extendShape({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(ctx,shape){(isLine(shape)?straightLineProto:bezierCurveProto).buildPath(ctx,shape)},pointAt:function(t){return isLine(this.shape)?straightLineProto.pointAt.call(this,t):bezierCurveProto.pointAt.call(this,t)},tangentAt:function(t){var shape=this.shape;var p=isLine(shape)?[shape.x2-shape.x1,shape.y2-shape.y1]:bezierCurveProto.tangentAt.call(this,t);return vec2.normalize(p,p)}})}),(function(module,exports,__webpack_require__){var curveTool=__webpack_require__(40);var vec2=__webpack_require__(10);var v1=[];var v2=[];var v3=[];var quadraticAt=curveTool.quadraticAt;var v2DistSquare=vec2.distSquare;var mathAbs=Math.abs;function intersectCurveCircle(curvePoints,center,radius){var p0=curvePoints[0];var p1=curvePoints[1];var p2=curvePoints[2];var d=Infinity;var t;var radiusSquare=radius*radius;var interval=0.1;for(var _t=0.1;_t<=0.9;_t+=0.1){v1[0]=quadraticAt(p0[0],p1[0],p2[0],_t);v1[1]=quadraticAt(p0[1],p1[1],p2[1],_t);var diff=mathAbs(v2DistSquare(v1,center)-radiusSquare);if(diff<d){d=diff;t=_t}}for(var i=0;i<32;i++){var next=t+interval;v2[0]=quadraticAt(p0[0],p1[0],p2[0],t);v2[1]=quadraticAt(p0[1],p1[1],p2[1],t);v3[0]=quadraticAt(p0[0],p1[0],p2[0],next);v3[1]=quadraticAt(p0[1],p1[1],p2[1],next);var diff=v2DistSquare(v2,center)-radiusSquare;if(mathAbs(diff)<0.01){break}var nextDiff=v2DistSquare(v3,center)-radiusSquare;interval/=2;if(diff<0){if(nextDiff>=0){t=t+interval}else{t=t-interval}}else{if(nextDiff>=0){t=t-interval}else{t=t+interval}}}return t}module.exports=function(graph,scale){var tmp0=[];var quadraticSubdivide=curveTool.quadraticSubdivide;var pts=[[],[],[]];var pts2=[[],[]];var v=[];scale/=2;function getSymbolSize(node){var symbolSize=node.getVisual("symbolSize");if(symbolSize instanceof Array){symbolSize=(symbolSize[0]+symbolSize[1])/2}return symbolSize}graph.eachEdge(function(edge,idx){var linePoints=edge.getLayout();var fromSymbol=edge.getVisual("fromSymbol");var toSymbol=edge.getVisual("toSymbol");if(!linePoints.__original){linePoints.__original=[vec2.clone(linePoints[0]),vec2.clone(linePoints[1])];if(linePoints[2]){linePoints.__original.push(vec2.clone(linePoints[2]))}}var originalPoints=linePoints.__original;if(linePoints[2]!=null){vec2.copy(pts[0],originalPoints[0]);vec2.copy(pts[1],originalPoints[2]);vec2.copy(pts[2],originalPoints[1]);if(fromSymbol&&fromSymbol!="none"){var symbolSize=getSymbolSize(edge.node1);var t=intersectCurveCircle(pts,originalPoints[0],symbolSize*scale);quadraticSubdivide(pts[0][0],pts[1][0],pts[2][0],t,tmp0);pts[0][0]=tmp0[3];pts[1][0]=tmp0[4];quadraticSubdivide(pts[0][1],pts[1][1],pts[2][1],t,tmp0);pts[0][1]=tmp0[3];pts[1][1]=tmp0[4]}if(toSymbol&&toSymbol!="none"){var symbolSize=getSymbolSize(edge.node2);var t=intersectCurveCircle(pts,originalPoints[1],symbolSize*scale);quadraticSubdivide(pts[0][0],pts[1][0],pts[2][0],t,tmp0);pts[1][0]=tmp0[1];pts[2][0]=tmp0[2];quadraticSubdivide(pts[0][1],pts[1][1],pts[2][1],t,tmp0);pts[1][1]=tmp0[1];pts[2][1]=tmp0[2]}vec2.copy(linePoints[0],pts[0]);vec2.copy(linePoints[1],pts[2]);vec2.copy(linePoints[2],pts[1])}else{vec2.copy(pts2[0],originalPoints[0]);vec2.copy(pts2[1],originalPoints[1]);
vec2.sub(v,pts2[1],pts2[0]);vec2.normalize(v,v);if(fromSymbol&&fromSymbol!="none"){var symbolSize=getSymbolSize(edge.node1);vec2.scaleAndAdd(pts2[0],pts2[0],v,symbolSize*scale)}if(toSymbol&&toSymbol!="none"){var symbolSize=getSymbolSize(edge.node2);vec2.scaleAndAdd(pts2[1],pts2[1],v,-symbolSize*scale)}vec2.copy(linePoints[0],pts2[0]);vec2.copy(linePoints[1],pts2[1])}})}}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);var roamHelper=__webpack_require__(191);var actionInfo={type:"graphRoam",event:"graphRoam",update:"none"};echarts.registerAction(actionInfo,function(payload,ecModel){ecModel.eachComponent({mainType:"series",query:payload},function(seriesModel){var coordSys=seriesModel.coordinateSystem;var res=roamHelper.updateCenterAndZoom(coordSys,payload);seriesModel.setCenter&&seriesModel.setCenter(res.center);seriesModel.setZoom&&seriesModel.setZoom(res.zoom)})});echarts.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series.graph:focusNodeAdjacency"},function(){});echarts.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series.graph:unfocusNodeAdjacency"},function(){})}),(function(module,exports){module.exports=function(ecModel){var legendModels=ecModel.findComponents({mainType:"legend"});if(!legendModels||!legendModels.length){return}ecModel.eachSeriesByType("graph",function(graphSeries){var categoriesData=graphSeries.getCategoriesData();var graph=graphSeries.getGraph();var data=graph.data;var categoryNames=categoriesData.mapArray(categoriesData.getName);data.filterSelf(function(idx){var model=data.getItemModel(idx);var category=model.getShallow("category");if(category!=null){if(typeof category==="number"){category=categoryNames[category]}for(var i=0;i<legendModels.length;i++){if(!legendModels[i].isSelected(category)){return false}}}return true})},this)}}),(function(module,exports){module.exports=function(ecModel){var paletteScope={};ecModel.eachSeriesByType("graph",function(seriesModel){var categoriesData=seriesModel.getCategoriesData();var data=seriesModel.getData();var categoryNameIdxMap={};categoriesData.each(function(idx){var name=categoriesData.getName(idx);categoryNameIdxMap["ec-"+name]=idx;var itemModel=categoriesData.getItemModel(idx);var color=itemModel.get("itemStyle.normal.color")||seriesModel.getColorFromPalette(name,paletteScope);categoriesData.setItemVisual(idx,"color",color)});if(categoriesData.count()){data.each(function(idx){var model=data.getItemModel(idx);var category=model.getShallow("category");if(category!=null){if(typeof category==="string"){category=categoryNameIdxMap["ec-"+category]}if(!data.getItemVisual(idx,"color",true)){data.setItemVisual(idx,"color",categoriesData.getItemVisual(category,"color"))}}})}})}}),(function(module,exports){function normalize(a){if(!(a instanceof Array)){a=[a,a]}return a}module.exports=function(ecModel){ecModel.eachSeriesByType("graph",function(seriesModel){var graph=seriesModel.getGraph();var edgeData=seriesModel.getEdgeData();var symbolType=normalize(seriesModel.get("edgeSymbol"));var symbolSize=normalize(seriesModel.get("edgeSymbolSize"));var colorQuery="lineStyle.normal.color".split(".");var opacityQuery="lineStyle.normal.opacity".split(".");edgeData.setVisual("fromSymbol",symbolType&&symbolType[0]);edgeData.setVisual("toSymbol",symbolType&&symbolType[1]);edgeData.setVisual("fromSymbolSize",symbolSize&&symbolSize[0]);edgeData.setVisual("toSymbolSize",symbolSize&&symbolSize[1]);edgeData.setVisual("color",seriesModel.get(colorQuery));edgeData.setVisual("opacity",seriesModel.get(opacityQuery));edgeData.each(function(idx){var itemModel=edgeData.getItemModel(idx);var edge=graph.getEdgeByIndex(idx);var symbolType=normalize(itemModel.getShallow("symbol",true));var symbolSize=normalize(itemModel.getShallow("symbolSize",true));var color=itemModel.get(colorQuery);var opacity=itemModel.get(opacityQuery);switch(color){case"source":color=edge.node1.getVisual("color");break;case"target":color=edge.node2.getVisual("color");break}symbolType[0]&&edge.setVisual("fromSymbol",symbolType[0]);symbolType[1]&&edge.setVisual("toSymbol",symbolType[1]);symbolSize[0]&&edge.setVisual("fromSymbolSize",symbolSize[0]);symbolSize[1]&&edge.setVisual("toSymbolSize",symbolSize[1]);edge.setVisual("color",color);edge.setVisual("opacity",opacity)})})}}),(function(module,exports,__webpack_require__){var simpleLayoutHelper=__webpack_require__(222);var simpleLayoutEdge=__webpack_require__(223);module.exports=function(ecModel,api){ecModel.eachSeriesByType("graph",function(seriesModel){var layout=seriesModel.get("layout");var coordSys=seriesModel.coordinateSystem;if(coordSys&&coordSys.type!=="view"){var data=seriesModel.getData();var dimensions=coordSys.dimensions;data.each(dimensions,function(){var hasValue;var args=arguments;var value=[];for(var i=0;i<dimensions.length;i++){if(!isNaN(args[i])){hasValue=true}value.push(args[i])}var idx=args[args.length-1];if(hasValue){data.setItemLayout(idx,coordSys.dataToPoint(value))
}else{data.setItemLayout(idx,[NaN,NaN])}});simpleLayoutEdge(data.graph)}else{if(!layout||layout==="none"){simpleLayoutHelper(seriesModel)}}})}}),(function(module,exports,__webpack_require__){var simpleLayoutEdge=__webpack_require__(223);module.exports=function(seriesModel){var coordSys=seriesModel.coordinateSystem;if(coordSys&&coordSys.type!=="view"){return}var graph=seriesModel.getGraph();graph.eachNode(function(node){var model=node.getModel();node.setLayout([+model.get("x"),+model.get("y")])});simpleLayoutEdge(graph)}}),(function(module,exports,__webpack_require__){var vec2=__webpack_require__(10);module.exports=function(graph){graph.eachEdge(function(edge){var curveness=edge.getModel().get("lineStyle.normal.curveness")||0;var p1=vec2.clone(edge.node1.getLayout());var p2=vec2.clone(edge.node2.getLayout());var points=[p1,p2];if(+curveness){points.push([(p1[0]+p2[0])/2-(p1[1]-p2[1])*curveness,(p1[1]+p2[1])/2-(p2[0]-p1[0])*curveness])}edge.setLayout(points)})}}),(function(module,exports,__webpack_require__){var circularLayoutHelper=__webpack_require__(225);module.exports=function(ecModel){ecModel.eachSeriesByType("graph",function(seriesModel){if(seriesModel.get("layout")==="circular"){circularLayoutHelper(seriesModel)}})}}),(function(module,exports,__webpack_require__){var vec2=__webpack_require__(10);module.exports=function(seriesModel){var coordSys=seriesModel.coordinateSystem;if(coordSys&&coordSys.type!=="view"){return}var rect=coordSys.getBoundingRect();var nodeData=seriesModel.getData();var graph=nodeData.graph;var angle=0;var sum=nodeData.getSum("value");var unitAngle=Math.PI*2/(sum||nodeData.count());var cx=rect.width/2+rect.x;var cy=rect.height/2+rect.y;var r=Math.min(rect.width,rect.height)/2;graph.eachNode(function(node){var value=node.getValue("value");angle+=unitAngle*(sum?value:1)/2;node.setLayout([r*Math.cos(angle)+cx,r*Math.sin(angle)+cy]);angle+=unitAngle*(sum?value:1)/2});nodeData.setLayout({cx:cx,cy:cy});graph.eachEdge(function(edge){var curveness=edge.getModel().get("lineStyle.normal.curveness")||0;var p1=vec2.clone(edge.node1.getLayout());var p2=vec2.clone(edge.node2.getLayout());var cp1;var x12=(p1[0]+p2[0])/2;var y12=(p1[1]+p2[1])/2;if(+curveness){curveness*=3;cp1=[cx*curveness+x12*(1-curveness),cy*curveness+y12*(1-curveness)]}edge.setLayout([p1,p2,cp1])})}}),(function(module,exports,__webpack_require__){var forceHelper=__webpack_require__(227);var numberUtil=__webpack_require__(7);var simpleLayoutHelper=__webpack_require__(222);var circularLayoutHelper=__webpack_require__(225);var vec2=__webpack_require__(10);var zrUtil=__webpack_require__(4);module.exports=function(ecModel){ecModel.eachSeriesByType("graph",function(graphSeries){var coordSys=graphSeries.coordinateSystem;if(coordSys&&coordSys.type!=="view"){return}if(graphSeries.get("layout")==="force"){var preservedPoints=graphSeries.preservedPoints||{};var graph=graphSeries.getGraph();var nodeData=graph.data;var edgeData=graph.edgeData;var forceModel=graphSeries.getModel("force");var initLayout=forceModel.get("initLayout");if(graphSeries.preservedPoints){nodeData.each(function(idx){var id=nodeData.getId(idx);nodeData.setItemLayout(idx,preservedPoints[id]||[NaN,NaN])})}else{if(!initLayout||initLayout==="none"){simpleLayoutHelper(graphSeries)}else{if(initLayout==="circular"){circularLayoutHelper(graphSeries)}}}var nodeDataExtent=nodeData.getDataExtent("value");var edgeDataExtent=edgeData.getDataExtent("value");var repulsion=forceModel.get("repulsion");var edgeLength=forceModel.get("edgeLength");if(!zrUtil.isArray(repulsion)){repulsion=[repulsion,repulsion]}if(!zrUtil.isArray(edgeLength)){edgeLength=[edgeLength,edgeLength]}edgeLength=[edgeLength[1],edgeLength[0]];var nodes=nodeData.mapArray("value",function(value,idx){var point=nodeData.getItemLayout(idx);var rep=numberUtil.linearMap(value,nodeDataExtent,repulsion);if(isNaN(rep)){rep=(repulsion[0]+repulsion[1])/2}return{w:rep,rep:rep,fixed:nodeData.getItemModel(idx).get("fixed"),p:(!point||isNaN(point[0])||isNaN(point[1]))?null:point}});var edges=edgeData.mapArray("value",function(value,idx){var edge=graph.getEdgeByIndex(idx);var d=numberUtil.linearMap(value,edgeDataExtent,edgeLength);if(isNaN(d)){d=(edgeLength[0]+edgeLength[1])/2}return{n1:nodes[edge.node1.dataIndex],n2:nodes[edge.node2.dataIndex],d:d,curveness:edge.getModel().get("lineStyle.normal.curveness")||0}});var coordSys=graphSeries.coordinateSystem;var rect=coordSys.getBoundingRect();var forceInstance=forceHelper(nodes,edges,{rect:rect,gravity:forceModel.get("gravity")});var oldStep=forceInstance.step;forceInstance.step=function(cb){for(var i=0,l=nodes.length;i<l;i++){if(nodes[i].fixed){vec2.copy(nodes[i].p,graph.getNodeByIndex(i).getLayout())}}oldStep(function(nodes,edges,stopped){for(var i=0,l=nodes.length;i<l;i++){if(!nodes[i].fixed){graph.getNodeByIndex(i).setLayout(nodes[i].p)}preservedPoints[nodeData.getId(i)]=nodes[i].p}for(var i=0,l=edges.length;i<l;i++){var e=edges[i];var edge=graph.getEdgeByIndex(i);var p1=e.n1.p;var p2=e.n2.p;
var points=edge.getLayout();points=points?points.slice():[];points[0]=points[0]||[];points[1]=points[1]||[];vec2.copy(points[0],p1);vec2.copy(points[1],p2);if(+e.curveness){points[2]=[(p1[0]+p2[0])/2-(p1[1]-p2[1])*e.curveness,(p1[1]+p2[1])/2-(p2[0]-p1[0])*e.curveness]}edge.setLayout(points)}cb&&cb(stopped)})};graphSeries.forceLayout=forceInstance;graphSeries.preservedPoints=preservedPoints;forceInstance.step()}else{graphSeries.forceLayout=null}})}}),(function(module,exports,__webpack_require__){var vec2=__webpack_require__(10);var scaleAndAdd=vec2.scaleAndAdd;module.exports=function(nodes,edges,opts){var rect=opts.rect;var width=rect.width;var height=rect.height;var center=[rect.x+width/2,rect.y+height/2];var gravity=opts.gravity==null?0.1:opts.gravity;for(var i=0;i<nodes.length;i++){var n=nodes[i];if(!n.p){n.p=vec2.create(width*(Math.random()-0.5)+center[0],height*(Math.random()-0.5)+center[1])}n.pp=vec2.clone(n.p);n.edges=null}var friction=0.6;return{warmUp:function(){friction=0.5},setFixed:function(idx){nodes[idx].fixed=true},setUnfixed:function(idx){nodes[idx].fixed=false},step:function(cb){var v12=[];var nLen=nodes.length;for(var i=0;i<edges.length;i++){var e=edges[i];var n1=e.n1;var n2=e.n2;vec2.sub(v12,n2.p,n1.p);var d=vec2.len(v12)-e.d;var w=n2.w/(n1.w+n2.w);vec2.normalize(v12,v12);!n1.fixed&&scaleAndAdd(n1.p,n1.p,v12,w*d*friction);!n2.fixed&&scaleAndAdd(n2.p,n2.p,v12,-(1-w)*d*friction)}for(var i=0;i<nLen;i++){var n=nodes[i];if(!n.fixed){vec2.sub(v12,center,n.p);vec2.scaleAndAdd(n.p,n.p,v12,gravity*friction)}}for(var i=0;i<nLen;i++){var n1=nodes[i];for(var j=i+1;j<nLen;j++){var n2=nodes[j];vec2.sub(v12,n2.p,n1.p);var d=vec2.len(v12);if(d===0){vec2.set(v12,Math.random()-0.5,Math.random()-0.5);d=1}var repFact=(n1.rep+n2.rep)/d/d;!n1.fixed&&scaleAndAdd(n1.pp,n1.pp,v12,repFact);!n2.fixed&&scaleAndAdd(n2.pp,n2.pp,v12,-repFact)}}var v=[];for(var i=0;i<nLen;i++){var n=nodes[i];if(!n.fixed){vec2.sub(v,n.p,n.pp);vec2.scaleAndAdd(n.p,n.p,v,friction);vec2.copy(n.pp,n.p)}}friction=friction*0.992;cb&&cb(nodes,edges,friction<0.01)}}}}),(function(module,exports,__webpack_require__){var View=__webpack_require__(179);var layout=__webpack_require__(74);var bbox=__webpack_require__(41);function getViewRect(seriesModel,api,aspect){var option=seriesModel.getBoxLayoutParams();option.aspect=aspect;return layout.getLayoutRect(option,{width:api.getWidth(),height:api.getHeight()})}module.exports=function(ecModel,api){var viewList=[];ecModel.eachSeriesByType("graph",function(seriesModel){var coordSysType=seriesModel.get("coordinateSystem");if(!coordSysType||coordSysType==="view"){var data=seriesModel.getData();var positions=data.mapArray(function(idx){var itemModel=data.getItemModel(idx);return[+itemModel.get("x"),+itemModel.get("y")]});var min=[];var max=[];bbox.fromPoints(positions,min,max);if(max[0]-min[0]===0){max[0]+=1;min[0]-=1}if(max[1]-min[1]===0){max[1]+=1;min[1]-=1}var aspect=(max[0]-min[0])/(max[1]-min[1]);var viewRect=getViewRect(seriesModel,api,aspect);if(isNaN(aspect)){min=[viewRect.x,viewRect.y];max=[viewRect.x+viewRect.width,viewRect.y+viewRect.height]}var bbWidth=max[0]-min[0];var bbHeight=max[1]-min[1];var viewWidth=viewRect.width;var viewHeight=viewRect.height;var viewCoordSys=seriesModel.coordinateSystem=new View();viewCoordSys.zoomLimit=seriesModel.get("scaleLimit");viewCoordSys.setBoundingRect(min[0],min[1],bbWidth,bbHeight);viewCoordSys.setViewRect(viewRect.x,viewRect.y,viewWidth,viewHeight);viewCoordSys.setCenter(seriesModel.get("center"));viewCoordSys.setZoom(seriesModel.get("zoom"));viewList.push(viewCoordSys)}});return viewList}}),(function(module,exports,__webpack_require__){__webpack_require__(230);__webpack_require__(231)}),(function(module,exports,__webpack_require__){var List=__webpack_require__(101);var SeriesModel=__webpack_require__(83);var zrUtil=__webpack_require__(4);var GaugeSeries=SeriesModel.extend({type:"series.gauge",getInitialData:function(option,ecModel){var list=new List(["value"],this);var dataOpt=option.data||[];if(!zrUtil.isArray(dataOpt)){dataOpt=[dataOpt]}list.initData(dataOpt);return list},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:true,radius:"75%",startAngle:225,endAngle:-45,clockwise:true,min:0,max:100,splitNumber:10,axisLine:{show:true,lineStyle:{color:[[0.2,"#91c7ae"],[0.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:true,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:true,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:true,distance:5,color:"auto"},pointer:{show:true,length:"80%",width:8},itemStyle:{normal:{color:"auto"}},title:{show:true,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:true,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}});module.exports=GaugeSeries}),(function(module,exports,__webpack_require__){var PointerPath=__webpack_require__(232);var graphic=__webpack_require__(20);
var numberUtil=__webpack_require__(7);var parsePercent=numberUtil.parsePercent;function parsePosition(seriesModel,api){var center=seriesModel.get("center");var width=api.getWidth();var height=api.getHeight();var size=Math.min(width,height);var cx=parsePercent(center[0],api.getWidth());var cy=parsePercent(center[1],api.getHeight());var r=parsePercent(seriesModel.get("radius"),size/2);return{cx:cx,cy:cy,r:r}}function formatLabel(label,labelFormatter){if(labelFormatter){if(typeof labelFormatter==="string"){label=labelFormatter.replace("{value}",label!=null?label:"")}else{if(typeof labelFormatter==="function"){label=labelFormatter(label)}}}return label}var PI2=Math.PI*2;var GaugeView=__webpack_require__(85).extend({type:"gauge",render:function(seriesModel,ecModel,api){this.group.removeAll();var colorList=seriesModel.get("axisLine.lineStyle.color");var posInfo=parsePosition(seriesModel,api);this._renderMain(seriesModel,ecModel,api,colorList,posInfo)},dispose:function(){},_renderMain:function(seriesModel,ecModel,api,colorList,posInfo){var group=this.group;var axisLineModel=seriesModel.getModel("axisLine");var lineStyleModel=axisLineModel.getModel("lineStyle");var clockwise=seriesModel.get("clockwise");var startAngle=-seriesModel.get("startAngle")/180*Math.PI;var endAngle=-seriesModel.get("endAngle")/180*Math.PI;var angleRangeSpan=(endAngle-startAngle)%PI2;var prevEndAngle=startAngle;var axisLineWidth=lineStyleModel.get("width");for(var i=0;i<colorList.length;i++){var percent=Math.min(Math.max(colorList[i][0],0),1);var endAngle=startAngle+angleRangeSpan*percent;var sector=new graphic.Sector({shape:{startAngle:prevEndAngle,endAngle:endAngle,cx:posInfo.cx,cy:posInfo.cy,clockwise:clockwise,r0:posInfo.r-axisLineWidth,r:posInfo.r},silent:true});sector.setStyle({fill:colorList[i][1]});sector.setStyle(lineStyleModel.getLineStyle(["color","borderWidth","borderColor"]));group.add(sector);prevEndAngle=endAngle}var getColor=function(percent){if(percent<=0){return colorList[0][1]}for(var i=0;i<colorList.length;i++){if(colorList[i][0]>=percent&&(i===0?0:colorList[i-1][0])<percent){return colorList[i][1]}}return colorList[i-1][1]};if(!clockwise){var tmp=startAngle;startAngle=endAngle;endAngle=tmp}this._renderTicks(seriesModel,ecModel,api,getColor,posInfo,startAngle,endAngle,clockwise);this._renderPointer(seriesModel,ecModel,api,getColor,posInfo,startAngle,endAngle,clockwise);this._renderTitle(seriesModel,ecModel,api,getColor,posInfo);this._renderDetail(seriesModel,ecModel,api,getColor,posInfo)},_renderTicks:function(seriesModel,ecModel,api,getColor,posInfo,startAngle,endAngle,clockwise){var group=this.group;var cx=posInfo.cx;var cy=posInfo.cy;var r=posInfo.r;var minVal=+seriesModel.get("min");var maxVal=+seriesModel.get("max");var splitLineModel=seriesModel.getModel("splitLine");var tickModel=seriesModel.getModel("axisTick");var labelModel=seriesModel.getModel("axisLabel");var splitNumber=seriesModel.get("splitNumber");var subSplitNumber=tickModel.get("splitNumber");var splitLineLen=parsePercent(splitLineModel.get("length"),r);var tickLen=parsePercent(tickModel.get("length"),r);var angle=startAngle;var step=(endAngle-startAngle)/splitNumber;var subStep=step/subSplitNumber;var splitLineStyle=splitLineModel.getModel("lineStyle").getLineStyle();var tickLineStyle=tickModel.getModel("lineStyle").getLineStyle();for(var i=0;i<=splitNumber;i++){var unitX=Math.cos(angle);var unitY=Math.sin(angle);if(splitLineModel.get("show")){var splitLine=new graphic.Line({shape:{x1:unitX*r+cx,y1:unitY*r+cy,x2:unitX*(r-splitLineLen)+cx,y2:unitY*(r-splitLineLen)+cy},style:splitLineStyle,silent:true});if(splitLineStyle.stroke==="auto"){splitLine.setStyle({stroke:getColor(i/splitNumber)})}group.add(splitLine)}if(labelModel.get("show")){var label=formatLabel(numberUtil.round(i/splitNumber*(maxVal-minVal)+minVal),labelModel.get("formatter"));var distance=labelModel.get("distance");var autoColor=getColor(i/splitNumber);group.add(new graphic.Text({style:graphic.setTextStyle({},labelModel,{text:label,x:unitX*(r-splitLineLen-distance)+cx,y:unitY*(r-splitLineLen-distance)+cy,textVerticalAlign:unitY<-0.4?"top":(unitY>0.4?"bottom":"middle"),textAlign:unitX<-0.4?"left":(unitX>0.4?"right":"center")},{autoColor:autoColor}),silent:true}))}if(tickModel.get("show")&&i!==splitNumber){for(var j=0;j<=subSplitNumber;j++){var unitX=Math.cos(angle);var unitY=Math.sin(angle);var tickLine=new graphic.Line({shape:{x1:unitX*r+cx,y1:unitY*r+cy,x2:unitX*(r-tickLen)+cx,y2:unitY*(r-tickLen)+cy},silent:true,style:tickLineStyle});if(tickLineStyle.stroke==="auto"){tickLine.setStyle({stroke:getColor((i+j/subSplitNumber)/splitNumber)})}group.add(tickLine);angle+=subStep}angle-=subStep}else{angle+=step}}},_renderPointer:function(seriesModel,ecModel,api,getColor,posInfo,startAngle,endAngle,clockwise){var group=this.group;var oldData=this._data;if(!seriesModel.get("pointer.show")){oldData&&oldData.eachItemGraphicEl(function(el){group.remove(el)});return}var valueExtent=[+seriesModel.get("min"),+seriesModel.get("max")];
var angleExtent=[startAngle,endAngle];var data=seriesModel.getData();data.diff(oldData).add(function(idx){var pointer=new PointerPath({shape:{angle:startAngle}});graphic.initProps(pointer,{shape:{angle:numberUtil.linearMap(data.get("value",idx),valueExtent,angleExtent,true)}},seriesModel);group.add(pointer);data.setItemGraphicEl(idx,pointer)}).update(function(newIdx,oldIdx){var pointer=oldData.getItemGraphicEl(oldIdx);graphic.updateProps(pointer,{shape:{angle:numberUtil.linearMap(data.get("value",newIdx),valueExtent,angleExtent,true)}},seriesModel);group.add(pointer);data.setItemGraphicEl(newIdx,pointer)}).remove(function(idx){var pointer=oldData.getItemGraphicEl(idx);group.remove(pointer)}).execute();data.eachItemGraphicEl(function(pointer,idx){var itemModel=data.getItemModel(idx);var pointerModel=itemModel.getModel("pointer");pointer.setShape({x:posInfo.cx,y:posInfo.cy,width:parsePercent(pointerModel.get("width"),posInfo.r),r:parsePercent(pointerModel.get("length"),posInfo.r)});pointer.useStyle(itemModel.getModel("itemStyle.normal").getItemStyle());if(pointer.style.fill==="auto"){pointer.setStyle("fill",getColor(numberUtil.linearMap(data.get("value",idx),valueExtent,[0,1],true)))}graphic.setHoverStyle(pointer,itemModel.getModel("itemStyle.emphasis").getItemStyle())});this._data=data},_renderTitle:function(seriesModel,ecModel,api,getColor,posInfo){var titleModel=seriesModel.getModel("title");if(titleModel.get("show")){var offsetCenter=titleModel.get("offsetCenter");var x=posInfo.cx+parsePercent(offsetCenter[0],posInfo.r);var y=posInfo.cy+parsePercent(offsetCenter[1],posInfo.r);var minVal=+seriesModel.get("min");var maxVal=+seriesModel.get("max");var value=seriesModel.getData().get("value",0);var autoColor=getColor(numberUtil.linearMap(value,[minVal,maxVal],[0,1],true));this.group.add(new graphic.Text({silent:true,style:graphic.setTextStyle({},titleModel,{x:x,y:y,text:seriesModel.getData().getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:autoColor,forceRich:true})}))}},_renderDetail:function(seriesModel,ecModel,api,getColor,posInfo){var detailModel=seriesModel.getModel("detail");var minVal=+seriesModel.get("min");var maxVal=+seriesModel.get("max");if(detailModel.get("show")){var offsetCenter=detailModel.get("offsetCenter");var x=posInfo.cx+parsePercent(offsetCenter[0],posInfo.r);var y=posInfo.cy+parsePercent(offsetCenter[1],posInfo.r);var width=parsePercent(detailModel.get("width"),posInfo.r);var height=parsePercent(detailModel.get("height"),posInfo.r);var value=seriesModel.getData().get("value",0);var autoColor=getColor(numberUtil.linearMap(value,[minVal,maxVal],[0,1],true));this.group.add(new graphic.Text({silent:true,style:graphic.setTextStyle({},detailModel,{x:x,y:y,text:formatLabel(value,detailModel.get("formatter")),textWidth:isNaN(width)?null:width,textHeight:isNaN(height)?null:height,textAlign:"center",textVerticalAlign:"middle"},{autoColor:autoColor,forceRich:true})}))}}});module.exports=GaugeView}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(22).extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(ctx,shape){var mathCos=Math.cos;var mathSin=Math.sin;var r=shape.r;var width=shape.width;var angle=shape.angle;var x=shape.x-mathCos(angle)*width*(width>=r/3?1:2);var y=shape.y-mathSin(angle)*width*(width>=r/3?1:2);angle=shape.angle-Math.PI/2;ctx.moveTo(x,y);ctx.lineTo(shape.x+mathCos(angle)*width,shape.y+mathSin(angle)*width);ctx.lineTo(shape.x+mathCos(shape.angle)*r,shape.y+mathSin(shape.angle)*r);ctx.lineTo(shape.x-mathCos(angle)*width,shape.y-mathSin(angle)*width);ctx.lineTo(x,y);return}})}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var echarts=__webpack_require__(1);__webpack_require__(234);__webpack_require__(235);echarts.registerVisual(zrUtil.curry(__webpack_require__(154),"funnel"));echarts.registerLayout(__webpack_require__(236));echarts.registerProcessor(zrUtil.curry(__webpack_require__(157),"funnel"))}),(function(module,exports,__webpack_require__){var List=__webpack_require__(101);var modelUtil=__webpack_require__(5);var completeDimensions=__webpack_require__(113);var FunnelSeries=__webpack_require__(1).extendSeriesModel({type:"series.funnel",init:function(option){FunnelSeries.superApply(this,"init",arguments);this.legendDataProvider=function(){return this.getRawData()};this._defaultLabelLine(option)},getInitialData:function(option,ecModel){var dimensions=completeDimensions(["value"],option.data);var list=new List(dimensions,this);list.initData(option.data);return list},_defaultLabelLine:function(option){modelUtil.defaultEmphasis(option.labelLine,["show"]);var labelLineNormalOpt=option.labelLine.normal;var labelLineEmphasisOpt=option.labelLine.emphasis;labelLineNormalOpt.show=labelLineNormalOpt.show&&option.label.normal.show;labelLineEmphasisOpt.show=labelLineEmphasisOpt.show&&option.label.emphasis.show},getDataParams:function(dataIndex){var data=this.getData();
var params=FunnelSeries.superCall(this,"getDataParams",dataIndex);var sum=data.getSum("value");params.percent=!sum?0:+(data.get("value",dataIndex)/sum*100).toFixed(2);params.$vars.push("percent");return params},defaultOption:{zlevel:0,z:2,legendHoverLink:true,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",gap:0,funnelAlign:"center",label:{normal:{show:true,position:"outer"},emphasis:{show:true}},labelLine:{normal:{show:true,length:20,lineStyle:{width:1,type:"solid"}},emphasis:{}},itemStyle:{normal:{borderColor:"#fff",borderWidth:1},emphasis:{}}}});module.exports=FunnelSeries}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var zrUtil=__webpack_require__(4);function FunnelPiece(data,idx){graphic.Group.call(this);var polygon=new graphic.Polygon();var labelLine=new graphic.Polyline();var text=new graphic.Text();this.add(polygon);this.add(labelLine);this.add(text);this.updateData(data,idx,true);function onEmphasis(){labelLine.ignore=labelLine.hoverIgnore;text.ignore=text.hoverIgnore}function onNormal(){labelLine.ignore=labelLine.normalIgnore;text.ignore=text.normalIgnore}this.on("emphasis",onEmphasis).on("normal",onNormal).on("mouseover",onEmphasis).on("mouseout",onNormal)}var funnelPieceProto=FunnelPiece.prototype;var opacityAccessPath=["itemStyle","normal","opacity"];funnelPieceProto.updateData=function(data,idx,firstCreate){var polygon=this.childAt(0);var seriesModel=data.hostModel;var itemModel=data.getItemModel(idx);var layout=data.getItemLayout(idx);var opacity=data.getItemModel(idx).get(opacityAccessPath);opacity=opacity==null?1:opacity;polygon.useStyle({});if(firstCreate){polygon.setShape({points:layout.points});polygon.setStyle({opacity:0});graphic.initProps(polygon,{style:{opacity:opacity}},seriesModel,idx)}else{graphic.updateProps(polygon,{style:{opacity:opacity},shape:{points:layout.points}},seriesModel,idx)}var itemStyleModel=itemModel.getModel("itemStyle");var visualColor=data.getItemVisual(idx,"color");polygon.setStyle(zrUtil.defaults({lineJoin:"round",fill:visualColor},itemStyleModel.getModel("normal").getItemStyle(["opacity"])));polygon.hoverStyle=itemStyleModel.getModel("emphasis").getItemStyle();this._updateLabel(data,idx);graphic.setHoverStyle(this)};funnelPieceProto._updateLabel=function(data,idx){var labelLine=this.childAt(1);var labelText=this.childAt(2);var seriesModel=data.hostModel;var itemModel=data.getItemModel(idx);var layout=data.getItemLayout(idx);var labelLayout=layout.label;var visualColor=data.getItemVisual(idx,"color");graphic.updateProps(labelLine,{shape:{points:labelLayout.linePoints||labelLayout.linePoints}},seriesModel,idx);graphic.updateProps(labelText,{style:{x:labelLayout.x,y:labelLayout.y}},seriesModel,idx);labelText.attr({rotation:labelLayout.rotation,origin:[labelLayout.x,labelLayout.y],z2:10});var labelModel=itemModel.getModel("label.normal");var labelHoverModel=itemModel.getModel("label.emphasis");var labelLineModel=itemModel.getModel("labelLine.normal");var labelLineHoverModel=itemModel.getModel("labelLine.emphasis");var visualColor=data.getItemVisual(idx,"color");graphic.setLabelStyle(labelText.style,labelText.hoverStyle={},labelModel,labelHoverModel,{labelFetcher:data.hostModel,labelDataIndex:idx,defaultText:data.getName(idx),autoColor:visualColor,useInsideStyle:!!labelLayout.inside},{textAlign:labelLayout.textAlign,textVerticalAlign:labelLayout.verticalAlign});labelText.ignore=labelText.normalIgnore=!labelModel.get("show");labelText.hoverIgnore=!labelHoverModel.get("show");labelLine.ignore=labelLine.normalIgnore=!labelLineModel.get("show");labelLine.hoverIgnore=!labelLineHoverModel.get("show");labelLine.setStyle({stroke:visualColor});labelLine.setStyle(labelLineModel.getModel("lineStyle").getLineStyle());labelLine.hoverStyle=labelLineHoverModel.getModel("lineStyle").getLineStyle()};zrUtil.inherits(FunnelPiece,graphic.Group);var Funnel=__webpack_require__(85).extend({type:"funnel",render:function(seriesModel,ecModel,api){var data=seriesModel.getData();var oldData=this._data;var group=this.group;data.diff(oldData).add(function(idx){var funnelPiece=new FunnelPiece(data,idx);data.setItemGraphicEl(idx,funnelPiece);group.add(funnelPiece)}).update(function(newIdx,oldIdx){var piePiece=oldData.getItemGraphicEl(oldIdx);piePiece.updateData(data,newIdx);group.add(piePiece);data.setItemGraphicEl(newIdx,piePiece)}).remove(function(idx){var piePiece=oldData.getItemGraphicEl(idx);group.remove(piePiece)}).execute();this._data=data},remove:function(){this.group.removeAll();this._data=null},dispose:function(){}});module.exports=Funnel}),(function(module,exports,__webpack_require__){var layout=__webpack_require__(74);var number=__webpack_require__(7);var parsePercent=number.parsePercent;function getViewRect(seriesModel,api){return layout.getLayoutRect(seriesModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()})}function getSortedIndices(data,sort){var valueArr=data.mapArray("value",function(val){return val
});var indices=[];var isAscending=sort==="ascending";for(var i=0,len=data.count();i<len;i++){indices[i]=i}if(typeof sort==="function"){indices.sort(sort)}else{if(sort!=="none"){indices.sort(function(a,b){return isAscending?valueArr[a]-valueArr[b]:valueArr[b]-valueArr[a]})}}return indices}function labelLayout(data){data.each(function(idx){var itemModel=data.getItemModel(idx);var labelModel=itemModel.getModel("label.normal");var labelPosition=labelModel.get("position");var labelLineModel=itemModel.getModel("labelLine.normal");var layout=data.getItemLayout(idx);var points=layout.points;var isLabelInside=labelPosition==="inner"||labelPosition==="inside"||labelPosition==="center";var textAlign;var textX;var textY;var linePoints;if(isLabelInside){textX=(points[0][0]+points[1][0]+points[2][0]+points[3][0])/4;textY=(points[0][1]+points[1][1]+points[2][1]+points[3][1])/4;textAlign="center";linePoints=[[textX,textY],[textX,textY]]}else{var x1;var y1;var x2;var labelLineLen=labelLineModel.get("length");if(labelPosition==="left"){x1=(points[3][0]+points[0][0])/2;y1=(points[3][1]+points[0][1])/2;x2=x1-labelLineLen;textX=x2-5;textAlign="right"}else{x1=(points[1][0]+points[2][0])/2;y1=(points[1][1]+points[2][1])/2;x2=x1+labelLineLen;textX=x2+5;textAlign="left"}var y2=y1;linePoints=[[x1,y1],[x2,y2]];textY=y2}layout.label={linePoints:linePoints,x:textX,y:textY,verticalAlign:"middle",textAlign:textAlign,inside:isLabelInside}})}module.exports=function(ecModel,api,payload){ecModel.eachSeriesByType("funnel",function(seriesModel){var data=seriesModel.getData();var sort=seriesModel.get("sort");var viewRect=getViewRect(seriesModel,api);var indices=getSortedIndices(data,sort);var sizeExtent=[parsePercent(seriesModel.get("minSize"),viewRect.width),parsePercent(seriesModel.get("maxSize"),viewRect.width)];var dataExtent=data.getDataExtent("value");var min=seriesModel.get("min");var max=seriesModel.get("max");if(min==null){min=Math.min(dataExtent[0],0)}if(max==null){max=dataExtent[1]}var funnelAlign=seriesModel.get("funnelAlign");var gap=seriesModel.get("gap");var itemHeight=(viewRect.height-gap*(data.count()-1))/data.count();var y=viewRect.y;var getLinePoints=function(idx,offY){var val=data.get("value",idx)||0;var itemWidth=number.linearMap(val,[min,max],sizeExtent,true);var x0;switch(funnelAlign){case"left":x0=viewRect.x;break;case"center":x0=viewRect.x+(viewRect.width-itemWidth)/2;break;case"right":x0=viewRect.x+viewRect.width-itemWidth;break}return[[x0,offY],[x0+itemWidth,offY]]};if(sort==="ascending"){itemHeight=-itemHeight;gap=-gap;y+=viewRect.height;indices=indices.reverse()}for(var i=0;i<indices.length;i++){var idx=indices[i];var nextIdx=indices[i+1];var start=getLinePoints(idx,y);var end=getLinePoints(nextIdx,y+itemHeight);y+=itemHeight+gap;data.setItemLayout(idx,{points:start.concat(end.slice().reverse())})}labelLayout(data)})}}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);__webpack_require__(238);__webpack_require__(251);__webpack_require__(252);echarts.registerVisual(__webpack_require__(253))}),(function(module,exports,__webpack_require__){__webpack_require__(239);__webpack_require__(243);__webpack_require__(245);var echarts=__webpack_require__(1);var zrUtil=__webpack_require__(4);var throttle=__webpack_require__(86);var CLICK_THRESHOLD=5;echarts.extendComponentView({type:"parallel",render:function(parallelModel,ecModel,api){this._model=parallelModel;this._api=api;if(!this._handlers){this._handlers={};zrUtil.each(handlers,function(handler,eventName){api.getZr().on(eventName,this._handlers[eventName]=zrUtil.bind(handler,this))},this)}throttle.createOrUpdate(this,"_throttledDispatchExpand",parallelModel.get("axisExpandRate"),"fixRate")},dispose:function(ecModel,api){zrUtil.each(this._handlers,function(handler,eventName){api.getZr().off(eventName,handler)});this._handlers=null},_throttledDispatchExpand:function(opt){this._dispatchExpand(opt)},_dispatchExpand:function(opt){opt&&this._api.dispatchAction(zrUtil.extend({type:"parallelAxisExpand"},opt))}});var handlers={mousedown:function(e){if(checkTrigger(this,"click")){this._mouseDownPoint=[e.offsetX,e.offsetY]}},mouseup:function(e){var mouseDownPoint=this._mouseDownPoint;if(checkTrigger(this,"click")&&mouseDownPoint){var point=[e.offsetX,e.offsetY];var dist=Math.pow(mouseDownPoint[0]-point[0],2)+Math.pow(mouseDownPoint[1]-point[1],2);if(dist>CLICK_THRESHOLD){return}var result=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);result.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:result.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(this._mouseDownPoint||!checkTrigger(this,"mousemove")){return}var model=this._model;var result=model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);var behavior=result.behavior;behavior==="jump"&&this._throttledDispatchExpand.debounceNextCall(model.get("axisExpandDebounce"));this._throttledDispatchExpand(behavior==="none"?null:{axisExpandWindow:result.axisExpandWindow,animation:behavior==="jump"?null:false})
}};function checkTrigger(view,triggerOn){var model=view._model;return model.get("axisExpandable")&&model.get("axisExpandTriggerOn")===triggerOn}echarts.registerPreprocessor(__webpack_require__(250))}),(function(module,exports,__webpack_require__){var Parallel=__webpack_require__(240);function create(ecModel,api){var coordSysList=[];ecModel.eachComponent("parallel",function(parallelModel,idx){var coordSys=new Parallel(parallelModel,ecModel,api);coordSys.name="parallel_"+idx;coordSys.resize(parallelModel,api);parallelModel.coordinateSystem=coordSys;coordSys.model=parallelModel;coordSysList.push(coordSys)});ecModel.eachSeries(function(seriesModel){if(seriesModel.get("coordinateSystem")==="parallel"){var parallelModel=ecModel.queryComponents({mainType:"parallel",index:seriesModel.get("parallelIndex"),id:seriesModel.get("parallelId")})[0];seriesModel.coordinateSystem=parallelModel.coordinateSystem}});return coordSysList}__webpack_require__(79).register("parallel",{create:create})}),(function(module,exports,__webpack_require__){var layoutUtil=__webpack_require__(74);var axisHelper=__webpack_require__(104);var zrUtil=__webpack_require__(4);var ParallelAxis=__webpack_require__(241);var graphic=__webpack_require__(20);var matrix=__webpack_require__(11);var numberUtil=__webpack_require__(7);var sliderMove=__webpack_require__(242);var each=zrUtil.each;var mathMin=Math.min;var mathMax=Math.max;var mathFloor=Math.floor;var mathCeil=Math.ceil;var round=numberUtil.round;var PI=Math.PI;function Parallel(parallelModel,ecModel,api){this._axesMap=zrUtil.createHashMap();this._axesLayout={};this.dimensions=parallelModel.dimensions;this._rect;this._model=parallelModel;this._init(parallelModel,ecModel,api)}Parallel.prototype={type:"parallel",constructor:Parallel,_init:function(parallelModel,ecModel,api){var dimensions=parallelModel.dimensions;var parallelAxisIndex=parallelModel.parallelAxisIndex;each(dimensions,function(dim,idx){var axisIndex=parallelAxisIndex[idx];var axisModel=ecModel.getComponent("parallelAxis",axisIndex);var axis=this._axesMap.set(dim,new ParallelAxis(dim,axisHelper.createScaleByModel(axisModel),[0,0],axisModel.get("type"),axisIndex));var isCategory=axis.type==="category";axis.onBand=isCategory&&axisModel.get("boundaryGap");axis.inverse=axisModel.get("inverse");axisModel.axis=axis;axis.model=axisModel;axis.coordinateSystem=axisModel.coordinateSystem=this},this)},update:function(ecModel,api){this._updateAxesFromSeries(this._model,ecModel)},containPoint:function(point){var layoutInfo=this._makeLayoutInfo();var axisBase=layoutInfo.axisBase;var layoutBase=layoutInfo.layoutBase;var pixelDimIndex=layoutInfo.pixelDimIndex;var pAxis=point[1-pixelDimIndex];var pLayout=point[pixelDimIndex];return pAxis>=axisBase&&pAxis<=axisBase+layoutInfo.axisLength&&pLayout>=layoutBase&&pLayout<=layoutBase+layoutInfo.layoutLength},_updateAxesFromSeries:function(parallelModel,ecModel){ecModel.eachSeries(function(seriesModel){if(!parallelModel.contains(seriesModel,ecModel)){return}var data=seriesModel.getData();each(this.dimensions,function(dim){var axis=this._axesMap.get(dim);axis.scale.unionExtentFromData(data,dim);axisHelper.niceScaleExtent(axis.scale,axis.model)},this)},this)},resize:function(parallelModel,api){this._rect=layoutUtil.getLayoutRect(parallelModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()});this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var parallelModel=this._model;var rect=this._rect;var xy=["x","y"];var wh=["width","height"];var layout=parallelModel.get("layout");var pixelDimIndex=layout==="horizontal"?0:1;var layoutLength=rect[wh[pixelDimIndex]];var layoutExtent=[0,layoutLength];var axisCount=this.dimensions.length;var axisExpandWidth=restrict(parallelModel.get("axisExpandWidth"),layoutExtent);var axisExpandCount=restrict(parallelModel.get("axisExpandCount")||0,[0,axisCount]);var axisExpandable=parallelModel.get("axisExpandable")&&axisCount>3&&axisCount>axisExpandCount&&axisExpandCount>1&&axisExpandWidth>0&&layoutLength>0;var axisExpandWindow=parallelModel.get("axisExpandWindow");var winSize;if(!axisExpandWindow){winSize=restrict(axisExpandWidth*(axisExpandCount-1),layoutExtent);var axisExpandCenter=parallelModel.get("axisExpandCenter")||mathFloor(axisCount/2);axisExpandWindow=[axisExpandWidth*axisExpandCenter-winSize/2];axisExpandWindow[1]=axisExpandWindow[0]+winSize}else{winSize=restrict(axisExpandWindow[1]-axisExpandWindow[0],layoutExtent);axisExpandWindow[1]=axisExpandWindow[0]+winSize}var axisCollapseWidth=(layoutLength-winSize)/(axisCount-axisExpandCount);axisCollapseWidth<3&&(axisCollapseWidth=0);var winInnerIndices=[mathFloor(round(axisExpandWindow[0]/axisExpandWidth,1))+1,mathCeil(round(axisExpandWindow[1]/axisExpandWidth,1))-1];var axisExpandWindow0Pos=axisCollapseWidth/axisExpandWidth*axisExpandWindow[0];return{layout:layout,pixelDimIndex:pixelDimIndex,layoutBase:rect[xy[pixelDimIndex]],layoutLength:layoutLength,axisBase:rect[xy[1-pixelDimIndex]],axisLength:rect[wh[1-pixelDimIndex]],axisExpandable:axisExpandable,axisExpandWidth:axisExpandWidth,axisCollapseWidth:axisCollapseWidth,axisExpandWindow:axisExpandWindow,axisCount:axisCount,winInnerIndices:winInnerIndices,axisExpandWindow0Pos:axisExpandWindow0Pos}
},_layoutAxes:function(){var rect=this._rect;var axes=this._axesMap;var dimensions=this.dimensions;var layoutInfo=this._makeLayoutInfo();var layout=layoutInfo.layout;axes.each(function(axis){var axisExtent=[0,layoutInfo.axisLength];var idx=axis.inverse?1:0;axis.setExtent(axisExtent[idx],axisExtent[1-idx])});each(dimensions,function(dim,idx){var posInfo=(layoutInfo.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(idx,layoutInfo);var positionTable={horizontal:{x:posInfo.position,y:layoutInfo.axisLength},vertical:{x:0,y:posInfo.position}};var rotationTable={horizontal:PI/2,vertical:0};var position=[positionTable[layout].x+rect.x,positionTable[layout].y+rect.y];var rotation=rotationTable[layout];var transform=matrix.create();matrix.rotate(transform,transform,rotation);matrix.translate(transform,transform,position);this._axesLayout[dim]={position:position,rotation:rotation,transform:transform,axisNameAvailableWidth:posInfo.axisNameAvailableWidth,axisLabelShow:posInfo.axisLabelShow,nameTruncateMaxWidth:posInfo.nameTruncateMaxWidth,tickDirection:1,labelDirection:1,labelInterval:axes.get(dim).getLabelInterval()}},this)},getAxis:function(dim){return this._axesMap.get(dim)},dataToPoint:function(value,dim){return this.axisCoordToPoint(this._axesMap.get(dim).dataToCoord(value),dim)},eachActiveState:function(data,callback,context){var dimensions=this.dimensions;var axesMap=this._axesMap;var hasActiveSet=this.hasAxisBrushed();for(var i=0,len=data.count();i<len;i++){var values=data.getValues(dimensions,i);var activeState;if(!hasActiveSet){activeState="normal"}else{activeState="active";for(var j=0,lenj=dimensions.length;j<lenj;j++){var dimName=dimensions[j];var state=axesMap.get(dimName).model.getActiveState(values[j],j);if(state==="inactive"){activeState="inactive";break}}}callback.call(context,activeState,i)}},hasAxisBrushed:function(){var dimensions=this.dimensions;var axesMap=this._axesMap;var hasActiveSet=false;for(var j=0,lenj=dimensions.length;j<lenj;j++){if(axesMap.get(dimensions[j]).model.getActiveState()!=="normal"){hasActiveSet=true}}return hasActiveSet},axisCoordToPoint:function(coord,dim){var axisLayout=this._axesLayout[dim];return graphic.applyTransform([coord,0],axisLayout.transform)},getAxisLayout:function(dim){return zrUtil.clone(this._axesLayout[dim])},getSlidedAxisExpandWindow:function(point){var layoutInfo=this._makeLayoutInfo();var pixelDimIndex=layoutInfo.pixelDimIndex;var axisExpandWindow=layoutInfo.axisExpandWindow.slice();var winSize=axisExpandWindow[1]-axisExpandWindow[0];var extent=[0,layoutInfo.axisExpandWidth*(layoutInfo.axisCount-1)];if(!this.containPoint(point)){return{behavior:"none",axisExpandWindow:axisExpandWindow}}var pointCoord=point[pixelDimIndex]-layoutInfo.layoutBase-layoutInfo.axisExpandWindow0Pos;var delta;var behavior="slide";var axisCollapseWidth=layoutInfo.axisCollapseWidth;var triggerArea=this._model.get("axisExpandSlideTriggerArea");var useJump=triggerArea[0]!=null;if(axisCollapseWidth){if(useJump&&axisCollapseWidth&&pointCoord<winSize*triggerArea[0]){behavior="jump";delta=pointCoord-winSize*triggerArea[2]}else{if(useJump&&axisCollapseWidth&&pointCoord>winSize*(1-triggerArea[0])){behavior="jump";delta=pointCoord-winSize*(1-triggerArea[2])}else{(delta=pointCoord-winSize*triggerArea[1])>=0&&(delta=pointCoord-winSize*(1-triggerArea[1]))<=0&&(delta=0)}}delta*=layoutInfo.axisExpandWidth/axisCollapseWidth;delta?sliderMove(delta,axisExpandWindow,extent,"all"):(behavior="none")}else{var winSize=axisExpandWindow[1]-axisExpandWindow[0];var pos=extent[1]*pointCoord/winSize;axisExpandWindow=[mathMax(0,pos-winSize/2)];axisExpandWindow[1]=mathMin(extent[1],axisExpandWindow[0]+winSize);axisExpandWindow[0]=axisExpandWindow[1]-winSize}return{axisExpandWindow:axisExpandWindow,behavior:behavior}}};function restrict(len,extent){return mathMin(mathMax(len,extent[0]),extent[1])}function layoutAxisWithoutExpand(axisIndex,layoutInfo){var step=layoutInfo.layoutLength/(layoutInfo.axisCount-1);return{position:step*axisIndex,axisNameAvailableWidth:step,axisLabelShow:true}}function layoutAxisWithExpand(axisIndex,layoutInfo){var layoutLength=layoutInfo.layoutLength;var axisExpandWidth=layoutInfo.axisExpandWidth;var axisCount=layoutInfo.axisCount;var axisCollapseWidth=layoutInfo.axisCollapseWidth;var winInnerIndices=layoutInfo.winInnerIndices;var position;var axisNameAvailableWidth=axisCollapseWidth;var axisLabelShow=false;var nameTruncateMaxWidth;if(axisIndex<winInnerIndices[0]){position=axisIndex*axisCollapseWidth;nameTruncateMaxWidth=axisCollapseWidth}else{if(axisIndex<=winInnerIndices[1]){position=layoutInfo.axisExpandWindow0Pos+axisIndex*axisExpandWidth-layoutInfo.axisExpandWindow[0];axisNameAvailableWidth=axisExpandWidth;axisLabelShow=true}else{position=layoutLength-(axisCount-1-axisIndex)*axisCollapseWidth;nameTruncateMaxWidth=axisCollapseWidth}}return{position:position,axisNameAvailableWidth:axisNameAvailableWidth,axisLabelShow:axisLabelShow,nameTruncateMaxWidth:nameTruncateMaxWidth}}module.exports=Parallel
}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var Axis=__webpack_require__(103);var ParallelAxis=function(dim,scale,coordExtent,axisType,axisIndex){Axis.call(this,dim,scale,coordExtent);this.type=axisType||"value";this.axisIndex=axisIndex};ParallelAxis.prototype={constructor:ParallelAxis,model:null};zrUtil.inherits(ParallelAxis,Axis);module.exports=ParallelAxis}),(function(module,exports){module.exports=function(delta,handleEnds,extent,handleIndex,minSpan,maxSpan){handleEnds[0]=restrict(handleEnds[0],extent);handleEnds[1]=restrict(handleEnds[1],extent);delta=delta||0;var extentSpan=extent[1]-extent[0];if(minSpan!=null){minSpan=restrict(minSpan,[0,extentSpan])}if(maxSpan!=null){maxSpan=Math.max(maxSpan,minSpan!=null?minSpan:0)}if(handleIndex==="all"){minSpan=maxSpan=Math.abs(handleEnds[1]-handleEnds[0]);handleIndex=0}var originalDistSign=getSpanSign(handleEnds,handleIndex);handleEnds[handleIndex]+=delta;var extentMinSpan=minSpan||0;var realExtent=extent.slice();originalDistSign.sign<0?(realExtent[0]+=extentMinSpan):(realExtent[1]-=extentMinSpan);handleEnds[handleIndex]=restrict(handleEnds[handleIndex],realExtent);var currDistSign=getSpanSign(handleEnds,handleIndex);if(minSpan!=null&&(currDistSign.sign!==originalDistSign.sign||currDistSign.span<minSpan)){handleEnds[1-handleIndex]=handleEnds[handleIndex]+originalDistSign.sign*minSpan}var currDistSign=getSpanSign(handleEnds,handleIndex);if(maxSpan!=null&&currDistSign.span>maxSpan){handleEnds[1-handleIndex]=handleEnds[handleIndex]+currDistSign.sign*maxSpan}return handleEnds};function getSpanSign(handleEnds,handleIndex){var dist=handleEnds[handleIndex]-handleEnds[1-handleIndex];return{span:Math.abs(dist),sign:dist>0?-1:dist<0?1:handleIndex?-1:1}}function restrict(value,extend){return Math.min(extend[1],Math.max(extend[0],value))}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var Component=__webpack_require__(72);__webpack_require__(244);Component.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:false,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-0.15,0.05,0.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){Component.prototype.init.apply(this,arguments);this.mergeOption({})},mergeOption:function(newOption){var thisOption=this.option;newOption&&zrUtil.merge(thisOption,newOption,true);this._initDimensions()},contains:function(model,ecModel){var parallelIndex=model.get("parallelIndex");return parallelIndex!=null&&ecModel.getComponent("parallel",parallelIndex)===this},setAxisExpand:function(opt){zrUtil.each(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(name){if(opt.hasOwnProperty(name)){this.option[name]=opt[name]}},this)},_initDimensions:function(){var dimensions=this.dimensions=[];var parallelAxisIndex=this.parallelAxisIndex=[];var axisModels=zrUtil.filter(this.dependentModels.parallelAxis,function(axisModel){return axisModel.get("parallelIndex")===this.componentIndex});zrUtil.each(axisModels,function(axisModel){dimensions.push("dim"+axisModel.get("dim"));parallelAxisIndex.push(axisModel.componentIndex)})}})}),(function(module,exports,__webpack_require__){var ComponentModel=__webpack_require__(72);var zrUtil=__webpack_require__(4);var makeStyleMapper=__webpack_require__(17);var axisModelCreator=__webpack_require__(134);var numberUtil=__webpack_require__(7);var AxisModel=ComponentModel.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]]).call(this.getModel("areaSelectStyle"))},setActiveIntervals:function(intervals){var activeIntervals=this.activeIntervals=zrUtil.clone(intervals);if(activeIntervals){for(var i=activeIntervals.length-1;i>=0;i--){numberUtil.asc(activeIntervals[i])}}},getActiveState:function(value){var activeIntervals=this.activeIntervals;if(!activeIntervals.length){return"normal"}if(value==null){return"inactive"}for(var i=0,len=activeIntervals.length;i<len;i++){if(activeIntervals[i][0]<=value&&value<=activeIntervals[i][1]){return"active"}}return"inactive"}});var defaultOption={type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:0.3},realtime:true,z:10};zrUtil.merge(AxisModel.prototype,__webpack_require__(115));function getAxisType(axisName,option){return option.type||(option.data?"category":"value")}axisModelCreator("parallel",AxisModel,getAxisType,defaultOption);module.exports=AxisModel}),(function(module,exports,__webpack_require__){__webpack_require__(239);__webpack_require__(246);__webpack_require__(247)
}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);var actionInfo={type:"axisAreaSelect",event:"axisAreaSelected",update:"updateVisual"};echarts.registerAction(actionInfo,function(payload,ecModel){ecModel.eachComponent({mainType:"parallelAxis",query:payload},function(parallelAxisModel){parallelAxisModel.axis.model.setActiveIntervals(payload.intervals)})});echarts.registerAction("parallelAxisExpand",function(payload,ecModel){ecModel.eachComponent({mainType:"parallel",query:payload},function(parallelModel){parallelModel.setAxisExpand(payload)})})}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var AxisBuilder=__webpack_require__(138);var BrushController=__webpack_require__(248);var brushHelper=__webpack_require__(249);var graphic=__webpack_require__(20);var elementList=["axisLine","axisTickLabel","axisName"];var AxisView=__webpack_require__(1).extendComponentView({type:"parallelAxis",init:function(ecModel,api){AxisView.superApply(this,"init",arguments);(this._brushController=new BrushController(api.getZr())).on("brush",zrUtil.bind(this._onBrush,this))},render:function(axisModel,ecModel,api,payload){if(fromAxisAreaSelect(axisModel,ecModel,payload)){return}this.axisModel=axisModel;this.api=api;this.group.removeAll();var oldAxisGroup=this._axisGroup;this._axisGroup=new graphic.Group();this.group.add(this._axisGroup);if(!axisModel.get("show")){return}var coordSysModel=getCoordSysModel(axisModel,ecModel);var coordSys=coordSysModel.coordinateSystem;var areaSelectStyle=axisModel.getAreaSelectStyle();var areaWidth=areaSelectStyle.width;var dim=axisModel.axis.dim;var axisLayout=coordSys.getAxisLayout(dim);var builderOpt=zrUtil.extend({strokeContainThreshold:areaWidth},axisLayout);var axisBuilder=new AxisBuilder(axisModel,builderOpt);zrUtil.each(elementList,axisBuilder.add,axisBuilder);this._axisGroup.add(axisBuilder.getGroup());this._refreshBrushController(builderOpt,areaSelectStyle,axisModel,coordSysModel,areaWidth,api);var animationModel=(payload&&payload.animation===false)?null:axisModel;graphic.groupTransition(oldAxisGroup,this._axisGroup,animationModel)},updateVisual:function(axisModel,ecModel,api,payload){this._brushController&&this._brushController.updateCovers(getCoverInfoList(axisModel))},_refreshBrushController:function(builderOpt,areaSelectStyle,axisModel,coordSysModel,areaWidth,api){var extent=axisModel.axis.getExtent();var extentLen=extent[1]-extent[0];var extra=Math.min(30,Math.abs(extentLen)*0.1);var rect=graphic.BoundingRect.create({x:extent[0],y:-areaWidth/2,width:extentLen,height:areaWidth});rect.x-=extra;rect.width+=2*extra;this._brushController.mount({enableGlobalPan:true,rotation:builderOpt.rotation,position:builderOpt.position}).setPanels([{panelId:"pl",clipPath:brushHelper.makeRectPanelClipPath(rect),isTargetByCursor:brushHelper.makeRectIsTargetByCursor(rect,api,coordSysModel),getLinearBrushOtherExtent:brushHelper.makeLinearBrushOtherExtent(rect,0)}]).enableBrush({brushType:"lineX",brushStyle:areaSelectStyle,removeOnClick:true}).updateCovers(getCoverInfoList(axisModel))},_onBrush:function(coverInfoList,opt){var axisModel=this.axisModel;var axis=axisModel.axis;var intervals=zrUtil.map(coverInfoList,function(coverInfo){return[axis.coordToData(coverInfo.range[0],true),axis.coordToData(coverInfo.range[1],true)]});if(!axisModel.option.realtime===opt.isEnd||opt.removeOnClick){this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:axisModel.id,intervals:intervals})}},dispose:function(){this._brushController.dispose()}});function fromAxisAreaSelect(axisModel,ecModel,payload){return payload&&payload.type==="axisAreaSelect"&&ecModel.findComponents({mainType:"parallelAxis",query:payload})[0]===axisModel}function getCoverInfoList(axisModel){var axis=axisModel.axis;return zrUtil.map(axisModel.activeIntervals,function(interval){return{brushType:"lineX",panelId:"pl",range:[axis.dataToCoord(interval[0],true),axis.dataToCoord(interval[1],true)]}})}function getCoordSysModel(axisModel,ecModel){return ecModel.getComponent("parallel",axisModel.get("parallelIndex"))}module.exports=AxisView}),(function(module,exports,__webpack_require__){var Eventful=__webpack_require__(27);var zrUtil=__webpack_require__(4);var graphic=__webpack_require__(20);var interactionMutex=__webpack_require__(187);var DataDiffer=__webpack_require__(102);var curry=zrUtil.curry;var each=zrUtil.each;var map=zrUtil.map;var mathMin=Math.min;var mathMax=Math.max;var mathPow=Math.pow;var COVER_Z=10000;var UNSELECT_THRESHOLD=6;var MIN_RESIZE_LINE_WIDTH=6;var MUTEX_RESOURCE_KEY="globalPan";var DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]};var CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"};var DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:true,brushMode:"single",removeOnClick:false};var baseUID=0;function BrushController(zr){if(true){zrUtil.assert(zr)}Eventful.call(this);this._zr=zr;this.group=new graphic.Group();
this._brushType;this._brushOption;this._panels;this._track=[];this._dragging;this._covers=[];this._creatingCover;this._creatingPanel;this._enableGlobalPan;if(true){this._mounted}this._uid="brushController_"+baseUID++;this._handlers={};each(mouseHandlers,function(handler,eventName){this._handlers[eventName]=zrUtil.bind(handler,this)},this)}BrushController.prototype={constructor:BrushController,enableBrush:function(brushOption){if(true){zrUtil.assert(this._mounted)}this._brushType&&doDisableBrush(this);brushOption.brushType&&doEnableBrush(this,brushOption);return this},setPanels:function(panelOpts){if(panelOpts&&panelOpts.length){var panels=this._panels={};zrUtil.each(panelOpts,function(panelOpts){panels[panelOpts.panelId]=zrUtil.clone(panelOpts)})}else{this._panels=null}return this},mount:function(opt){opt=opt||{};if(true){this._mounted=true}this._enableGlobalPan=opt.enableGlobalPan;var thisGroup=this.group;this._zr.add(thisGroup);thisGroup.attr({position:opt.position||[0,0],rotation:opt.rotation||0,scale:opt.scale||[1,1]});this._transform=thisGroup.getLocalTransform();return this},eachCover:function(cb,context){each(this._covers,cb,context)},updateCovers:function(brushOptionList){if(true){zrUtil.assert(this._mounted)}brushOptionList=zrUtil.map(brushOptionList,function(brushOption){return zrUtil.merge(zrUtil.clone(DEFAULT_BRUSH_OPT),brushOption,true)});var tmpIdPrefix="\0-brush-index-";var oldCovers=this._covers;var newCovers=this._covers=[];var controller=this;var creatingCover=this._creatingCover;(new DataDiffer(oldCovers,brushOptionList,oldGetKey,getKey)).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();return this;function getKey(brushOption,index){return(brushOption.id!=null?brushOption.id:tmpIdPrefix+index)+"-"+brushOption.brushType}function oldGetKey(cover,index){return getKey(cover.__brushOption,index)}function addOrUpdate(newIndex,oldIndex){var newBrushOption=brushOptionList[newIndex];if(oldIndex!=null&&oldCovers[oldIndex]===creatingCover){newCovers[newIndex]=oldCovers[oldIndex]}else{var cover=newCovers[newIndex]=oldIndex!=null?(oldCovers[oldIndex].__brushOption=newBrushOption,oldCovers[oldIndex]):endCreating(controller,createCover(controller,newBrushOption));updateCoverAfterCreation(controller,cover)}}function remove(oldIndex){if(oldCovers[oldIndex]!==creatingCover){controller.group.remove(oldCovers[oldIndex])}}},unmount:function(){if(true){if(!this._mounted){return}}this.enableBrush(false);clearCovers(this);this._zr.remove(this.group);if(true){this._mounted=false}return this},dispose:function(){this.unmount();this.off()}};zrUtil.mixin(BrushController,Eventful);function doEnableBrush(controller,brushOption){var zr=controller._zr;if(!controller._enableGlobalPan){interactionMutex.take(zr,MUTEX_RESOURCE_KEY,controller._uid)}each(controller._handlers,function(handler,eventName){zr.on(eventName,handler)});controller._brushType=brushOption.brushType;controller._brushOption=zrUtil.merge(zrUtil.clone(DEFAULT_BRUSH_OPT),brushOption,true)}function doDisableBrush(controller){var zr=controller._zr;interactionMutex.release(zr,MUTEX_RESOURCE_KEY,controller._uid);each(controller._handlers,function(handler,eventName){zr.off(eventName,handler)});controller._brushType=controller._brushOption=null}function createCover(controller,brushOption){var cover=coverRenderers[brushOption.brushType].createCover(controller,brushOption);cover.__brushOption=brushOption;updateZ(cover,brushOption);controller.group.add(cover);return cover}function endCreating(controller,creatingCover){var coverRenderer=getCoverRenderer(creatingCover);if(coverRenderer.endCreating){coverRenderer.endCreating(controller,creatingCover);updateZ(creatingCover,creatingCover.__brushOption)}return creatingCover}function updateCoverShape(controller,cover){var brushOption=cover.__brushOption;getCoverRenderer(cover).updateCoverShape(controller,cover,brushOption.range,brushOption)}function updateZ(cover,brushOption){var z=brushOption.z;z==null&&(z=COVER_Z);cover.traverse(function(el){el.z=z;el.z2=z})}function updateCoverAfterCreation(controller,cover){getCoverRenderer(cover).updateCommon(controller,cover);updateCoverShape(controller,cover)}function getCoverRenderer(cover){return coverRenderers[cover.__brushOption.brushType]}function getPanelByPoint(controller,e,localCursorPoint){var panels=controller._panels;if(!panels){return true}var panel;var transform=controller._transform;each(panels,function(pn){pn.isTargetByCursor(e,localCursorPoint,transform)&&(panel=pn)});return panel}function getPanelByCover(controller,cover){var panels=controller._panels;if(!panels){return true}var panelId=cover.__brushOption.panelId;return panelId!=null?panels[panelId]:true}function clearCovers(controller){var covers=controller._covers;var originalLength=covers.length;each(covers,function(cover){controller.group.remove(cover)},controller);covers.length=0;return !!originalLength}function trigger(controller,opt){var areas=map(controller._covers,function(cover){var brushOption=cover.__brushOption;
var range=zrUtil.clone(brushOption.range);return{brushType:brushOption.brushType,panelId:brushOption.panelId,range:range}});controller.trigger("brush",areas,{isEnd:!!opt.isEnd,removeOnClick:!!opt.removeOnClick})}function shouldShowCover(controller){var track=controller._track;if(!track.length){return false}var p2=track[track.length-1];var p1=track[0];var dx=p2[0]-p1[0];var dy=p2[1]-p1[1];var dist=mathPow(dx*dx+dy*dy,0.5);return dist>UNSELECT_THRESHOLD}function getTrackEnds(track){var tail=track.length-1;tail<0&&(tail=0);return[track[0],track[tail]]}function createBaseRectCover(doDrift,controller,brushOption,edgeNames){var cover=new graphic.Group();cover.add(new graphic.Rect({name:"main",style:makeStyle(brushOption),silent:true,draggable:true,cursor:"move",drift:curry(doDrift,controller,cover,"nswe"),ondragend:curry(trigger,controller,{isEnd:true})}));each(edgeNames,function(name){cover.add(new graphic.Rect({name:name,style:{opacity:0},draggable:true,silent:true,invisible:true,drift:curry(doDrift,controller,cover,name),ondragend:curry(trigger,controller,{isEnd:true})}))});return cover}function updateBaseRect(controller,cover,localRange,brushOption){var lineWidth=brushOption.brushStyle.lineWidth||0;var handleSize=mathMax(lineWidth,MIN_RESIZE_LINE_WIDTH);var x=localRange[0][0];var y=localRange[1][0];var xa=x-lineWidth/2;var ya=y-lineWidth/2;var x2=localRange[0][1];var y2=localRange[1][1];var x2a=x2-handleSize+lineWidth/2;var y2a=y2-handleSize+lineWidth/2;var width=x2-x;var height=y2-y;var widtha=width+lineWidth;var heighta=height+lineWidth;updateRectShape(controller,cover,"main",x,y,width,height);if(brushOption.transformable){updateRectShape(controller,cover,"w",xa,ya,handleSize,heighta);updateRectShape(controller,cover,"e",x2a,ya,handleSize,heighta);updateRectShape(controller,cover,"n",xa,ya,widtha,handleSize);updateRectShape(controller,cover,"s",xa,y2a,widtha,handleSize);updateRectShape(controller,cover,"nw",xa,ya,handleSize,handleSize);updateRectShape(controller,cover,"ne",x2a,ya,handleSize,handleSize);updateRectShape(controller,cover,"sw",xa,y2a,handleSize,handleSize);updateRectShape(controller,cover,"se",x2a,y2a,handleSize,handleSize)}}function updateCommon(controller,cover){var brushOption=cover.__brushOption;var transformable=brushOption.transformable;var mainEl=cover.childAt(0);mainEl.useStyle(makeStyle(brushOption));mainEl.attr({silent:!transformable,cursor:transformable?"move":"default"});each(["w","e","n","s","se","sw","ne","nw"],function(name){var el=cover.childOfName(name);var globalDir=getGlobalDirection(controller,name);el&&el.attr({silent:!transformable,invisible:!transformable,cursor:transformable?CURSOR_MAP[globalDir]+"-resize":null})})}function updateRectShape(controller,cover,name,x,y,w,h){var el=cover.childOfName(name);el&&el.setShape(pointsToRect(clipByPanel(controller,cover,[[x,y],[x+w,y+h]])))}function makeStyle(brushOption){return zrUtil.defaults({strokeNoScale:true},brushOption.brushStyle)}function formatRectRange(x,y,x2,y2){var min=[mathMin(x,x2),mathMin(y,y2)];var max=[mathMax(x,x2),mathMax(y,y2)];return[[min[0],max[0]],[min[1],max[1]]]}function getTransform(controller){return graphic.getTransform(controller.group)}function getGlobalDirection(controller,localDirection){if(localDirection.length>1){localDirection=localDirection.split("");var globalDir=[getGlobalDirection(controller,localDirection[0]),getGlobalDirection(controller,localDirection[1])];(globalDir[0]==="e"||globalDir[0]==="w")&&globalDir.reverse();return globalDir.join("")}else{var map={w:"left",e:"right",n:"top",s:"bottom"};var inverseMap={left:"w",right:"e",top:"n",bottom:"s"};var globalDir=graphic.transformDirection(map[localDirection],getTransform(controller));return inverseMap[globalDir]}}function driftRect(toRectRange,fromRectRange,controller,cover,name,dx,dy,e){var brushOption=cover.__brushOption;var rectRange=toRectRange(brushOption.range);var localDelta=toLocalDelta(controller,dx,dy);each(name.split(""),function(namePart){var ind=DIRECTION_MAP[namePart];rectRange[ind[0]][ind[1]]+=localDelta[ind[0]]});brushOption.range=fromRectRange(formatRectRange(rectRange[0][0],rectRange[1][0],rectRange[0][1],rectRange[1][1]));updateCoverAfterCreation(controller,cover);trigger(controller,{isEnd:false})}function driftPolygon(controller,cover,dx,dy,e){var range=cover.__brushOption.range;var localDelta=toLocalDelta(controller,dx,dy);each(range,function(point){point[0]+=localDelta[0];point[1]+=localDelta[1]});updateCoverAfterCreation(controller,cover);trigger(controller,{isEnd:false})}function toLocalDelta(controller,dx,dy){var thisGroup=controller.group;var localD=thisGroup.transformCoordToLocal(dx,dy);var localZero=thisGroup.transformCoordToLocal(0,0);return[localD[0]-localZero[0],localD[1]-localZero[1]]}function clipByPanel(controller,cover,data){var panel=getPanelByCover(controller,cover);return(panel&&panel!==true)?panel.clipPath(data,controller._transform):zrUtil.clone(data)}function pointsToRect(points){var xmin=mathMin(points[0][0],points[1][0]);
var ymin=mathMin(points[0][1],points[1][1]);var xmax=mathMax(points[0][0],points[1][0]);var ymax=mathMax(points[0][1],points[1][1]);return{x:xmin,y:ymin,width:xmax-xmin,height:ymax-ymin}}function resetCursor(controller,e,localCursorPoint){if(!controller._brushType){return}var zr=controller._zr;var covers=controller._covers;var currPanel=getPanelByPoint(controller,e,localCursorPoint);if(!controller._dragging){for(var i=0;i<covers.length;i++){var brushOption=covers[i].__brushOption;if(currPanel&&(currPanel===true||brushOption.panelId===currPanel.panelId)&&coverRenderers[brushOption.brushType].contain(covers[i],localCursorPoint[0],localCursorPoint[1])){return}}}currPanel&&zr.setCursorStyle("crosshair")}function preventDefault(e){var rawE=e.event;rawE.preventDefault&&rawE.preventDefault()}function mainShapeContain(cover,x,y){return cover.childOfName("main").contain(x,y)}function updateCoverByMouse(controller,e,localCursorPoint,isEnd){var creatingCover=controller._creatingCover;var panel=controller._creatingPanel;var thisBrushOption=controller._brushOption;var eventParams;controller._track.push(localCursorPoint.slice());if(shouldShowCover(controller)||creatingCover){if(panel&&!creatingCover){thisBrushOption.brushMode==="single"&&clearCovers(controller);var brushOption=zrUtil.clone(thisBrushOption);brushOption.brushType=determineBrushType(brushOption.brushType,panel);brushOption.panelId=panel===true?null:panel.panelId;creatingCover=controller._creatingCover=createCover(controller,brushOption);controller._covers.push(creatingCover)}if(creatingCover){var coverRenderer=coverRenderers[determineBrushType(controller._brushType,panel)];var coverBrushOption=creatingCover.__brushOption;coverBrushOption.range=coverRenderer.getCreatingRange(clipByPanel(controller,creatingCover,controller._track));if(isEnd){endCreating(controller,creatingCover);coverRenderer.updateCommon(controller,creatingCover)}updateCoverShape(controller,creatingCover);eventParams={isEnd:isEnd}}}else{if(isEnd&&thisBrushOption.brushMode==="single"&&thisBrushOption.removeOnClick){if(getPanelByPoint(controller,e,localCursorPoint)&&clearCovers(controller)){eventParams={isEnd:isEnd,removeOnClick:true}}}}return eventParams}function determineBrushType(brushType,panel){if(brushType==="auto"){if(true){zrUtil.assert(panel&&panel.defaultBrushType,'MUST have defaultBrushType when brushType is "atuo"')}return panel.defaultBrushType}return brushType}var mouseHandlers={mousedown:function(e){if(this._dragging){handleDragEnd.call(this,e)}else{if(!e.target||!e.target.draggable){preventDefault(e);var localCursorPoint=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null;var panel=this._creatingPanel=getPanelByPoint(this,e,localCursorPoint);if(panel){this._dragging=true;this._track=[localCursorPoint.slice()]}}}},mousemove:function(e){var localCursorPoint=this.group.transformCoordToLocal(e.offsetX,e.offsetY);resetCursor(this,e,localCursorPoint);if(this._dragging){preventDefault(e);var eventParams=updateCoverByMouse(this,e,localCursorPoint,false);eventParams&&trigger(this,eventParams)}},mouseup:handleDragEnd};function handleDragEnd(e){if(this._dragging){preventDefault(e);var localCursorPoint=this.group.transformCoordToLocal(e.offsetX,e.offsetY);var eventParams=updateCoverByMouse(this,e,localCursorPoint,true);this._dragging=false;this._track=[];this._creatingCover=null;eventParams&&trigger(this,eventParams)}}var coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(controller,brushOption){return createBaseRectCover(curry(driftRect,function(range){return range},function(range){return range}),controller,brushOption,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(localTrack){var ends=getTrackEnds(localTrack);return formatRectRange(ends[1][0],ends[1][1],ends[0][0],ends[0][1])},updateCoverShape:function(controller,cover,localRange,brushOption){updateBaseRect(controller,cover,localRange,brushOption)},updateCommon:updateCommon,contain:mainShapeContain},polygon:{createCover:function(controller,brushOption){var cover=new graphic.Group();cover.add(new graphic.Polyline({name:"main",style:makeStyle(brushOption),silent:true}));return cover},getCreatingRange:function(localTrack){return localTrack},endCreating:function(controller,cover){cover.remove(cover.childAt(0));cover.add(new graphic.Polygon({name:"main",draggable:true,drift:curry(driftPolygon,controller,cover),ondragend:curry(trigger,controller,{isEnd:true})}))},updateCoverShape:function(controller,cover,localRange,brushOption){cover.childAt(0).setShape({points:clipByPanel(controller,cover,localRange)})},updateCommon:updateCommon,contain:mainShapeContain}};function getLineRenderer(xyIndex){return{createCover:function(controller,brushOption){return createBaseRectCover(curry(driftRect,function(range){var rectRange=[range,[0,100]];xyIndex&&rectRange.reverse();return rectRange},function(rectRange){return rectRange[xyIndex]}),controller,brushOption,[["w","e"],["n","s"]][xyIndex])
},getCreatingRange:function(localTrack){var ends=getTrackEnds(localTrack);var min=mathMin(ends[0][xyIndex],ends[1][xyIndex]);var max=mathMax(ends[0][xyIndex],ends[1][xyIndex]);return[min,max]},updateCoverShape:function(controller,cover,localRange,brushOption){var otherExtent;var panel=getPanelByCover(controller,cover);if(panel!==true&&panel.getLinearBrushOtherExtent){otherExtent=panel.getLinearBrushOtherExtent(xyIndex,controller._transform)}else{var zr=controller._zr;otherExtent=[0,[zr.getWidth(),zr.getHeight()][1-xyIndex]]}var rectRange=[localRange,otherExtent];xyIndex&&rectRange.reverse();updateBaseRect(controller,cover,rectRange,brushOption)},updateCommon:updateCommon,contain:mainShapeContain}}module.exports=BrushController}),(function(module,exports,__webpack_require__){var cursorHelper=__webpack_require__(189);var BoundingRect=__webpack_require__(9);var graphicUtil=__webpack_require__(20);var helper={};helper.makeRectPanelClipPath=function(rect){rect=normalizeRect(rect);return function(localPoints,transform){return graphicUtil.clipPointsByRect(localPoints,rect)}};helper.makeLinearBrushOtherExtent=function(rect,specifiedXYIndex){rect=normalizeRect(rect);return function(xyIndex){var idx=specifiedXYIndex!=null?specifiedXYIndex:xyIndex;var brushWidth=idx?rect.width:rect.height;var base=idx?rect.x:rect.y;return[base,base+(brushWidth||0)]}};helper.makeRectIsTargetByCursor=function(rect,api,targetModel){rect=normalizeRect(rect);return function(e,localCursorPoint,transform){return rect.contain(localCursorPoint[0],localCursorPoint[1])&&!cursorHelper.onIrrelevantElement(e,api,targetModel)}};function normalizeRect(rect){return BoundingRect.create(rect)}module.exports=helper}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var modelUtil=__webpack_require__(5);module.exports=function(option){createParallelIfNeeded(option);mergeAxisOptionFromParallel(option)};function createParallelIfNeeded(option){if(option.parallel){return}var hasParallelSeries=false;zrUtil.each(option.series,function(seriesOpt){if(seriesOpt&&seriesOpt.type==="parallel"){hasParallelSeries=true}});if(hasParallelSeries){option.parallel=[{}]}}function mergeAxisOptionFromParallel(option){var axes=modelUtil.normalizeToArray(option.parallelAxis);zrUtil.each(axes,function(axisOption){if(!zrUtil.isObject(axisOption)){return}var parallelIndex=axisOption.parallelIndex||0;var parallelOption=modelUtil.normalizeToArray(option.parallel)[parallelIndex];if(parallelOption&&parallelOption.parallelAxisDefault){zrUtil.merge(axisOption,parallelOption.parallelAxisDefault,false)}})}}),(function(module,exports,__webpack_require__){var List=__webpack_require__(101);var zrUtil=__webpack_require__(4);var SeriesModel=__webpack_require__(83);var completeDimensions=__webpack_require__(113);module.exports=SeriesModel.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.normal.color",getInitialData:function(option,ecModel){var parallelModel=ecModel.getComponent("parallel",this.get("parallelIndex"));var parallelAxisIndices=parallelModel.parallelAxisIndex;var rawData=option.data;var modelDims=parallelModel.dimensions;var dataDims=generateDataDims(modelDims,rawData);var dataDimsInfo=zrUtil.map(dataDims,function(dim,dimIndex){var modelDimsIndex=zrUtil.indexOf(modelDims,dim);var axisModel=modelDimsIndex>=0&&ecModel.getComponent("parallelAxis",parallelAxisIndices[modelDimsIndex]);if(axisModel&&axisModel.get("type")==="category"){translateCategoryValue(axisModel,dim,rawData);return{name:dim,type:"ordinal"}}else{if(modelDimsIndex<0){return completeDimensions.guessOrdinal(rawData,dimIndex)?{name:dim,type:"ordinal"}:dim}else{return dim}}});var list=new List(dataDimsInfo,this);list.initData(rawData);if(this.option.progressive){this.option.animation=false}return list},getRawIndicesByActiveState:function(activeState){var coordSys=this.coordinateSystem;var data=this.getData();var indices=[];coordSys.eachActiveState(data,function(theActiveState,dataIndex){if(activeState===theActiveState){indices.push(data.getRawIndex(dataIndex))}});return indices},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{normal:{show:false},emphasis:{show:false}},inactiveOpacity:0.05,activeOpacity:1,lineStyle:{normal:{width:1,opacity:0.45,type:"solid"}},progressive:false,smooth:false,animationEasing:"linear"}});function translateCategoryValue(axisModel,dim,rawData){var axisData=axisModel.get("data");var numberDim=convertDimNameToNumber(dim);if(axisData&&axisData.length){zrUtil.each(rawData,function(dataItem){if(!dataItem){return}var index=zrUtil.indexOf(axisData,dataItem[numberDim]);dataItem[numberDim]=index>=0?index:NaN})}}function convertDimNameToNumber(dimName){return +dimName.replace("dim","")}function generateDataDims(modelDims,rawData){var maxDimNum=0;zrUtil.each(modelDims,function(dimName){var numberDim=convertDimNameToNumber(dimName);numberDim>maxDimNum&&(maxDimNum=numberDim)});var firstItem=rawData[0];if(firstItem&&firstItem.length-1>maxDimNum){maxDimNum=firstItem.length-1
}var dataDims=[];for(var i=0;i<=maxDimNum;i++){dataDims.push("dim"+i)}return dataDims}}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var zrUtil=__webpack_require__(4);var SMOOTH=0.3;var ParallelView=__webpack_require__(85).extend({type:"parallel",init:function(){this._dataGroup=new graphic.Group();this.group.add(this._dataGroup);this._data},render:function(seriesModel,ecModel,api,payload){this._renderForNormal(seriesModel,payload)},dispose:function(){},_renderForNormal:function(seriesModel,payload){var dataGroup=this._dataGroup;var data=seriesModel.getData();var oldData=this._data;var coordSys=seriesModel.coordinateSystem;var dimensions=coordSys.dimensions;var option=seriesModel.option;var smooth=option.smooth?SMOOTH:null;data.diff(oldData).add(add).update(update).remove(remove).execute();updateElCommon(data,smooth);if(!this._data){var clipPath=createGridClipShape(coordSys,seriesModel,function(){setTimeout(function(){dataGroup.removeClipPath()})});dataGroup.setClipPath(clipPath)}this._data=data;function add(newDataIndex){addEl(data,dataGroup,newDataIndex,dimensions,coordSys,null,smooth)}function update(newDataIndex,oldDataIndex){var line=oldData.getItemGraphicEl(oldDataIndex);var points=createLinePoints(data,newDataIndex,dimensions,coordSys);data.setItemGraphicEl(newDataIndex,line);var animationModel=(payload&&payload.animation===false)?null:seriesModel;graphic.updateProps(line,{shape:{points:points}},animationModel,newDataIndex)}function remove(oldDataIndex){var line=oldData.getItemGraphicEl(oldDataIndex);dataGroup.remove(line)}},remove:function(){this._dataGroup&&this._dataGroup.removeAll();this._data=null}});function createGridClipShape(coordSys,seriesModel,cb){var parallelModel=coordSys.model;var rect=coordSys.getRect();var rectEl=new graphic.Rect({shape:{x:rect.x,y:rect.y,width:rect.width,height:rect.height}});var dim=parallelModel.get("layout")==="horizontal"?"width":"height";rectEl.setShape(dim,0);graphic.initProps(rectEl,{shape:{width:rect.width,height:rect.height}},seriesModel,cb);return rectEl}function createLinePoints(data,dataIndex,dimensions,coordSys){var points=[];for(var i=0;i<dimensions.length;i++){var dimName=dimensions[i];var value=data.get(dimName,dataIndex);if(!isEmptyValue(value,coordSys.getAxis(dimName).type)){points.push(coordSys.dataToPoint(value,dimName))}}return points}function addEl(data,dataGroup,dataIndex,dimensions,coordSys){var points=createLinePoints(data,dataIndex,dimensions,coordSys);var line=new graphic.Polyline({shape:{points:points},silent:true,z2:10});dataGroup.add(line);data.setItemGraphicEl(dataIndex,line)}function updateElCommon(data,smooth){var seriesStyleModel=data.hostModel.getModel("lineStyle.normal");var lineStyle=seriesStyleModel.getLineStyle();data.eachItemGraphicEl(function(line,dataIndex){if(data.hasItemOption){var itemModel=data.getItemModel(dataIndex);var lineStyleModel=itemModel.getModel("lineStyle.normal",seriesStyleModel);lineStyle=lineStyleModel.getLineStyle(["color","stroke"])}line.useStyle(zrUtil.extend(lineStyle,{fill:null,stroke:data.getItemVisual(dataIndex,"color"),opacity:data.getItemVisual(dataIndex,"opacity")}));line.shape.smooth=smooth})}function isEmptyValue(val,axisType){return axisType==="category"?val==null:(val==null||isNaN(val))}module.exports=ParallelView}),(function(module,exports){var opacityAccessPath=["lineStyle","normal","opacity"];module.exports=function(ecModel){ecModel.eachSeriesByType("parallel",function(seriesModel){var itemStyleModel=seriesModel.getModel("itemStyle.normal");var lineStyleModel=seriesModel.getModel("lineStyle.normal");var globalColors=ecModel.get("color");var color=lineStyleModel.get("color")||itemStyleModel.get("color")||globalColors[seriesModel.seriesIndex%globalColors.length];var inactiveOpacity=seriesModel.get("inactiveOpacity");var activeOpacity=seriesModel.get("activeOpacity");var lineStyle=seriesModel.getModel("lineStyle.normal").getLineStyle();var coordSys=seriesModel.coordinateSystem;var data=seriesModel.getData();var opacityMap={normal:lineStyle.opacity,active:activeOpacity,inactive:inactiveOpacity};coordSys.eachActiveState(data,function(activeState,dataIndex){var itemModel=data.getItemModel(dataIndex);var opacity=opacityMap[activeState];if(activeState==="normal"){var itemOpacity=itemModel.get(opacityAccessPath,true);itemOpacity!=null&&(opacity=itemOpacity)}data.setItemVisual(dataIndex,"opacity",opacity)});data.setVisual("color",color)})}}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);__webpack_require__(255);__webpack_require__(256);echarts.registerLayout(__webpack_require__(257));echarts.registerVisual(__webpack_require__(259))}),(function(module,exports,__webpack_require__){var SeriesModel=__webpack_require__(83);var createGraphFromNodeEdge=__webpack_require__(210);var encodeHTML=__webpack_require__(6).encodeHTML;var SankeySeries=SeriesModel.extend({type:"series.sankey",layoutInfo:null,getInitialData:function(option){var links=option.edges||option.links;
var nodes=option.data||option.nodes;if(nodes&&links){var graph=createGraphFromNodeEdge(nodes,links,this,true);return graph.data}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(dataIndex,multipleSeries,dataType){if(dataType==="edge"){var params=this.getDataParams(dataIndex,dataType);var rawDataOpt=params.data;var html=rawDataOpt.source+" -- "+rawDataOpt.target;if(params.value){html+=" : "+params.value}return encodeHTML(html)}return SankeySeries.superCall(this,"formatTooltip",dataIndex,multipleSeries)},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",nodeWidth:20,nodeGap:8,layoutIterations:32,label:{normal:{show:true,position:"right",color:"#000",fontSize:12},emphasis:{show:true}},itemStyle:{normal:{borderWidth:1,borderColor:"#333"}},lineStyle:{normal:{color:"#314656",opacity:0.2,curveness:0.5},emphasis:{opacity:0.6}},animationEasing:"linear",animationDuration:1000}});module.exports=SankeySeries}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var SankeyShape=graphic.extendShape({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0},buildPath:function(ctx,shape){var halfExtent=shape.extent/2;ctx.moveTo(shape.x1,shape.y1-halfExtent);ctx.bezierCurveTo(shape.cpx1,shape.cpy1-halfExtent,shape.cpx2,shape.cpy2-halfExtent,shape.x2,shape.y2-halfExtent);ctx.lineTo(shape.x2,shape.y2+halfExtent);ctx.bezierCurveTo(shape.cpx2,shape.cpy2+halfExtent,shape.cpx1,shape.cpy1+halfExtent,shape.x1,shape.y1+halfExtent);ctx.closePath()}});module.exports=__webpack_require__(1).extendChartView({type:"sankey",_model:null,render:function(seriesModel,ecModel,api){var graph=seriesModel.getGraph();var group=this.group;var layoutInfo=seriesModel.layoutInfo;var nodeData=seriesModel.getData();var edgeData=seriesModel.getData("edge");this._model=seriesModel;group.removeAll();group.position=[layoutInfo.x,layoutInfo.y];graph.eachEdge(function(edge){var curve=new SankeyShape();curve.dataIndex=edge.dataIndex;curve.seriesIndex=seriesModel.seriesIndex;curve.dataType="edge";var lineStyleModel=edge.getModel("lineStyle.normal");var curvature=lineStyleModel.get("curveness");var n1Layout=edge.node1.getLayout();var n2Layout=edge.node2.getLayout();var edgeLayout=edge.getLayout();curve.shape.extent=Math.max(1,edgeLayout.dy);var x1=n1Layout.x+n1Layout.dx;var y1=n1Layout.y+edgeLayout.sy+edgeLayout.dy/2;var x2=n2Layout.x;var y2=n2Layout.y+edgeLayout.ty+edgeLayout.dy/2;var cpx1=x1*(1-curvature)+x2*curvature;var cpy1=y1;var cpx2=x1*curvature+x2*(1-curvature);var cpy2=y2;curve.setShape({x1:x1,y1:y1,x2:x2,y2:y2,cpx1:cpx1,cpy1:cpy1,cpx2:cpx2,cpy2:cpy2});curve.setStyle(lineStyleModel.getItemStyle());switch(curve.style.fill){case"source":curve.style.fill=edge.node1.getVisual("color");break;case"target":curve.style.fill=edge.node2.getVisual("color");break}graphic.setHoverStyle(curve,edge.getModel("lineStyle.emphasis").getItemStyle());group.add(curve);edgeData.setItemGraphicEl(edge.dataIndex,curve)});graph.eachNode(function(node){var layout=node.getLayout();var itemModel=node.getModel();var labelModel=itemModel.getModel("label.normal");var labelHoverModel=itemModel.getModel("label.emphasis");var rect=new graphic.Rect({shape:{x:layout.x,y:layout.y,width:node.getLayout().dx,height:node.getLayout().dy},style:itemModel.getModel("itemStyle.normal").getItemStyle()});var hoverStyle=node.getModel("itemStyle.emphasis").getItemStyle();graphic.setLabelStyle(rect.style,hoverStyle,labelModel,labelHoverModel,{labelFetcher:seriesModel,labelDataIndex:node.dataIndex,defaultText:node.id,isRectText:true});rect.setStyle("fill",node.getVisual("color"));graphic.setHoverStyle(rect,hoverStyle);group.add(rect);nodeData.setItemGraphicEl(node.dataIndex,rect);rect.dataType="node"});if(!this._data&&seriesModel.get("animation")){group.setClipPath(createGridClipShape(group.getBoundingRect(),seriesModel,function(){group.removeClipPath()}))}this._data=seriesModel.getData()},dispose:function(){}});function createGridClipShape(rect,seriesModel,cb){var rectEl=new graphic.Rect({shape:{x:rect.x-10,y:rect.y-10,width:0,height:rect.height+20}});graphic.initProps(rectEl,{shape:{width:rect.width+20,height:rect.height+20}},seriesModel,cb);return rectEl}}),(function(module,exports,__webpack_require__){var layout=__webpack_require__(74);var nest=__webpack_require__(258);var zrUtil=__webpack_require__(4);module.exports=function(ecModel,api,payload){ecModel.eachSeriesByType("sankey",function(seriesModel){var nodeWidth=seriesModel.get("nodeWidth");var nodeGap=seriesModel.get("nodeGap");var layoutInfo=getViewRect(seriesModel,api);seriesModel.layoutInfo=layoutInfo;var width=layoutInfo.width;var height=layoutInfo.height;var graph=seriesModel.getGraph();var nodes=graph.nodes;var edges=graph.edges;computeNodeValues(nodes);var filteredNodes=zrUtil.filter(nodes,function(node){return node.getLayout().value===0});var iterations=filteredNodes.length!==0?0:seriesModel.get("layoutIterations");
layoutSankey(nodes,edges,nodeWidth,nodeGap,width,height,iterations)})};function getViewRect(seriesModel,api){return layout.getLayoutRect(seriesModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()})}function layoutSankey(nodes,edges,nodeWidth,nodeGap,width,height,iterations){computeNodeBreadths(nodes,nodeWidth,width);computeNodeDepths(nodes,edges,height,nodeGap,iterations);computeEdgeDepths(nodes)}function computeNodeValues(nodes){zrUtil.each(nodes,function(node){var value1=sum(node.outEdges,getEdgeValue);var value2=sum(node.inEdges,getEdgeValue);var value=Math.max(value1,value2);node.setLayout({value:value},true)})}function computeNodeBreadths(nodes,nodeWidth,width){var remainNodes=nodes;var nextNode=null;var x=0;var kx=0;while(remainNodes.length){nextNode=[];for(var i=0,len=remainNodes.length;i<len;i++){var node=remainNodes[i];node.setLayout({x:x},true);node.setLayout({dx:nodeWidth},true);for(var j=0,lenj=node.outEdges.length;j<lenj;j++){nextNode.push(node.outEdges[j].node2)}}remainNodes=nextNode;++x}moveSinksRight(nodes,x);kx=(width-nodeWidth)/(x-1);scaleNodeBreadths(nodes,kx)}function moveSinksRight(nodes,x){zrUtil.each(nodes,function(node){if(!node.outEdges.length){node.setLayout({x:x-1},true)}})}function scaleNodeBreadths(nodes,kx){zrUtil.each(nodes,function(node){var nodeX=node.getLayout().x*kx;node.setLayout({x:nodeX},true)})}function computeNodeDepths(nodes,edges,height,nodeGap,iterations){var nodesByBreadth=nest().key(function(d){return d.getLayout().x}).sortKeys(ascending).entries(nodes).map(function(d){return d.values});initializeNodeDepth(nodes,nodesByBreadth,edges,height,nodeGap);resolveCollisions(nodesByBreadth,nodeGap,height);for(var alpha=1;iterations>0;iterations--){alpha*=0.99;relaxRightToLeft(nodesByBreadth,alpha);resolveCollisions(nodesByBreadth,nodeGap,height);relaxLeftToRight(nodesByBreadth,alpha);resolveCollisions(nodesByBreadth,nodeGap,height)}}function initializeNodeDepth(nodes,nodesByBreadth,edges,height,nodeGap){var kyArray=[];zrUtil.each(nodesByBreadth,function(nodes){var n=nodes.length;var sum=0;zrUtil.each(nodes,function(node){sum+=node.getLayout().value});var ky=(height-(n-1)*nodeGap)/sum;kyArray.push(ky)});kyArray.sort(function(a,b){return a-b});var ky0=kyArray[0];zrUtil.each(nodesByBreadth,function(nodes){zrUtil.each(nodes,function(node,i){node.setLayout({y:i},true);var nodeDy=node.getLayout().value*ky0;node.setLayout({dy:nodeDy},true)})});zrUtil.each(edges,function(edge){var edgeDy=+edge.getValue()*ky0;edge.setLayout({dy:edgeDy},true)})}function resolveCollisions(nodesByBreadth,nodeGap,height){zrUtil.each(nodesByBreadth,function(nodes){var node;var dy;var y0=0;var n=nodes.length;var i;nodes.sort(ascendingDepth);for(i=0;i<n;i++){node=nodes[i];dy=y0-node.getLayout().y;if(dy>0){var nodeY=node.getLayout().y+dy;node.setLayout({y:nodeY},true)}y0=node.getLayout().y+node.getLayout().dy+nodeGap}dy=y0-nodeGap-height;if(dy>0){var nodeY=node.getLayout().y-dy;node.setLayout({y:nodeY},true);y0=node.getLayout().y;for(i=n-2;i>=0;--i){node=nodes[i];dy=node.getLayout().y+node.getLayout().dy+nodeGap-y0;if(dy>0){nodeY=node.getLayout().y-dy;node.setLayout({y:nodeY},true)}y0=node.getLayout().y}}})}function relaxRightToLeft(nodesByBreadth,alpha){zrUtil.each(nodesByBreadth.slice().reverse(),function(nodes){zrUtil.each(nodes,function(node){if(node.outEdges.length){var y=sum(node.outEdges,weightedTarget)/sum(node.outEdges,getEdgeValue);var nodeY=node.getLayout().y+(y-center(node))*alpha;node.setLayout({y:nodeY},true)}})})}function weightedTarget(edge){return center(edge.node2)*edge.getValue()}function relaxLeftToRight(nodesByBreadth,alpha){zrUtil.each(nodesByBreadth,function(nodes){zrUtil.each(nodes,function(node){if(node.inEdges.length){var y=sum(node.inEdges,weightedSource)/sum(node.inEdges,getEdgeValue);var nodeY=node.getLayout().y+(y-center(node))*alpha;node.setLayout({y:nodeY},true)}})})}function weightedSource(edge){return center(edge.node1)*edge.getValue()}function computeEdgeDepths(nodes){zrUtil.each(nodes,function(node){node.outEdges.sort(ascendingTargetDepth);node.inEdges.sort(ascendingSourceDepth)});zrUtil.each(nodes,function(node){var sy=0;var ty=0;zrUtil.each(node.outEdges,function(edge){edge.setLayout({sy:sy},true);sy+=edge.getLayout().dy});zrUtil.each(node.inEdges,function(edge){edge.setLayout({ty:ty},true);ty+=edge.getLayout().dy})})}function ascendingTargetDepth(a,b){return a.node2.getLayout().y-b.node2.getLayout().y}function ascendingSourceDepth(a,b){return a.node1.getLayout().y-b.node1.getLayout().y}function sum(array,f){var sum=0;var len=array.length;var i=-1;while(++i<len){var value=+f.call(array,array[i],i);if(!isNaN(value)){sum+=value}}return sum}function center(node){return node.getLayout().y+node.getLayout().dy/2}function ascendingDepth(a,b){return a.getLayout().y-b.getLayout().y}function ascending(a,b){return a<b?-1:a>b?1:a===b?0:NaN}function getEdgeValue(edge){return edge.getValue()}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);
function nest(){var keysFunction=[];var sortKeysFunction=[];function map(array,depth){if(depth>=keysFunction.length){return array}var i=-1;var n=array.length;var keyFunction=keysFunction[depth++];var mapObject={};var valuesByKey={};while(++i<n){var keyValue=keyFunction(array[i]);var values=valuesByKey[keyValue];if(values){values.push(array[i])}else{valuesByKey[keyValue]=[array[i]]}}zrUtil.each(valuesByKey,function(value,key){mapObject[key]=map(value,depth)});return mapObject}function entriesMap(mapObject,depth){if(depth>=keysFunction.length){return mapObject}var array=[];var sortKeyFunction=sortKeysFunction[depth++];zrUtil.each(mapObject,function(value,key){array.push({key:key,values:entriesMap(value,depth)})});if(sortKeyFunction){return array.sort(function(a,b){return sortKeyFunction(a.key,b.key)})}else{return array}}return{key:function(d){keysFunction.push(d);return this},sortKeys:function(order){sortKeysFunction[keysFunction.length-1]=order;return this},entries:function(array){return entriesMap(map(array,0),0)}}}module.exports=nest}),(function(module,exports,__webpack_require__){var VisualMapping=__webpack_require__(206);var zrUtil=__webpack_require__(4);module.exports=function(ecModel,payload){ecModel.eachSeriesByType("sankey",function(seriesModel){var graph=seriesModel.getGraph();var nodes=graph.nodes;nodes.sort(function(a,b){return a.getLayout().value-b.getLayout().value});var minValue=nodes[0].getLayout().value;var maxValue=nodes[nodes.length-1].getLayout().value;zrUtil.each(nodes,function(node){var mapping=new VisualMapping({type:"color",mappingMethod:"linear",dataExtent:[minValue,maxValue],visual:seriesModel.get("color")});var mapValueToColor=mapping.mapValueToVisual(node.getLayout().value);node.setVisual("color",mapValueToColor);var itemModel=node.getModel();var customColor=itemModel.get("itemStyle.normal.color");if(customColor!=null){node.setVisual("color",customColor)}})})}}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);__webpack_require__(261);__webpack_require__(264);echarts.registerVisual(__webpack_require__(265));echarts.registerLayout(__webpack_require__(266))}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var SeriesModel=__webpack_require__(83);var whiskerBoxCommon=__webpack_require__(262);var BoxplotSeries=SeriesModel.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:["min","Q1","median","Q3","max"],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:true,hoverAnimation:true,layout:null,boxWidth:[7,50],itemStyle:{normal:{color:"#fff",borderWidth:1},emphasis:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}});zrUtil.mixin(BoxplotSeries,whiskerBoxCommon.seriesModelMixin,true);module.exports=BoxplotSeries}),(function(module,exports,__webpack_require__){var List=__webpack_require__(101);var completeDimensions=__webpack_require__(113);var WhiskerBoxDraw=__webpack_require__(263);var zrUtil=__webpack_require__(4);var seriesModelMixin={_baseAxisDim:null,getInitialData:function(option,ecModel){var categories;var xAxisModel=ecModel.getComponent("xAxis",this.get("xAxisIndex"));var yAxisModel=ecModel.getComponent("yAxis",this.get("yAxisIndex"));var xAxisType=xAxisModel.get("type");var yAxisType=yAxisModel.get("type");var addOrdinal;if(xAxisType==="category"){option.layout="horizontal";categories=xAxisModel.getCategories();addOrdinal=true}else{if(yAxisType==="category"){option.layout="vertical";categories=yAxisModel.getCategories();addOrdinal=true}else{option.layout=option.layout||"horizontal"}}var coordDims=["x","y"];var baseAxisDimIndex=option.layout==="horizontal"?0:1;var baseAxisDim=this._baseAxisDim=coordDims[baseAxisDimIndex];var otherAxisDim=coordDims[1-baseAxisDimIndex];var data=option.data;addOrdinal&&zrUtil.each(data,function(item,index){if(item.value&&zrUtil.isArray(item.value)){item.value.unshift(index)}else{zrUtil.isArray(item)&&item.unshift(index)}});var defaultValueDimensions=this.defaultValueDimensions;var dimensions=[{name:baseAxisDim,otherDims:{tooltip:false},dimsDef:["base"]},{name:otherAxisDim,dimsDef:defaultValueDimensions.slice()}];dimensions=completeDimensions(dimensions,data,{encodeDef:this.get("encode"),dimsDef:this.get("dimensions"),dimCount:defaultValueDimensions.length+1});var list=new List(dimensions,this);list.initData(data,categories?categories.slice():null);return list},getBaseAxis:function(){var dim=this._baseAxisDim;return this.ecModel.getComponent(dim+"Axis",this.get(dim+"AxisIndex")).axis}};var viewMixin={init:function(){var whiskerBoxDraw=this._whiskerBoxDraw=new WhiskerBoxDraw(this.getStyleUpdater());this.group.add(whiskerBoxDraw.group)},render:function(seriesModel,ecModel,api){this._whiskerBoxDraw.updateData(seriesModel.getData())},remove:function(ecModel){this._whiskerBoxDraw.remove()}};module.exports={seriesModelMixin:seriesModelMixin,viewMixin:viewMixin}
}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var graphic=__webpack_require__(20);var Path=__webpack_require__(22);var WhiskerPath=Path.extend({type:"whiskerInBox",shape:{},buildPath:function(ctx,shape){for(var i in shape){if(shape.hasOwnProperty(i)&&i.indexOf("ends")===0){var pts=shape[i];ctx.moveTo(pts[0][0],pts[0][1]);ctx.lineTo(pts[1][0],pts[1][1])}}}});function WhiskerBox(data,idx,styleUpdater,isInit){graphic.Group.call(this);this.bodyIndex;this.whiskerIndex;this.styleUpdater=styleUpdater;this._createContent(data,idx,isInit);this.updateData(data,idx,isInit);this._seriesModel}var whiskerBoxProto=WhiskerBox.prototype;whiskerBoxProto._createContent=function(data,idx,isInit){var itemLayout=data.getItemLayout(idx);var constDim=itemLayout.chartLayout==="horizontal"?1:0;var count=0;this.add(new graphic.Polygon({shape:{points:isInit?transInit(itemLayout.bodyEnds,constDim,itemLayout):itemLayout.bodyEnds},style:{strokeNoScale:true},z2:100}));this.bodyIndex=count++;var whiskerEnds=zrUtil.map(itemLayout.whiskerEnds,function(ends){return isInit?transInit(ends,constDim,itemLayout):ends});this.add(new WhiskerPath({shape:makeWhiskerEndsShape(whiskerEnds),style:{strokeNoScale:true},z2:100}));this.whiskerIndex=count++};function transInit(points,dim,itemLayout){return zrUtil.map(points,function(point){point=point.slice();point[dim]=itemLayout.initBaseline;return point})}function makeWhiskerEndsShape(whiskerEnds){var shape={};zrUtil.each(whiskerEnds,function(ends,i){shape["ends"+i]=ends});return shape}whiskerBoxProto.updateData=function(data,idx,isInit){var seriesModel=this._seriesModel=data.hostModel;var itemLayout=data.getItemLayout(idx);var updateMethod=graphic[isInit?"initProps":"updateProps"];updateMethod(this.childAt(this.bodyIndex),{shape:{points:itemLayout.bodyEnds}},seriesModel,idx);updateMethod(this.childAt(this.whiskerIndex),{shape:makeWhiskerEndsShape(itemLayout.whiskerEnds)},seriesModel,idx);this.styleUpdater.call(null,this,data,idx)};zrUtil.inherits(WhiskerBox,graphic.Group);function WhiskerBoxDraw(styleUpdater){this.group=new graphic.Group();this.styleUpdater=styleUpdater}var whiskerBoxDrawProto=WhiskerBoxDraw.prototype;whiskerBoxDrawProto.updateData=function(data){var group=this.group;var oldData=this._data;var styleUpdater=this.styleUpdater;data.diff(oldData).add(function(newIdx){if(data.hasValue(newIdx)){var symbolEl=new WhiskerBox(data,newIdx,styleUpdater,true);data.setItemGraphicEl(newIdx,symbolEl);group.add(symbolEl)}}).update(function(newIdx,oldIdx){var symbolEl=oldData.getItemGraphicEl(oldIdx);if(!data.hasValue(newIdx)){group.remove(symbolEl);return}if(!symbolEl){symbolEl=new WhiskerBox(data,newIdx,styleUpdater)}else{symbolEl.updateData(data,newIdx)}group.add(symbolEl);data.setItemGraphicEl(newIdx,symbolEl)}).remove(function(oldIdx){var el=oldData.getItemGraphicEl(oldIdx);el&&group.remove(el)}).execute();this._data=data};whiskerBoxDrawProto.remove=function(){var group=this.group;var data=this._data;this._data=null;data&&data.eachItemGraphicEl(function(el){el&&group.remove(el)})};module.exports=WhiskerBoxDraw}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var ChartView=__webpack_require__(85);var graphic=__webpack_require__(20);var whiskerBoxCommon=__webpack_require__(262);var BoxplotView=ChartView.extend({type:"boxplot",getStyleUpdater:function(){return updateStyle},dispose:zrUtil.noop});zrUtil.mixin(BoxplotView,whiskerBoxCommon.viewMixin,true);var normalStyleAccessPath=["itemStyle","normal"];var emphasisStyleAccessPath=["itemStyle","emphasis"];function updateStyle(itemGroup,data,idx){var itemModel=data.getItemModel(idx);var normalItemStyleModel=itemModel.getModel(normalStyleAccessPath);var borderColor=data.getItemVisual(idx,"color");var itemStyle=normalItemStyleModel.getItemStyle(["borderColor"]);var whiskerEl=itemGroup.childAt(itemGroup.whiskerIndex);whiskerEl.style.set(itemStyle);whiskerEl.style.stroke=borderColor;whiskerEl.dirty();var bodyEl=itemGroup.childAt(itemGroup.bodyIndex);bodyEl.style.set(itemStyle);bodyEl.style.stroke=borderColor;bodyEl.dirty();var hoverStyle=itemModel.getModel(emphasisStyleAccessPath).getItemStyle();graphic.setHoverStyle(itemGroup,hoverStyle)}module.exports=BoxplotView}),(function(module,exports){var borderColorQuery=["itemStyle","normal","borderColor"];module.exports=function(ecModel,api){var globalColors=ecModel.get("color");ecModel.eachRawSeriesByType("boxplot",function(seriesModel){var defaulColor=globalColors[seriesModel.seriesIndex%globalColors.length];var data=seriesModel.getData();data.setVisual({legendSymbol:"roundRect",color:seriesModel.get(borderColorQuery)||defaulColor});if(!ecModel.isSeriesFiltered(seriesModel)){data.each(function(idx){var itemModel=data.getItemModel(idx);data.setItemVisual(idx,{color:itemModel.get(borderColorQuery,true)})})}})}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var numberUtil=__webpack_require__(7);var parsePercent=numberUtil.parsePercent;
var each=zrUtil.each;module.exports=function(ecModel){var groupResult=groupSeriesByAxis(ecModel);each(groupResult,function(groupItem){var seriesModels=groupItem.seriesModels;if(!seriesModels.length){return}calculateBase(groupItem);each(seriesModels,function(seriesModel,idx){layoutSingleSeries(seriesModel,groupItem.boxOffsetList[idx],groupItem.boxWidthList[idx])})})};function groupSeriesByAxis(ecModel){var result=[];var axisList=[];ecModel.eachSeriesByType("boxplot",function(seriesModel){var baseAxis=seriesModel.getBaseAxis();var idx=zrUtil.indexOf(axisList,baseAxis);if(idx<0){idx=axisList.length;axisList[idx]=baseAxis;result[idx]={axis:baseAxis,seriesModels:[]}}result[idx].seriesModels.push(seriesModel)});return result}function calculateBase(groupItem){var extent;var baseAxis=groupItem.axis;var seriesModels=groupItem.seriesModels;var seriesCount=seriesModels.length;var boxWidthList=groupItem.boxWidthList=[];var boxOffsetList=groupItem.boxOffsetList=[];var boundList=[];var bandWidth;if(baseAxis.type==="category"){bandWidth=baseAxis.getBandWidth()}else{var maxDataCount=0;each(seriesModels,function(seriesModel){maxDataCount=Math.max(maxDataCount,seriesModel.getData().count())});extent=baseAxis.getExtent(),Math.abs(extent[1]-extent[0])/maxDataCount}each(seriesModels,function(seriesModel){var boxWidthBound=seriesModel.get("boxWidth");if(!zrUtil.isArray(boxWidthBound)){boxWidthBound=[boxWidthBound,boxWidthBound]}boundList.push([parsePercent(boxWidthBound[0],bandWidth)||0,parsePercent(boxWidthBound[1],bandWidth)||0])});var availableWidth=bandWidth*0.8-2;var boxGap=availableWidth/seriesCount*0.3;var boxWidth=(availableWidth-boxGap*(seriesCount-1))/seriesCount;var base=boxWidth/2-availableWidth/2;each(seriesModels,function(seriesModel,idx){boxOffsetList.push(base);base+=boxGap+boxWidth;boxWidthList.push(Math.min(Math.max(boxWidth,boundList[idx][0]),boundList[idx][1]))})}function layoutSingleSeries(seriesModel,offset,boxWidth){var coordSys=seriesModel.coordinateSystem;var data=seriesModel.getData();var halfWidth=boxWidth/2;var chartLayout=seriesModel.get("layout");var variableDim=chartLayout==="horizontal"?0:1;var constDim=1-variableDim;var coordDims=["x","y"];var vDims=[];var cDim;zrUtil.each(data.dimensions,function(dimName){var dimInfo=data.getDimensionInfo(dimName);var coordDim=dimInfo.coordDim;if(coordDim===coordDims[constDim]){vDims.push(dimName)}else{if(coordDim===coordDims[variableDim]){cDim=dimName}}});if(cDim==null||vDims.length<5){return}data.each([cDim].concat(vDims),function(){var args=arguments;var axisDimVal=args[0];var idx=args[vDims.length+1];var median=getPoint(args[3]);var end1=getPoint(args[1]);var end5=getPoint(args[5]);var whiskerEnds=[[end1,getPoint(args[2])],[end5,getPoint(args[4])]];layEndLine(end1);layEndLine(end5);layEndLine(median);var bodyEnds=[];addBodyEnd(whiskerEnds[0][1],0);addBodyEnd(whiskerEnds[1][1],1);data.setItemLayout(idx,{chartLayout:chartLayout,initBaseline:median[constDim],median:median,bodyEnds:bodyEnds,whiskerEnds:whiskerEnds});function getPoint(val){var p=[];p[variableDim]=axisDimVal;p[constDim]=val;var point;if(isNaN(axisDimVal)||isNaN(val)){point=[NaN,NaN]}else{point=coordSys.dataToPoint(p);point[variableDim]+=offset}return point}function addBodyEnd(point,start){var point1=point.slice();var point2=point.slice();point1[variableDim]+=halfWidth;point2[variableDim]-=halfWidth;start?bodyEnds.push(point1,point2):bodyEnds.push(point2,point1)}function layEndLine(endCenter){var line=[endCenter.slice(),endCenter.slice()];line[0][variableDim]-=halfWidth;line[1][variableDim]+=halfWidth;whiskerEnds.push(line)}})}}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);__webpack_require__(268);__webpack_require__(269);echarts.registerPreprocessor(__webpack_require__(270));echarts.registerVisual(__webpack_require__(271));echarts.registerLayout(__webpack_require__(272))}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var SeriesModel=__webpack_require__(83);var whiskerBoxCommon=__webpack_require__(262);var CandlestickSeries=SeriesModel.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:["open","close","lowest","highest"],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:true,hoverAnimation:true,layout:null,itemStyle:{normal:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,animationUpdate:false,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(dataIndex,data,selectors){var itemLayout=data.getItemLayout(dataIndex);return selectors.rect(itemLayout.brushRect)}});zrUtil.mixin(CandlestickSeries,whiskerBoxCommon.seriesModelMixin,true);module.exports=CandlestickSeries}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var ChartView=__webpack_require__(85);
var graphic=__webpack_require__(20);var whiskerBoxCommon=__webpack_require__(262);var CandlestickView=ChartView.extend({type:"candlestick",getStyleUpdater:function(){return updateStyle},dispose:zrUtil.noop});zrUtil.mixin(CandlestickView,whiskerBoxCommon.viewMixin,true);var normalStyleAccessPath=["itemStyle","normal"];var emphasisStyleAccessPath=["itemStyle","emphasis"];function updateStyle(itemGroup,data,idx){var itemModel=data.getItemModel(idx);var normalItemStyleModel=itemModel.getModel(normalStyleAccessPath);var color=data.getItemVisual(idx,"color");var borderColor=data.getItemVisual(idx,"borderColor")||color;var itemStyle=normalItemStyleModel.getItemStyle(["color","color0","borderColor","borderColor0"]);var whiskerEl=itemGroup.childAt(itemGroup.whiskerIndex);whiskerEl.useStyle(itemStyle);whiskerEl.style.stroke=borderColor;var bodyEl=itemGroup.childAt(itemGroup.bodyIndex);bodyEl.useStyle(itemStyle);bodyEl.style.fill=color;bodyEl.style.stroke=borderColor;var hoverStyle=itemModel.getModel(emphasisStyleAccessPath).getItemStyle();graphic.setHoverStyle(itemGroup,hoverStyle)}module.exports=CandlestickView}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);module.exports=function(option){if(!option||!zrUtil.isArray(option.series)){return}zrUtil.each(option.series,function(seriesItem){if(zrUtil.isObject(seriesItem)&&seriesItem.type==="k"){seriesItem.type="candlestick"}})}}),(function(module,exports){var positiveBorderColorQuery=["itemStyle","normal","borderColor"];var negativeBorderColorQuery=["itemStyle","normal","borderColor0"];var positiveColorQuery=["itemStyle","normal","color"];var negativeColorQuery=["itemStyle","normal","color0"];module.exports=function(ecModel,api){ecModel.eachRawSeriesByType("candlestick",function(seriesModel){var data=seriesModel.getData();data.setVisual({legendSymbol:"roundRect"});if(!ecModel.isSeriesFiltered(seriesModel)){data.each(function(idx){var itemModel=data.getItemModel(idx);var sign=data.getItemLayout(idx).sign;data.setItemVisual(idx,{color:itemModel.get(sign>0?positiveColorQuery:negativeColorQuery),borderColor:itemModel.get(sign>0?positiveBorderColorQuery:negativeBorderColorQuery)})})}})}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var retrieve=__webpack_require__(4).retrieve;var parsePercent=__webpack_require__(7).parsePercent;var graphic=__webpack_require__(20);module.exports=function(ecModel){ecModel.eachSeriesByType("candlestick",function(seriesModel){var coordSys=seriesModel.coordinateSystem;var data=seriesModel.getData();var candleWidth=calculateCandleWidth(seriesModel,data);var chartLayout=seriesModel.get("layout");var variableDim=chartLayout==="horizontal"?0:1;var constDim=1-variableDim;var coordDims=["x","y"];var vDims=[];var cDim;zrUtil.each(data.dimensions,function(dimName){var dimInfo=data.getDimensionInfo(dimName);var coordDim=dimInfo.coordDim;if(coordDim===coordDims[constDim]){vDims.push(dimName)}else{if(coordDim===coordDims[variableDim]){cDim=dimName}}});if(cDim==null||vDims.length<4){return}var dataIndex=0;data.each([cDim].concat(vDims),function(){var args=arguments;var axisDimVal=args[0];var idx=args[vDims.length+1];var openVal=args[1];var closeVal=args[2];var lowestVal=args[3];var highestVal=args[4];var ocLow=Math.min(openVal,closeVal);var ocHigh=Math.max(openVal,closeVal);var ocLowPoint=getPoint(ocLow);var ocHighPoint=getPoint(ocHigh);var lowestPoint=getPoint(lowestVal);var highestPoint=getPoint(highestVal);var whiskerEnds=[[subPixelOptimizePoint(highestPoint),subPixelOptimizePoint(ocHighPoint)],[subPixelOptimizePoint(lowestPoint),subPixelOptimizePoint(ocLowPoint)]];var bodyEnds=[];addBodyEnd(ocHighPoint,0);addBodyEnd(ocLowPoint,1);var sign;if(openVal>closeVal){sign=-1}else{if(openVal<closeVal){sign=1}else{if(dataIndex>0){sign=data.getItemModel(dataIndex-1).get()[2]<=closeVal?1:-1}else{sign=1}}}data.setItemLayout(idx,{chartLayout:chartLayout,sign:sign,initBaseline:openVal>closeVal?ocHighPoint[constDim]:ocLowPoint[constDim],bodyEnds:bodyEnds,whiskerEnds:whiskerEnds,brushRect:makeBrushRect()});++dataIndex;function getPoint(val){var p=[];p[variableDim]=axisDimVal;p[constDim]=val;return(isNaN(axisDimVal)||isNaN(val))?[NaN,NaN]:coordSys.dataToPoint(p)}function addBodyEnd(point,start){var point1=point.slice();var point2=point.slice();point1[variableDim]=graphic.subPixelOptimize(point1[variableDim]+candleWidth/2,1,false);point2[variableDim]=graphic.subPixelOptimize(point2[variableDim]-candleWidth/2,1,true);start?bodyEnds.push(point1,point2):bodyEnds.push(point2,point1)}function makeBrushRect(){var pmin=getPoint(Math.min(openVal,closeVal,lowestVal,highestVal));var pmax=getPoint(Math.max(openVal,closeVal,lowestVal,highestVal));pmin[variableDim]-=candleWidth/2;pmax[variableDim]-=candleWidth/2;return{x:pmin[0],y:pmin[1],width:constDim?candleWidth:pmax[0]-pmin[0],height:constDim?pmax[1]-pmin[1]:candleWidth}}function subPixelOptimizePoint(point){point[variableDim]=graphic.subPixelOptimize(point[variableDim],1);
return point}},true)})};function calculateCandleWidth(seriesModel,data){var baseAxis=seriesModel.getBaseAxis();var extent;var bandWidth=baseAxis.type==="category"?baseAxis.getBandWidth():(extent=baseAxis.getExtent(),Math.abs(extent[1]-extent[0])/data.count());var barMaxWidth=parsePercent(retrieve(seriesModel.get("barMaxWidth"),bandWidth),bandWidth);var barMinWidth=parsePercent(retrieve(seriesModel.get("barMinWidth"),1),bandWidth);var barWidth=seriesModel.get("barWidth");return barWidth!=null?parsePercent(barWidth,bandWidth):Math.max(Math.min(bandWidth/2,barMaxWidth),barMinWidth)}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var echarts=__webpack_require__(1);__webpack_require__(274);__webpack_require__(275);echarts.registerVisual(zrUtil.curry(__webpack_require__(124),"effectScatter","circle",null));echarts.registerLayout(zrUtil.curry(__webpack_require__(125),"effectScatter"))}),(function(module,exports,__webpack_require__){var createListFromArray=__webpack_require__(112);var SeriesModel=__webpack_require__(83);module.exports=SeriesModel.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(option,ecModel){var list=createListFromArray(option.data,this,ecModel);return list},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:true,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}})}),(function(module,exports,__webpack_require__){var SymbolDraw=__webpack_require__(119);var EffectSymbol=__webpack_require__(276);__webpack_require__(1).extendChartView({type:"effectScatter",init:function(){this._symbolDraw=new SymbolDraw(EffectSymbol)},render:function(seriesModel,ecModel,api){var data=seriesModel.getData();var effectSymbolDraw=this._symbolDraw;effectSymbolDraw.updateData(data);this.group.add(effectSymbolDraw.group)},updateLayout:function(){this._symbolDraw.updateLayout()},remove:function(ecModel,api){this._symbolDraw&&this._symbolDraw.remove(api)},dispose:function(){}})}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var symbolUtil=__webpack_require__(114);var graphic=__webpack_require__(20);var numberUtil=__webpack_require__(7);var Symbol=__webpack_require__(120);var Group=graphic.Group;var EFFECT_RIPPLE_NUMBER=3;function normalizeSymbolSize(symbolSize){if(!zrUtil.isArray(symbolSize)){symbolSize=[+symbolSize,+symbolSize]}return symbolSize}function updateRipplePath(rippleGroup,effectCfg){rippleGroup.eachChild(function(ripplePath){ripplePath.attr({z:effectCfg.z,zlevel:effectCfg.zlevel,style:{stroke:effectCfg.brushType==="stroke"?effectCfg.color:null,fill:effectCfg.brushType==="fill"?effectCfg.color:null}})})}function EffectSymbol(data,idx){Group.call(this);var symbol=new Symbol(data,idx);var rippleGroup=new Group();this.add(symbol);this.add(rippleGroup);rippleGroup.beforeUpdate=function(){this.attr(symbol.getScale())};this.updateData(data,idx)}var effectSymbolProto=EffectSymbol.prototype;effectSymbolProto.stopEffectAnimation=function(){this.childAt(1).removeAll()};effectSymbolProto.startEffectAnimation=function(effectCfg){var symbolType=effectCfg.symbolType;var color=effectCfg.color;var rippleGroup=this.childAt(1);for(var i=0;i<EFFECT_RIPPLE_NUMBER;i++){var ripplePath=symbolUtil.createSymbol(symbolType,-1,-1,2,2,color);ripplePath.attr({style:{strokeNoScale:true},z2:99,silent:true,scale:[0.5,0.5]});var delay=-i/EFFECT_RIPPLE_NUMBER*effectCfg.period+effectCfg.effectOffset;ripplePath.animate("",true).when(effectCfg.period,{scale:[effectCfg.rippleScale/2,effectCfg.rippleScale/2]}).delay(delay).start();ripplePath.animateStyle(true).when(effectCfg.period,{opacity:0}).delay(delay).start();rippleGroup.add(ripplePath)}updateRipplePath(rippleGroup,effectCfg)};effectSymbolProto.updateEffectAnimation=function(effectCfg){var oldEffectCfg=this._effectCfg;var rippleGroup=this.childAt(1);var DIFFICULT_PROPS=["symbolType","period","rippleScale"];for(var i=0;i<DIFFICULT_PROPS.length;i++){var propName=DIFFICULT_PROPS[i];if(oldEffectCfg[propName]!==effectCfg[propName]){this.stopEffectAnimation();this.startEffectAnimation(effectCfg);return}}updateRipplePath(rippleGroup,effectCfg)};effectSymbolProto.highlight=function(){this.trigger("emphasis")};effectSymbolProto.downplay=function(){this.trigger("normal")};effectSymbolProto.updateData=function(data,idx){var seriesModel=data.hostModel;this.childAt(0).updateData(data,idx);var rippleGroup=this.childAt(1);var itemModel=data.getItemModel(idx);var symbolType=data.getItemVisual(idx,"symbol");var symbolSize=normalizeSymbolSize(data.getItemVisual(idx,"symbolSize"));var color=data.getItemVisual(idx,"color");rippleGroup.attr("scale",symbolSize);rippleGroup.traverse(function(ripplePath){ripplePath.attr({fill:color})});var symbolOffset=itemModel.getShallow("symbolOffset");if(symbolOffset){var pos=rippleGroup.position;pos[0]=numberUtil.parsePercent(symbolOffset[0],symbolSize[0]);pos[1]=numberUtil.parsePercent(symbolOffset[1],symbolSize[1])
}rippleGroup.rotation=(itemModel.getShallow("symbolRotate")||0)*Math.PI/180||0;var effectCfg={};effectCfg.showEffectOn=seriesModel.get("showEffectOn");effectCfg.rippleScale=itemModel.get("rippleEffect.scale");effectCfg.brushType=itemModel.get("rippleEffect.brushType");effectCfg.period=itemModel.get("rippleEffect.period")*1000;effectCfg.effectOffset=idx/data.count();effectCfg.z=itemModel.getShallow("z")||0;effectCfg.zlevel=itemModel.getShallow("zlevel")||0;effectCfg.symbolType=symbolType;effectCfg.color=color;this.off("mouseover").off("mouseout").off("emphasis").off("normal");if(effectCfg.showEffectOn==="render"){this._effectCfg?this.updateEffectAnimation(effectCfg):this.startEffectAnimation(effectCfg);this._effectCfg=effectCfg}else{this._effectCfg=null;this.stopEffectAnimation();var symbol=this.childAt(0);var onEmphasis=function(){symbol.highlight();if(effectCfg.showEffectOn!=="render"){this.startEffectAnimation(effectCfg)}};var onNormal=function(){symbol.downplay();if(effectCfg.showEffectOn!=="render"){this.stopEffectAnimation()}};this.on("mouseover",onEmphasis,this).on("mouseout",onNormal,this).on("emphasis",onEmphasis,this).on("normal",onNormal,this)}this._effectCfg=effectCfg};effectSymbolProto.fadeOut=function(cb){this.off("mouseover").off("mouseout").off("emphasis").off("normal");cb&&cb()};zrUtil.inherits(EffectSymbol,Group);module.exports=EffectSymbol}),(function(module,exports,__webpack_require__){__webpack_require__(278);__webpack_require__(279);var echarts=__webpack_require__(1);echarts.registerLayout(__webpack_require__(284));echarts.registerVisual(__webpack_require__(285))}),(function(module,exports,__webpack_require__){var SeriesModel=__webpack_require__(83);var List=__webpack_require__(101);var zrUtil=__webpack_require__(4);var formatUtil=__webpack_require__(6);var CoordinateSystem=__webpack_require__(79);function preprocessOption(seriesOpt){var data=seriesOpt.data;if(data&&data[0]&&data[0][0]&&data[0][0].coord){if(true){console.warn("Lines data configuration has been changed to"+" { coords:[[1,2],[2,3]] }")}seriesOpt.data=zrUtil.map(data,function(itemOpt){var coords=[itemOpt[0].coord,itemOpt[1].coord];var target={coords:coords};if(itemOpt[0].name){target.fromName=itemOpt[0].name}if(itemOpt[1].name){target.toName=itemOpt[1].name}return zrUtil.mergeAll([target,itemOpt[0],itemOpt[1]])})}}var LinesSeries=SeriesModel.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.normal.color",init:function(option){preprocessOption(option);LinesSeries.superApply(this,"init",arguments)},mergeOption:function(option){preprocessOption(option);LinesSeries.superApply(this,"mergeOption",arguments)},getInitialData:function(option,ecModel){if(true){var CoordSys=CoordinateSystem.get(option.coordinateSystem);if(!CoordSys){throw new Error("Unkown coordinate system "+option.coordinateSystem)}}var lineData=new List(["value"],this);lineData.hasItemOption=false;lineData.initData(option.data,[],function(dataItem,dimName,dataIndex,dimIndex){if(dataItem instanceof Array){return NaN}else{lineData.hasItemOption=true;var value=dataItem.value;if(value!=null){return value instanceof Array?value[dimIndex]:value}}});return lineData},formatTooltip:function(dataIndex){var data=this.getData();var itemModel=data.getItemModel(dataIndex);var name=itemModel.get("name");if(name){return name}var fromName=itemModel.get("fromName");var toName=itemModel.get("toName");var html=[];fromName!=null&&html.push(fromName);toName!=null&&html.push(toName);return formatUtil.encodeHTML(html.join(" > "))},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:true,hoverAnimation:true,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:false,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:true,trailLength:0.2},large:false,largeThreshold:2000,polyline:false,label:{normal:{show:false,position:"end"}},lineStyle:{normal:{opacity:0.5}}}})}),(function(module,exports,__webpack_require__){var LineDraw=__webpack_require__(213);var EffectLine=__webpack_require__(280);var Line=__webpack_require__(214);var Polyline=__webpack_require__(281);var EffectPolyline=__webpack_require__(282);var LargeLineDraw=__webpack_require__(283);__webpack_require__(1).extendChartView({type:"lines",init:function(){},render:function(seriesModel,ecModel,api){var data=seriesModel.getData();var lineDraw=this._lineDraw;var hasEffect=seriesModel.get("effect.show");var isPolyline=seriesModel.get("polyline");var isLarge=seriesModel.get("large")&&data.count()>=seriesModel.get("largeThreshold");if(true){if(hasEffect&&isLarge){console.warn("Large lines not support effect")}}if(hasEffect!==this._hasEffet||isPolyline!==this._isPolyline||isLarge!==this._isLarge){if(lineDraw){lineDraw.remove()}lineDraw=this._lineDraw=isLarge?new LargeLineDraw():new LineDraw(isPolyline?(hasEffect?EffectPolyline:Polyline):(hasEffect?EffectLine:Line));this._hasEffet=hasEffect;this._isPolyline=isPolyline;this._isLarge=isLarge}var zlevel=seriesModel.get("zlevel");
var trailLength=seriesModel.get("effect.trailLength");var zr=api.getZr();var isSvg=zr.painter.getType()==="svg";if(!isSvg){zr.painter.getLayer(zlevel).clear(true)}if(this._lastZlevel!=null&&!isSvg){zr.configLayer(this._lastZlevel,{motionBlur:false})}if(hasEffect&&trailLength){if(true){var notInIndividual=false;ecModel.eachSeries(function(otherSeriesModel){if(otherSeriesModel!==seriesModel&&otherSeriesModel.get("zlevel")===zlevel){notInIndividual=true}});notInIndividual&&console.warn("Lines with trail effect should have an individual zlevel")}if(!isSvg){zr.configLayer(zlevel,{motionBlur:true,lastFrameAlpha:Math.max(Math.min(trailLength/10+0.9,1),0)})}}this.group.add(lineDraw.group);lineDraw.updateData(data);this._lastZlevel=zlevel},updateLayout:function(seriesModel,ecModel,api){this._lineDraw.updateLayout(seriesModel);var zr=api.getZr();var isSvg=zr.painter.getType()==="svg";if(!isSvg){zr.painter.getLayer(this._lastZlevel).clear(true)}},remove:function(ecModel,api){this._lineDraw&&this._lineDraw.remove(api,true);var zr=api.getZr();var isSvg=zr.painter.getType()==="svg";if(!isSvg){zr.painter.getLayer(this._lastZlevel).clear(true)}},dispose:function(){}})}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var Line=__webpack_require__(214);var zrUtil=__webpack_require__(4);var symbolUtil=__webpack_require__(114);var vec2=__webpack_require__(10);var curveUtil=__webpack_require__(40);function EffectLine(lineData,idx,seriesScope){graphic.Group.call(this);this.add(this.createLine(lineData,idx,seriesScope));this._updateEffectSymbol(lineData,idx)}var effectLineProto=EffectLine.prototype;effectLineProto.createLine=function(lineData,idx,seriesScope){return new Line(lineData,idx,seriesScope)};effectLineProto._updateEffectSymbol=function(lineData,idx){var itemModel=lineData.getItemModel(idx);var effectModel=itemModel.getModel("effect");var size=effectModel.get("symbolSize");var symbolType=effectModel.get("symbol");if(!zrUtil.isArray(size)){size=[size,size]}var color=effectModel.get("color")||lineData.getItemVisual(idx,"color");var symbol=this.childAt(1);if(this._symbolType!==symbolType){this.remove(symbol);symbol=symbolUtil.createSymbol(symbolType,-0.5,-0.5,1,1,color);symbol.z2=100;symbol.culling=true;this.add(symbol)}if(!symbol){return}symbol.setStyle("shadowColor",color);symbol.setStyle(effectModel.getItemStyle(["color"]));symbol.attr("scale",size);symbol.setColor(color);symbol.attr("scale",size);this._symbolType=symbolType;this._updateEffectAnimation(lineData,effectModel,idx)};effectLineProto._updateEffectAnimation=function(lineData,effectModel,idx){var symbol=this.childAt(1);if(!symbol){return}var self=this;var points=lineData.getItemLayout(idx);var period=effectModel.get("period")*1000;var loop=effectModel.get("loop");var constantSpeed=effectModel.get("constantSpeed");var delayExpr=zrUtil.retrieve(effectModel.get("delay"),function(idx){return idx/lineData.count()*period/3});var isDelayFunc=typeof delayExpr==="function";symbol.ignore=true;this.updateAnimationPoints(symbol,points);if(constantSpeed>0){period=this.getLineLength(symbol)/constantSpeed*1000}if(period!==this._period||loop!==this._loop){symbol.stopAnimation();var delay=delayExpr;if(isDelayFunc){delay=delayExpr(idx)}if(symbol.__t>0){delay=-period*symbol.__t}symbol.__t=0;var animator=symbol.animate("",loop).when(period,{__t:1}).delay(delay).during(function(){self.updateSymbolPosition(symbol)});if(!loop){animator.done(function(){self.remove(symbol)})}animator.start()}this._period=period;this._loop=loop};effectLineProto.getLineLength=function(symbol){return(vec2.dist(symbol.__p1,symbol.__cp1)+vec2.dist(symbol.__cp1,symbol.__p2))};effectLineProto.updateAnimationPoints=function(symbol,points){symbol.__p1=points[0];symbol.__p2=points[1];symbol.__cp1=points[2]||[(points[0][0]+points[1][0])/2,(points[0][1]+points[1][1])/2]};effectLineProto.updateData=function(lineData,idx,seriesScope){this.childAt(0).updateData(lineData,idx,seriesScope);this._updateEffectSymbol(lineData,idx)};effectLineProto.updateSymbolPosition=function(symbol){var p1=symbol.__p1;var p2=symbol.__p2;var cp1=symbol.__cp1;var t=symbol.__t;var pos=symbol.position;var quadraticAt=curveUtil.quadraticAt;var quadraticDerivativeAt=curveUtil.quadraticDerivativeAt;pos[0]=quadraticAt(p1[0],cp1[0],p2[0],t);pos[1]=quadraticAt(p1[1],cp1[1],p2[1],t);var tx=quadraticDerivativeAt(p1[0],cp1[0],p2[0],t);var ty=quadraticDerivativeAt(p1[1],cp1[1],p2[1],t);symbol.rotation=-Math.atan2(ty,tx)-Math.PI/2;symbol.ignore=false};effectLineProto.updateLayout=function(lineData,idx){this.childAt(0).updateLayout(lineData,idx);var effectModel=lineData.getItemModel(idx).getModel("effect");this._updateEffectAnimation(lineData,effectModel,idx)};zrUtil.inherits(EffectLine,graphic.Group);module.exports=EffectLine}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var zrUtil=__webpack_require__(4);function Polyline(lineData,idx,seriesScope){graphic.Group.call(this);this._createPolyline(lineData,idx,seriesScope)
}var polylineProto=Polyline.prototype;polylineProto._createPolyline=function(lineData,idx,seriesScope){var points=lineData.getItemLayout(idx);var line=new graphic.Polyline({shape:{points:points}});this.add(line);this._updateCommonStl(lineData,idx,seriesScope)};polylineProto.updateData=function(lineData,idx,seriesScope){var seriesModel=lineData.hostModel;var line=this.childAt(0);var target={shape:{points:lineData.getItemLayout(idx)}};graphic.updateProps(line,target,seriesModel,idx);this._updateCommonStl(lineData,idx,seriesScope)};polylineProto._updateCommonStl=function(lineData,idx,seriesScope){var line=this.childAt(0);var itemModel=lineData.getItemModel(idx);var visualColor=lineData.getItemVisual(idx,"color");var lineStyle=seriesScope&&seriesScope.lineStyle;var hoverLineStyle=seriesScope&&seriesScope.hoverLineStyle;if(!seriesScope||lineData.hasItemOption){lineStyle=itemModel.getModel("lineStyle.normal").getLineStyle();hoverLineStyle=itemModel.getModel("lineStyle.emphasis").getLineStyle()}line.useStyle(zrUtil.defaults({strokeNoScale:true,fill:"none",stroke:visualColor},lineStyle));line.hoverStyle=hoverLineStyle;graphic.setHoverStyle(this)};polylineProto.updateLayout=function(lineData,idx){var polyline=this.childAt(0);polyline.setShape("points",lineData.getItemLayout(idx))};zrUtil.inherits(Polyline,graphic.Group);module.exports=Polyline}),(function(module,exports,__webpack_require__){var Polyline=__webpack_require__(281);var zrUtil=__webpack_require__(4);var EffectLine=__webpack_require__(280);var vec2=__webpack_require__(10);function EffectPolyline(lineData,idx,seriesScope){EffectLine.call(this,lineData,idx,seriesScope);this._lastFrame=0;this._lastFramePercent=0}var effectPolylineProto=EffectPolyline.prototype;effectPolylineProto.createLine=function(lineData,idx,seriesScope){return new Polyline(lineData,idx,seriesScope)};effectPolylineProto.updateAnimationPoints=function(symbol,points){this._points=points;var accLenArr=[0];var len=0;for(var i=1;i<points.length;i++){var p1=points[i-1];var p2=points[i];len+=vec2.dist(p1,p2);accLenArr.push(len)}if(len===0){return}for(var i=0;i<accLenArr.length;i++){accLenArr[i]/=len}this._offsets=accLenArr;this._length=len};effectPolylineProto.getLineLength=function(symbol){return this._length};effectPolylineProto.updateSymbolPosition=function(symbol){var t=symbol.__t;var points=this._points;var offsets=this._offsets;var len=points.length;if(!offsets){return}var lastFrame=this._lastFrame;var frame;if(t<this._lastFramePercent){var start=Math.min(lastFrame+1,len-1);for(frame=start;frame>=0;frame--){if(offsets[frame]<=t){break}}frame=Math.min(frame,len-2)}else{for(var frame=lastFrame;frame<len;frame++){if(offsets[frame]>t){break}}frame=Math.min(frame-1,len-2)}vec2.lerp(symbol.position,points[frame],points[frame+1],(t-offsets[frame])/(offsets[frame+1]-offsets[frame]));var tx=points[frame+1][0]-points[frame][0];var ty=points[frame+1][1]-points[frame][1];symbol.rotation=-Math.atan2(ty,tx)-Math.PI/2;this._lastFrame=frame;this._lastFramePercent=t;symbol.ignore=false};zrUtil.inherits(EffectPolyline,EffectLine);module.exports=EffectPolyline}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var quadraticContain=__webpack_require__(45);var lineContain=__webpack_require__(43);var LargeLineShape=graphic.extendShape({shape:{polyline:false,segs:[]},buildPath:function(path,shape){var segs=shape.segs;var isPolyline=shape.polyline;for(var i=0;i<segs.length;i++){var seg=segs[i];if(isPolyline){path.moveTo(seg[0][0],seg[0][1]);for(var j=1;j<seg.length;j++){path.lineTo(seg[j][0],seg[j][1])}}else{path.moveTo(seg[0][0],seg[0][1]);if(seg.length>2){path.quadraticCurveTo(seg[2][0],seg[2][1],seg[1][0],seg[1][1])}else{path.lineTo(seg[1][0],seg[1][1])}}}},findDataIndex:function(x,y){var shape=this.shape;var segs=shape.segs;var isPolyline=shape.polyline;var lineWidth=Math.max(this.style.lineWidth,1);for(var i=0;i<segs.length;i++){var seg=segs[i];if(isPolyline){for(var j=1;j<seg.length;j++){if(lineContain.containStroke(seg[j-1][0],seg[j-1][1],seg[j][0],seg[j][1],lineWidth,x,y)){return i}}}else{if(seg.length>2){if(quadraticContain.containStroke(seg[0][0],seg[0][1],seg[2][0],seg[2][1],seg[1][0],seg[1][1],lineWidth,x,y)){return i}}else{if(lineContain.containStroke(seg[0][0],seg[0][1],seg[1][0],seg[1][1],lineWidth,x,y)){return i}}}}return -1}});function LargeLineDraw(){this.group=new graphic.Group();this._lineEl=new LargeLineShape()}var largeLineProto=LargeLineDraw.prototype;largeLineProto.updateData=function(data){this.group.removeAll();var lineEl=this._lineEl;var seriesModel=data.hostModel;lineEl.setShape({segs:data.mapArray(data.getItemLayout),polyline:seriesModel.get("polyline")});lineEl.useStyle(seriesModel.getModel("lineStyle.normal").getLineStyle());var visualColor=data.getVisual("color");if(visualColor){lineEl.setStyle("stroke",visualColor)}lineEl.setStyle("fill");lineEl.seriesIndex=seriesModel.seriesIndex;lineEl.on("mousemove",function(e){lineEl.dataIndex=null;var dataIndex=lineEl.findDataIndex(e.offsetX,e.offsetY);
if(dataIndex>0){lineEl.dataIndex=dataIndex}});this.group.add(lineEl)};largeLineProto.updateLayout=function(seriesModel){var data=seriesModel.getData();this._lineEl.setShape({segs:data.mapArray(data.getItemLayout)})};largeLineProto.remove=function(){this.group.removeAll()};module.exports=LargeLineDraw}),(function(module,exports,__webpack_require__){module.exports=function(ecModel){ecModel.eachSeriesByType("lines",function(seriesModel){var coordSys=seriesModel.coordinateSystem;var lineData=seriesModel.getData();lineData.each(function(idx){var itemModel=lineData.getItemModel(idx);var coords=(itemModel.option instanceof Array)?itemModel.option:itemModel.get("coords");if(true){if(!(coords instanceof Array&&coords.length>0&&coords[0] instanceof Array)){throw new Error("Invalid coords "+JSON.stringify(coords)+". Lines must have 2d coords array in data item.")}}var pts=[];if(seriesModel.get("polyline")){for(var i=0;i<coords.length;i++){pts.push(coordSys.dataToPoint(coords[i]))}}else{pts[0]=coordSys.dataToPoint(coords[0]);pts[1]=coordSys.dataToPoint(coords[1]);var curveness=itemModel.get("lineStyle.normal.curveness");if(+curveness){pts[2]=[(pts[0][0]+pts[1][0])/2-(pts[0][1]-pts[1][1])*curveness,(pts[0][1]+pts[1][1])/2-(pts[1][0]-pts[0][0])*curveness]}}lineData.setItemLayout(idx,pts)})})}}),(function(module,exports){function normalize(a){if(!(a instanceof Array)){a=[a,a]}return a}module.exports=function(ecModel){ecModel.eachSeriesByType("lines",function(seriesModel){var data=seriesModel.getData();var symbolType=normalize(seriesModel.get("symbol"));var symbolSize=normalize(seriesModel.get("symbolSize"));var opacityQuery="lineStyle.normal.opacity".split(".");data.setVisual("fromSymbol",symbolType&&symbolType[0]);data.setVisual("toSymbol",symbolType&&symbolType[1]);data.setVisual("fromSymbolSize",symbolSize&&symbolSize[0]);data.setVisual("toSymbolSize",symbolSize&&symbolSize[1]);data.setVisual("opacity",seriesModel.get(opacityQuery));data.each(function(idx){var itemModel=data.getItemModel(idx);var symbolType=normalize(itemModel.getShallow("symbol",true));var symbolSize=normalize(itemModel.getShallow("symbolSize",true));var opacity=itemModel.get(opacityQuery);symbolType[0]&&data.setItemVisual(idx,"fromSymbol",symbolType[0]);symbolType[1]&&data.setItemVisual(idx,"toSymbol",symbolType[1]);symbolSize[0]&&data.setItemVisual(idx,"fromSymbolSize",symbolSize[0]);symbolSize[1]&&data.setItemVisual(idx,"toSymbolSize",symbolSize[1]);data.setItemVisual(idx,"opacity",opacity)})})}}),(function(module,exports,__webpack_require__){__webpack_require__(287);__webpack_require__(288)}),(function(module,exports,__webpack_require__){var SeriesModel=__webpack_require__(83);var createListFromArray=__webpack_require__(112);module.exports=SeriesModel.extend({type:"series.heatmap",getInitialData:function(option,ecModel){return createListFromArray(option.data,this,ecModel)},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}})}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var HeatmapLayer=__webpack_require__(289);var zrUtil=__webpack_require__(4);function getIsInPiecewiseRange(dataExtent,pieceList,selected){var dataSpan=dataExtent[1]-dataExtent[0];pieceList=zrUtil.map(pieceList,function(piece){return{interval:[(piece.interval[0]-dataExtent[0])/dataSpan,(piece.interval[1]-dataExtent[0])/dataSpan]}});var len=pieceList.length;var lastIndex=0;return function(val){for(var i=lastIndex;i<len;i++){var interval=pieceList[i].interval;if(interval[0]<=val&&val<=interval[1]){lastIndex=i;break}}if(i===len){for(var i=lastIndex-1;i>=0;i--){var interval=pieceList[i].interval;if(interval[0]<=val&&val<=interval[1]){lastIndex=i;break}}}return i>=0&&i<len&&selected[i]}}function getIsInContinuousRange(dataExtent,range){var dataSpan=dataExtent[1]-dataExtent[0];range=[(range[0]-dataExtent[0])/dataSpan,(range[1]-dataExtent[0])/dataSpan];return function(val){return val>=range[0]&&val<=range[1]}}function isGeoCoordSys(coordSys){var dimensions=coordSys.dimensions;return dimensions[0]==="lng"&&dimensions[1]==="lat"}module.exports=__webpack_require__(1).extendChartView({type:"heatmap",render:function(seriesModel,ecModel,api){var visualMapOfThisSeries;ecModel.eachComponent("visualMap",function(visualMap){visualMap.eachTargetSeries(function(targetSeries){if(targetSeries===seriesModel){visualMapOfThisSeries=visualMap}})});if(true){if(!visualMapOfThisSeries){throw new Error("Heatmap must use with visualMap")}}this.group.removeAll();var coordSys=seriesModel.coordinateSystem;if(coordSys.type==="cartesian2d"||coordSys.type==="calendar"){this._renderOnCartesianAndCalendar(coordSys,seriesModel,api)}else{if(isGeoCoordSys(coordSys)){this._renderOnGeo(coordSys,seriesModel,visualMapOfThisSeries,api)}}},dispose:function(){},_renderOnCartesianAndCalendar:function(coordSys,seriesModel,api){if(coordSys.type==="cartesian2d"){var xAxis=coordSys.getAxis("x");var yAxis=coordSys.getAxis("y");if(true){if(!(xAxis.type==="category"&&yAxis.type==="category")){throw new Error("Heatmap on cartesian must have two category axes")
}if(!(xAxis.onBand&&yAxis.onBand)){throw new Error("Heatmap on cartesian must have two axes with boundaryGap true")}}var width=xAxis.getBandWidth();var height=yAxis.getBandWidth()}var group=this.group;var data=seriesModel.getData();var itemStyleQuery="itemStyle.normal";var hoverItemStyleQuery="itemStyle.emphasis";var labelQuery="label.normal";var hoverLabelQuery="label.emphasis";var style=seriesModel.getModel(itemStyleQuery).getItemStyle(["color"]);var hoverStl=seriesModel.getModel(hoverItemStyleQuery).getItemStyle();var labelModel=seriesModel.getModel("label.normal");var hoverLabelModel=seriesModel.getModel("label.emphasis");var coordSysType=coordSys.type;var dataDims=coordSysType==="cartesian2d"?[seriesModel.coordDimToDataDim("x")[0],seriesModel.coordDimToDataDim("y")[0],seriesModel.coordDimToDataDim("value")[0]]:[seriesModel.coordDimToDataDim("time")[0],seriesModel.coordDimToDataDim("value")[0]];data.each(function(idx){var rect;if(coordSysType==="cartesian2d"){if(isNaN(data.get(dataDims[2],idx))){return}var point=coordSys.dataToPoint([data.get(dataDims[0],idx),data.get(dataDims[1],idx)]);rect=new graphic.Rect({shape:{x:point[0]-width/2,y:point[1]-height/2,width:width,height:height},style:{fill:data.getItemVisual(idx,"color"),opacity:data.getItemVisual(idx,"opacity")}})}else{if(isNaN(data.get(dataDims[1],idx))){return}rect=new graphic.Rect({z2:1,shape:coordSys.dataToRect([data.get(dataDims[0],idx)]).contentShape,style:{fill:data.getItemVisual(idx,"color"),opacity:data.getItemVisual(idx,"opacity")}})}var itemModel=data.getItemModel(idx);if(data.hasItemOption){style=itemModel.getModel(itemStyleQuery).getItemStyle(["color"]);hoverStl=itemModel.getModel(hoverItemStyleQuery).getItemStyle();labelModel=itemModel.getModel(labelQuery);hoverLabelModel=itemModel.getModel(hoverLabelQuery)}var rawValue=seriesModel.getRawValue(idx);var defaultText="-";if(rawValue&&rawValue[2]!=null){defaultText=rawValue[2]}graphic.setLabelStyle(style,hoverStl,labelModel,hoverLabelModel,{labelFetcher:seriesModel,labelDataIndex:idx,defaultText:defaultText,isRectText:true});rect.setStyle(style);graphic.setHoverStyle(rect,data.hasItemOption?hoverStl:zrUtil.extend({},hoverStl));group.add(rect);data.setItemGraphicEl(idx,rect)})},_renderOnGeo:function(geo,seriesModel,visualMapModel,api){var inRangeVisuals=visualMapModel.targetVisuals.inRange;var outOfRangeVisuals=visualMapModel.targetVisuals.outOfRange;var data=seriesModel.getData();var hmLayer=this._hmLayer||(this._hmLayer||new HeatmapLayer());hmLayer.blurSize=seriesModel.get("blurSize");hmLayer.pointSize=seriesModel.get("pointSize");hmLayer.minOpacity=seriesModel.get("minOpacity");hmLayer.maxOpacity=seriesModel.get("maxOpacity");var rect=geo.getViewRect().clone();var roamTransform=geo.getRoamTransform().transform;rect.applyTransform(roamTransform);var x=Math.max(rect.x,0);var y=Math.max(rect.y,0);var x2=Math.min(rect.width+rect.x,api.getWidth());var y2=Math.min(rect.height+rect.y,api.getHeight());var width=x2-x;var height=y2-y;var points=data.mapArray(["lng","lat","value"],function(lng,lat,value){var pt=geo.dataToPoint([lng,lat]);pt[0]-=x;pt[1]-=y;pt.push(value);return pt});var dataExtent=visualMapModel.getExtent();var isInRange=visualMapModel.type==="visualMap.continuous"?getIsInContinuousRange(dataExtent,visualMapModel.option.range):getIsInPiecewiseRange(dataExtent,visualMapModel.getPieceList(),visualMapModel.option.selected);hmLayer.update(points,width,height,inRangeVisuals.color.getNormalizer(),{inRange:inRangeVisuals.color.getColorMapper(),outOfRange:outOfRangeVisuals.color.getColorMapper()},isInRange);var img=new graphic.Image({style:{width:width,height:height,x:x,y:y,image:hmLayer.canvas},silent:true});this.group.add(img)}})}),(function(module,exports,__webpack_require__){var GRADIENT_LEVELS=256;var zrUtil=__webpack_require__(4);function Heatmap(){var canvas=zrUtil.createCanvas();this.canvas=canvas;this.blurSize=30;this.pointSize=20;this.maxOpacity=1;this.minOpacity=0;this._gradientPixels={}}Heatmap.prototype={update:function(data,width,height,normalize,colorFunc,isInRange){var brush=this._getBrush();var gradientInRange=this._getGradient(data,colorFunc,"inRange");var gradientOutOfRange=this._getGradient(data,colorFunc,"outOfRange");var r=this.pointSize+this.blurSize;var canvas=this.canvas;var ctx=canvas.getContext("2d");var len=data.length;canvas.width=width;canvas.height=height;for(var i=0;i<len;++i){var p=data[i];var x=p[0];var y=p[1];var value=p[2];var alpha=normalize(value);ctx.globalAlpha=alpha;ctx.drawImage(brush,x-r,y-r)}if(!canvas.width||!canvas.height){return canvas}var imageData=ctx.getImageData(0,0,canvas.width,canvas.height);var pixels=imageData.data;var offset=0;var pixelLen=pixels.length;var minOpacity=this.minOpacity;var maxOpacity=this.maxOpacity;var diffOpacity=maxOpacity-minOpacity;while(offset<pixelLen){var alpha=pixels[offset+3]/256;var gradientOffset=Math.floor(alpha*(GRADIENT_LEVELS-1))*4;if(alpha>0){var gradient=isInRange(alpha)?gradientInRange:gradientOutOfRange;
alpha>0&&(alpha=alpha*diffOpacity+minOpacity);pixels[offset++]=gradient[gradientOffset];pixels[offset++]=gradient[gradientOffset+1];pixels[offset++]=gradient[gradientOffset+2];pixels[offset++]=gradient[gradientOffset+3]*alpha*256}else{offset+=4}}ctx.putImageData(imageData,0,0);return canvas},_getBrush:function(){var brushCanvas=this._brushCanvas||(this._brushCanvas=zrUtil.createCanvas());var r=this.pointSize+this.blurSize;var d=r*2;brushCanvas.width=d;brushCanvas.height=d;var ctx=brushCanvas.getContext("2d");ctx.clearRect(0,0,d,d);ctx.shadowOffsetX=d;ctx.shadowBlur=this.blurSize;ctx.shadowColor="#000";ctx.beginPath();ctx.arc(-r,r,this.pointSize,0,Math.PI*2,true);ctx.closePath();ctx.fill();return brushCanvas},_getGradient:function(data,colorFunc,state){var gradientPixels=this._gradientPixels;var pixelsSingleState=gradientPixels[state]||(gradientPixels[state]=new Uint8ClampedArray(256*4));var color=[0,0,0,0];var off=0;for(var i=0;i<256;i++){colorFunc[state](i/255,true,color);pixelsSingleState[off++]=color[0];pixelsSingleState[off++]=color[1];pixelsSingleState[off++]=color[2];pixelsSingleState[off++]=color[3]}return pixelsSingleState}};module.exports=Heatmap}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);__webpack_require__(128);__webpack_require__(291);__webpack_require__(292);var barLayoutGrid=__webpack_require__(148);var echarts=__webpack_require__(1);echarts.registerLayout(zrUtil.curry(barLayoutGrid,"pictorialBar"));echarts.registerVisual(zrUtil.curry(__webpack_require__(124),"pictorialBar","roundRect",null));__webpack_require__(127)}),(function(module,exports,__webpack_require__){var PictorialBarSeries=__webpack_require__(144).extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:false,symbolRepeatDirection:"end",symbolClip:false,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:false},getInitialData:function(option){option.stack=null;return PictorialBarSeries.superApply(this,"getInitialData",arguments)}});module.exports=PictorialBarSeries}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var graphic=__webpack_require__(20);var symbolUtil=__webpack_require__(114);var numberUtil=__webpack_require__(7);var helper=__webpack_require__(146);var parsePercent=numberUtil.parsePercent;var BAR_BORDER_WIDTH_QUERY=["itemStyle","normal","borderWidth"];var LAYOUT_ATTRS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}];var pathForLineWidth=new graphic.Circle();var BarView=__webpack_require__(1).extendChartView({type:"pictorialBar",render:function(seriesModel,ecModel,api){var group=this.group;var data=seriesModel.getData();var oldData=this._data;var cartesian=seriesModel.coordinateSystem;var baseAxis=cartesian.getBaseAxis();var isHorizontal=!!baseAxis.isHorizontal();var coordSysRect=cartesian.grid.getRect();var opt={ecSize:{width:api.getWidth(),height:api.getHeight()},seriesModel:seriesModel,coordSys:cartesian,coordSysExtent:[[coordSysRect.x,coordSysRect.x+coordSysRect.width],[coordSysRect.y,coordSysRect.y+coordSysRect.height]],isHorizontal:isHorizontal,valueDim:LAYOUT_ATTRS[+isHorizontal],categoryDim:LAYOUT_ATTRS[1-isHorizontal]};data.diff(oldData).add(function(dataIndex){if(!data.hasValue(dataIndex)){return}var itemModel=getItemModel(data,dataIndex);var symbolMeta=getSymbolMeta(data,dataIndex,itemModel,opt);var bar=createBar(data,opt,symbolMeta);data.setItemGraphicEl(dataIndex,bar);group.add(bar);updateCommon(bar,opt,symbolMeta)}).update(function(newIndex,oldIndex){var bar=oldData.getItemGraphicEl(oldIndex);if(!data.hasValue(newIndex)){group.remove(bar);return}var itemModel=getItemModel(data,newIndex);var symbolMeta=getSymbolMeta(data,newIndex,itemModel,opt);var pictorialShapeStr=getShapeStr(data,symbolMeta);if(bar&&pictorialShapeStr!==bar.__pictorialShapeStr){group.remove(bar);data.setItemGraphicEl(newIndex,null);bar=null}if(bar){updateBar(bar,opt,symbolMeta)}else{bar=createBar(data,opt,symbolMeta,true)}data.setItemGraphicEl(newIndex,bar);bar.__pictorialSymbolMeta=symbolMeta;group.add(bar);updateCommon(bar,opt,symbolMeta)}).remove(function(dataIndex){var bar=oldData.getItemGraphicEl(dataIndex);bar&&removeBar(oldData,dataIndex,bar.__pictorialSymbolMeta.animationModel,bar)}).execute();this._data=data;return this.group},dispose:zrUtil.noop,remove:function(ecModel,api){var group=this.group;var data=this._data;if(ecModel.get("animation")){if(data){data.eachItemGraphicEl(function(bar){removeBar(data,bar.dataIndex,ecModel,bar)})}}else{group.removeAll()}}});function getSymbolMeta(data,dataIndex,itemModel,opt){var layout=data.getItemLayout(dataIndex);var symbolRepeat=itemModel.get("symbolRepeat");var symbolClip=itemModel.get("symbolClip");var symbolPosition=itemModel.get("symbolPosition")||"start";var symbolRotate=itemModel.get("symbolRotate");
var rotation=(symbolRotate||0)*Math.PI/180||0;var symbolPatternSize=itemModel.get("symbolPatternSize")||2;var isAnimationEnabled=itemModel.isAnimationEnabled();var symbolMeta={dataIndex:dataIndex,layout:layout,itemModel:itemModel,symbolType:data.getItemVisual(dataIndex,"symbol")||"circle",color:data.getItemVisual(dataIndex,"color"),symbolClip:symbolClip,symbolRepeat:symbolRepeat,symbolRepeatDirection:itemModel.get("symbolRepeatDirection"),symbolPatternSize:symbolPatternSize,rotation:rotation,animationModel:isAnimationEnabled?itemModel:null,hoverAnimation:isAnimationEnabled&&itemModel.get("hoverAnimation"),z2:itemModel.getShallow("z",true)||0};prepareBarLength(itemModel,symbolRepeat,layout,opt,symbolMeta);prepareSymbolSize(data,dataIndex,layout,symbolRepeat,symbolClip,symbolMeta.boundingLength,symbolMeta.pxSign,symbolPatternSize,opt,symbolMeta);prepareLineWidth(itemModel,symbolMeta.symbolScale,rotation,opt,symbolMeta);var symbolSize=symbolMeta.symbolSize;var symbolOffset=itemModel.get("symbolOffset");if(zrUtil.isArray(symbolOffset)){symbolOffset=[parsePercent(symbolOffset[0],symbolSize[0]),parsePercent(symbolOffset[1],symbolSize[1])]}prepareLayoutInfo(itemModel,symbolSize,layout,symbolRepeat,symbolClip,symbolOffset,symbolPosition,symbolMeta.valueLineWidth,symbolMeta.boundingLength,symbolMeta.repeatCutLength,opt,symbolMeta);return symbolMeta}function prepareBarLength(itemModel,symbolRepeat,layout,opt,output){var valueDim=opt.valueDim;var symbolBoundingData=itemModel.get("symbolBoundingData");var valueAxis=opt.coordSys.getOtherAxis(opt.coordSys.getBaseAxis());var zeroPx=valueAxis.toGlobalCoord(valueAxis.dataToCoord(0));var pxSignIdx=1-+(layout[valueDim.wh]<=0);var boundingLength;if(zrUtil.isArray(symbolBoundingData)){var symbolBoundingExtent=[convertToCoordOnAxis(valueAxis,symbolBoundingData[0])-zeroPx,convertToCoordOnAxis(valueAxis,symbolBoundingData[1])-zeroPx];symbolBoundingExtent[1]<symbolBoundingExtent[0]&&(symbolBoundingExtent.reverse());boundingLength=symbolBoundingExtent[pxSignIdx]}else{if(symbolBoundingData!=null){boundingLength=convertToCoordOnAxis(valueAxis,symbolBoundingData)-zeroPx}else{if(symbolRepeat){boundingLength=opt.coordSysExtent[valueDim.index][pxSignIdx]-zeroPx}else{boundingLength=layout[valueDim.wh]}}}output.boundingLength=boundingLength;if(symbolRepeat){output.repeatCutLength=layout[valueDim.wh]}output.pxSign=boundingLength>0?1:boundingLength<0?-1:0}function convertToCoordOnAxis(axis,value){return axis.toGlobalCoord(axis.dataToCoord(axis.scale.parse(value)))}function prepareSymbolSize(data,dataIndex,layout,symbolRepeat,symbolClip,boundingLength,pxSign,symbolPatternSize,opt,output){var valueDim=opt.valueDim;var categoryDim=opt.categoryDim;var categorySize=Math.abs(layout[categoryDim.wh]);var symbolSize=data.getItemVisual(dataIndex,"symbolSize");if(zrUtil.isArray(symbolSize)){symbolSize=symbolSize.slice()}else{if(symbolSize==null){symbolSize="100%"}symbolSize=[symbolSize,symbolSize]}symbolSize[categoryDim.index]=parsePercent(symbolSize[categoryDim.index],categorySize);symbolSize[valueDim.index]=parsePercent(symbolSize[valueDim.index],symbolRepeat?categorySize:Math.abs(boundingLength));output.symbolSize=symbolSize;var symbolScale=output.symbolScale=[symbolSize[0]/symbolPatternSize,symbolSize[1]/symbolPatternSize];symbolScale[valueDim.index]*=(opt.isHorizontal?-1:1)*pxSign}function prepareLineWidth(itemModel,symbolScale,rotation,opt,output){var valueLineWidth=itemModel.get(BAR_BORDER_WIDTH_QUERY)||0;if(valueLineWidth){pathForLineWidth.attr({scale:symbolScale.slice(),rotation:rotation});pathForLineWidth.updateTransform();valueLineWidth/=pathForLineWidth.getLineScale();valueLineWidth*=symbolScale[opt.valueDim.index]}output.valueLineWidth=valueLineWidth}function prepareLayoutInfo(itemModel,symbolSize,layout,symbolRepeat,symbolClip,symbolOffset,symbolPosition,valueLineWidth,boundingLength,repeatCutLength,opt,output){var categoryDim=opt.categoryDim;var valueDim=opt.valueDim;var pxSign=output.pxSign;var unitLength=Math.max(symbolSize[valueDim.index]+valueLineWidth,0);var pathLen=unitLength;if(symbolRepeat){var absBoundingLength=Math.abs(boundingLength);var symbolMargin=zrUtil.retrieve(itemModel.get("symbolMargin"),"15%")+"";var hasEndGap=false;if(symbolMargin.lastIndexOf("!")===symbolMargin.length-1){hasEndGap=true;symbolMargin=symbolMargin.slice(0,symbolMargin.length-1)}symbolMargin=parsePercent(symbolMargin,symbolSize[valueDim.index]);var uLenWithMargin=Math.max(unitLength+symbolMargin*2,0);var endFix=hasEndGap?0:symbolMargin*2;var repeatSpecified=numberUtil.isNumeric(symbolRepeat);var repeatTimes=repeatSpecified?symbolRepeat:toIntTimes((absBoundingLength+endFix)/uLenWithMargin);var mDiff=absBoundingLength-repeatTimes*unitLength;symbolMargin=mDiff/2/(hasEndGap?repeatTimes:repeatTimes-1);uLenWithMargin=unitLength+symbolMargin*2;endFix=hasEndGap?0:symbolMargin*2;if(!repeatSpecified&&symbolRepeat!=="fixed"){repeatTimes=repeatCutLength?toIntTimes((Math.abs(repeatCutLength)+endFix)/uLenWithMargin):0}pathLen=repeatTimes*uLenWithMargin-endFix;
output.repeatTimes=repeatTimes;output.symbolMargin=symbolMargin}var sizeFix=pxSign*(pathLen/2);var pathPosition=output.pathPosition=[];pathPosition[categoryDim.index]=layout[categoryDim.wh]/2;pathPosition[valueDim.index]=symbolPosition==="start"?sizeFix:symbolPosition==="end"?boundingLength-sizeFix:boundingLength/2;if(symbolOffset){pathPosition[0]+=symbolOffset[0];pathPosition[1]+=symbolOffset[1]}var bundlePosition=output.bundlePosition=[];bundlePosition[categoryDim.index]=layout[categoryDim.xy];bundlePosition[valueDim.index]=layout[valueDim.xy];var barRectShape=output.barRectShape=zrUtil.extend({},layout);barRectShape[valueDim.wh]=pxSign*Math.max(Math.abs(layout[valueDim.wh]),Math.abs(pathPosition[valueDim.index]+sizeFix));barRectShape[categoryDim.wh]=layout[categoryDim.wh];var clipShape=output.clipShape={};clipShape[categoryDim.xy]=-layout[categoryDim.xy];clipShape[categoryDim.wh]=opt.ecSize[categoryDim.wh];clipShape[valueDim.xy]=0;clipShape[valueDim.wh]=layout[valueDim.wh]}function createPath(symbolMeta){var symbolPatternSize=symbolMeta.symbolPatternSize;var path=symbolUtil.createSymbol(symbolMeta.symbolType,-symbolPatternSize/2,-symbolPatternSize/2,symbolPatternSize,symbolPatternSize,symbolMeta.color);path.attr({culling:true});path.type!=="image"&&path.setStyle({strokeNoScale:true});return path}function createOrUpdateRepeatSymbols(bar,opt,symbolMeta,isUpdate){var bundle=bar.__pictorialBundle;var symbolSize=symbolMeta.symbolSize;var valueLineWidth=symbolMeta.valueLineWidth;var pathPosition=symbolMeta.pathPosition;var valueDim=opt.valueDim;var repeatTimes=symbolMeta.repeatTimes||0;var index=0;var unit=symbolSize[opt.valueDim.index]+valueLineWidth+symbolMeta.symbolMargin*2;eachPath(bar,function(path){path.__pictorialAnimationIndex=index;path.__pictorialRepeatTimes=repeatTimes;if(index<repeatTimes){updateAttr(path,null,makeTarget(index),symbolMeta,isUpdate)}else{updateAttr(path,null,{scale:[0,0]},symbolMeta,isUpdate,function(){bundle.remove(path)})}updateHoverAnimation(path,symbolMeta);index++});for(;index<repeatTimes;index++){var path=createPath(symbolMeta);path.__pictorialAnimationIndex=index;path.__pictorialRepeatTimes=repeatTimes;bundle.add(path);var target=makeTarget(index);updateAttr(path,{position:target.position,scale:[0,0]},{scale:target.scale,rotation:target.rotation},symbolMeta,isUpdate);path.on("mouseover",onMouseOver).on("mouseout",onMouseOut);updateHoverAnimation(path,symbolMeta)}function makeTarget(index){var position=pathPosition.slice();var pxSign=symbolMeta.pxSign;var i=index;if(symbolMeta.symbolRepeatDirection==="start"?pxSign>0:pxSign<0){i=repeatTimes-1-index}position[valueDim.index]=unit*(i-repeatTimes/2+0.5)+pathPosition[valueDim.index];return{position:position,scale:symbolMeta.symbolScale.slice(),rotation:symbolMeta.rotation}}function onMouseOver(){eachPath(bar,function(path){path.trigger("emphasis")})}function onMouseOut(){eachPath(bar,function(path){path.trigger("normal")})}}function createOrUpdateSingleSymbol(bar,opt,symbolMeta,isUpdate){var bundle=bar.__pictorialBundle;var mainPath=bar.__pictorialMainPath;if(!mainPath){mainPath=bar.__pictorialMainPath=createPath(symbolMeta);bundle.add(mainPath);updateAttr(mainPath,{position:symbolMeta.pathPosition.slice(),scale:[0,0],rotation:symbolMeta.rotation},{scale:symbolMeta.symbolScale.slice()},symbolMeta,isUpdate);mainPath.on("mouseover",onMouseOver).on("mouseout",onMouseOut)}else{updateAttr(mainPath,null,{position:symbolMeta.pathPosition.slice(),scale:symbolMeta.symbolScale.slice(),rotation:symbolMeta.rotation},symbolMeta,isUpdate)}updateHoverAnimation(mainPath,symbolMeta);function onMouseOver(){this.trigger("emphasis")}function onMouseOut(){this.trigger("normal")}}function createOrUpdateBarRect(bar,symbolMeta,isUpdate){var rectShape=zrUtil.extend({},symbolMeta.barRectShape);var barRect=bar.__pictorialBarRect;if(!barRect){barRect=bar.__pictorialBarRect=new graphic.Rect({z2:2,shape:rectShape,silent:true,style:{stroke:"transparent",fill:"transparent",lineWidth:0}});bar.add(barRect)}else{updateAttr(barRect,null,{shape:rectShape},symbolMeta,isUpdate)}}function createOrUpdateClip(bar,opt,symbolMeta,isUpdate){if(symbolMeta.symbolClip){var clipPath=bar.__pictorialClipPath;var clipShape=zrUtil.extend({},symbolMeta.clipShape);var valueDim=opt.valueDim;var animationModel=symbolMeta.animationModel;var dataIndex=symbolMeta.dataIndex;if(clipPath){graphic.updateProps(clipPath,{shape:clipShape},animationModel,dataIndex)}else{clipShape[valueDim.wh]=0;clipPath=new graphic.Rect({shape:clipShape});bar.__pictorialBundle.setClipPath(clipPath);bar.__pictorialClipPath=clipPath;var target={};target[valueDim.wh]=symbolMeta.clipShape[valueDim.wh];graphic[isUpdate?"updateProps":"initProps"](clipPath,{shape:target},animationModel,dataIndex)}}}function getItemModel(data,dataIndex){var itemModel=data.getItemModel(dataIndex);itemModel.getAnimationDelayParams=getAnimationDelayParams;itemModel.isAnimationEnabled=isAnimationEnabled;return itemModel}function getAnimationDelayParams(path){return{index:path.__pictorialAnimationIndex,count:path.__pictorialRepeatTimes}
}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function updateHoverAnimation(path,symbolMeta){path.off("emphasis").off("normal");var scale=symbolMeta.symbolScale.slice();symbolMeta.hoverAnimation&&path.on("emphasis",function(){this.animateTo({scale:[scale[0]*1.1,scale[1]*1.1]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:scale.slice()},400,"elasticOut")})}function createBar(data,opt,symbolMeta,isUpdate){var bar=new graphic.Group();var bundle=new graphic.Group();bar.add(bundle);bar.__pictorialBundle=bundle;bundle.attr("position",symbolMeta.bundlePosition.slice());if(symbolMeta.symbolRepeat){createOrUpdateRepeatSymbols(bar,opt,symbolMeta)}else{createOrUpdateSingleSymbol(bar,opt,symbolMeta)}createOrUpdateBarRect(bar,symbolMeta,isUpdate);createOrUpdateClip(bar,opt,symbolMeta,isUpdate);bar.__pictorialShapeStr=getShapeStr(data,symbolMeta);bar.__pictorialSymbolMeta=symbolMeta;return bar}function updateBar(bar,opt,symbolMeta){var animationModel=symbolMeta.animationModel;var dataIndex=symbolMeta.dataIndex;var bundle=bar.__pictorialBundle;graphic.updateProps(bundle,{position:symbolMeta.bundlePosition.slice()},animationModel,dataIndex);if(symbolMeta.symbolRepeat){createOrUpdateRepeatSymbols(bar,opt,symbolMeta,true)}else{createOrUpdateSingleSymbol(bar,opt,symbolMeta,true)}createOrUpdateBarRect(bar,symbolMeta,true);createOrUpdateClip(bar,opt,symbolMeta,true)}function removeBar(data,dataIndex,animationModel,bar){var labelRect=bar.__pictorialBarRect;labelRect&&(labelRect.style.text=null);var pathes=[];eachPath(bar,function(path){pathes.push(path)});bar.__pictorialMainPath&&pathes.push(bar.__pictorialMainPath);bar.__pictorialClipPath&&(animationModel=null);zrUtil.each(pathes,function(path){graphic.updateProps(path,{scale:[0,0]},animationModel,dataIndex,function(){bar.parent&&bar.parent.remove(bar)})});data.setItemGraphicEl(dataIndex,null)}function getShapeStr(data,symbolMeta){return[data.getItemVisual(symbolMeta.dataIndex,"symbol")||"none",!!symbolMeta.symbolRepeat,!!symbolMeta.symbolClip].join(":")}function eachPath(bar,cb,context){zrUtil.each(bar.__pictorialBundle.children(),function(el){el!==bar.__pictorialBarRect&&cb.call(context,el)})}function updateAttr(el,immediateAttrs,animationAttrs,symbolMeta,isUpdate,cb){immediateAttrs&&el.attr(immediateAttrs);if(symbolMeta.symbolClip&&!isUpdate){animationAttrs&&el.attr(animationAttrs)}else{animationAttrs&&graphic[isUpdate?"updateProps":"initProps"](el,animationAttrs,symbolMeta.animationModel,symbolMeta.dataIndex,cb)}}function updateCommon(bar,opt,symbolMeta){var color=symbolMeta.color;var dataIndex=symbolMeta.dataIndex;var itemModel=symbolMeta.itemModel;var normalStyle=itemModel.getModel("itemStyle.normal").getItemStyle(["color"]);var hoverStyle=itemModel.getModel("itemStyle.emphasis").getItemStyle();var cursorStyle=itemModel.getShallow("cursor");eachPath(bar,function(path){path.setColor(color);path.setStyle(zrUtil.defaults({fill:color,opacity:symbolMeta.opacity},normalStyle));graphic.setHoverStyle(path,hoverStyle);cursorStyle&&(path.cursor=cursorStyle);path.z2=symbolMeta.z2});var barRectHoverStyle={};var barPositionOutside=opt.valueDim.posDesc[+(symbolMeta.boundingLength>0)];var barRect=bar.__pictorialBarRect;helper.setLabel(barRect.style,barRectHoverStyle,itemModel,color,opt.seriesModel,dataIndex,barPositionOutside);graphic.setHoverStyle(barRect,barRectHoverStyle)}function toIntTimes(times){var roundedTimes=Math.round(times);return Math.abs(times-roundedTimes)<0.0001?roundedTimes:Math.ceil(times)}module.exports=BarView}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);var zrUtil=__webpack_require__(4);__webpack_require__(294);__webpack_require__(311);__webpack_require__(312);echarts.registerLayout(__webpack_require__(314));echarts.registerVisual(__webpack_require__(315));echarts.registerProcessor(zrUtil.curry(__webpack_require__(157),"themeRiver"))}),(function(module,exports,__webpack_require__){__webpack_require__(295);__webpack_require__(298);__webpack_require__(300);__webpack_require__(301);__webpack_require__(310);var echarts=__webpack_require__(1);echarts.extendComponentView({type:"single"})}),(function(module,exports,__webpack_require__){var Single=__webpack_require__(296);function create(ecModel,api){var singles=[];ecModel.eachComponent("singleAxis",function(axisModel,idx){var single=new Single(axisModel,ecModel,api);single.name="single_"+idx;single.resize(axisModel,api);axisModel.coordinateSystem=single;singles.push(single)});ecModel.eachSeries(function(seriesModel){if(seriesModel.get("coordinateSystem")==="singleAxis"){var singleAxisModel=ecModel.queryComponents({mainType:"singleAxis",index:seriesModel.get("singleAxisIndex"),id:seriesModel.get("singleAxisId")})[0];seriesModel.coordinateSystem=singleAxisModel&&singleAxisModel.coordinateSystem}});return singles}__webpack_require__(79).register("single",{create:create,dimensions:Single.prototype.dimensions})}),(function(module,exports,__webpack_require__){var SingleAxis=__webpack_require__(297);
var axisHelper=__webpack_require__(104);var layout=__webpack_require__(74);function Single(axisModel,ecModel,api){this.dimension="single";this.dimensions=["single"];this._axis=null;this._rect;this._init(axisModel,ecModel,api);this.model=axisModel}Single.prototype={type:"singleAxis",axisPointerEnabled:true,constructor:Single,_init:function(axisModel,ecModel,api){var dim=this.dimension;var axis=new SingleAxis(dim,axisHelper.createScaleByModel(axisModel),[0,0],axisModel.get("type"),axisModel.get("position"));var isCategory=axis.type==="category";axis.onBand=isCategory&&axisModel.get("boundaryGap");axis.inverse=axisModel.get("inverse");axis.orient=axisModel.get("orient");axisModel.axis=axis;axis.model=axisModel;axis.coordinateSystem=this;this._axis=axis},update:function(ecModel,api){ecModel.eachSeries(function(seriesModel){if(seriesModel.coordinateSystem===this){var data=seriesModel.getData();var dim=this.dimension;this._axis.scale.unionExtentFromData(data,seriesModel.coordDimToDataDim(dim));axisHelper.niceScaleExtent(this._axis.scale,this._axis.model)}},this)},resize:function(axisModel,api){this._rect=layout.getLayoutRect({left:axisModel.get("left"),top:axisModel.get("top"),right:axisModel.get("right"),bottom:axisModel.get("bottom"),width:axisModel.get("width"),height:axisModel.get("height")},{width:api.getWidth(),height:api.getHeight()});this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var rect=this._rect;var axis=this._axis;var isHorizontal=axis.isHorizontal();var extent=isHorizontal?[0,rect.width]:[0,rect.height];var idx=axis.reverse?1:0;axis.setExtent(extent[idx],extent[1-idx]);this._updateAxisTransform(axis,isHorizontal?rect.x:rect.y)},_updateAxisTransform:function(axis,coordBase){var axisExtent=axis.getExtent();var extentSum=axisExtent[0]+axisExtent[1];var isHorizontal=axis.isHorizontal();axis.toGlobalCoord=isHorizontal?function(coord){return coord+coordBase}:function(coord){return extentSum-coord+coordBase};axis.toLocalCoord=isHorizontal?function(coord){return coord-coordBase}:function(coord){return extentSum-coord+coordBase}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(point){var rect=this.getRect();var axis=this.getAxis();var orient=axis.orient;if(orient==="horizontal"){return axis.contain(axis.toLocalCoord(point[0]))&&(point[1]>=rect.y&&point[1]<=(rect.y+rect.height))}else{return axis.contain(axis.toLocalCoord(point[1]))&&(point[0]>=rect.y&&point[0]<=(rect.y+rect.height))}},pointToData:function(point){var axis=this.getAxis();return[axis.coordToData(axis.toLocalCoord(point[axis.orient==="horizontal"?0:1]))]},dataToPoint:function(val){var axis=this.getAxis();var rect=this.getRect();var pt=[];var idx=axis.orient==="horizontal"?0:1;if(val instanceof Array){val=val[0]}pt[idx]=axis.toGlobalCoord(axis.dataToCoord(+val));pt[1-idx]=idx===0?(rect.y+rect.height/2):(rect.x+rect.width/2);return pt}};module.exports=Single}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var Axis=__webpack_require__(103);var SingleAxis=function(dim,scale,coordExtent,axisType,position){Axis.call(this,dim,scale,coordExtent);this.type=axisType||"value";this.position=position||"bottom";this.orient=null;this._labelInterval=null};SingleAxis.prototype={constructor:SingleAxis,model:null,isHorizontal:function(){var position=this.position;return position==="top"||position==="bottom"},pointToData:function(point,clamp){return this.coordinateSystem.pointToData(point,clamp)[0]},toGlobalCoord:null,toLocalCoord:null};zrUtil.inherits(SingleAxis,Axis);module.exports=SingleAxis}),(function(module,exports,__webpack_require__){var AxisBuilder=__webpack_require__(138);var zrUtil=__webpack_require__(4);var graphic=__webpack_require__(20);var singleAxisHelper=__webpack_require__(299);var getInterval=AxisBuilder.getInterval;var ifIgnoreOnTick=AxisBuilder.ifIgnoreOnTick;var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"];var selfBuilderAttr="splitLine";var SingleAxisView=__webpack_require__(139).extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(axisModel,ecModel,api,payload){var group=this.group;group.removeAll();var layout=singleAxisHelper.layout(axisModel);var axisBuilder=new AxisBuilder(axisModel,layout);zrUtil.each(axisBuilderAttrs,axisBuilder.add,axisBuilder);group.add(axisBuilder.getGroup());if(axisModel.get(selfBuilderAttr+".show")){this["_"+selfBuilderAttr](axisModel,layout.labelInterval)}SingleAxisView.superCall(this,"render",axisModel,ecModel,api,payload)},_splitLine:function(axisModel,labelInterval){var axis=axisModel.axis;if(axis.scale.isBlank()){return}var splitLineModel=axisModel.getModel("splitLine");var lineStyleModel=splitLineModel.getModel("lineStyle");var lineWidth=lineStyleModel.get("width");var lineColors=lineStyleModel.get("color");var lineInterval=getInterval(splitLineModel,labelInterval);
lineColors=lineColors instanceof Array?lineColors:[lineColors];var gridRect=axisModel.coordinateSystem.getRect();var isHorizontal=axis.isHorizontal();var splitLines=[];var lineCount=0;var ticksCoords=axis.getTicksCoords();var p1=[];var p2=[];var showMinLabel=axisModel.get("axisLabel.showMinLabel");var showMaxLabel=axisModel.get("axisLabel.showMaxLabel");for(var i=0;i<ticksCoords.length;++i){if(ifIgnoreOnTick(axis,i,lineInterval,ticksCoords.length,showMinLabel,showMaxLabel)){continue}var tickCoord=axis.toGlobalCoord(ticksCoords[i]);if(isHorizontal){p1[0]=tickCoord;p1[1]=gridRect.y;p2[0]=tickCoord;p2[1]=gridRect.y+gridRect.height}else{p1[0]=gridRect.x;p1[1]=tickCoord;p2[0]=gridRect.x+gridRect.width;p2[1]=tickCoord}var colorIndex=(lineCount++)%lineColors.length;splitLines[colorIndex]=splitLines[colorIndex]||[];splitLines[colorIndex].push(new graphic.Line(graphic.subPixelOptimizeLine({shape:{x1:p1[0],y1:p1[1],x2:p2[0],y2:p2[1]},style:{lineWidth:lineWidth},silent:true})))}for(var i=0;i<splitLines.length;++i){this.group.add(graphic.mergePath(splitLines[i],{style:{stroke:lineColors[i%lineColors.length],lineDash:lineStyleModel.getLineDash(lineWidth),lineWidth:lineWidth},silent:true}))}}});module.exports=SingleAxisView}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var helper={};helper.layout=function(axisModel,opt){opt=opt||{};var single=axisModel.coordinateSystem;var axis=axisModel.axis;var layout={};var axisPosition=axis.position;var orient=axis.orient;var rect=single.getRect();var rectBound=[rect.x,rect.x+rect.width,rect.y,rect.y+rect.height];var positionMap={horizontal:{top:rectBound[2],bottom:rectBound[3]},vertical:{left:rectBound[0],right:rectBound[1]}};layout.position=[orient==="vertical"?positionMap.vertical[axisPosition]:rectBound[0],orient==="horizontal"?positionMap.horizontal[axisPosition]:rectBound[3]];var r={horizontal:0,vertical:1};layout.rotation=Math.PI/2*r[orient];var directionMap={top:-1,bottom:1,right:1,left:-1};layout.labelDirection=layout.tickDirection=layout.nameDirection=directionMap[axisPosition];if(axisModel.get("axisTick.inside")){layout.tickDirection=-layout.tickDirection}if(zrUtil.retrieve(opt.labelInside,axisModel.get("axisLabel.inside"))){layout.labelDirection=-layout.labelDirection}var labelRotation=opt.rotate;labelRotation==null&&(labelRotation=axisModel.get("axisLabel.rotate"));layout.labelRotation=axisPosition==="top"?-labelRotation:labelRotation;layout.labelInterval=axis.getLabelInterval();layout.z2=1;return layout};module.exports=helper}),(function(module,exports,__webpack_require__){var ComponentModel=__webpack_require__(72);var axisModelCreator=__webpack_require__(134);var zrUtil=__webpack_require__(4);var AxisModel=ComponentModel.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});var defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:true,lineStyle:{width:2,type:"solid"}},tooltip:{show:true},axisTick:{show:true,length:6,lineStyle:{width:2}},axisLabel:{show:true,interval:"auto"},splitLine:{show:true,lineStyle:{type:"dashed",opacity:0.2}}};function getAxisType(axisName,option){return option.type||(option.data?"category":"value")}zrUtil.merge(AxisModel.prototype,__webpack_require__(115));axisModelCreator("single",AxisModel,getAxisType,defaultOption);module.exports=AxisModel}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);var axisPointerModelHelper=__webpack_require__(140);var axisTrigger=__webpack_require__(302);var zrUtil=__webpack_require__(4);__webpack_require__(304);__webpack_require__(305);__webpack_require__(307);echarts.registerPreprocessor(function(option){if(option){(!option.axisPointer||option.axisPointer.length===0)&&(option.axisPointer={});var link=option.axisPointer.link;if(link&&!zrUtil.isArray(link)){option.axisPointer.link=[link]}}});echarts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC,function(ecModel,api){ecModel.getComponent("axisPointer").coordSysAxesInfo=axisPointerModelHelper.collect(ecModel,api)});echarts.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger)}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var modelUtil=__webpack_require__(5);var modelHelper=__webpack_require__(140);var findPointFromSeries=__webpack_require__(303);var each=zrUtil.each;var curry=zrUtil.curry;var get=modelUtil.makeGetter();function axisTrigger(payload,ecModel,api){var currTrigger=payload.currTrigger;var point=[payload.x,payload.y];var finder=payload;var dispatchAction=payload.dispatchAction||zrUtil.bind(api.dispatchAction,api);var coordSysAxesInfo=ecModel.getComponent("axisPointer").coordSysAxesInfo;if(!coordSysAxesInfo){return}if(illegalPoint(point)){point=findPointFromSeries({seriesIndex:finder.seriesIndex,dataIndex:finder.dataIndex},ecModel).point}var isIllegalPoint=illegalPoint(point);
var inputAxesInfo=finder.axesInfo;var axesInfo=coordSysAxesInfo.axesInfo;var shouldHide=currTrigger==="leave"||illegalPoint(point);var outputFinder={};var showValueMap={};var dataByCoordSys={list:[],map:{}};var updaters={showPointer:curry(showPointer,showValueMap),showTooltip:curry(showTooltip,dataByCoordSys)};each(coordSysAxesInfo.coordSysMap,function(coordSys,coordSysKey){var coordSysContainsPoint=isIllegalPoint||coordSys.containPoint(point);each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey],function(axisInfo,key){var axis=axisInfo.axis;var inputAxisInfo=findInputAxisInfo(inputAxesInfo,axisInfo);if(!shouldHide&&coordSysContainsPoint&&(!inputAxesInfo||inputAxisInfo)){var val=inputAxisInfo&&inputAxisInfo.value;if(val==null&&!isIllegalPoint){val=axis.pointToData(point)}val!=null&&processOnAxis(axisInfo,val,updaters,false,outputFinder)}})});var linkTriggers={};each(axesInfo,function(tarAxisInfo,tarKey){var linkGroup=tarAxisInfo.linkGroup;if(linkGroup&&!showValueMap[tarKey]){each(linkGroup.axesInfo,function(srcAxisInfo,srcKey){var srcValItem=showValueMap[srcKey];if(srcAxisInfo!==tarAxisInfo&&srcValItem){var val=srcValItem.value;linkGroup.mapper&&(val=tarAxisInfo.axis.scale.parse(linkGroup.mapper(val,makeMapperParam(srcAxisInfo),makeMapperParam(tarAxisInfo))));linkTriggers[tarAxisInfo.key]=val}})}});each(linkTriggers,function(val,tarKey){processOnAxis(axesInfo[tarKey],val,updaters,true,outputFinder)});updateModelActually(showValueMap,axesInfo,outputFinder);dispatchTooltipActually(dataByCoordSys,point,payload,dispatchAction);dispatchHighDownActually(axesInfo,dispatchAction,api);return outputFinder}function processOnAxis(axisInfo,newValue,updaters,dontSnap,outputFinder){var axis=axisInfo.axis;if(axis.scale.isBlank()||!axis.containData(newValue)){return}if(!axisInfo.involveSeries){updaters.showPointer(axisInfo,newValue);return}var payloadInfo=buildPayloadsBySeries(newValue,axisInfo);var payloadBatch=payloadInfo.payloadBatch;var snapToValue=payloadInfo.snapToValue;if(payloadBatch[0]&&outputFinder.seriesIndex==null){zrUtil.extend(outputFinder,payloadBatch[0])}if(!dontSnap&&axisInfo.snap){if(axis.containData(snapToValue)&&snapToValue!=null){newValue=snapToValue}}updaters.showPointer(axisInfo,newValue,payloadBatch,outputFinder);updaters.showTooltip(axisInfo,payloadInfo,snapToValue)}function buildPayloadsBySeries(value,axisInfo){var axis=axisInfo.axis;var dim=axis.dim;var snapToValue=value;var payloadBatch=[];var minDist=Number.MAX_VALUE;var minDiff=-1;each(axisInfo.seriesModels,function(series,idx){var dataDim=series.coordDimToDataDim(dim);var seriesNestestValue;var dataIndices;if(series.getAxisTooltipData){var result=series.getAxisTooltipData(dataDim,value,axis);dataIndices=result.dataIndices;seriesNestestValue=result.nestestValue}else{dataIndices=series.getData().indicesOfNearest(dataDim[0],value,false,axis.type==="category"?0.5:null);if(!dataIndices.length){return}seriesNestestValue=series.getData().get(dataDim[0],dataIndices[0])}if(seriesNestestValue==null||!isFinite(seriesNestestValue)){return}var diff=value-seriesNestestValue;var dist=Math.abs(diff);if(dist<=minDist){if(dist<minDist||(diff>=0&&minDiff<0)){minDist=dist;minDiff=diff;snapToValue=seriesNestestValue;payloadBatch.length=0}each(dataIndices,function(dataIndex){payloadBatch.push({seriesIndex:series.seriesIndex,dataIndexInside:dataIndex,dataIndex:series.getData().getRawIndex(dataIndex)})})}});return{payloadBatch:payloadBatch,snapToValue:snapToValue}}function showPointer(showValueMap,axisInfo,value,payloadBatch){showValueMap[axisInfo.key]={value:value,payloadBatch:payloadBatch}}function showTooltip(dataByCoordSys,axisInfo,payloadInfo,value){var payloadBatch=payloadInfo.payloadBatch;var axis=axisInfo.axis;var axisModel=axis.model;var axisPointerModel=axisInfo.axisPointerModel;if(!axisInfo.triggerTooltip||!payloadBatch.length){return}var coordSysModel=axisInfo.coordSys.model;var coordSysKey=modelHelper.makeKey(coordSysModel);var coordSysItem=dataByCoordSys.map[coordSysKey];if(!coordSysItem){coordSysItem=dataByCoordSys.map[coordSysKey]={coordSysId:coordSysModel.id,coordSysIndex:coordSysModel.componentIndex,coordSysType:coordSysModel.type,coordSysMainType:coordSysModel.mainType,dataByAxis:[]};dataByCoordSys.list.push(coordSysItem)}coordSysItem.dataByAxis.push({axisDim:axis.dim,axisIndex:axisModel.componentIndex,axisType:axisModel.type,axisId:axisModel.id,value:value,valueLabelOpt:{precision:axisPointerModel.get("label.precision"),formatter:axisPointerModel.get("label.formatter")},seriesDataIndices:payloadBatch.slice()})}function updateModelActually(showValueMap,axesInfo,outputFinder){var outputAxesInfo=outputFinder.axesInfo=[];each(axesInfo,function(axisInfo,key){var option=axisInfo.axisPointerModel.option;var valItem=showValueMap[key];if(valItem){!axisInfo.useHandle&&(option.status="show");option.value=valItem.value;option.seriesDataIndices=(valItem.payloadBatch||[]).slice()}else{!axisInfo.useHandle&&(option.status="hide")}option.status==="show"&&outputAxesInfo.push({axisDim:axisInfo.axis.dim,axisIndex:axisInfo.axis.model.componentIndex,value:option.value})
})}function dispatchTooltipActually(dataByCoordSys,point,payload,dispatchAction){if(illegalPoint(point)||!dataByCoordSys.list.length){dispatchAction({type:"hideTip"});return}var sampleItem=((dataByCoordSys.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};dispatchAction({type:"showTip",escapeConnect:true,x:point[0],y:point[1],tooltipOption:payload.tooltipOption,position:payload.position,dataIndexInside:sampleItem.dataIndexInside,dataIndex:sampleItem.dataIndex,seriesIndex:sampleItem.seriesIndex,dataByCoordSys:dataByCoordSys.list})}function dispatchHighDownActually(axesInfo,dispatchAction,api){var zr=api.getZr();var highDownKey="axisPointerLastHighlights";var lastHighlights=get(zr)[highDownKey]||{};var newHighlights=get(zr)[highDownKey]={};each(axesInfo,function(axisInfo,key){var option=axisInfo.axisPointerModel.option;option.status==="show"&&each(option.seriesDataIndices,function(batchItem){var key=batchItem.seriesIndex+" | "+batchItem.dataIndex;newHighlights[key]=batchItem})});var toHighlight=[];var toDownplay=[];zrUtil.each(lastHighlights,function(batchItem,key){!newHighlights[key]&&toDownplay.push(batchItem)});zrUtil.each(newHighlights,function(batchItem,key){!lastHighlights[key]&&toHighlight.push(batchItem)});toDownplay.length&&api.dispatchAction({type:"downplay",escapeConnect:true,batch:toDownplay});toHighlight.length&&api.dispatchAction({type:"highlight",escapeConnect:true,batch:toHighlight})}function findInputAxisInfo(inputAxesInfo,axisInfo){for(var i=0;i<(inputAxesInfo||[]).length;i++){var inputAxisInfo=inputAxesInfo[i];if(axisInfo.axis.dim===inputAxisInfo.axisDim&&axisInfo.axis.model.componentIndex===inputAxisInfo.axisIndex){return inputAxisInfo}}}function makeMapperParam(axisInfo){var axisModel=axisInfo.axis.model;var item={};var dim=item.axisDim=axisInfo.axis.dim;item.axisIndex=item[dim+"AxisIndex"]=axisModel.componentIndex;item.axisName=item[dim+"AxisName"]=axisModel.name;item.axisId=item[dim+"AxisId"]=axisModel.id;return item}function illegalPoint(point){return !point||point[0]==null||isNaN(point[0])||point[1]==null||isNaN(point[1])}module.exports=axisTrigger}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var modelUtil=__webpack_require__(5);module.exports=function(finder,ecModel){var point=[];var seriesIndex=finder.seriesIndex;var seriesModel;if(seriesIndex==null||!(seriesModel=ecModel.getSeriesByIndex(seriesIndex))){return{point:[]}}var data=seriesModel.getData();var dataIndex=modelUtil.queryDataIndex(data,finder);if(dataIndex==null||zrUtil.isArray(dataIndex)){return{point:[]}}var el=data.getItemGraphicEl(dataIndex);var coordSys=seriesModel.coordinateSystem;if(seriesModel.getTooltipPosition){point=seriesModel.getTooltipPosition(dataIndex)||[]}else{if(coordSys&&coordSys.dataToPoint){point=coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions,function(dim){return seriesModel.coordDimToDataDim(dim)[0]}),dataIndex,true))||[]}else{if(el){var rect=el.getBoundingRect().clone();rect.applyTransform(el.transform);point=[rect.x+rect.width/2,rect.y+rect.height/2]}}}return{point:point,el:el}}}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);var AxisPointerModel=echarts.extendComponentModel({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:false,triggerTooltip:true,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:true,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:false,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});module.exports=AxisPointerModel}),(function(module,exports,__webpack_require__){var globalListener=__webpack_require__(306);var AxisPonterView=__webpack_require__(1).extendComponentView({type:"axisPointer",render:function(globalAxisPointerModel,ecModel,api){var globalTooltipModel=ecModel.getComponent("tooltip");var triggerOn=globalAxisPointerModel.get("triggerOn")||(globalTooltipModel&&globalTooltipModel.get("triggerOn")||"mousemove|click");globalListener.register("axisPointer",api,function(currTrigger,e,dispatchAction){if(triggerOn!=="none"&&(currTrigger==="leave"||triggerOn.indexOf(currTrigger)>=0)){dispatchAction({type:"updateAxisPointer",currTrigger:currTrigger,x:e&&e.offsetX,y:e&&e.offsetY})}})},remove:function(ecModel,api){globalListener.disopse(api.getZr(),"axisPointer");AxisPonterView.superApply(this._model,"remove",arguments)},dispose:function(ecModel,api){globalListener.unregister("axisPointer",api);AxisPonterView.superApply(this._model,"dispose",arguments)
}})}),(function(module,exports,__webpack_require__){var env=__webpack_require__(2);var zrUtil=__webpack_require__(4);var get=__webpack_require__(5).makeGetter();var each=zrUtil.each;var globalListener={};globalListener.register=function(key,api,handler){if(env.node){return}var zr=api.getZr();get(zr).records||(get(zr).records={});initGlobalListeners(zr,api);var record=get(zr).records[key]||(get(zr).records[key]={});record.handler=handler};function initGlobalListeners(zr,api){if(get(zr).initialized){return}get(zr).initialized=true;useHandler("click",zrUtil.curry(doEnter,"click"));useHandler("mousemove",zrUtil.curry(doEnter,"mousemove"));useHandler("globalout",onLeave);function useHandler(eventType,cb){zr.on(eventType,function(e){var dis=makeDispatchAction(api);each(get(zr).records,function(record){record&&cb(record,e,dis.dispatchAction)});dispatchTooltipFinally(dis.pendings,api)})}}function dispatchTooltipFinally(pendings,api){var showLen=pendings.showTip.length;var hideLen=pendings.hideTip.length;var actuallyPayload;if(showLen){actuallyPayload=pendings.showTip[showLen-1]}else{if(hideLen){actuallyPayload=pendings.hideTip[hideLen-1]}}if(actuallyPayload){actuallyPayload.dispatchAction=null;api.dispatchAction(actuallyPayload)}}function onLeave(record,e,dispatchAction){record.handler("leave",null,dispatchAction)}function doEnter(currTrigger,record,e,dispatchAction){record.handler(currTrigger,e,dispatchAction)}function makeDispatchAction(api){var pendings={showTip:[],hideTip:[]};var dispatchAction=function(payload){var pendingList=pendings[payload.type];if(pendingList){pendingList.push(payload)}else{payload.dispatchAction=dispatchAction;api.dispatchAction(payload)}};return{dispatchAction:dispatchAction,pendings:pendings}}globalListener.unregister=function(key,api){if(env.node){return}var zr=api.getZr();var record=(get(zr).records||{})[key];if(record){get(zr).records[key]=null}};module.exports=globalListener}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var BaseAxisPointer=__webpack_require__(308);var viewHelper=__webpack_require__(309);var cartesianAxisHelper=__webpack_require__(141);var AxisView=__webpack_require__(139);var CartesianAxisPointer=BaseAxisPointer.extend({makeElOption:function(elOption,value,axisModel,axisPointerModel,api){var axis=axisModel.axis;var grid=axis.grid;var axisPointerType=axisPointerModel.get("type");var otherExtent=getCartesian(grid,axis).getOtherAxis(axis).getGlobalExtent();var pixelValue=axis.toGlobalCoord(axis.dataToCoord(value,true));if(axisPointerType&&axisPointerType!=="none"){var elStyle=viewHelper.buildElStyle(axisPointerModel);var pointerOption=pointerShapeBuilder[axisPointerType](axis,pixelValue,otherExtent,elStyle);pointerOption.style=elStyle;elOption.graphicKey=pointerOption.type;elOption.pointer=pointerOption}var layoutInfo=cartesianAxisHelper.layout(grid.model,axisModel);viewHelper.buildCartesianSingleLabelElOption(value,elOption,layoutInfo,axisModel,axisPointerModel,api)},getHandleTransform:function(value,axisModel,axisPointerModel){var layoutInfo=cartesianAxisHelper.layout(axisModel.axis.grid.model,axisModel,{labelInside:false});layoutInfo.labelMargin=axisPointerModel.get("handle.margin");return{position:viewHelper.getTransformedPosition(axisModel.axis,value,layoutInfo),rotation:layoutInfo.rotation+(layoutInfo.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(transform,delta,axisModel,axisPointerModel){var axis=axisModel.axis;var grid=axis.grid;var axisExtent=axis.getGlobalExtent(true);var otherExtent=getCartesian(grid,axis).getOtherAxis(axis).getGlobalExtent();var dimIndex=axis.dim==="x"?0:1;var currPosition=transform.position;currPosition[dimIndex]+=delta[dimIndex];currPosition[dimIndex]=Math.min(axisExtent[1],currPosition[dimIndex]);currPosition[dimIndex]=Math.max(axisExtent[0],currPosition[dimIndex]);var cursorOtherValue=(otherExtent[1]+otherExtent[0])/2;var cursorPoint=[cursorOtherValue,cursorOtherValue];cursorPoint[dimIndex]=currPosition[dimIndex];var tooltipOptions=[{verticalAlign:"middle"},{align:"center"}];return{position:currPosition,rotation:transform.rotation,cursorPoint:cursorPoint,tooltipOption:tooltipOptions[dimIndex]}}});function getCartesian(grid,axis){var opt={};opt[axis.dim+"AxisIndex"]=axis.index;return grid.getCartesian(opt)}var pointerShapeBuilder={line:function(axis,pixelValue,otherExtent,elStyle){var targetShape=viewHelper.makeLineShape([pixelValue,otherExtent[0]],[pixelValue,otherExtent[1]],getAxisDimIndex(axis));graphic.subPixelOptimizeLine({shape:targetShape,style:elStyle});return{type:"Line",shape:targetShape}},shadow:function(axis,pixelValue,otherExtent,elStyle){var bandWidth=axis.getBandWidth();var span=otherExtent[1]-otherExtent[0];return{type:"Rect",shape:viewHelper.makeRectShape([pixelValue-bandWidth/2,otherExtent[0]],[bandWidth,span],getAxisDimIndex(axis))}}};function getAxisDimIndex(axis){return axis.dim==="x"?0:1}AxisView.registerAxisPointerClass("CartesianAxisPointer",CartesianAxisPointer);
module.exports=CartesianAxisPointer}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var clazzUtil=__webpack_require__(15);var graphic=__webpack_require__(20);var get=__webpack_require__(5).makeGetter();var axisPointerModelHelper=__webpack_require__(140);var eventTool=__webpack_require__(93);var throttle=__webpack_require__(86);var clone=zrUtil.clone;var bind=zrUtil.bind;function BaseAxisPointer(){}BaseAxisPointer.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:false,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(axisModel,axisPointerModel,api,forceRender){var value=axisPointerModel.get("value");var status=axisPointerModel.get("status");this._axisModel=axisModel;this._axisPointerModel=axisPointerModel;this._api=api;if(!forceRender&&this._lastValue===value&&this._lastStatus===status){return}this._lastValue=value;this._lastStatus=status;var group=this._group;var handle=this._handle;if(!status||status==="hide"){group&&group.hide();handle&&handle.hide();return}group&&group.show();handle&&handle.show();var elOption={};this.makeElOption(elOption,value,axisModel,axisPointerModel,api);var graphicKey=elOption.graphicKey;if(graphicKey!==this._lastGraphicKey){this.clear(api)}this._lastGraphicKey=graphicKey;var moveAnimation=this._moveAnimation=this.determineAnimation(axisModel,axisPointerModel);if(!group){group=this._group=new graphic.Group();this.createPointerEl(group,elOption,axisModel,axisPointerModel);this.createLabelEl(group,elOption,axisModel,axisPointerModel);api.getZr().add(group)}else{var doUpdateProps=zrUtil.curry(updateProps,axisPointerModel,moveAnimation);this.updatePointerEl(group,elOption,doUpdateProps,axisPointerModel);this.updateLabelEl(group,elOption,doUpdateProps,axisPointerModel)}updateMandatoryProps(group,axisPointerModel,true);this._renderHandle(value)},remove:function(api){this.clear(api)},dispose:function(api){this.clear(api)},determineAnimation:function(axisModel,axisPointerModel){var animation=axisPointerModel.get("animation");var axis=axisModel.axis;var isCategoryAxis=axis.type==="category";var useSnap=axisPointerModel.get("snap");if(!useSnap&&!isCategoryAxis){return false}if(animation==="auto"||animation==null){var animationThreshold=this.animationThreshold;if(isCategoryAxis&&axis.getBandWidth()>animationThreshold){return true}if(useSnap){var seriesDataCount=axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;var axisExtent=axis.getExtent();return Math.abs(axisExtent[0]-axisExtent[1])/seriesDataCount>animationThreshold}return false}return animation===true},makeElOption:function(elOption,value,axisModel,axisPointerModel,api){},createPointerEl:function(group,elOption,axisModel,axisPointerModel){var pointerOption=elOption.pointer;if(pointerOption){var pointerEl=get(group).pointerEl=new graphic[pointerOption.type](clone(elOption.pointer));group.add(pointerEl)}},createLabelEl:function(group,elOption,axisModel,axisPointerModel){if(elOption.label){var labelEl=get(group).labelEl=new graphic.Rect(clone(elOption.label));group.add(labelEl);updateLabelShowHide(labelEl,axisPointerModel)}},updatePointerEl:function(group,elOption,updateProps){var pointerEl=get(group).pointerEl;if(pointerEl){pointerEl.setStyle(elOption.pointer.style);updateProps(pointerEl,{shape:elOption.pointer.shape})}},updateLabelEl:function(group,elOption,updateProps,axisPointerModel){var labelEl=get(group).labelEl;if(labelEl){labelEl.setStyle(elOption.label.style);updateProps(labelEl,{shape:elOption.label.shape,position:elOption.label.position});updateLabelShowHide(labelEl,axisPointerModel)}},_renderHandle:function(value){if(this._dragging||!this.updateHandleTransform){return}var axisPointerModel=this._axisPointerModel;var zr=this._api.getZr();var handle=this._handle;var handleModel=axisPointerModel.getModel("handle");var status=axisPointerModel.get("status");if(!handleModel.get("show")||!status||status==="hide"){handle&&zr.remove(handle);this._handle=null;return}var isInit;if(!this._handle){isInit=true;handle=this._handle=graphic.createIcon(handleModel.get("icon"),{cursor:"move",draggable:true,onmousemove:function(e){eventTool.stop(e.event)},onmousedown:bind(this._onHandleDragMove,this,0,0),drift:bind(this._onHandleDragMove,this),ondragend:bind(this._onHandleDragEnd,this)});zr.add(handle)}updateMandatoryProps(handle,axisPointerModel,false);var includeStyles=["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];handle.setStyle(handleModel.getItemStyle(null,includeStyles));var handleSize=handleModel.get("size");if(!zrUtil.isArray(handleSize)){handleSize=[handleSize,handleSize]}handle.attr("scale",[handleSize[0]/2,handleSize[1]/2]);throttle.createOrUpdate(this,"_doDispatchAxisPointer",handleModel.get("throttle")||0,"fixRate");this._moveHandleToValue(value,isInit)},_moveHandleToValue:function(value,isInit){updateProps(this._axisPointerModel,!isInit&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(value,this._axisModel,this._axisPointerModel)))
},_onHandleDragMove:function(dx,dy){var handle=this._handle;if(!handle){return}this._dragging=true;var trans=this.updateHandleTransform(getHandleTransProps(handle),[dx,dy],this._axisModel,this._axisPointerModel);this._payloadInfo=trans;handle.stopAnimation();handle.attr(getHandleTransProps(trans));get(handle).lastProp=null;this._doDispatchAxisPointer()},_doDispatchAxisPointer:function(){var handle=this._handle;if(!handle){return}var payloadInfo=this._payloadInfo;var axisModel=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:payloadInfo.cursorPoint[0],y:payloadInfo.cursorPoint[1],tooltipOption:payloadInfo.tooltipOption,axesInfo:[{axisDim:axisModel.axis.dim,axisIndex:axisModel.componentIndex}]})},_onHandleDragEnd:function(moveAnimation){this._dragging=false;var handle=this._handle;if(!handle){return}var value=this._axisPointerModel.get("value");this._moveHandleToValue(value);this._api.dispatchAction({type:"hideTip"})},getHandleTransform:null,updateHandleTransform:null,clear:function(api){this._lastValue=null;this._lastStatus=null;var zr=api.getZr();var group=this._group;var handle=this._handle;if(zr&&group){this._lastGraphicKey=null;group&&zr.remove(group);handle&&zr.remove(handle);this._group=null;this._handle=null;this._payloadInfo=null}},doClear:function(){},buildLabel:function(xy,wh,xDimIndex){xDimIndex=xDimIndex||0;return{x:xy[xDimIndex],y:xy[1-xDimIndex],width:wh[xDimIndex],height:wh[1-xDimIndex]}}};BaseAxisPointer.prototype.constructor=BaseAxisPointer;function updateProps(animationModel,moveAnimation,el,props){if(!propsEqual(get(el).lastProp,props)){get(el).lastProp=props;moveAnimation?graphic.updateProps(el,props,animationModel):(el.stopAnimation(),el.attr(props))}}function propsEqual(lastProps,newProps){if(zrUtil.isObject(lastProps)&&zrUtil.isObject(newProps)){var equals=true;zrUtil.each(newProps,function(item,key){equals=equals&&propsEqual(lastProps[key],item)});return !!equals}else{return lastProps===newProps}}function updateLabelShowHide(labelEl,axisPointerModel){labelEl[axisPointerModel.get("label.show")?"show":"hide"]()}function getHandleTransProps(trans){return{position:trans.position.slice(),rotation:trans.rotation||0}}function updateMandatoryProps(group,axisPointerModel,silent){var z=axisPointerModel.get("z");var zlevel=axisPointerModel.get("zlevel");group&&group.traverse(function(el){if(el.type!=="group"){z!=null&&(el.z=z);zlevel!=null&&(el.zlevel=zlevel);el.silent=silent}})}clazzUtil.enableClassExtend(BaseAxisPointer);module.exports=BaseAxisPointer}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var graphic=__webpack_require__(20);var textContain=__webpack_require__(8);var formatUtil=__webpack_require__(6);var matrix=__webpack_require__(11);var axisHelper=__webpack_require__(104);var AxisBuilder=__webpack_require__(138);var helper={};helper.buildElStyle=function(axisPointerModel){var axisPointerType=axisPointerModel.get("type");var styleModel=axisPointerModel.getModel(axisPointerType+"Style");var style;if(axisPointerType==="line"){style=styleModel.getLineStyle();style.fill=null}else{if(axisPointerType==="shadow"){style=styleModel.getAreaStyle();style.stroke=null}}return style};helper.buildLabelElOption=function(elOption,axisModel,axisPointerModel,api,labelPos){var value=axisPointerModel.get("value");var text=helper.getValueLabel(value,axisModel.axis,axisModel.ecModel,axisPointerModel.get("seriesDataIndices"),{precision:axisPointerModel.get("label.precision"),formatter:axisPointerModel.get("label.formatter")});var labelModel=axisPointerModel.getModel("label");var paddings=formatUtil.normalizeCssArray(labelModel.get("padding")||0);var font=labelModel.getFont();var textRect=textContain.getBoundingRect(text,font);var position=labelPos.position;var width=textRect.width+paddings[1]+paddings[3];var height=textRect.height+paddings[0]+paddings[2];var align=labelPos.align;align==="right"&&(position[0]-=width);align==="center"&&(position[0]-=width/2);var verticalAlign=labelPos.verticalAlign;verticalAlign==="bottom"&&(position[1]-=height);verticalAlign==="middle"&&(position[1]-=height/2);confineInContainer(position,width,height,api);var bgColor=labelModel.get("backgroundColor");if(!bgColor||bgColor==="auto"){bgColor=axisModel.get("axisLine.lineStyle.color")}elOption.label={shape:{x:0,y:0,width:width,height:height,r:labelModel.get("borderRadius")},position:position.slice(),style:{text:text,textFont:font,textFill:labelModel.getTextColor(),textPosition:"inside",fill:bgColor,stroke:labelModel.get("borderColor")||"transparent",lineWidth:labelModel.get("borderWidth")||0,shadowBlur:labelModel.get("shadowBlur"),shadowColor:labelModel.get("shadowColor"),shadowOffsetX:labelModel.get("shadowOffsetX"),shadowOffsetY:labelModel.get("shadowOffsetY")},z2:10}};function confineInContainer(position,width,height,api){var viewWidth=api.getWidth();var viewHeight=api.getHeight();position[0]=Math.min(position[0]+width,viewWidth)-width;position[1]=Math.min(position[1]+height,viewHeight)-height;
position[0]=Math.max(position[0],0);position[1]=Math.max(position[1],0)}helper.getValueLabel=function(value,axis,ecModel,seriesDataIndices,opt){var text=axis.scale.getLabel(value,{precision:opt.precision});var formatter=opt.formatter;if(formatter){var params={value:axisHelper.getAxisRawValue(axis,value),seriesData:[]};zrUtil.each(seriesDataIndices,function(idxItem){var series=ecModel.getSeriesByIndex(idxItem.seriesIndex);var dataIndex=idxItem.dataIndexInside;var dataParams=series&&series.getDataParams(dataIndex);dataParams&&params.seriesData.push(dataParams)});if(zrUtil.isString(formatter)){text=formatter.replace("{value}",text)}else{if(zrUtil.isFunction(formatter)){text=formatter(params)}}}return text};helper.getTransformedPosition=function(axis,value,layoutInfo){var transform=matrix.create();matrix.rotate(transform,transform,layoutInfo.rotation);matrix.translate(transform,transform,layoutInfo.position);return graphic.applyTransform([axis.dataToCoord(value),(layoutInfo.labelOffset||0)+(layoutInfo.labelDirection||1)*(layoutInfo.labelMargin||0)],transform)};helper.buildCartesianSingleLabelElOption=function(value,elOption,layoutInfo,axisModel,axisPointerModel,api){var textLayout=AxisBuilder.innerTextLayout(layoutInfo.rotation,0,layoutInfo.labelDirection);layoutInfo.labelMargin=axisPointerModel.get("label.margin");helper.buildLabelElOption(elOption,axisModel,axisPointerModel,api,{position:helper.getTransformedPosition(axisModel.axis,value,layoutInfo),align:textLayout.textAlign,verticalAlign:textLayout.textVerticalAlign})};helper.makeLineShape=function(p1,p2,xDimIndex){xDimIndex=xDimIndex||0;return{x1:p1[xDimIndex],y1:p1[1-xDimIndex],x2:p2[xDimIndex],y2:p2[1-xDimIndex]}};helper.makeRectShape=function(xy,wh,xDimIndex){xDimIndex=xDimIndex||0;return{x:xy[xDimIndex],y:xy[1-xDimIndex],width:wh[xDimIndex],height:wh[1-xDimIndex]}};helper.makeSectorShape=function(cx,cy,r0,r,startAngle,endAngle){return{cx:cx,cy:cy,r0:r0,r:r,startAngle:startAngle,endAngle:endAngle,clockwise:true}};module.exports=helper}),(function(module,exports,__webpack_require__){var graphic=__webpack_require__(20);var BaseAxisPointer=__webpack_require__(308);var viewHelper=__webpack_require__(309);var singleAxisHelper=__webpack_require__(299);var AxisView=__webpack_require__(139);var XY=["x","y"];var WH=["width","height"];var SingleAxisPointer=BaseAxisPointer.extend({makeElOption:function(elOption,value,axisModel,axisPointerModel,api){var axis=axisModel.axis;var coordSys=axis.coordinateSystem;var otherExtent=getGlobalExtent(coordSys,1-getPointDimIndex(axis));var pixelValue=coordSys.dataToPoint(value)[0];var axisPointerType=axisPointerModel.get("type");if(axisPointerType&&axisPointerType!=="none"){var elStyle=viewHelper.buildElStyle(axisPointerModel);var pointerOption=pointerShapeBuilder[axisPointerType](axis,pixelValue,otherExtent,elStyle);pointerOption.style=elStyle;elOption.graphicKey=pointerOption.type;elOption.pointer=pointerOption}var layoutInfo=singleAxisHelper.layout(axisModel);viewHelper.buildCartesianSingleLabelElOption(value,elOption,layoutInfo,axisModel,axisPointerModel,api)},getHandleTransform:function(value,axisModel,axisPointerModel){var layoutInfo=singleAxisHelper.layout(axisModel,{labelInside:false});layoutInfo.labelMargin=axisPointerModel.get("handle.margin");return{position:viewHelper.getTransformedPosition(axisModel.axis,value,layoutInfo),rotation:layoutInfo.rotation+(layoutInfo.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(transform,delta,axisModel,axisPointerModel){var axis=axisModel.axis;var coordSys=axis.coordinateSystem;var dimIndex=getPointDimIndex(axis);var axisExtent=getGlobalExtent(coordSys,dimIndex);var currPosition=transform.position;currPosition[dimIndex]+=delta[dimIndex];currPosition[dimIndex]=Math.min(axisExtent[1],currPosition[dimIndex]);currPosition[dimIndex]=Math.max(axisExtent[0],currPosition[dimIndex]);var otherExtent=getGlobalExtent(coordSys,1-dimIndex);var cursorOtherValue=(otherExtent[1]+otherExtent[0])/2;var cursorPoint=[cursorOtherValue,cursorOtherValue];cursorPoint[dimIndex]=currPosition[dimIndex];return{position:currPosition,rotation:transform.rotation,cursorPoint:cursorPoint,tooltipOption:{verticalAlign:"middle"}}}});var pointerShapeBuilder={line:function(axis,pixelValue,otherExtent,elStyle){var targetShape=viewHelper.makeLineShape([pixelValue,otherExtent[0]],[pixelValue,otherExtent[1]],getPointDimIndex(axis));graphic.subPixelOptimizeLine({shape:targetShape,style:elStyle});return{type:"Line",shape:targetShape}},shadow:function(axis,pixelValue,otherExtent,elStyle){var bandWidth=axis.getBandWidth();var span=otherExtent[1]-otherExtent[0];return{type:"Rect",shape:viewHelper.makeRectShape([pixelValue-bandWidth/2,otherExtent[0]],[bandWidth,span],getPointDimIndex(axis))}}};function getPointDimIndex(axis){return axis.isHorizontal()?0:1}function getGlobalExtent(coordSys,dimIndex){var rect=coordSys.getRect();return[rect[XY[dimIndex]],rect[XY[dimIndex]]+rect[WH[dimIndex]]]}AxisView.registerAxisPointerClass("SingleAxisPointer",SingleAxisPointer);
module.exports=SingleAxisPointer}),(function(module,exports,__webpack_require__){var completeDimensions=__webpack_require__(113);var SeriesModel=__webpack_require__(83);var List=__webpack_require__(101);var zrUtil=__webpack_require__(4);var formatUtil=__webpack_require__(6);var encodeHTML=formatUtil.encodeHTML;var nest=__webpack_require__(258);var DATA_NAME_INDEX=2;var ThemeRiverSeries=SeriesModel.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(option){ThemeRiverSeries.superApply(this,"init",arguments);this.legendDataProvider=function(){return this.getRawData()}},fixData:function(data){var rawDataLength=data.length;var dataByName=nest().key(function(dataItem){return dataItem[2]}).entries(data);var layData=zrUtil.map(dataByName,function(d){return{name:d.key,dataList:d.values}});var layerNum=layData.length;var largestLayer=-1;var index=-1;for(var i=0;i<layerNum;++i){var len=layData[i].dataList.length;if(len>largestLayer){largestLayer=len;index=i}}for(var k=0;k<layerNum;++k){if(k===index){continue}var name=layData[k].name;for(var j=0;j<largestLayer;++j){var timeValue=layData[index].dataList[j][0];var length=layData[k].dataList.length;var keyIndex=-1;for(var l=0;l<length;++l){var value=layData[k].dataList[l][0];if(value===timeValue){keyIndex=l;break}}if(keyIndex===-1){data[rawDataLength]=[];data[rawDataLength][0]=timeValue;data[rawDataLength][1]=0;data[rawDataLength][2]=name;rawDataLength++}}}return data},getInitialData:function(option,ecModel){var dimensions=[];var singleAxisModel=ecModel.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0];var axisType=singleAxisModel.get("type");dimensions=[{name:"time",type:axisType==="category"?"ordinal":axisType==="time"?"time":"float"},{name:"value",type:"float"},{name:"name",type:"ordinal"}];var filterData=zrUtil.filter(option.data,function(dataItem){return dataItem[2]!==undefined});var data=this.fixData(filterData||[]);var nameList=[];var nameMap=this.nameMap=zrUtil.createHashMap();var count=0;for(var i=0;i<data.length;++i){nameList.push(data[i][DATA_NAME_INDEX]);if(!nameMap.get(data[i][DATA_NAME_INDEX])){nameMap.set(data[i][DATA_NAME_INDEX],count);count++}}dimensions=completeDimensions(dimensions,data);var list=new List(dimensions,this);list.initData(data,nameList);return list},coordDimToDataDim:function(axisDim){return["time"]},getLayerSeries:function(){var data=this.getData();var lenCount=data.count();var indexArr=[];for(var i=0;i<lenCount;++i){indexArr[i]=i}var dataByName=nest().key(function(index){return data.get("name",index)}).entries(indexArr);var layerSeries=zrUtil.map(dataByName,function(d){return{name:d.key,indices:d.values}});for(var j=0;j<layerSeries.length;++j){layerSeries[j].indices.sort(comparer)}function comparer(index1,index2){return data.get("time",index1)-data.get("time",index2)}return layerSeries},getAxisTooltipData:function(dim,value,baseAxis){if(!zrUtil.isArray(dim)){dim=dim?[dim]:[]}var data=this.getData();var layerSeries=this.getLayerSeries();var indices=[];var layerNum=layerSeries.length;var nestestValue;for(var i=0;i<layerNum;++i){var minDist=Number.MAX_VALUE;var nearestIdx=-1;var pointNum=layerSeries[i].indices.length;for(var j=0;j<pointNum;++j){var theValue=data.get(dim[0],layerSeries[i].indices[j]);var dist=Math.abs(theValue-value);if(dist<=minDist){nestestValue=theValue;minDist=dist;nearestIdx=layerSeries[i].indices[j]}}indices.push(nearestIdx)}return{dataIndices:indices,nestestValue:nestestValue}},formatTooltip:function(dataIndex){var data=this.getData();var htmlName=data.get("name",dataIndex);var htmlValue=data.get("value",dataIndex);if(isNaN(htmlValue)||htmlValue==null){htmlValue="-"}return encodeHTML(htmlName+" : "+htmlValue)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{normal:{margin:4,textAlign:"right",show:true,position:"left",color:"#000",fontSize:11},emphasis:{show:true}}}});module.exports=ThemeRiverSeries}),(function(module,exports,__webpack_require__){(function(process){var poly=__webpack_require__(123);var graphic=__webpack_require__(20);var zrUtil=__webpack_require__(4);var DataDiffer=__webpack_require__(102);module.exports=__webpack_require__(1).extendChartView({type:"themeRiver",init:function(){this._layers=[]},render:function(seriesModel,ecModel,api){var data=seriesModel.getData();var rawData=seriesModel.getRawData();if(!data.count()){return}var group=this.group;var layerSeries=seriesModel.getLayerSeries();var layoutInfo=data.getLayout("layoutInfo");var rect=layoutInfo.rect;var boundaryGap=layoutInfo.boundaryGap;group.attr("position",[0,rect.y+boundaryGap[0]]);function keyGetter(item){return item.name}var dataDiffer=new DataDiffer(this._layersSeries||[],layerSeries,keyGetter,keyGetter);var newLayersGroups={};dataDiffer.add(zrUtil.bind(zrUtil.curry(process,"add"),this)).update(zrUtil.bind(zrUtil.curry(process,"update"),this)).remove(zrUtil.bind(zrUtil.curry(process,"remove"),this)).execute();
function process(status,idx,oldIdx){var oldLayersGroups=this._layers;if(status==="remove"){group.remove(oldLayersGroups[idx]);return}var points0=[];var points1=[];var color;var indices=layerSeries[idx].indices;for(var j=0;j<indices.length;j++){var layout=data.getItemLayout(indices[j]);var x=layout.x;var y0=layout.y0;var y=layout.y;points0.push([x,y0]);points1.push([x,y0+y]);color=rawData.getItemVisual(indices[j],"color")}var polygon;var text;var textLayout=data.getItemLayout(indices[0]);var itemModel=data.getItemModel(indices[j-1]);var labelModel=itemModel.getModel("label.normal");var margin=labelModel.get("margin");if(status==="add"){var layerGroup=newLayersGroups[idx]=new graphic.Group();polygon=new poly.Polygon({shape:{points:points0,stackedOnPoints:points1,smooth:0.4,stackedOnSmooth:0.4,smoothConstraint:false},z2:0});text=new graphic.Text({style:{x:textLayout.x-margin,y:textLayout.y0+textLayout.y/2}});layerGroup.add(polygon);layerGroup.add(text);group.add(layerGroup);polygon.setClipPath(createGridClipShape(polygon.getBoundingRect(),seriesModel,function(){polygon.removeClipPath()}))}else{var layerGroup=oldLayersGroups[oldIdx];polygon=layerGroup.childAt(0);text=layerGroup.childAt(1);group.add(layerGroup);newLayersGroups[idx]=layerGroup;graphic.updateProps(polygon,{shape:{points:points0,stackedOnPoints:points1}},seriesModel);graphic.updateProps(text,{style:{x:textLayout.x-margin,y:textLayout.y0+textLayout.y/2}},seriesModel)}var hoverItemStyleModel=itemModel.getModel("itemStyle.emphasis");var itemStyleModel=itemModel.getModel("itemStyle.normal");graphic.setTextStyle(text.style,labelModel,{text:labelModel.get("show")?seriesModel.getFormattedLabel(indices[j-1],"normal")||data.getName(indices[j-1]):null,textVerticalAlign:"middle"});polygon.setStyle(zrUtil.extend({fill:color},itemStyleModel.getItemStyle(["color"])));graphic.setHoverStyle(polygon,hoverItemStyleModel.getItemStyle())}this._layersSeries=layerSeries;this._layers=newLayersGroups},dispose:function(){}});function createGridClipShape(rect,seriesModel,cb){var rectEl=new graphic.Rect({shape:{x:rect.x-10,y:rect.y-10,width:0,height:rect.height+20}});graphic.initProps(rectEl,{shape:{width:rect.width+20,height:rect.height+20}},seriesModel,cb);return rectEl}}.call(exports,__webpack_require__(313)))}),(function(module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}}());function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")
};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var numberUtil=__webpack_require__(7);module.exports=function(ecModel,api){ecModel.eachSeriesByType("themeRiver",function(seriesModel){var data=seriesModel.getData();var single=seriesModel.coordinateSystem;var layoutInfo={};var rect=single.getRect();layoutInfo.rect=rect;var boundaryGap=seriesModel.get("boundaryGap");var axis=single.getAxis();layoutInfo.boundaryGap=boundaryGap;if(axis.orient==="horizontal"){boundaryGap[0]=numberUtil.parsePercent(boundaryGap[0],rect.height);boundaryGap[1]=numberUtil.parsePercent(boundaryGap[1],rect.height);var height=rect.height-boundaryGap[0]-boundaryGap[1];themeRiverLayout(data,seriesModel,height)}else{boundaryGap[0]=numberUtil.parsePercent(boundaryGap[0],rect.width);boundaryGap[1]=numberUtil.parsePercent(boundaryGap[1],rect.width);var width=rect.width-boundaryGap[0]-boundaryGap[1];themeRiverLayout(data,seriesModel,width)}data.setLayout("layoutInfo",layoutInfo)})};function themeRiverLayout(data,seriesModel,height){if(!data.count()){return}var coordSys=seriesModel.coordinateSystem;var layerSeries=seriesModel.getLayerSeries();var layerPoints=zrUtil.map(layerSeries,function(singleLayer){return zrUtil.map(singleLayer.indices,function(idx){var pt=coordSys.dataToPoint(data.get("time",idx));pt[1]=data.get("value",idx);return pt})});var base=computeBaseline(layerPoints);var baseLine=base.y0;var ky=height/base.max;var n=layerSeries.length;var m=layerSeries[0].indices.length;var baseY0;for(var j=0;j<m;++j){baseY0=baseLine[j]*ky;data.setItemLayout(layerSeries[0].indices[j],{layerIndex:0,x:layerPoints[0][j][0],y0:baseY0,y:layerPoints[0][j][1]*ky});for(var i=1;i<n;++i){baseY0+=layerPoints[i-1][j][1]*ky;data.setItemLayout(layerSeries[i].indices[j],{layerIndex:i,x:layerPoints[i][j][0],y0:baseY0,y:layerPoints[i][j][1]*ky})}}}function computeBaseline(data){var layerNum=data.length;var pointNum=data[0].length;var sums=[];var y0=[];var max=0;var temp;var base={};for(var i=0;i<pointNum;++i){for(var j=0,temp=0;j<layerNum;++j){temp+=data[j][i][1]}if(temp>max){max=temp}sums.push(temp)}for(var k=0;k<pointNum;++k){y0[k]=(max-sums[k])/2}max=0;for(var l=0;l<pointNum;++l){var sum=sums[l]+y0[l];if(sum>max){max=sum}}base.y0=y0;base.max=max;return base}}),(function(module,exports){module.exports=function(ecModel){ecModel.eachSeriesByType("themeRiver",function(seriesModel){var data=seriesModel.getData();var rawData=seriesModel.getRawData();var colorList=seriesModel.get("color");data.each(function(index){var name=data.getName(index);var color=colorList[(seriesModel.nameMap.get(name)-1)%colorList.length];rawData.setItemVisual(index,"color",color)})})}}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);var zrUtil=__webpack_require__(4);var graphicUtil=__webpack_require__(20);var labelHelper=__webpack_require__(121);var createListFromArray=__webpack_require__(112);var barGrid=__webpack_require__(148);var DataDiffer=__webpack_require__(102);var ITEM_STYLE_NORMAL_PATH=["itemStyle","normal"];var ITEM_STYLE_EMPHASIS_PATH=["itemStyle","emphasis"];var LABEL_NORMAL=["label","normal"];var LABEL_EMPHASIS=["label","emphasis"];var GROUP_DIFF_PREFIX="e\0\0";var prepareCustoms={cartesian2d:__webpack_require__(317),geo:__webpack_require__(318),singleAxis:__webpack_require__(319),polar:__webpack_require__(320),calendar:__webpack_require__(321)};echarts.extendSeriesModel({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:true},getInitialData:function(option,ecModel){return createListFromArray(option.data,this,ecModel)}});echarts.extendChartView({type:"custom",_data:null,render:function(customSeries,ecModel,api){var oldData=this._data;var data=customSeries.getData();var group=this.group;var renderItem=makeRenderItem(customSeries,data,ecModel,api);data.diff(oldData).add(function(newIdx){data.hasValue(newIdx)&&createOrUpdate(null,newIdx,renderItem(newIdx),customSeries,group,data)}).update(function(newIdx,oldIdx){var el=oldData.getItemGraphicEl(oldIdx);data.hasValue(newIdx)?createOrUpdate(el,newIdx,renderItem(newIdx),customSeries,group,data):(el&&group.remove(el))}).remove(function(oldIdx){var el=oldData.getItemGraphicEl(oldIdx);el&&group.remove(el)}).execute();this._data=data},dispose:zrUtil.noop});function createEl(elOption){var graphicType=elOption.type;var el;if(graphicType==="path"){var shape=elOption.shape;el=graphicUtil.makePath(shape.pathData,null,{x:shape.x||0,y:shape.y||0,width:shape.width||0,height:shape.height||0},"center");el.__customPathData=elOption.pathData}else{if(graphicType==="image"){el=new graphicUtil.Image({});el.__customImagePath=elOption.style.image}else{if(graphicType==="text"){el=new graphicUtil.Text({});el.__customText=elOption.style.text}else{var Clz=graphicUtil[graphicType.charAt(0).toUpperCase()+graphicType.slice(1)];
if(true){zrUtil.assert(Clz,'graphic type "'+graphicType+'" can not be found.')}el=new Clz()}}}el.__customGraphicType=graphicType;el.name=elOption.name;return el}function updateEl(el,dataIndex,elOption,animatableModel,data,isInit){var targetProps={};var elOptionStyle=elOption.style||{};elOption.shape&&(targetProps.shape=zrUtil.clone(elOption.shape));elOption.position&&(targetProps.position=elOption.position.slice());elOption.scale&&(targetProps.scale=elOption.scale.slice());elOption.origin&&(targetProps.origin=elOption.origin.slice());elOption.rotation&&(targetProps.rotation=elOption.rotation);if(el.type==="image"&&elOption.style){var targetStyle=targetProps.style={};zrUtil.each(["x","y","width","height"],function(prop){prepareStyleTransition(prop,targetStyle,elOptionStyle,el.style,isInit)})}if(el.type==="text"&&elOption.style){var targetStyle=targetProps.style={};zrUtil.each(["x","y"],function(prop){prepareStyleTransition(prop,targetStyle,elOptionStyle,el.style,isInit)});!elOptionStyle.hasOwnProperty("textFill")&&elOptionStyle.fill&&(elOptionStyle.textFill=elOptionStyle.fill);!elOptionStyle.hasOwnProperty("textStroke")&&elOptionStyle.stroke&&(elOptionStyle.textStroke=elOptionStyle.stroke)}if(el.type!=="group"){el.useStyle(elOptionStyle);if(isInit){el.style.opacity=0;var targetOpacity=elOptionStyle.opacity;targetOpacity==null&&(targetOpacity=1);graphicUtil.initProps(el,{style:{opacity:targetOpacity}},animatableModel,dataIndex)}}if(isInit){el.attr(targetProps)}else{graphicUtil.updateProps(el,targetProps,animatableModel,dataIndex)}el.attr({z2:elOption.z2||0,silent:elOption.silent});elOption.styleEmphasis!==false&&graphicUtil.setHoverStyle(el,elOption.styleEmphasis)}function prepareStyleTransition(prop,targetStyle,elOptionStyle,oldElStyle,isInit){if(elOptionStyle[prop]!=null&&!isInit){targetStyle[prop]=elOptionStyle[prop];elOptionStyle[prop]=oldElStyle[prop]}}function makeRenderItem(customSeries,data,ecModel,api){var renderItem=customSeries.get("renderItem");var coordSys=customSeries.coordinateSystem;var prepareResult={};if(coordSys){if(true){zrUtil.assert(renderItem,"series.render is required.");zrUtil.assert(coordSys.prepareCustoms||prepareCustoms[coordSys.type],"This coordSys does not support custom series.")}prepareResult=coordSys.prepareCustoms?coordSys.prepareCustoms():prepareCustoms[coordSys.type](coordSys)}var userAPI=zrUtil.defaults({getWidth:api.getWidth,getHeight:api.getHeight,getZr:api.getZr,getDevicePixelRatio:api.getDevicePixelRatio,value:value,style:style,styleEmphasis:styleEmphasis,visual:visual,barLayout:barLayout,currentSeriesIndices:currentSeriesIndices,font:font},prepareResult.api||{});var userParams={context:{},seriesId:customSeries.id,seriesName:customSeries.name,seriesIndex:customSeries.seriesIndex,coordSys:prepareResult.coordSys,dataInsideLength:data.count(),encode:wrapEncodeDef(customSeries.getData())};var currDataIndexInside;var currDirty=true;var currItemModel;var currLabelNormalModel;var currLabelEmphasisModel;var currLabelValueDim;var currVisualColor;return function(dataIndexInside){currDataIndexInside=dataIndexInside;currDirty=true;return renderItem&&renderItem(zrUtil.defaults({dataIndexInside:dataIndexInside,dataIndex:data.getRawIndex(dataIndexInside)},userParams),userAPI)||{}};function updateCache(dataIndexInside){dataIndexInside==null&&(dataIndexInside=currDataIndexInside);if(currDirty){currItemModel=data.getItemModel(dataIndexInside);currLabelNormalModel=currItemModel.getModel(LABEL_NORMAL);currLabelEmphasisModel=currItemModel.getModel(LABEL_EMPHASIS);currLabelValueDim=labelHelper.findLabelValueDim(data);currVisualColor=data.getItemVisual(dataIndexInside,"color");currDirty=false}}function value(dim,dataIndexInside){dataIndexInside==null&&(dataIndexInside=currDataIndexInside);return data.get(data.getDimension(dim||0),dataIndexInside)}function style(extra,dataIndexInside){dataIndexInside==null&&(dataIndexInside=currDataIndexInside);updateCache(dataIndexInside);var itemStyle=currItemModel.getModel(ITEM_STYLE_NORMAL_PATH).getItemStyle();currVisualColor!=null&&(itemStyle.fill=currVisualColor);var opacity=data.getItemVisual(dataIndexInside,"opacity");opacity!=null&&(itemStyle.opacity=opacity);if(currLabelValueDim!=null){graphicUtil.setTextStyle(itemStyle,currLabelNormalModel,null,{autoColor:currVisualColor,isRectText:true});itemStyle.text=currLabelNormalModel.getShallow("show")?zrUtil.retrieve2(customSeries.getFormattedLabel(dataIndexInside,"normal"),data.get(currLabelValueDim,dataIndexInside)):null}extra&&zrUtil.extend(itemStyle,extra);return itemStyle}function styleEmphasis(extra,dataIndexInside){dataIndexInside==null&&(dataIndexInside=currDataIndexInside);updateCache(dataIndexInside);var itemStyle=currItemModel.getModel(ITEM_STYLE_EMPHASIS_PATH).getItemStyle();if(currLabelValueDim!=null){graphicUtil.setTextStyle(itemStyle,currLabelEmphasisModel,null,{isRectText:true},true);itemStyle.text=currLabelEmphasisModel.getShallow("show")?zrUtil.retrieve3(customSeries.getFormattedLabel(dataIndexInside,"emphasis"),customSeries.getFormattedLabel(dataIndexInside,"normal"),data.get(currLabelValueDim,dataIndexInside)):null
}extra&&zrUtil.extend(itemStyle,extra);return itemStyle}function visual(visualType,dataIndexInside){dataIndexInside==null&&(dataIndexInside=currDataIndexInside);return data.getItemVisual(dataIndexInside,visualType)}function barLayout(opt){if(coordSys.getBaseAxis){var baseAxis=coordSys.getBaseAxis();return barGrid.getLayoutOnAxis(zrUtil.defaults({axis:baseAxis},opt),api)}}function currentSeriesIndices(){return ecModel.getCurrentSeriesIndices()}function font(opt){return graphicUtil.getFont(opt,ecModel)}}function wrapEncodeDef(data){var encodeDef={};zrUtil.each(data.dimensions,function(dimName,dataDimIndex){var dimInfo=data.getDimensionInfo(dimName);if(!dimInfo.isExtraCoord){var coordDim=dimInfo.coordDim;var dataDims=encodeDef[coordDim]=encodeDef[coordDim]||[];dataDims[dimInfo.coordDimIndex]=dataDimIndex}});return encodeDef}function createOrUpdate(el,dataIndex,elOption,animatableModel,group,data){el=doCreateOrUpdate(el,dataIndex,elOption,animatableModel,group,data);el&&data.setItemGraphicEl(dataIndex,el)}function doCreateOrUpdate(el,dataIndex,elOption,animatableModel,group,data){var elOptionType=elOption.type;if(el&&elOptionType!==el.__customGraphicType&&(elOptionType!=="path"||elOption.pathData!==el.__customPathData)&&(elOptionType!=="image"||elOption.style.image!==el.__customImagePath)&&(elOptionType!=="text"||elOption.style.text!==el.__customText)){group.remove(el);el=null}if(elOptionType==null){return}var isInit=!el;!el&&(el=createEl(elOption));updateEl(el,dataIndex,elOption,animatableModel,data,isInit);if(elOptionType==="group"){var oldChildren=el.children()||[];var newChildren=elOption.children||[];if(elOption.diffChildrenByName){diffGroupChildren({oldChildren:oldChildren,newChildren:newChildren,dataIndex:dataIndex,animatableModel:animatableModel,group:el,data:data})}else{var index=0;for(;index<newChildren.length;index++){doCreateOrUpdate(el.childAt(index),dataIndex,newChildren[index],animatableModel,el,data)}for(;index<oldChildren.length;index++){oldChildren[index]&&el.remove(oldChildren[index])}}}group.add(el);return el}function diffGroupChildren(context){(new DataDiffer(context.oldChildren,context.newChildren,getKey,getKey,context)).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}function getKey(item,idx){var name=item&&item.name;return name!=null?name:GROUP_DIFF_PREFIX+idx}function processAddUpdate(newIndex,oldIndex){var context=this.context;var childOption=newIndex!=null?context.newChildren[newIndex]:null;var child=oldIndex!=null?context.oldChildren[oldIndex]:null;doCreateOrUpdate(child,context.dataIndex,childOption,context.animatableModel,context.group,context.data)}function processRemove(oldIndex){var context=this.context;var child=context.oldChildren[oldIndex];child&&context.group.remove(child)}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);function dataToCoordSize(dataSize,dataItem){dataItem=dataItem||[0,0];return zrUtil.map(["x","y"],function(dim,dimIdx){var axis=this.getAxis(dim);var val=dataItem[dimIdx];var halfSize=dataSize[dimIdx]/2;return axis.type==="category"?axis.getBandWidth():Math.abs(axis.dataToCoord(val-halfSize)-axis.dataToCoord(val+halfSize))},this)}function prepareCustom(coordSys){var rect=coordSys.grid.getRect();return{coordSys:{type:"cartesian2d",x:rect.x,y:rect.y,width:rect.width,height:rect.height},api:{coord:zrUtil.bind(coordSys.dataToPoint,coordSys),size:zrUtil.bind(dataToCoordSize,coordSys)}}}module.exports=prepareCustom}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);function dataToCoordSize(dataSize,dataItem){dataItem=dataItem||[0,0];return zrUtil.map([0,1],function(dimIdx){var val=dataItem[dimIdx];var halfSize=dataSize[dimIdx]/2;var p1=[];var p2=[];p1[dimIdx]=val-halfSize;p2[dimIdx]=val+halfSize;p1[1-dimIdx]=p2[1-dimIdx]=dataItem[1-dimIdx];return Math.abs(this.dataToPoint(p1)[dimIdx]-this.dataToPoint(p2)[dimIdx])},this)}function prepareCustom(coordSys){var rect=coordSys.getBoundingRect();return{coordSys:{type:"geo",x:rect.x,y:rect.y,width:rect.width,height:rect.height},api:{coord:zrUtil.bind(coordSys.dataToPoint,coordSys),size:zrUtil.bind(dataToCoordSize,coordSys)}}}module.exports=prepareCustom}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);function dataToCoordSize(dataSize,dataItem){var axis=this.getAxis();var val=dataItem instanceof Array?dataItem[0]:dataItem;var halfSize=(dataSize instanceof Array?dataSize[0]:dataSize)/2;return axis.type==="category"?axis.getBandWidth():Math.abs(axis.dataToCoord(val-halfSize)-axis.dataToCoord(val+halfSize))}function prepareCustom(coordSys){var rect=coordSys.getRect();return{coordSys:{type:"singleAxis",x:rect.x,y:rect.y,width:rect.width,height:rect.height},api:{coord:zrUtil.bind(coordSys.dataToPoint,coordSys),size:zrUtil.bind(dataToCoordSize,coordSys)}}}module.exports=prepareCustom}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);function dataToCoordSize(dataSize,dataItem){return zrUtil.map(["Radius","Angle"],function(dim,dimIdx){var axis=this["get"+dim+"Axis"]();
var val=dataItem[dimIdx];var halfSize=dataSize[dimIdx]/2;var method="dataTo"+dim;var result=axis.type==="category"?axis.getBandWidth():Math.abs(axis[method](val-halfSize)-axis[method](val+halfSize));if(dim==="Angle"){result=result*Math.PI/180}return result},this)}function prepareCustom(coordSys){var radiusAxis=coordSys.getRadiusAxis();var angleAxis=coordSys.getAngleAxis();var radius=radiusAxis.getExtent();radius[0]>radius[1]&&radius.reverse();return{coordSys:{type:"polar",cx:coordSys.cx,cy:coordSys.cy,r:radius[1],r0:radius[0]},api:{coord:zrUtil.bind(function(data){var radius=radiusAxis.dataToRadius(data[0]);var angle=angleAxis.dataToAngle(data[1]);var coord=coordSys.coordToPoint([radius,angle]);coord.push(radius,angle*Math.PI/180);return coord}),size:zrUtil.bind(dataToCoordSize,coordSys)}}}module.exports=prepareCustom}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);function prepareCustom(coordSys){var rect=coordSys.getRect();var rangeInfo=coordSys.getRangeInfo();return{coordSys:{type:"calendar",x:rect.x,y:rect.y,width:rect.width,height:rect.height,cellWidth:coordSys.getCellWidth(),cellHeight:coordSys.getCellHeight(),rangeInfo:{start:rangeInfo.start,end:rangeInfo.end,weeks:rangeInfo.weeks,dayCount:rangeInfo.allDay}},api:{coord:zrUtil.bind(coordSys.dataToPoint,coordSys)}}}module.exports=prepareCustom}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);var zrUtil=__webpack_require__(4);var modelUtil=__webpack_require__(5);var graphicUtil=__webpack_require__(20);var layoutUtil=__webpack_require__(74);echarts.registerPreprocessor(function(option){var graphicOption=option.graphic;if(zrUtil.isArray(graphicOption)){if(!graphicOption[0]||!graphicOption[0].elements){option.graphic=[{elements:graphicOption}]}else{option.graphic=[option.graphic[0]]}}else{if(graphicOption&&!graphicOption.elements){option.graphic=[{elements:[graphicOption]}]}}});var GraphicModel=echarts.extendComponentModel({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(option){var elements=this.option.elements;this.option.elements=null;GraphicModel.superApply(this,"mergeOption",arguments);this.option.elements=elements},optionUpdated:function(newOption,isInit){var thisOption=this.option;var newList=(isInit?thisOption:newOption).elements;var existList=thisOption.elements=isInit?[]:thisOption.elements;var flattenedList=[];this._flatten(newList,flattenedList);var mappingResult=modelUtil.mappingToExists(existList,flattenedList);modelUtil.makeIdAndName(mappingResult);var elOptionsToUpdate=this._elOptionsToUpdate=[];zrUtil.each(mappingResult,function(resultItem,index){var newElOption=resultItem.option;if(true){zrUtil.assert(zrUtil.isObject(newElOption)||resultItem.exist,"Empty graphic option definition")}if(!newElOption){return}elOptionsToUpdate.push(newElOption);setKeyInfoToNewElOption(resultItem,newElOption);mergeNewElOptionToExist(existList,index,newElOption);setLayoutInfoToExist(existList[index],newElOption)},this);for(var i=existList.length-1;i>=0;i--){if(existList[i]==null){existList.splice(i,1)}else{delete existList[i].$action}}},_flatten:function(optionList,result,parentOption){zrUtil.each(optionList,function(option){if(!option){return}if(parentOption){option.parentOption=parentOption}result.push(option);var children=option.children;if(option.type==="group"&&children){this._flatten(children,result,option)}delete option.children},this)},useElOptionsToUpdate:function(){var els=this._elOptionsToUpdate;this._elOptionsToUpdate=null;return els}});echarts.extendComponentView({type:"graphic",init:function(ecModel,api){this._elMap=zrUtil.createHashMap();this._lastGraphicModel},render:function(graphicModel,ecModel,api){if(graphicModel!==this._lastGraphicModel){this._clear()}this._lastGraphicModel=graphicModel;this._updateElements(graphicModel,api);this._relocate(graphicModel,api)},_updateElements:function(graphicModel,api){var elOptionsToUpdate=graphicModel.useElOptionsToUpdate();if(!elOptionsToUpdate){return}var elMap=this._elMap;var rootGroup=this.group;zrUtil.each(elOptionsToUpdate,function(elOption){var $action=elOption.$action;var id=elOption.id;var existEl=elMap.get(id);var parentId=elOption.parentId;var targetElParent=parentId!=null?elMap.get(parentId):rootGroup;if(elOption.type==="text"){var elOptionStyle=elOption.style;if(elOption.hv&&elOption.hv[1]){elOptionStyle.textVerticalAlign=elOptionStyle.textBaseline=null}!elOptionStyle.hasOwnProperty("textFill")&&elOptionStyle.fill&&(elOptionStyle.textFill=elOptionStyle.fill);!elOptionStyle.hasOwnProperty("textStroke")&&elOptionStyle.stroke&&(elOptionStyle.textStroke=elOptionStyle.stroke)}var elOptionCleaned=getCleanedElOption(elOption);if(true){existEl&&zrUtil.assert(targetElParent===existEl.parent,"Changing parent is not supported.")}if(!$action||$action==="merge"){existEl?existEl.attr(elOptionCleaned):createEl(id,targetElParent,elOptionCleaned,elMap)}else{if($action==="replace"){removeEl(existEl,elMap);
createEl(id,targetElParent,elOptionCleaned,elMap)}else{if($action==="remove"){removeEl(existEl,elMap)}}}var el=elMap.get(id);if(el){el.__ecGraphicWidth=elOption.width;el.__ecGraphicHeight=elOption.height}})},_relocate:function(graphicModel,api){var elOptions=graphicModel.option.elements;var rootGroup=this.group;var elMap=this._elMap;for(var i=elOptions.length-1;i>=0;i--){var elOption=elOptions[i];var el=elMap.get(elOption.id);if(!el){continue}var parentEl=el.parent;var containerInfo=parentEl===rootGroup?{width:api.getWidth(),height:api.getHeight()}:{width:parentEl.__ecGraphicWidth||0,height:parentEl.__ecGraphicHeight||0};layoutUtil.positionElement(el,elOption,containerInfo,null,{hv:elOption.hv,boundingMode:elOption.bounding})}},_clear:function(){var elMap=this._elMap;elMap.each(function(el){removeEl(el,elMap)});this._elMap=zrUtil.createHashMap()},dispose:function(){this._clear()}});function createEl(id,targetElParent,elOption,elMap){var graphicType=elOption.type;if(true){zrUtil.assert(graphicType,"graphic type MUST be set")}var Clz=graphicUtil[graphicType.charAt(0).toUpperCase()+graphicType.slice(1)];if(true){zrUtil.assert(Clz,"graphic type can not be found")}var el=new Clz(elOption);targetElParent.add(el);elMap.set(id,el);el.__ecGraphicId=id}function removeEl(existEl,elMap){var existElParent=existEl&&existEl.parent;if(existElParent){existEl.type==="group"&&existEl.traverse(function(el){removeEl(el,elMap)});elMap.removeKey(existEl.__ecGraphicId);existElParent.remove(existEl)}}function getCleanedElOption(elOption){elOption=zrUtil.extend({},elOption);zrUtil.each(["id","parentId","$action","hv","bounding"].concat(layoutUtil.LOCATION_PARAMS),function(name){delete elOption[name]});return elOption}function isSetLoc(obj,props){var isSet;zrUtil.each(props,function(prop){obj[prop]!=null&&obj[prop]!=="auto"&&(isSet=true)});return isSet}function setKeyInfoToNewElOption(resultItem,newElOption){var existElOption=resultItem.exist;newElOption.id=resultItem.keyInfo.id;!newElOption.type&&existElOption&&(newElOption.type=existElOption.type);if(newElOption.parentId==null){var newElParentOption=newElOption.parentOption;if(newElParentOption){newElOption.parentId=newElParentOption.id}else{if(existElOption){newElOption.parentId=existElOption.parentId}}}newElOption.parentOption=null}function mergeNewElOptionToExist(existList,index,newElOption){var newElOptCopy=zrUtil.extend({},newElOption);var existElOption=existList[index];var $action=newElOption.$action||"merge";if($action==="merge"){if(existElOption){if(true){var newType=newElOption.type;zrUtil.assert(!newType||existElOption.type===newType,'Please set $action: "replace" to change `type`')}zrUtil.merge(existElOption,newElOptCopy,true);layoutUtil.mergeLayoutParam(existElOption,newElOptCopy,{ignoreSize:true});layoutUtil.copyLayoutParams(newElOption,existElOption)}else{existList[index]=newElOptCopy}}else{if($action==="replace"){existList[index]=newElOptCopy}else{if($action==="remove"){existElOption&&(existList[index]=null)}}}}function setLayoutInfoToExist(existItem,newElOption){if(!existItem){return}existItem.hv=newElOption.hv=[isSetLoc(newElOption,["left","right"]),isSetLoc(newElOption,["top","bottom"])];if(existItem.type==="group"){existItem.width==null&&(existItem.width=newElOption.width=0);existItem.height==null&&(existItem.height=newElOption.height=0)}}}),(function(module,exports,__webpack_require__){__webpack_require__(127);__webpack_require__(307);__webpack_require__(301)}),(function(module,exports,__webpack_require__){__webpack_require__(325);__webpack_require__(331);__webpack_require__(332);__webpack_require__(333)}),(function(module,exports,__webpack_require__){__webpack_require__(326);__webpack_require__(327);__webpack_require__(328);var echarts=__webpack_require__(1);echarts.registerProcessor(__webpack_require__(330));__webpack_require__(72).registerSubTypeDefaulter("legend",function(){return"plain"})}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var Model=__webpack_require__(14);var LegendModel=__webpack_require__(1).extendComponentModel({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:true},init:function(option,parentModel,ecModel){this.mergeDefaultAndTheme(option,ecModel);option.selected=option.selected||{}},mergeOption:function(option){LegendModel.superCall(this,"mergeOption",option)},optionUpdated:function(){this._updateData(this.ecModel);var legendData=this._data;if(legendData[0]&&this.get("selectedMode")==="single"){var hasSelected=false;for(var i=0;i<legendData.length;i++){var name=legendData[i].get("name");if(this.isSelected(name)){this.select(name);hasSelected=true;break}}!hasSelected&&this.select(legendData[0].get("name"))}},_updateData:function(ecModel){var legendData=zrUtil.map(this.get("data")||[],function(dataItem){if(typeof dataItem==="string"||typeof dataItem==="number"){dataItem={name:dataItem}}return new Model(dataItem,this,this.ecModel)},this);this._data=legendData;var availableNames=zrUtil.map(ecModel.getSeries(),function(series){return series.name
});ecModel.eachSeries(function(seriesModel){if(seriesModel.legendDataProvider){var data=seriesModel.legendDataProvider();availableNames=availableNames.concat(data.mapArray(data.getName))}});this._availableNames=availableNames},getData:function(){return this._data},select:function(name){var selected=this.option.selected;var selectedMode=this.get("selectedMode");if(selectedMode==="single"){var data=this._data;zrUtil.each(data,function(dataItem){selected[dataItem.get("name")]=false})}selected[name]=true},unSelect:function(name){if(this.get("selectedMode")!=="single"){this.option.selected[name]=false}},toggleSelected:function(name){var selected=this.option.selected;if(!selected.hasOwnProperty(name)){selected[name]=true}this[selected[name]?"unSelect":"select"](name)},isSelected:function(name){var selected=this.option.selected;return !(selected.hasOwnProperty(name)&&!selected[name])&&zrUtil.indexOf(this._availableNames,name)>=0},defaultOption:{zlevel:0,z:4,show:true,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",textStyle:{color:"#333"},selectedMode:true,tooltip:{show:false}}});module.exports=LegendModel}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);var zrUtil=__webpack_require__(4);function legendSelectActionHandler(methodName,payload,ecModel){var selectedMap={};var isToggleSelect=methodName==="toggleSelected";var isSelected;ecModel.eachComponent("legend",function(legendModel){if(isToggleSelect&&isSelected!=null){legendModel[isSelected?"select":"unSelect"](payload.name)}else{legendModel[methodName](payload.name);isSelected=legendModel.isSelected(payload.name)}var legendData=legendModel.getData();zrUtil.each(legendData,function(model){var name=model.get("name");if(name==="\n"||name===""){return}var isItemSelected=legendModel.isSelected(name);if(selectedMap.hasOwnProperty(name)){selectedMap[name]=selectedMap[name]&&isItemSelected}else{selectedMap[name]=isItemSelected}})});return{name:payload.name,selected:selectedMap}}echarts.registerAction("legendToggleSelect","legendselectchanged",zrUtil.curry(legendSelectActionHandler,"toggleSelected"));echarts.registerAction("legendSelect","legendselected",zrUtil.curry(legendSelectActionHandler,"select"));echarts.registerAction("legendUnSelect","legendunselected",zrUtil.curry(legendSelectActionHandler,"unSelect"))}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var symbolCreator=__webpack_require__(114);var graphic=__webpack_require__(20);var listComponentHelper=__webpack_require__(329);var layoutUtil=__webpack_require__(74);var curry=zrUtil.curry;var each=zrUtil.each;var Group=graphic.Group;module.exports=__webpack_require__(1).extendComponentView({type:"legend.plain",newlineDisabled:false,init:function(){this.group.add(this._contentGroup=new Group());this._backgroundEl},getContentGroup:function(){return this._contentGroup},render:function(legendModel,ecModel,api){this.resetInner();if(!legendModel.get("show",true)){return}var itemAlign=legendModel.get("align");if(!itemAlign||itemAlign==="auto"){itemAlign=(legendModel.get("left")==="right"&&legendModel.get("orient")==="vertical")?"right":"left"}this.renderInner(itemAlign,legendModel,ecModel,api);var positionInfo=legendModel.getBoxLayoutParams();var viewportSize={width:api.getWidth(),height:api.getHeight()};var padding=legendModel.get("padding");var maxSize=layoutUtil.getLayoutRect(positionInfo,viewportSize,padding);var mainRect=this.layoutInner(legendModel,itemAlign,maxSize);var layoutRect=layoutUtil.getLayoutRect(zrUtil.defaults({width:mainRect.width,height:mainRect.height},positionInfo),viewportSize,padding);this.group.attr("position",[layoutRect.x-mainRect.x,layoutRect.y-mainRect.y]);this.group.add(this._backgroundEl=listComponentHelper.makeBackground(mainRect,legendModel))},resetInner:function(){this.getContentGroup().removeAll();this._backgroundEl&&this.group.remove(this._backgroundEl)},renderInner:function(itemAlign,legendModel,ecModel,api){var contentGroup=this.getContentGroup();var legendDrawnMap=zrUtil.createHashMap();var selectMode=legendModel.get("selectedMode");each(legendModel.getData(),function(itemModel,dataIndex){var name=itemModel.get("name");if(!this.newlineDisabled&&(name===""||name==="\n")){contentGroup.add(new Group({newline:true}));return}var seriesModel=ecModel.getSeriesByName(name)[0];if(legendDrawnMap.get(name)){return}if(seriesModel){var data=seriesModel.getData();var color=data.getVisual("color");if(typeof color==="function"){color=color(seriesModel.getDataParams(0))}var legendSymbolType=data.getVisual("legendSymbol")||"roundRect";var symbolType=data.getVisual("symbol");var itemGroup=this._createItem(name,dataIndex,itemModel,legendModel,legendSymbolType,symbolType,itemAlign,color,selectMode);itemGroup.on("click",curry(dispatchSelectAction,name,api)).on("mouseover",curry(dispatchHighlightAction,seriesModel,null,api)).on("mouseout",curry(dispatchDownplayAction,seriesModel,null,api));
legendDrawnMap.set(name,true)}else{ecModel.eachRawSeries(function(seriesModel){if(legendDrawnMap.get(name)){return}if(seriesModel.legendDataProvider){var data=seriesModel.legendDataProvider();var idx=data.indexOfName(name);if(idx<0){return}var color=data.getItemVisual(idx,"color");var legendSymbolType="roundRect";var itemGroup=this._createItem(name,dataIndex,itemModel,legendModel,legendSymbolType,null,itemAlign,color,selectMode);itemGroup.on("click",curry(dispatchSelectAction,name,api)).on("mouseover",curry(dispatchHighlightAction,seriesModel,name,api)).on("mouseout",curry(dispatchDownplayAction,seriesModel,name,api));legendDrawnMap.set(name,true)}},this)}if(true){if(!legendDrawnMap.get(name)){console.warn(name+" series not exists. Legend data should be same with series name or data name.")}}},this)},_createItem:function(name,dataIndex,itemModel,legendModel,legendSymbolType,symbolType,itemAlign,color,selectMode){var itemWidth=legendModel.get("itemWidth");var itemHeight=legendModel.get("itemHeight");var inactiveColor=legendModel.get("inactiveColor");var isSelected=legendModel.isSelected(name);var itemGroup=new Group();var textStyleModel=itemModel.getModel("textStyle");var itemIcon=itemModel.get("icon");var tooltipModel=itemModel.getModel("tooltip");var legendGlobalTooltipModel=tooltipModel.parentModel;legendSymbolType=itemIcon||legendSymbolType;itemGroup.add(symbolCreator.createSymbol(legendSymbolType,0,0,itemWidth,itemHeight,isSelected?color:inactiveColor));if(!itemIcon&&symbolType&&((symbolType!==legendSymbolType)||symbolType=="none")){var size=itemHeight*0.8;if(symbolType==="none"){symbolType="circle"}itemGroup.add(symbolCreator.createSymbol(symbolType,(itemWidth-size)/2,(itemHeight-size)/2,size,size,isSelected?color:inactiveColor))}var textX=itemAlign==="left"?itemWidth+5:-5;var textAlign=itemAlign;var formatter=legendModel.get("formatter");var content=name;if(typeof formatter==="string"&&formatter){content=formatter.replace("{name}",name!=null?name:"")}else{if(typeof formatter==="function"){content=formatter(name)}}itemGroup.add(new graphic.Text({style:graphic.setTextStyle({},textStyleModel,{text:content,x:textX,y:itemHeight/2,textFill:isSelected?textStyleModel.getTextColor():inactiveColor,textAlign:textAlign,textVerticalAlign:"middle"})}));var hitRect=new graphic.Rect({shape:itemGroup.getBoundingRect(),invisible:true,tooltip:tooltipModel.get("show")?zrUtil.extend({content:name,formatter:legendGlobalTooltipModel.get("formatter",true)||function(){return name},formatterParams:{componentType:"legend",legendIndex:legendModel.componentIndex,name:name,$vars:["name"]}},tooltipModel.option):null});itemGroup.add(hitRect);itemGroup.eachChild(function(child){child.silent=true});hitRect.silent=!selectMode;this.getContentGroup().add(itemGroup);graphic.setHoverStyle(itemGroup);itemGroup.__legendDataIndex=dataIndex;return itemGroup},layoutInner:function(legendModel,itemAlign,maxSize){var contentGroup=this.getContentGroup();layoutUtil.box(legendModel.get("orient"),contentGroup,legendModel.get("itemGap"),maxSize.width,maxSize.height);var contentRect=contentGroup.getBoundingRect();contentGroup.attr("position",[-contentRect.x,-contentRect.y]);return this.group.getBoundingRect()}});function dispatchSelectAction(name,api){api.dispatchAction({type:"legendToggleSelect",name:name})}function dispatchHighlightAction(seriesModel,dataName,api){var el=api.getZr().storage.getDisplayList()[0];if(!(el&&el.useHoverLayer)){seriesModel.get("legendHoverLink")&&api.dispatchAction({type:"highlight",seriesName:seriesModel.name,name:dataName})}}function dispatchDownplayAction(seriesModel,dataName,api){var el=api.getZr().storage.getDisplayList()[0];if(!(el&&el.useHoverLayer)){seriesModel.get("legendHoverLink")&&api.dispatchAction({type:"downplay",seriesName:seriesModel.name,name:dataName})}}}),(function(module,exports,__webpack_require__){var layout=__webpack_require__(74);var formatUtil=__webpack_require__(6);var graphic=__webpack_require__(20);module.exports={layout:function(group,componentModel,api){var boxLayoutParams=componentModel.getBoxLayoutParams();var padding=componentModel.get("padding");var viewportSize={width:api.getWidth(),height:api.getHeight()};var rect=layout.getLayoutRect(boxLayoutParams,viewportSize,padding);layout.box(componentModel.get("orient"),group,componentModel.get("itemGap"),rect.width,rect.height);layout.positionElement(group,boxLayoutParams,viewportSize,padding)},makeBackground:function(rect,componentModel){var padding=formatUtil.normalizeCssArray(componentModel.get("padding"));var style=componentModel.getItemStyle(["color","opacity"]);style.fill=componentModel.get("backgroundColor");var rect=new graphic.Rect({shape:{x:rect.x-padding[3],y:rect.y-padding[0],width:rect.width+padding[1]+padding[3],height:rect.height+padding[0]+padding[2],r:componentModel.get("borderRadius")},style:style,silent:true,z2:-1});return rect}}}),(function(module,exports){module.exports=function(ecModel){var legendModels=ecModel.findComponents({mainType:"legend"});
if(legendModels&&legendModels.length){ecModel.filterSeries(function(series){for(var i=0;i<legendModels.length;i++){if(!legendModels[i].isSelected(series.name)){return false}}return true})}}}),(function(module,exports,__webpack_require__){var LegendModel=__webpack_require__(326);var layout=__webpack_require__(74);var ScrollableLegendModel=LegendModel.extend({type:"legend.scroll",setScrollDataIndex:function(scrollDataIndex){this.option.scrollDataIndex=scrollDataIndex},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(option,parentModel,ecModel,extraOpt){var inputPositionParams=layout.getLayoutParams(option);ScrollableLegendModel.superCall(this,"init",option,parentModel,ecModel,extraOpt);mergeAndNormalizeLayoutParams(this,option,inputPositionParams)},mergeOption:function(option,extraOpt){ScrollableLegendModel.superCall(this,"mergeOption",option,extraOpt);mergeAndNormalizeLayoutParams(this,this.option,option)},getOrient:function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}}});function mergeAndNormalizeLayoutParams(legendModel,target,raw){var orient=legendModel.getOrient();var ignoreSize=[1,1];ignoreSize[orient.index]=0;layout.mergeLayoutParam(target,raw,{type:"box",ignoreSize:ignoreSize})}module.exports=ScrollableLegendModel}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var graphic=__webpack_require__(20);var layoutUtil=__webpack_require__(74);var LegendView=__webpack_require__(328);var Group=graphic.Group;var WH=["width","height"];var XY=["x","y"];var ScrollableLegendView=LegendView.extend({type:"legend.scroll",newlineDisabled:true,init:function(){ScrollableLegendView.superCall(this,"init");this._currentIndex=0;this.group.add(this._containerGroup=new Group());this._containerGroup.add(this.getContentGroup());this.group.add(this._controllerGroup=new Group())},resetInner:function(){ScrollableLegendView.superCall(this,"resetInner");this._controllerGroup.removeAll();this._containerGroup.removeClipPath();this._containerGroup.__rectSize=null},renderInner:function(itemAlign,legendModel,ecModel,api){var me=this;ScrollableLegendView.superCall(this,"renderInner",itemAlign,legendModel,ecModel,api);var controllerGroup=this._controllerGroup;var pageIconSize=legendModel.get("pageIconSize",true);if(!zrUtil.isArray(pageIconSize)){pageIconSize=[pageIconSize,pageIconSize]}createPageButton("pagePrev",0);var pageTextStyleModel=legendModel.getModel("pageTextStyle");controllerGroup.add(new graphic.Text({name:"pageText",style:{textFill:pageTextStyleModel.getTextColor(),font:pageTextStyleModel.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:true}));createPageButton("pageNext",1);function createPageButton(name,iconIdx){var pageDataIndexName=name+"DataIndex";var icon=graphic.createIcon(legendModel.get("pageIcons",true)[legendModel.getOrient().name][iconIdx],{onclick:zrUtil.bind(me._pageGo,me,pageDataIndexName,legendModel,api)},{x:-pageIconSize[0]/2,y:-pageIconSize[1]/2,width:pageIconSize[0],height:pageIconSize[1]});icon.name=name;controllerGroup.add(icon)}},layoutInner:function(legendModel,itemAlign,maxSize){var contentGroup=this.getContentGroup();var containerGroup=this._containerGroup;var controllerGroup=this._controllerGroup;var orientIdx=legendModel.getOrient().index;var wh=WH[orientIdx];var hw=WH[1-orientIdx];var yx=XY[1-orientIdx];layoutUtil.box(legendModel.get("orient"),contentGroup,legendModel.get("itemGap"),!orientIdx?null:maxSize.width,orientIdx?null:maxSize.height);layoutUtil.box("horizontal",controllerGroup,legendModel.get("pageButtonItemGap",true));var contentRect=contentGroup.getBoundingRect();var controllerRect=controllerGroup.getBoundingRect();var showController=contentRect[wh]>maxSize[wh];var contentPos=[-contentRect.x,-contentRect.y];contentPos[orientIdx]=contentGroup.position[orientIdx];var containerPos=[0,0];var controllerPos=[-controllerRect.x,-controllerRect.y];var pageButtonGap=zrUtil.retrieve2(legendModel.get("pageButtonGap",true),legendModel.get("itemGap",true));if(showController){var pageButtonPosition=legendModel.get("pageButtonPosition",true);if(pageButtonPosition==="end"){controllerPos[orientIdx]+=maxSize[wh]-controllerRect[wh]}else{containerPos[orientIdx]+=controllerRect[wh]+pageButtonGap}}controllerPos[1-orientIdx]+=contentRect[hw]/2-controllerRect[hw]/2;contentGroup.attr("position",contentPos);containerGroup.attr("position",containerPos);controllerGroup.attr("position",controllerPos);var mainRect=this.group.getBoundingRect();var mainRect={x:0,y:0};mainRect[wh]=showController?maxSize[wh]:contentRect[wh];mainRect[hw]=Math.max(contentRect[hw],controllerRect[hw]);mainRect[yx]=Math.min(0,controllerRect[yx]+controllerPos[1-orientIdx]);
containerGroup.__rectSize=maxSize[wh];if(showController){var clipShape={x:0,y:0};clipShape[wh]=Math.max(maxSize[wh]-controllerRect[wh]-pageButtonGap,0);clipShape[hw]=mainRect[hw];containerGroup.setClipPath(new graphic.Rect({shape:clipShape}));containerGroup.__rectSize=clipShape[wh]}else{controllerGroup.eachChild(function(child){child.attr({invisible:true,silent:true})})}var pageInfo=this._getPageInfo(legendModel);pageInfo.pageIndex!=null&&graphic.updateProps(contentGroup,{position:pageInfo.contentPosition},legendModel);this._updatePageInfoView(legendModel,pageInfo);return mainRect},_pageGo:function(to,legendModel,api){var scrollDataIndex=this._getPageInfo(legendModel)[to];scrollDataIndex!=null&&api.dispatchAction({type:"legendScroll",scrollDataIndex:scrollDataIndex,legendId:legendModel.id})},_updatePageInfoView:function(legendModel,pageInfo){var controllerGroup=this._controllerGroup;zrUtil.each(["pagePrev","pageNext"],function(name){var canJump=pageInfo[name+"DataIndex"]!=null;var icon=controllerGroup.childOfName(name);if(icon){icon.setStyle("fill",canJump?legendModel.get("pageIconColor",true):legendModel.get("pageIconInactiveColor",true));icon.cursor=canJump?"pointer":"default"}});var pageText=controllerGroup.childOfName("pageText");var pageFormatter=legendModel.get("pageFormatter");var pageIndex=pageInfo.pageIndex;var current=pageIndex!=null?pageIndex+1:0;var total=pageInfo.pageCount;pageText&&pageFormatter&&pageText.setStyle("text",zrUtil.isString(pageFormatter)?pageFormatter.replace("{current}",current).replace("{total}",total):pageFormatter({current:current,total:total}))},_getPageInfo:function(legendModel){var currDataIndex=legendModel.get("scrollDataIndex",true);var contentGroup=this.getContentGroup();var contentRect=contentGroup.getBoundingRect();var containerRectSize=this._containerGroup.__rectSize;var orientIdx=legendModel.getOrient().index;var wh=WH[orientIdx];var hw=WH[1-orientIdx];var xy=XY[orientIdx];var contentPos=contentGroup.position.slice();var pageIndex;var pagePrevDataIndex;var pageNextDataIndex;var targetItemGroup;contentGroup.eachChild(function(child){if(child.__legendDataIndex===currDataIndex){targetItemGroup=child}});var pageCount=containerRectSize?Math.ceil(contentRect[wh]/containerRectSize):0;if(targetItemGroup){var itemRect=targetItemGroup.getBoundingRect();var itemLoc=targetItemGroup.position[orientIdx]+itemRect[xy];contentPos[orientIdx]=-itemLoc-contentRect[xy];pageIndex=Math.floor(pageCount*(itemLoc+itemRect[xy]+containerRectSize/2)/contentRect[wh]);pageIndex=(contentRect[wh]&&pageCount)?Math.max(0,Math.min(pageCount-1,pageIndex)):-1;var winRect={x:0,y:0};winRect[wh]=containerRectSize;winRect[hw]=contentRect[hw];winRect[xy]=-contentPos[orientIdx]-contentRect[xy];var startIdx;var children=contentGroup.children();contentGroup.eachChild(function(child,index){var itemRect=getItemRect(child);if(itemRect.intersect(winRect)){startIdx==null&&(startIdx=index);pageNextDataIndex=child.__legendDataIndex}if(index===children.length-1&&itemRect[xy]+itemRect[wh]<=winRect[xy]+winRect[wh]){pageNextDataIndex=null}});if(startIdx!=null){var startItem=children[startIdx];var startRect=getItemRect(startItem);winRect[xy]=startRect[xy]+startRect[wh]-winRect[wh];if(startIdx<=0&&startRect[xy]>=winRect[xy]){pagePrevDataIndex=null}else{while(startIdx>0&&getItemRect(children[startIdx-1]).intersect(winRect)){startIdx--}pagePrevDataIndex=children[startIdx].__legendDataIndex}}}return{contentPosition:contentPos,pageIndex:pageIndex,pageCount:pageCount,pagePrevDataIndex:pagePrevDataIndex,pageNextDataIndex:pageNextDataIndex};function getItemRect(el){var itemRect=el.getBoundingRect().clone();itemRect[xy]+=el.position[orientIdx];return itemRect}}});module.exports=ScrollableLegendView}),(function(module,exports,__webpack_require__){__webpack_require__(1).registerAction("legendScroll","legendscroll",function(payload,ecModel){var scrollDataIndex=payload.scrollDataIndex;scrollDataIndex!=null&&ecModel.eachComponent({mainType:"legend",subType:"scroll",query:payload},function(legendModel){legendModel.setScrollDataIndex(scrollDataIndex)})})}),(function(module,exports,__webpack_require__){__webpack_require__(301);__webpack_require__(335);__webpack_require__(336);__webpack_require__(1).registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){});__webpack_require__(1).registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){})}),(function(module,exports,__webpack_require__){__webpack_require__(1).extendComponentModel({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:8,show:true,showContent:true,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:false,displayMode:"single",confine:false,showDelay:0,hideDelay:100,transitionDuration:0.4,enterable:false,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}})
}),(function(module,exports,__webpack_require__){var TooltipContent=__webpack_require__(337);var zrUtil=__webpack_require__(4);var formatUtil=__webpack_require__(6);var numberUtil=__webpack_require__(7);var graphic=__webpack_require__(20);var findPointFromSeries=__webpack_require__(303);var layoutUtil=__webpack_require__(74);var env=__webpack_require__(2);var Model=__webpack_require__(14);var globalListener=__webpack_require__(306);var axisHelper=__webpack_require__(104);var axisPointerViewHelper=__webpack_require__(309);var bind=zrUtil.bind;var each=zrUtil.each;var parsePercent=numberUtil.parsePercent;var proxyRect=new graphic.Rect({shape:{x:-1,y:-1,width:2,height:2}});__webpack_require__(1).extendComponentView({type:"tooltip",init:function(ecModel,api){if(env.node){return}var tooltipContent=new TooltipContent(api.getDom(),api);this._tooltipContent=tooltipContent},render:function(tooltipModel,ecModel,api){if(env.node){return}this.group.removeAll();this._tooltipModel=tooltipModel;this._ecModel=ecModel;this._api=api;this._lastDataByCoordSys=null;this._alwaysShowContent=tooltipModel.get("alwaysShowContent");var tooltipContent=this._tooltipContent;tooltipContent.update();tooltipContent.setEnterable(tooltipModel.get("enterable"));this._initGlobalListener();this._keepShow()},_initGlobalListener:function(){var tooltipModel=this._tooltipModel;var triggerOn=tooltipModel.get("triggerOn");globalListener.register("itemTooltip",this._api,bind(function(currTrigger,e,dispatchAction){if(triggerOn!=="none"){if(triggerOn.indexOf(currTrigger)>=0){this._tryShow(e,dispatchAction)}else{if(currTrigger==="leave"){this._hide(dispatchAction)}}}},this))},_keepShow:function(){var tooltipModel=this._tooltipModel;var ecModel=this._ecModel;var api=this._api;if(this._lastX!=null&&this._lastY!=null&&tooltipModel.get("triggerOn")!=="none"){var self=this;clearTimeout(this._refreshUpdateTimeout);this._refreshUpdateTimeout=setTimeout(function(){self.manuallyShowTip(tooltipModel,ecModel,api,{x:self._lastX,y:self._lastY})})}},manuallyShowTip:function(tooltipModel,ecModel,api,payload){if(payload.from===this.uid||env.node){return}var dispatchAction=makeDispatchAction(payload,api);this._ticket="";var dataByCoordSys=payload.dataByCoordSys;if(payload.tooltip&&payload.x!=null&&payload.y!=null){var el=proxyRect;el.position=[payload.x,payload.y];el.update();el.tooltip=payload.tooltip;this._tryShow({offsetX:payload.x,offsetY:payload.y,target:el},dispatchAction)}else{if(dataByCoordSys){this._tryShow({offsetX:payload.x,offsetY:payload.y,position:payload.position,event:{},dataByCoordSys:payload.dataByCoordSys,tooltipOption:payload.tooltipOption},dispatchAction)}else{if(payload.seriesIndex!=null){if(this._manuallyAxisShowTip(tooltipModel,ecModel,api,payload)){return}var pointInfo=findPointFromSeries(payload,ecModel);var cx=pointInfo.point[0];var cy=pointInfo.point[1];if(cx!=null&&cy!=null){this._tryShow({offsetX:cx,offsetY:cy,position:payload.position,target:pointInfo.el,event:{}},dispatchAction)}}else{if(payload.x!=null&&payload.y!=null){api.dispatchAction({type:"updateAxisPointer",x:payload.x,y:payload.y});this._tryShow({offsetX:payload.x,offsetY:payload.y,position:payload.position,target:api.getZr().findHover(payload.x,payload.y).target,event:{}},dispatchAction)}}}}},manuallyHideTip:function(tooltipModel,ecModel,api,payload){var tooltipContent=this._tooltipContent;if(!this._alwaysShowContent){tooltipContent.hideLater(this._tooltipModel.get("hideDelay"))}this._lastX=this._lastY=null;if(payload.from!==this.uid){this._hide(makeDispatchAction(payload,api))}},_manuallyAxisShowTip:function(tooltipModel,ecModel,api,payload){var seriesIndex=payload.seriesIndex;var dataIndex=payload.dataIndex;var coordSysAxesInfo=ecModel.getComponent("axisPointer").coordSysAxesInfo;if(seriesIndex==null||dataIndex==null||coordSysAxesInfo==null){return}var seriesModel=ecModel.getSeriesByIndex(seriesIndex);if(!seriesModel){return}var data=seriesModel.getData();var tooltipModel=buildTooltipModel([data.getItemModel(dataIndex),seriesModel,(seriesModel.coordinateSystem||{}).model,tooltipModel]);if(tooltipModel.get("trigger")!=="axis"){return}api.dispatchAction({type:"updateAxisPointer",seriesIndex:seriesIndex,dataIndex:dataIndex,position:payload.position});return true},_tryShow:function(e,dispatchAction){var el=e.target;var tooltipModel=this._tooltipModel;if(!tooltipModel){return}this._lastX=e.offsetX;this._lastY=e.offsetY;var dataByCoordSys=e.dataByCoordSys;if(dataByCoordSys&&dataByCoordSys.length){this._showAxisTooltip(dataByCoordSys,e)}else{if(el&&el.dataIndex!=null){this._lastDataByCoordSys=null;this._showSeriesItemTooltip(e,el,dispatchAction)}else{if(el&&el.tooltip){this._lastDataByCoordSys=null;this._showComponentItemTooltip(e,el,dispatchAction)}else{this._lastDataByCoordSys=null;this._hide(dispatchAction)}}}},_showOrMove:function(tooltipModel,cb){var delay=tooltipModel.get("showDelay");cb=zrUtil.bind(cb,this);clearTimeout(this._showTimout);delay>0?(this._showTimout=setTimeout(cb,delay)):cb()
},_showAxisTooltip:function(dataByCoordSys,e){var ecModel=this._ecModel;var globalTooltipModel=this._tooltipModel;var point=[e.offsetX,e.offsetY];var singleDefaultHTML=[];var singleParamsList=[];var singleTooltipModel=buildTooltipModel([e.tooltipOption,globalTooltipModel]);each(dataByCoordSys,function(itemCoordSys){each(itemCoordSys.dataByAxis,function(item){var axisModel=ecModel.getComponent(item.axisDim+"Axis",item.axisIndex);var axisValue=item.value;var seriesDefaultHTML=[];if(!axisModel||axisValue==null){return}var valueLabel=axisPointerViewHelper.getValueLabel(axisValue,axisModel.axis,ecModel,item.seriesDataIndices,item.valueLabelOpt);zrUtil.each(item.seriesDataIndices,function(idxItem){var series=ecModel.getSeriesByIndex(idxItem.seriesIndex);var dataIndex=idxItem.dataIndexInside;var dataParams=series&&series.getDataParams(dataIndex);dataParams.axisDim=item.axisDim;dataParams.axisIndex=item.axisIndex;dataParams.axisType=item.axisType;dataParams.axisId=item.axisId;dataParams.axisValue=axisHelper.getAxisRawValue(axisModel.axis,axisValue);dataParams.axisValueLabel=valueLabel;if(dataParams){singleParamsList.push(dataParams);seriesDefaultHTML.push(series.formatTooltip(dataIndex,true))}});var firstLine=valueLabel;singleDefaultHTML.push((firstLine?formatUtil.encodeHTML(firstLine)+"<br />":"")+seriesDefaultHTML.join("<br />"))})},this);singleDefaultHTML.reverse();singleDefaultHTML=singleDefaultHTML.join("<br /><br />");var positionExpr=e.position;this._showOrMove(singleTooltipModel,function(){if(this._updateContentNotChangedOnAxis(dataByCoordSys)){this._updatePosition(singleTooltipModel,positionExpr,point[0],point[1],this._tooltipContent,singleParamsList)}else{this._showTooltipContent(singleTooltipModel,singleDefaultHTML,singleParamsList,Math.random(),point[0],point[1],positionExpr)}})},_showSeriesItemTooltip:function(e,el,dispatchAction){var ecModel=this._ecModel;var seriesIndex=el.seriesIndex;var seriesModel=ecModel.getSeriesByIndex(seriesIndex);var dataModel=el.dataModel||seriesModel;var dataIndex=el.dataIndex;var dataType=el.dataType;var data=dataModel.getData();var tooltipModel=buildTooltipModel([data.getItemModel(dataIndex),dataModel,seriesModel&&(seriesModel.coordinateSystem||{}).model,this._tooltipModel]);var tooltipTrigger=tooltipModel.get("trigger");if(tooltipTrigger!=null&&tooltipTrigger!=="item"){return}var params=dataModel.getDataParams(dataIndex,dataType);var defaultHtml=dataModel.formatTooltip(dataIndex,false,dataType);var asyncTicket="item_"+dataModel.name+"_"+dataIndex;this._showOrMove(tooltipModel,function(){this._showTooltipContent(tooltipModel,defaultHtml,params,asyncTicket,e.offsetX,e.offsetY,e.position,e.target)});dispatchAction({type:"showTip",dataIndexInside:dataIndex,dataIndex:data.getRawIndex(dataIndex),seriesIndex:seriesIndex,from:this.uid})},_showComponentItemTooltip:function(e,el,dispatchAction){var tooltipOpt=el.tooltip;if(typeof tooltipOpt==="string"){var content=tooltipOpt;tooltipOpt={content:content,formatter:content}}var subTooltipModel=new Model(tooltipOpt,this._tooltipModel,this._ecModel);var defaultHtml=subTooltipModel.get("content");var asyncTicket=Math.random();this._showOrMove(subTooltipModel,function(){this._showTooltipContent(subTooltipModel,defaultHtml,subTooltipModel.get("formatterParams")||{},asyncTicket,e.offsetX,e.offsetY,e.position,el)});dispatchAction({type:"showTip",from:this.uid})},_showTooltipContent:function(tooltipModel,defaultHtml,params,asyncTicket,x,y,positionExpr,el){this._ticket="";if(!tooltipModel.get("showContent")||!tooltipModel.get("show")){return}var tooltipContent=this._tooltipContent;var formatter=tooltipModel.get("formatter");positionExpr=positionExpr||tooltipModel.get("position");var html=defaultHtml;if(formatter&&typeof formatter==="string"){html=formatUtil.formatTpl(formatter,params,true)}else{if(typeof formatter==="function"){var callback=bind(function(cbTicket,html){if(cbTicket===this._ticket){tooltipContent.setContent(html);this._updatePosition(tooltipModel,positionExpr,x,y,tooltipContent,params,el)}},this);this._ticket=asyncTicket;html=formatter(params,asyncTicket,callback)}}tooltipContent.setContent(html);tooltipContent.show(tooltipModel);this._updatePosition(tooltipModel,positionExpr,x,y,tooltipContent,params,el)},_updatePosition:function(tooltipModel,positionExpr,x,y,content,params,el){var viewWidth=this._api.getWidth();var viewHeight=this._api.getHeight();positionExpr=positionExpr||tooltipModel.get("position");var contentSize=content.getSize();var align=tooltipModel.get("align");var vAlign=tooltipModel.get("verticalAlign");var rect=el&&el.getBoundingRect().clone();el&&rect.applyTransform(el.transform);if(typeof positionExpr==="function"){positionExpr=positionExpr([x,y],params,content.el,rect,{viewSize:[viewWidth,viewHeight],contentSize:contentSize.slice()})}if(zrUtil.isArray(positionExpr)){x=parsePercent(positionExpr[0],viewWidth);y=parsePercent(positionExpr[1],viewHeight)}else{if(zrUtil.isObject(positionExpr)){positionExpr.width=contentSize[0];
positionExpr.height=contentSize[1];var layoutRect=layoutUtil.getLayoutRect(positionExpr,{width:viewWidth,height:viewHeight});x=layoutRect.x;y=layoutRect.y;align=null;vAlign=null}else{if(typeof positionExpr==="string"&&el){var pos=calcTooltipPosition(positionExpr,rect,contentSize);x=pos[0];y=pos[1]}else{var pos=refixTooltipPosition(x,y,content.el,viewWidth,viewHeight,align?null:20,vAlign?null:20);x=pos[0];y=pos[1]}}}align&&(x-=isCenterAlign(align)?contentSize[0]/2:align==="right"?contentSize[0]:0);vAlign&&(y-=isCenterAlign(vAlign)?contentSize[1]/2:vAlign==="bottom"?contentSize[1]:0);if(tooltipModel.get("confine")){var pos=confineTooltipPosition(x,y,content.el,viewWidth,viewHeight);x=pos[0];y=pos[1]}content.moveTo(x,y)},_updateContentNotChangedOnAxis:function(dataByCoordSys){var lastCoordSys=this._lastDataByCoordSys;var contentNotChanged=!!lastCoordSys&&lastCoordSys.length===dataByCoordSys.length;contentNotChanged&&each(lastCoordSys,function(lastItemCoordSys,indexCoordSys){var lastDataByAxis=lastItemCoordSys.dataByAxis||{};var thisItemCoordSys=dataByCoordSys[indexCoordSys]||{};var thisDataByAxis=thisItemCoordSys.dataByAxis||[];contentNotChanged&=lastDataByAxis.length===thisDataByAxis.length;contentNotChanged&&each(lastDataByAxis,function(lastItem,indexAxis){var thisItem=thisDataByAxis[indexAxis]||{};var lastIndices=lastItem.seriesDataIndices||[];var newIndices=thisItem.seriesDataIndices||[];contentNotChanged&=lastItem.value===thisItem.value&&lastItem.axisType===thisItem.axisType&&lastItem.axisId===thisItem.axisId&&lastIndices.length===newIndices.length;contentNotChanged&&each(lastIndices,function(lastIdxItem,j){var newIdxItem=newIndices[j];contentNotChanged&=lastIdxItem.seriesIndex===newIdxItem.seriesIndex&&lastIdxItem.dataIndex===newIdxItem.dataIndex})})});this._lastDataByCoordSys=dataByCoordSys;return !!contentNotChanged},_hide:function(dispatchAction){this._lastDataByCoordSys=null;dispatchAction({type:"hideTip",from:this.uid})},dispose:function(ecModel,api){if(env.node){return}this._tooltipContent.hide();globalListener.unregister("itemTooltip",api)}});function buildTooltipModel(modelCascade){var resultModel=modelCascade.pop();while(modelCascade.length){var tooltipOpt=modelCascade.pop();if(tooltipOpt){if(tooltipOpt instanceof Model){tooltipOpt=tooltipOpt.get("tooltip",true)}if(typeof tooltipOpt==="string"){tooltipOpt={formatter:tooltipOpt}}resultModel=new Model(tooltipOpt,resultModel,resultModel.ecModel)}}return resultModel}function makeDispatchAction(payload,api){return payload.dispatchAction||zrUtil.bind(api.dispatchAction,api)}function refixTooltipPosition(x,y,el,viewWidth,viewHeight,gapH,gapV){var size=getOuterSize(el);var width=size.width;var height=size.height;if(gapH!=null){if(x+width+gapH>viewWidth){x-=width+gapH}else{x+=gapH}}if(gapV!=null){if(y+height+gapV>viewHeight){y-=height+gapV}else{y+=gapV}}return[x,y]}function confineTooltipPosition(x,y,el,viewWidth,viewHeight){var size=getOuterSize(el);var width=size.width;var height=size.height;x=Math.min(x+width,viewWidth)-width;y=Math.min(y+height,viewHeight)-height;x=Math.max(x,0);y=Math.max(y,0);return[x,y]}function getOuterSize(el){var width=el.clientWidth;var height=el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var stl=document.defaultView.getComputedStyle(el);if(stl){width+=parseInt(stl.paddingLeft,10)+parseInt(stl.paddingRight,10)+parseInt(stl.borderLeftWidth,10)+parseInt(stl.borderRightWidth,10);height+=parseInt(stl.paddingTop,10)+parseInt(stl.paddingBottom,10)+parseInt(stl.borderTopWidth,10)+parseInt(stl.borderBottomWidth,10)}}return{width:width,height:height}}function calcTooltipPosition(position,rect,contentSize){var domWidth=contentSize[0];var domHeight=contentSize[1];var gap=5;var x=0;var y=0;var rectWidth=rect.width;var rectHeight=rect.height;switch(position){case"inside":x=rect.x+rectWidth/2-domWidth/2;y=rect.y+rectHeight/2-domHeight/2;break;case"top":x=rect.x+rectWidth/2-domWidth/2;y=rect.y-domHeight-gap;break;case"bottom":x=rect.x+rectWidth/2-domWidth/2;y=rect.y+rectHeight+gap;break;case"left":x=rect.x-domWidth-gap;y=rect.y+rectHeight/2-domHeight/2;break;case"right":x=rect.x+rectWidth+gap;y=rect.y+rectHeight/2-domHeight/2}return[x,y]}function isCenterAlign(align){return align==="center"||align==="middle"}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var zrColor=__webpack_require__(33);var eventUtil=__webpack_require__(93);var formatUtil=__webpack_require__(6);var each=zrUtil.each;var toCamelCase=formatUtil.toCamelCase;var env=__webpack_require__(2);var vendors=["","-webkit-","-moz-","-o-"];var gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;";function assembleTransition(duration){var transitionCurve="cubic-bezier(0.23, 1, 0.32, 1)";var transitionText="left "+duration+"s "+transitionCurve+","+"top "+duration+"s "+transitionCurve;return zrUtil.map(vendors,function(vendorPrefix){return vendorPrefix+"transition:"+transitionText
}).join(";")}function assembleFont(textStyleModel){var cssText=[];var fontSize=textStyleModel.get("fontSize");var color=textStyleModel.getTextColor();color&&cssText.push("color:"+color);cssText.push("font:"+textStyleModel.getFont());fontSize&&cssText.push("line-height:"+Math.round(fontSize*3/2)+"px");each(["decoration","align"],function(name){var val=textStyleModel.get(name);val&&cssText.push("text-"+name+":"+val)});return cssText.join(";")}function assembleCssText(tooltipModel){var cssText=[];var transitionDuration=tooltipModel.get("transitionDuration");var backgroundColor=tooltipModel.get("backgroundColor");var textStyleModel=tooltipModel.getModel("textStyle");var padding=tooltipModel.get("padding");transitionDuration&&cssText.push(assembleTransition(transitionDuration));if(backgroundColor){if(env.canvasSupported){cssText.push("background-Color:"+backgroundColor)}else{cssText.push("background-Color:#"+zrColor.toHex(backgroundColor));cssText.push("filter:alpha(opacity=70)")}}each(["width","color","radius"],function(name){var borderName="border-"+name;var camelCase=toCamelCase(borderName);var val=tooltipModel.get(camelCase);val!=null&&cssText.push(borderName+":"+val+(name==="color"?"":"px"))});cssText.push(assembleFont(textStyleModel));if(padding!=null){cssText.push("padding:"+formatUtil.normalizeCssArray(padding).join("px ")+"px")}return cssText.join(";")+";"}function TooltipContent(container,api){var el=document.createElement("div");var zr=this._zr=api.getZr();this.el=el;this._x=api.getWidth()/2;this._y=api.getHeight()/2;container.appendChild(el);this._container=container;this._show=false;this._hideTimeout;var self=this;el.onmouseenter=function(){if(self._enterable){clearTimeout(self._hideTimeout);self._show=true}self._inContent=true};el.onmousemove=function(e){e=e||window.event;if(!self._enterable){var handler=zr.handler;eventUtil.normalizeEvent(container,e,true);handler.dispatch("mousemove",e)}};el.onmouseleave=function(){if(self._enterable){if(self._show){self.hideLater(self._hideDelay)}}self._inContent=false}}TooltipContent.prototype={constructor:TooltipContent,_enterable:true,update:function(){var container=this._container;var stl=container.currentStyle||document.defaultView.getComputedStyle(container);var domStyle=container.style;if(domStyle.position!=="absolute"&&stl.position!=="absolute"){domStyle.position="relative"}},show:function(tooltipModel){clearTimeout(this._hideTimeout);var el=this.el;el.style.cssText=gCssText+assembleCssText(tooltipModel)+";left:"+this._x+"px;top:"+this._y+"px;"+(tooltipModel.get("extraCssText")||"");el.style.display=el.innerHTML?"block":"none";this._show=true},setContent:function(content){this.el.innerHTML=content==null?"":content},setEnterable:function(enterable){this._enterable=enterable},getSize:function(){var el=this.el;return[el.clientWidth,el.clientHeight]},moveTo:function(x,y){var zr=this._zr;var viewportRootOffset;if(zr&&zr.painter&&(viewportRootOffset=zr.painter.getViewportRootOffset())){x+=viewportRootOffset.offsetLeft;y+=viewportRootOffset.offsetTop}var style=this.el.style;style.left=x+"px";style.top=y+"px";this._x=x;this._y=y},hide:function(){this.el.style.display="none";this._show=false},hideLater:function(time){if(this._show&&!(this._inContent&&this._enterable)){if(time){this._hideDelay=time;this._show=false;this._hideTimeout=setTimeout(zrUtil.bind(this.hide,this),time)}else{this.hide()}}},isShow:function(){return this._show}};module.exports=TooltipContent}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);__webpack_require__(339);__webpack_require__(345);__webpack_require__(347);__webpack_require__(301);__webpack_require__(349);__webpack_require__(1).registerLayout(zrUtil.curry(__webpack_require__(350),"bar"));__webpack_require__(1).extendComponentView({type:"polar"})}),(function(module,exports,__webpack_require__){var Polar=__webpack_require__(340);var numberUtil=__webpack_require__(7);var zrUtil=__webpack_require__(4);var axisHelper=__webpack_require__(104);var niceScaleExtent=axisHelper.niceScaleExtent;__webpack_require__(343);function resizePolar(polarModel,api){var center=polarModel.get("center");var radius=polarModel.get("radius");var width=api.getWidth();var height=api.getHeight();var parsePercent=numberUtil.parsePercent;this.cx=parsePercent(center[0],width);this.cy=parsePercent(center[1],height);var radiusAxis=this.getRadiusAxis();var size=Math.min(width,height)/2;radiusAxis.setExtent(0,parsePercent(radius,size))}function updatePolarScale(ecModel,api){var polar=this;var angleAxis=polar.getAngleAxis();var radiusAxis=polar.getRadiusAxis();angleAxis.scale.setExtent(Infinity,-Infinity);radiusAxis.scale.setExtent(Infinity,-Infinity);ecModel.eachSeries(function(seriesModel){if(seriesModel.coordinateSystem===polar){var data=seriesModel.getData();radiusAxis.scale.unionExtentFromData(data,"radius");angleAxis.scale.unionExtentFromData(data,"angle")}});niceScaleExtent(angleAxis.scale,angleAxis.model);niceScaleExtent(radiusAxis.scale,radiusAxis.model);
if(angleAxis.type==="category"&&!angleAxis.onBand){var extent=angleAxis.getExtent();var diff=360/angleAxis.scale.count();angleAxis.inverse?(extent[1]+=diff):(extent[1]-=diff);angleAxis.setExtent(extent[0],extent[1])}}function setAxis(axis,axisModel){axis.type=axisModel.get("type");axis.scale=axisHelper.createScaleByModel(axisModel);axis.onBand=axisModel.get("boundaryGap")&&axis.type==="category";if(axisModel.mainType==="angleAxis"){var startAngle=axisModel.get("startAngle");axis.inverse=axisModel.get("inverse")^axisModel.get("clockwise");axis.setExtent(startAngle,startAngle+(axis.inverse?-360:360))}axisModel.axis=axis;axis.model=axisModel}var polarCreator={dimensions:Polar.prototype.dimensions,create:function(ecModel,api){var polarList=[];ecModel.eachComponent("polar",function(polarModel,idx){var polar=new Polar(idx);polar.resize=resizePolar;polar.update=updatePolarScale;var radiusAxis=polar.getRadiusAxis();var angleAxis=polar.getAngleAxis();var radiusAxisModel=polarModel.findAxisModel("radiusAxis");var angleAxisModel=polarModel.findAxisModel("angleAxis");setAxis(radiusAxis,radiusAxisModel);setAxis(angleAxis,angleAxisModel);polar.resize(polarModel,api);polarList.push(polar);polarModel.coordinateSystem=polar;polar.model=polarModel});ecModel.eachSeries(function(seriesModel){if(seriesModel.get("coordinateSystem")==="polar"){var polarModel=ecModel.queryComponents({mainType:"polar",index:seriesModel.get("polarIndex"),id:seriesModel.get("polarId")})[0];if(true){if(!polarModel){throw new Error('Polar "'+zrUtil.retrieve(seriesModel.get("polarIndex"),seriesModel.get("polarId"),0)+'" not found')}}seriesModel.coordinateSystem=polarModel.coordinateSystem}});return polarList}};__webpack_require__(79).register("polar",polarCreator)}),(function(module,exports,__webpack_require__){var RadiusAxis=__webpack_require__(341);var AngleAxis=__webpack_require__(342);var Polar=function(name){this.name=name||"";this.cx=0;this.cy=0;this._radiusAxis=new RadiusAxis();this._angleAxis=new AngleAxis();this._radiusAxis.polar=this._angleAxis.polar=this};Polar.prototype={type:"polar",axisPointerEnabled:true,constructor:Polar,dimensions:["radius","angle"],model:null,containPoint:function(point){var coord=this.pointToCoord(point);return this._radiusAxis.contain(coord[0])&&this._angleAxis.contain(coord[1])},containData:function(data){return this._radiusAxis.containData(data[0])&&this._angleAxis.containData(data[1])},getAxis:function(dim){return this["_"+dim+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(scaleType){var axes=[];var angleAxis=this._angleAxis;var radiusAxis=this._radiusAxis;angleAxis.scale.type===scaleType&&axes.push(angleAxis);radiusAxis.scale.type===scaleType&&axes.push(radiusAxis);return axes},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(axis){var angleAxis=this._angleAxis;return axis===angleAxis?this._radiusAxis:angleAxis},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(dim){var baseAxis=(dim!=null&&dim!=="auto")?this.getAxis(dim):this.getBaseAxis();return{baseAxes:[baseAxis],otherAxes:[this.getOtherAxis(baseAxis)]}},dataToPoint:function(data,clamp){return this.coordToPoint([this._radiusAxis.dataToRadius(data[0],clamp),this._angleAxis.dataToAngle(data[1],clamp)])},pointToData:function(point,clamp){var coord=this.pointToCoord(point);return[this._radiusAxis.radiusToData(coord[0],clamp),this._angleAxis.angleToData(coord[1],clamp)]},pointToCoord:function(point){var dx=point[0]-this.cx;var dy=point[1]-this.cy;var angleAxis=this.getAngleAxis();var extent=angleAxis.getExtent();var minAngle=Math.min(extent[0],extent[1]);var maxAngle=Math.max(extent[0],extent[1]);angleAxis.inverse?(minAngle=maxAngle-360):(maxAngle=minAngle+360);var radius=Math.sqrt(dx*dx+dy*dy);dx/=radius;dy/=radius;var radian=Math.atan2(-dy,dx)/Math.PI*180;var dir=radian<minAngle?1:-1;while(radian<minAngle||radian>maxAngle){radian+=dir*360}return[radius,radian]},coordToPoint:function(coord){var radius=coord[0];var radian=coord[1]/180*Math.PI;var x=Math.cos(radian)*radius+this.cx;var y=-Math.sin(radian)*radius+this.cy;return[x,y]}};module.exports=Polar}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var Axis=__webpack_require__(103);function RadiusAxis(scale,radiusExtent){Axis.call(this,"radius",scale,radiusExtent);this.type="category"}RadiusAxis.prototype={constructor:RadiusAxis,pointToData:function(point,clamp){return this.polar.pointToData(point,clamp)[this.dim==="radius"?0:1]},dataToRadius:Axis.prototype.dataToCoord,radiusToData:Axis.prototype.coordToData};zrUtil.inherits(RadiusAxis,Axis);module.exports=RadiusAxis}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var Axis=__webpack_require__(103);function AngleAxis(scale,angleExtent){angleExtent=angleExtent||[0,360];Axis.call(this,"angle",scale,angleExtent);
this.type="category"}AngleAxis.prototype={constructor:AngleAxis,pointToData:function(point,clamp){return this.polar.pointToData(point,clamp)[this.dim==="radius"?0:1]},dataToAngle:Axis.prototype.dataToCoord,angleToData:Axis.prototype.coordToData};zrUtil.inherits(AngleAxis,Axis);module.exports=AngleAxis}),(function(module,exports,__webpack_require__){__webpack_require__(344);__webpack_require__(1).extendComponentModel({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(axisType){var foundAxisModel;var ecModel=this.ecModel;ecModel.eachComponent(axisType,function(axisModel){if(axisModel.getCoordSysModel()===this){foundAxisModel=axisModel}},this);return foundAxisModel},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}})}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var ComponentModel=__webpack_require__(72);var axisModelCreator=__webpack_require__(134);var PolarAxisModel=ComponentModel.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});zrUtil.merge(PolarAxisModel.prototype,__webpack_require__(115));var polarAxisDefaultExtendedOption={angle:{startAngle:90,clockwise:true,splitNumber:12,axisLabel:{rotate:false}},radius:{splitNumber:5}};function getAxisType(axisDim,option){return option.type||(option.data?"category":"value")}axisModelCreator("angle",PolarAxisModel,getAxisType,polarAxisDefaultExtendedOption.angle);axisModelCreator("radius",PolarAxisModel,getAxisType,polarAxisDefaultExtendedOption.radius)}),(function(module,exports,__webpack_require__){__webpack_require__(339);__webpack_require__(346)}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var graphic=__webpack_require__(20);var Model=__webpack_require__(14);var elementList=["axisLine","axisLabel","axisTick","splitLine","splitArea"];function getAxisLineShape(polar,r0,r,angle){var start=polar.coordToPoint([r0,angle]);var end=polar.coordToPoint([r,angle]);return{x1:start[0],y1:start[1],x2:end[0],y2:end[1]}}__webpack_require__(139).extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(angleAxisModel,ecModel){this.group.removeAll();if(!angleAxisModel.get("show")){return}var angleAxis=angleAxisModel.axis;var polar=angleAxis.polar;var radiusExtent=polar.getRadiusAxis().getExtent();var ticksAngles=angleAxis.getTicksCoords();if(angleAxis.type!=="category"){ticksAngles.pop()}zrUtil.each(elementList,function(name){if(angleAxisModel.get(name+".show")&&(!angleAxis.scale.isBlank()||name==="axisLine")){this["_"+name](angleAxisModel,polar,ticksAngles,radiusExtent)}},this)},_axisLine:function(angleAxisModel,polar,ticksAngles,radiusExtent){var lineStyleModel=angleAxisModel.getModel("axisLine.lineStyle");var circle=new graphic.Circle({shape:{cx:polar.cx,cy:polar.cy,r:radiusExtent[1]},style:lineStyleModel.getLineStyle(),z2:1,silent:true});circle.style.fill=null;this.group.add(circle)},_axisTick:function(angleAxisModel,polar,ticksAngles,radiusExtent){var tickModel=angleAxisModel.getModel("axisTick");var tickLen=(tickModel.get("inside")?-1:1)*tickModel.get("length");var lines=zrUtil.map(ticksAngles,function(tickAngle){return new graphic.Line({shape:getAxisLineShape(polar,radiusExtent[1],radiusExtent[1]+tickLen,tickAngle)})});this.group.add(graphic.mergePath(lines,{style:zrUtil.defaults(tickModel.getModel("lineStyle").getLineStyle(),{stroke:angleAxisModel.get("axisLine.lineStyle.color")})}))},_axisLabel:function(angleAxisModel,polar,ticksAngles,radiusExtent){var axis=angleAxisModel.axis;var categoryData=angleAxisModel.get("data");var labelModel=angleAxisModel.getModel("axisLabel");var labels=angleAxisModel.getFormattedLabels();var labelMargin=labelModel.get("margin");var labelsAngles=axis.getLabelsCoords();for(var i=0;i<ticksAngles.length;i++){var r=radiusExtent[1];var p=polar.coordToPoint([r+labelMargin,labelsAngles[i]]);var cx=polar.cx;var cy=polar.cy;var labelTextAlign=Math.abs(p[0]-cx)/r<0.3?"center":(p[0]>cx?"left":"right");var labelTextVerticalAlign=Math.abs(p[1]-cy)/r<0.3?"middle":(p[1]>cy?"top":"bottom");if(categoryData&&categoryData[i]&&categoryData[i].textStyle){labelModel=new Model(categoryData[i].textStyle,labelModel,labelModel.ecModel)}var textEl=new graphic.Text({silent:true});this.group.add(textEl);graphic.setTextStyle(textEl.style,labelModel,{x:p[0],y:p[1],textFill:labelModel.getTextColor()||angleAxisModel.get("axisLine.lineStyle.color"),text:labels[i],textAlign:labelTextAlign,textVerticalAlign:labelTextVerticalAlign})}},_splitLine:function(angleAxisModel,polar,ticksAngles,radiusExtent){var splitLineModel=angleAxisModel.getModel("splitLine");var lineStyleModel=splitLineModel.getModel("lineStyle");var lineColors=lineStyleModel.get("color");var lineCount=0;lineColors=lineColors instanceof Array?lineColors:[lineColors];var splitLines=[];for(var i=0;i<ticksAngles.length;i++){var colorIndex=(lineCount++)%lineColors.length;
splitLines[colorIndex]=splitLines[colorIndex]||[];splitLines[colorIndex].push(new graphic.Line({shape:getAxisLineShape(polar,radiusExtent[0],radiusExtent[1],ticksAngles[i])}))}for(var i=0;i<splitLines.length;i++){this.group.add(graphic.mergePath(splitLines[i],{style:zrUtil.defaults({stroke:lineColors[i%lineColors.length]},lineStyleModel.getLineStyle()),silent:true,z:angleAxisModel.get("z")}))}},_splitArea:function(angleAxisModel,polar,ticksAngles,radiusExtent){var splitAreaModel=angleAxisModel.getModel("splitArea");var areaStyleModel=splitAreaModel.getModel("areaStyle");var areaColors=areaStyleModel.get("color");var lineCount=0;areaColors=areaColors instanceof Array?areaColors:[areaColors];var splitAreas=[];var RADIAN=Math.PI/180;var prevAngle=-ticksAngles[0]*RADIAN;var r0=Math.min(radiusExtent[0],radiusExtent[1]);var r1=Math.max(radiusExtent[0],radiusExtent[1]);var clockwise=angleAxisModel.get("clockwise");for(var i=1;i<ticksAngles.length;i++){var colorIndex=(lineCount++)%areaColors.length;splitAreas[colorIndex]=splitAreas[colorIndex]||[];splitAreas[colorIndex].push(new graphic.Sector({shape:{cx:polar.cx,cy:polar.cy,r0:r0,r:r1,startAngle:prevAngle,endAngle:-ticksAngles[i]*RADIAN,clockwise:clockwise},silent:true}));prevAngle=-ticksAngles[i]*RADIAN}for(var i=0;i<splitAreas.length;i++){this.group.add(graphic.mergePath(splitAreas[i],{style:zrUtil.defaults({fill:areaColors[i%areaColors.length]},areaStyleModel.getAreaStyle()),silent:true}))}}})}),(function(module,exports,__webpack_require__){__webpack_require__(339);__webpack_require__(348)}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var graphic=__webpack_require__(20);var AxisBuilder=__webpack_require__(138);var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"];var selfBuilderAttrs=["splitLine","splitArea"];__webpack_require__(139).extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(radiusAxisModel,ecModel){this.group.removeAll();if(!radiusAxisModel.get("show")){return}var radiusAxis=radiusAxisModel.axis;var polar=radiusAxis.polar;var angleAxis=polar.getAngleAxis();var ticksCoords=radiusAxis.getTicksCoords();var axisAngle=angleAxis.getExtent()[0];var radiusExtent=radiusAxis.getExtent();var layout=layoutAxis(polar,radiusAxisModel,axisAngle);var axisBuilder=new AxisBuilder(radiusAxisModel,layout);zrUtil.each(axisBuilderAttrs,axisBuilder.add,axisBuilder);this.group.add(axisBuilder.getGroup());zrUtil.each(selfBuilderAttrs,function(name){if(radiusAxisModel.get(name+".show")&&!radiusAxis.scale.isBlank()){this["_"+name](radiusAxisModel,polar,axisAngle,radiusExtent,ticksCoords)}},this)},_splitLine:function(radiusAxisModel,polar,axisAngle,radiusExtent,ticksCoords){var splitLineModel=radiusAxisModel.getModel("splitLine");var lineStyleModel=splitLineModel.getModel("lineStyle");var lineColors=lineStyleModel.get("color");var lineCount=0;lineColors=lineColors instanceof Array?lineColors:[lineColors];var splitLines=[];for(var i=0;i<ticksCoords.length;i++){var colorIndex=(lineCount++)%lineColors.length;splitLines[colorIndex]=splitLines[colorIndex]||[];splitLines[colorIndex].push(new graphic.Circle({shape:{cx:polar.cx,cy:polar.cy,r:ticksCoords[i]},silent:true}))}for(var i=0;i<splitLines.length;i++){this.group.add(graphic.mergePath(splitLines[i],{style:zrUtil.defaults({stroke:lineColors[i%lineColors.length],fill:null},lineStyleModel.getLineStyle()),silent:true}))}},_splitArea:function(radiusAxisModel,polar,axisAngle,radiusExtent,ticksCoords){var splitAreaModel=radiusAxisModel.getModel("splitArea");var areaStyleModel=splitAreaModel.getModel("areaStyle");var areaColors=areaStyleModel.get("color");var lineCount=0;areaColors=areaColors instanceof Array?areaColors:[areaColors];var splitAreas=[];var prevRadius=ticksCoords[0];for(var i=1;i<ticksCoords.length;i++){var colorIndex=(lineCount++)%areaColors.length;splitAreas[colorIndex]=splitAreas[colorIndex]||[];splitAreas[colorIndex].push(new graphic.Sector({shape:{cx:polar.cx,cy:polar.cy,r0:prevRadius,r:ticksCoords[i],startAngle:0,endAngle:Math.PI*2},silent:true}));prevRadius=ticksCoords[i]}for(var i=0;i<splitAreas.length;i++){this.group.add(graphic.mergePath(splitAreas[i],{style:zrUtil.defaults({fill:areaColors[i%areaColors.length]},areaStyleModel.getAreaStyle()),silent:true}))}}});function layoutAxis(polar,radiusAxisModel,axisAngle){return{position:[polar.cx,polar.cy],rotation:axisAngle/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:radiusAxisModel.getModel("axisLabel").get("rotate"),z2:1}}}),(function(module,exports,__webpack_require__){var formatUtil=__webpack_require__(6);var BaseAxisPointer=__webpack_require__(308);var graphic=__webpack_require__(20);var viewHelper=__webpack_require__(309);var matrix=__webpack_require__(11);var AxisBuilder=__webpack_require__(138);var AxisView=__webpack_require__(139);var PolarAxisPointer=BaseAxisPointer.extend({makeElOption:function(elOption,value,axisModel,axisPointerModel,api){var axis=axisModel.axis;
if(axis.dim==="angle"){this.animationThreshold=Math.PI/18}var polar=axis.polar;var otherAxis=polar.getOtherAxis(axis);var otherExtent=otherAxis.getExtent();var coordValue;coordValue=axis["dataTo"+formatUtil.capitalFirst(axis.dim)](value);var axisPointerType=axisPointerModel.get("type");if(axisPointerType&&axisPointerType!=="none"){var elStyle=viewHelper.buildElStyle(axisPointerModel);var pointerOption=pointerShapeBuilder[axisPointerType](axis,polar,coordValue,otherExtent,elStyle);pointerOption.style=elStyle;elOption.graphicKey=pointerOption.type;elOption.pointer=pointerOption}var labelMargin=axisPointerModel.get("label.margin");var labelPos=getLabelPosition(value,axisModel,axisPointerModel,polar,labelMargin);viewHelper.buildLabelElOption(elOption,axisModel,axisPointerModel,api,labelPos)}});function getLabelPosition(value,axisModel,axisPointerModel,polar,labelMargin){var axis=axisModel.axis;var coord=axis.dataToCoord(value);var axisAngle=polar.getAngleAxis().getExtent()[0];axisAngle=axisAngle/180*Math.PI;var radiusExtent=polar.getRadiusAxis().getExtent();var position;var align;var verticalAlign;if(axis.dim==="radius"){var transform=matrix.create();matrix.rotate(transform,transform,axisAngle);matrix.translate(transform,transform,[polar.cx,polar.cy]);position=graphic.applyTransform([coord,-labelMargin],transform);var labelRotation=axisModel.getModel("axisLabel").get("rotate")||0;var labelLayout=AxisBuilder.innerTextLayout(axisAngle,labelRotation*Math.PI/180,-1);align=labelLayout.textAlign;verticalAlign=labelLayout.textVerticalAlign}else{var r=radiusExtent[1];position=polar.coordToPoint([r+labelMargin,coord]);var cx=polar.cx;var cy=polar.cy;align=Math.abs(position[0]-cx)/r<0.3?"center":(position[0]>cx?"left":"right");verticalAlign=Math.abs(position[1]-cy)/r<0.3?"middle":(position[1]>cy?"top":"bottom")}return{position:position,align:align,verticalAlign:verticalAlign}}var pointerShapeBuilder={line:function(axis,polar,coordValue,otherExtent,elStyle){return axis.dim==="angle"?{type:"Line",shape:viewHelper.makeLineShape(polar.coordToPoint([otherExtent[0],coordValue]),polar.coordToPoint([otherExtent[1],coordValue]))}:{type:"Circle",shape:{cx:polar.cx,cy:polar.cy,r:coordValue}}},shadow:function(axis,polar,coordValue,otherExtent,elStyle){var bandWidth=axis.getBandWidth();var radian=Math.PI/180;return axis.dim==="angle"?{type:"Sector",shape:viewHelper.makeSectorShape(polar.cx,polar.cy,otherExtent[0],otherExtent[1],(-coordValue-bandWidth/2)*radian,(-coordValue+bandWidth/2)*radian)}:{type:"Sector",shape:viewHelper.makeSectorShape(polar.cx,polar.cy,coordValue-bandWidth/2,coordValue+bandWidth/2,0,Math.PI*2)}}};AxisView.registerAxisPointerClass("PolarAxisPointer",PolarAxisPointer);module.exports=PolarAxisPointer}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var parsePercent=__webpack_require__(7).parsePercent;function getSeriesStackId(seriesModel){return seriesModel.get("stack")||"__ec_stack_"+seriesModel.seriesIndex}function getAxisKey(axis){return axis.dim}function barLayoutPolar(seriesType,ecModel,api){var width=api.getWidth();var height=api.getHeight();var lastStackCoords={};var lastStackCoordsOrigin={};var barWidthAndOffset=calRadialBar(zrUtil.filter(ecModel.getSeriesByType(seriesType),function(seriesModel){return !ecModel.isSeriesFiltered(seriesModel)&&seriesModel.coordinateSystem&&seriesModel.coordinateSystem.type==="polar"}));ecModel.eachSeriesByType(seriesType,function(seriesModel){if(seriesModel.coordinateSystem.type!=="polar"){return}var data=seriesModel.getData();var polar=seriesModel.coordinateSystem;var angleAxis=polar.getAngleAxis();var baseAxis=polar.getBaseAxis();var stackId=getSeriesStackId(seriesModel);var columnLayoutInfo=barWidthAndOffset[getAxisKey(baseAxis)][stackId];var columnOffset=columnLayoutInfo.offset;var columnWidth=columnLayoutInfo.width;var valueAxis=polar.getOtherAxis(baseAxis);var center=seriesModel.get("center")||["50%","50%"];var cx=parsePercent(center[0],width);var cy=parsePercent(center[1],height);var barMinHeight=seriesModel.get("barMinHeight")||0;var barMinAngle=seriesModel.get("barMinAngle")||0;var valueAxisStart=valueAxis.getExtent()[0];var valueMax=valueAxis.model.get("max");var valueMin=valueAxis.model.get("min");var coordDims=[seriesModel.coordDimToDataDim("radius")[0],seriesModel.coordDimToDataDim("angle")[0]];var coords=data.mapArray(coordDims,function(radius,angle){return polar.dataToPoint([radius,angle])},true);lastStackCoords[stackId]=lastStackCoords[stackId]||[];lastStackCoordsOrigin[stackId]=lastStackCoordsOrigin[stackId]||[];data.each(seriesModel.coordDimToDataDim(valueAxis.dim)[0],function(value,idx){if(isNaN(value)){return}if(!lastStackCoords[stackId][idx]){lastStackCoords[stackId][idx]={p:valueAxisStart,n:valueAxisStart};lastStackCoordsOrigin[stackId][idx]={p:valueAxisStart,n:valueAxisStart}}var sign=value>=0?"p":"n";var coord=polar.pointToCoord(coords[idx]);var lastCoordOrigin=lastStackCoordsOrigin[stackId][idx][sign];var r0;var r;var startAngle;
var endAngle;if(valueAxis.dim==="radius"){r0=lastCoordOrigin;r=coord[0];startAngle=(-coord[1]+columnOffset)*Math.PI/180;endAngle=startAngle+columnWidth*Math.PI/180;if(Math.abs(r)<barMinHeight){r=r0+(r<0?-1:1)*barMinHeight}lastStackCoordsOrigin[stackId][idx][sign]=r}else{r0=coord[0]+columnOffset;r=r0+columnWidth;if(valueMax!=null){value=Math.min(value,valueMax)}if(valueMin!=null){value=Math.max(value,valueMin)}var angle=angleAxis.dataToAngle(value);if(Math.abs(angle-lastCoordOrigin)<barMinAngle){angle=lastCoordOrigin-(value<0?-1:1)*barMinAngle}startAngle=-lastCoordOrigin*Math.PI/180;endAngle=-angle*Math.PI/180;var extent=angleAxis.getExtent();var stackCoord=angle;if(stackCoord===extent[0]&&value>0){stackCoord=extent[1]}else{if(stackCoord===extent[1]&&value<0){stackCoord=extent[0]}}lastStackCoordsOrigin[stackId][idx][sign]=stackCoord}data.setItemLayout(idx,{cx:cx,cy:cy,r0:r0,r:r,startAngle:startAngle,endAngle:endAngle})},true)},this)}function calRadialBar(barSeries,api){var columnsMap={};zrUtil.each(barSeries,function(seriesModel,idx){var data=seriesModel.getData();var polar=seriesModel.coordinateSystem;var baseAxis=polar.getBaseAxis();var axisExtent=baseAxis.getExtent();var bandWidth=baseAxis.type==="category"?baseAxis.getBandWidth():(Math.abs(axisExtent[1]-axisExtent[0])/data.count());var columnsOnAxis=columnsMap[getAxisKey(baseAxis)]||{bandWidth:bandWidth,remainedWidth:bandWidth,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}};var stacks=columnsOnAxis.stacks;columnsMap[getAxisKey(baseAxis)]=columnsOnAxis;var stackId=getSeriesStackId(seriesModel);if(!stacks[stackId]){columnsOnAxis.autoWidthCount++}stacks[stackId]=stacks[stackId]||{width:0,maxWidth:0};var barWidth=parsePercent(seriesModel.get("barWidth"),bandWidth);var barMaxWidth=parsePercent(seriesModel.get("barMaxWidth"),bandWidth);var barGap=seriesModel.get("barGap");var barCategoryGap=seriesModel.get("barCategoryGap");if(barWidth&&!stacks[stackId].width){barWidth=Math.min(columnsOnAxis.remainedWidth,barWidth);stacks[stackId].width=barWidth;columnsOnAxis.remainedWidth-=barWidth}barMaxWidth&&(stacks[stackId].maxWidth=barMaxWidth);(barGap!=null)&&(columnsOnAxis.gap=barGap);(barCategoryGap!=null)&&(columnsOnAxis.categoryGap=barCategoryGap)});var result={};zrUtil.each(columnsMap,function(columnsOnAxis,coordSysName){result[coordSysName]={};var stacks=columnsOnAxis.stacks;var bandWidth=columnsOnAxis.bandWidth;var categoryGap=parsePercent(columnsOnAxis.categoryGap,bandWidth);var barGapPercent=parsePercent(columnsOnAxis.gap,1);var remainedWidth=columnsOnAxis.remainedWidth;var autoWidthCount=columnsOnAxis.autoWidthCount;var autoWidth=(remainedWidth-categoryGap)/(autoWidthCount+(autoWidthCount-1)*barGapPercent);autoWidth=Math.max(autoWidth,0);zrUtil.each(stacks,function(column,stack){var maxWidth=column.maxWidth;if(maxWidth&&maxWidth<autoWidth){maxWidth=Math.min(maxWidth,remainedWidth);if(column.width){maxWidth=Math.min(maxWidth,column.width)}remainedWidth-=maxWidth;column.width=maxWidth;autoWidthCount--}});autoWidth=(remainedWidth-categoryGap)/(autoWidthCount+(autoWidthCount-1)*barGapPercent);autoWidth=Math.max(autoWidth,0);var widthSum=0;var lastColumn;zrUtil.each(stacks,function(column,idx){if(!column.width){column.width=autoWidth}lastColumn=column;widthSum+=column.width*(1+barGapPercent)});if(lastColumn){widthSum-=lastColumn.width*barGapPercent}var offset=-widthSum/2;zrUtil.each(stacks,function(column,stackId){result[coordSysName][stackId]=result[coordSysName][stackId]||{offset:offset,width:column.width};offset+=column.width*(1+barGapPercent)})});return result}module.exports=barLayoutPolar}),(function(module,exports,__webpack_require__){__webpack_require__(352);__webpack_require__(174);__webpack_require__(353);__webpack_require__(190);var echarts=__webpack_require__(1);var zrUtil=__webpack_require__(4);function makeAction(method,actionInfo){actionInfo.update="updateView";echarts.registerAction(actionInfo,function(payload,ecModel){var selected={};ecModel.eachComponent({mainType:"geo",query:payload},function(geoModel){geoModel[method](payload.name);var geo=geoModel.coordinateSystem;zrUtil.each(geo.regions,function(region){selected[region.name]=geoModel.isSelected(region.name)||false})});return{selected:selected,name:payload.name}})}makeAction("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"});makeAction("select",{type:"geoSelect",event:"geoselected"});makeAction("unSelect",{type:"geoUnSelect",event:"geounselected"})}),(function(module,exports,__webpack_require__){var modelUtil=__webpack_require__(5);var ComponentModel=__webpack_require__(72);var Model=__webpack_require__(14);var zrUtil=__webpack_require__(4);var selectableMixin=__webpack_require__(151);var geoCreator=__webpack_require__(174);var GeoModel=ComponentModel.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(option){ComponentModel.prototype.init.apply(this,arguments);modelUtil.defaultEmphasis(option.label,["show"])},optionUpdated:function(){var option=this.option;
var self=this;option.regions=geoCreator.getFilledRegions(option.regions,option.map,option.nameMap);this._optionModelMap=zrUtil.reduce(option.regions||[],function(optionModelMap,regionOpt){if(regionOpt.name){optionModelMap.set(regionOpt.name,new Model(regionOpt,self))}return optionModelMap},zrUtil.createHashMap());this.updateSelectedMap(option.regions)},defaultOption:{zlevel:0,z:0,show:true,left:"center",top:"center",aspectScale:0.75,silent:false,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{normal:{show:false,color:"#000"},emphasis:{show:true,color:"rgb(100,0,0)"}},itemStyle:{normal:{borderWidth:0.5,borderColor:"#444",color:"#eee"},emphasis:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(name){return this._optionModelMap.get(name)||new Model(null,this,this.ecModel)},getFormattedLabel:function(name,status){var regionModel=this.getRegionModel(name);var formatter=regionModel.get("label."+status+".formatter");var params={name:name};if(typeof formatter==="function"){params.status=status;return formatter(params)}else{if(typeof formatter==="string"){return formatter.replace("{a}",name!=null?name:"")}}},setZoom:function(zoom){this.option.zoom=zoom},setCenter:function(center){this.option.center=center}});zrUtil.mixin(GeoModel,selectableMixin);module.exports=GeoModel}),(function(module,exports,__webpack_require__){var MapDraw=__webpack_require__(185);module.exports=__webpack_require__(1).extendComponentView({type:"geo",init:function(ecModel,api){var mapDraw=new MapDraw(api,true);this._mapDraw=mapDraw;this.group.add(mapDraw.group)},render:function(geoModel,ecModel,api,payload){if(payload&&payload.type==="geoToggleSelect"&&payload.from===this.uid){return}var mapDraw=this._mapDraw;if(geoModel.get("show")){mapDraw.draw(geoModel,ecModel,api,this,payload)}else{this._mapDraw.group.removeAll()}this.group.silent=geoModel.get("silent")},dispose:function(){this._mapDraw&&this._mapDraw.remove()}})}),(function(module,exports,__webpack_require__){__webpack_require__(1).registerPreprocessor(__webpack_require__(355));__webpack_require__(356);__webpack_require__(360);__webpack_require__(361);__webpack_require__(362);__webpack_require__(363)}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];module.exports=function(option,isNew){var brushComponents=option&&option.brush;if(!zrUtil.isArray(brushComponents)){brushComponents=brushComponents?[brushComponents]:[]}if(!brushComponents.length){return}var brushComponentSpecifiedBtns=[];zrUtil.each(brushComponents,function(brushOpt){var tbs=brushOpt.hasOwnProperty("toolbox")?brushOpt.toolbox:[];if(tbs instanceof Array){brushComponentSpecifiedBtns=brushComponentSpecifiedBtns.concat(tbs)}});var toolbox=option&&option.toolbox;if(zrUtil.isArray(toolbox)){toolbox=toolbox[0]}if(!toolbox){toolbox={feature:{}};option.toolbox=[toolbox]}var toolboxFeature=(toolbox.feature||(toolbox.feature={}));var toolboxBrush=toolboxFeature.brush||(toolboxFeature.brush={});var brushTypes=toolboxBrush.type||(toolboxBrush.type=[]);brushTypes.push.apply(brushTypes,brushComponentSpecifiedBtns);removeDuplicate(brushTypes);if(isNew&&!brushTypes.length){brushTypes.push.apply(brushTypes,DEFAULT_TOOLBOX_BTNS)}};function removeDuplicate(arr){var map={};zrUtil.each(arr,function(val){map[val]=1});arr.length=0;zrUtil.each(map,function(flag,val){arr.push(val)})}}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);var visualSolution=__webpack_require__(357);var zrUtil=__webpack_require__(4);var BoundingRect=__webpack_require__(9);var selector=__webpack_require__(358);var throttle=__webpack_require__(86);var BrushTargetManager=__webpack_require__(359);var STATE_LIST=["inBrush","outOfBrush"];var DISPATCH_METHOD="__ecBrushSelect";var DISPATCH_FLAG="__ecInBrushSelectEvent";var PRIORITY_BRUSH=echarts.PRIORITY.VISUAL.BRUSH;echarts.registerLayout(PRIORITY_BRUSH,function(ecModel,api,payload){ecModel.eachComponent({mainType:"brush"},function(brushModel){payload&&payload.type==="takeGlobalCursor"&&brushModel.setBrushOption(payload.key==="brush"?payload.brushOption:{brushType:false});var brushTargetManager=brushModel.brushTargetManager=new BrushTargetManager(brushModel.option,ecModel);brushTargetManager.setInputRanges(brushModel.areas,ecModel)})});echarts.registerVisual(PRIORITY_BRUSH,function(ecModel,api,payload){var brushSelected=[];var throttleType;var throttleDelay;ecModel.eachComponent({mainType:"brush"},function(brushModel,brushIndex){var thisBrushSelected={brushId:brushModel.id,brushIndex:brushIndex,brushName:brushModel.name,areas:zrUtil.clone(brushModel.areas),selected:[]};brushSelected.push(thisBrushSelected);var brushOption=brushModel.option;var brushLink=brushOption.brushLink;var linkedSeriesMap=[];var selectedDataIndexForLink=[];var rangeInfoBySeries=[];var hasBrushExists=0;if(!brushIndex){throttleType=brushOption.throttleType;throttleDelay=brushOption.throttleDelay}var areas=zrUtil.map(brushModel.areas,function(area){return bindSelector(zrUtil.defaults({boundingRect:boundingRectBuilders[area.brushType](area)},area))
});var visualMappings=visualSolution.createVisualMappings(brushModel.option,STATE_LIST,function(mappingOption){mappingOption.mappingMethod="fixed"});zrUtil.isArray(brushLink)&&zrUtil.each(brushLink,function(seriesIndex){linkedSeriesMap[seriesIndex]=1});function linkOthers(seriesIndex){return brushLink==="all"||linkedSeriesMap[seriesIndex]}function brushed(rangeInfoList){return !!rangeInfoList.length}ecModel.eachSeries(function(seriesModel,seriesIndex){var rangeInfoList=rangeInfoBySeries[seriesIndex]=[];seriesModel.subType==="parallel"?stepAParallel(seriesModel,seriesIndex,rangeInfoList):stepAOthers(seriesModel,seriesIndex,rangeInfoList)});function stepAParallel(seriesModel,seriesIndex){var coordSys=seriesModel.coordinateSystem;hasBrushExists|=coordSys.hasAxisBrushed();linkOthers(seriesIndex)&&coordSys.eachActiveState(seriesModel.getData(),function(activeState,dataIndex){activeState==="active"&&(selectedDataIndexForLink[dataIndex]=1)})}function stepAOthers(seriesModel,seriesIndex,rangeInfoList){var selectorsByBrushType=getSelectorsByBrushType(seriesModel);if(!selectorsByBrushType||brushModelNotControll(brushModel,seriesIndex)){return}zrUtil.each(areas,function(area){selectorsByBrushType[area.brushType]&&brushModel.brushTargetManager.controlSeries(area,seriesModel,ecModel)&&rangeInfoList.push(area);hasBrushExists|=brushed(rangeInfoList)});if(linkOthers(seriesIndex)&&brushed(rangeInfoList)){var data=seriesModel.getData();data.each(function(dataIndex){if(checkInRange(selectorsByBrushType,rangeInfoList,data,dataIndex)){selectedDataIndexForLink[dataIndex]=1}})}}ecModel.eachSeries(function(seriesModel,seriesIndex){var seriesBrushSelected={seriesId:seriesModel.id,seriesIndex:seriesIndex,seriesName:seriesModel.name,dataIndex:[]};thisBrushSelected.selected.push(seriesBrushSelected);var selectorsByBrushType=getSelectorsByBrushType(seriesModel);var rangeInfoList=rangeInfoBySeries[seriesIndex];var data=seriesModel.getData();var getValueState=linkOthers(seriesIndex)?function(dataIndex){return selectedDataIndexForLink[dataIndex]?(seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)),"inBrush"):"outOfBrush"}:function(dataIndex){return checkInRange(selectorsByBrushType,rangeInfoList,data,dataIndex)?(seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)),"inBrush"):"outOfBrush"};(linkOthers(seriesIndex)?hasBrushExists:brushed(rangeInfoList))&&visualSolution.applyVisual(STATE_LIST,visualMappings,data,getValueState)})});dispatchAction(api,throttleType,throttleDelay,brushSelected,payload)});function dispatchAction(api,throttleType,throttleDelay,brushSelected,payload){if(!payload){return}var zr=api.getZr();if(zr[DISPATCH_FLAG]){return}if(!zr[DISPATCH_METHOD]){zr[DISPATCH_METHOD]=doDispatch}var fn=throttle.createOrUpdate(zr,DISPATCH_METHOD,throttleDelay,throttleType);fn(api,brushSelected)}function doDispatch(api,brushSelected){if(!api.isDisposed()){var zr=api.getZr();zr[DISPATCH_FLAG]=true;api.dispatchAction({type:"brushSelect",batch:brushSelected});zr[DISPATCH_FLAG]=false}}function checkInRange(selectorsByBrushType,rangeInfoList,data,dataIndex){for(var i=0,len=rangeInfoList.length;i<len;i++){var area=rangeInfoList[i];if(selectorsByBrushType[area.brushType](dataIndex,data,area.selectors,area)){return true}}}function getSelectorsByBrushType(seriesModel){var brushSelector=seriesModel.brushSelector;if(zrUtil.isString(brushSelector)){var sels=[];zrUtil.each(selector,function(selectorsByElementType,brushType){sels[brushType]=function(dataIndex,data,selectors,area){var itemLayout=data.getItemLayout(dataIndex);return selectorsByElementType[brushSelector](itemLayout,selectors,area)}});return sels}else{if(zrUtil.isFunction(brushSelector)){var bSelector={};zrUtil.each(selector,function(sel,brushType){bSelector[brushType]=brushSelector});return bSelector}}return brushSelector}function brushModelNotControll(brushModel,seriesIndex){var seriesIndices=brushModel.option.seriesIndex;return seriesIndices!=null&&seriesIndices!=="all"&&(zrUtil.isArray(seriesIndices)?zrUtil.indexOf(seriesIndices,seriesIndex)<0:seriesIndex!==seriesIndices)}function bindSelector(area){var selectors=area.selectors={};zrUtil.each(selector[area.brushType],function(selFn,elType){selectors[elType]=function(itemLayout){return selFn(itemLayout,selectors,area)}});return area}var boundingRectBuilders={lineX:zrUtil.noop,lineY:zrUtil.noop,rect:function(area){return getBoundingRectFromMinMax(area.range)},polygon:function(area){var minMax;var range=area.range;for(var i=0,len=range.length;i<len;i++){minMax=minMax||[[Infinity,-Infinity],[Infinity,-Infinity]];var rg=range[i];rg[0]<minMax[0][0]&&(minMax[0][0]=rg[0]);rg[0]>minMax[0][1]&&(minMax[0][1]=rg[0]);rg[1]<minMax[1][0]&&(minMax[1][0]=rg[1]);rg[1]>minMax[1][1]&&(minMax[1][1]=rg[1])}return minMax&&getBoundingRectFromMinMax(minMax)}};function getBoundingRectFromMinMax(minMax){return new BoundingRect(minMax[0][0],minMax[1][0],minMax[0][1]-minMax[0][0],minMax[1][1]-minMax[1][0])}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);
var VisualMapping=__webpack_require__(206);var each=zrUtil.each;function hasKeys(obj){if(obj){for(var name in obj){if(obj.hasOwnProperty(name)){return true}}}}var visualSolution={createVisualMappings:function(option,stateList,supplementVisualOption){var visualMappings={};each(stateList,function(state){var mappings=visualMappings[state]=createMappings();each(option[state],function(visualData,visualType){if(!VisualMapping.isValidType(visualType)){return}var mappingOption={type:visualType,visual:visualData};supplementVisualOption&&supplementVisualOption(mappingOption,state);mappings[visualType]=new VisualMapping(mappingOption);if(visualType==="opacity"){mappingOption=zrUtil.clone(mappingOption);mappingOption.type="colorAlpha";mappings.__hidden.__alphaForOpacity=new VisualMapping(mappingOption)}})});return visualMappings;function createMappings(){var Creater=function(){};Creater.prototype.__hidden=Creater.prototype;var obj=new Creater();return obj}},replaceVisualOption:function(thisOption,newOption,keys){var has;zrUtil.each(keys,function(key){if(newOption.hasOwnProperty(key)&&hasKeys(newOption[key])){has=true}});has&&zrUtil.each(keys,function(key){if(newOption.hasOwnProperty(key)&&hasKeys(newOption[key])){thisOption[key]=zrUtil.clone(newOption[key])}else{delete thisOption[key]}})},applyVisual:function(stateList,visualMappings,data,getValueState,scope,dimension){var visualTypesMap={};zrUtil.each(stateList,function(state){var visualTypes=VisualMapping.prepareVisualTypes(visualMappings[state]);visualTypesMap[state]=visualTypes});var dataIndex;function getVisual(key){return data.getItemVisual(dataIndex,key)}function setVisual(key,value){data.setItemVisual(dataIndex,key,value)}if(dimension==null){data.each(eachItem,true)}else{data.each([dimension],eachItem,true)}function eachItem(valueOrIndex,index){dataIndex=dimension==null?valueOrIndex:index;var rawDataItem=data.getRawDataItem(dataIndex);if(rawDataItem&&rawDataItem.visualMap===false){return}var valueState=getValueState.call(scope,valueOrIndex);var mappings=visualMappings[valueState];var visualTypes=visualTypesMap[valueState];for(var i=0,len=visualTypes.length;i<len;i++){var type=visualTypes[i];mappings[type]&&mappings[type].applyVisual(valueOrIndex,getVisual,setVisual)}}}};module.exports=visualSolution}),(function(module,exports,__webpack_require__){var polygonContain=__webpack_require__(178).contain;var BoundingRect=__webpack_require__(9);var selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(itemLayout,selectors,area){return area.boundingRect.contain(itemLayout[0],itemLayout[1])},rect:function(itemLayout,selectors,area){return area.boundingRect.intersect(itemLayout)}},polygon:{point:function(itemLayout,selectors,area){return area.boundingRect.contain(itemLayout[0],itemLayout[1])&&polygonContain(area.range,itemLayout[0],itemLayout[1])},rect:function(itemLayout,selectors,area){var points=area.range;if(points.length<=1){return false}var x=itemLayout.x;var y=itemLayout.y;var width=itemLayout.width;var height=itemLayout.height;var p=points[0];if(polygonContain(points,x,y)||polygonContain(points,x+width,y)||polygonContain(points,x,y+height)||polygonContain(points,x+width,y+height)||BoundingRect.create(itemLayout).contain(p[0],p[1])||lineIntersectPolygon(x,y,x+width,y,points)||lineIntersectPolygon(x,y,x,y+height,points)||lineIntersectPolygon(x+width,y,x+width,y+height,points)||lineIntersectPolygon(x,y+height,x+width,y+height,points)){return true}}}};function getLineSelectors(xyIndex){var xy=["x","y"];var wh=["width","height"];return{point:function(itemLayout,selectors,area){var range=area.range;var p=itemLayout[xyIndex];return inLineRange(p,range)},rect:function(itemLayout,selectors,area){var range=area.range;var layoutRange=[itemLayout[xy[xyIndex]],itemLayout[xy[xyIndex]]+itemLayout[wh[xyIndex]]];layoutRange[1]<layoutRange[0]&&layoutRange.reverse();return inLineRange(layoutRange[0],range)||inLineRange(layoutRange[1],range)||inLineRange(range[0],layoutRange)||inLineRange(range[1],layoutRange)}}}function inLineRange(p,range){return range[0]<=p&&p<=range[1]}function lineIntersectPolygon(lx,ly,l2x,l2y,points){for(var i=0,p2=points[points.length-1];i<points.length;i++){var p=points[i];if(lineIntersect(lx,ly,l2x,l2y,p[0],p[1],p2[0],p2[1])){return true}p2=p}}function lineIntersect(a1x,a1y,a2x,a2y,b1x,b1y,b2x,b2y){var delta=determinant(a2x-a1x,b1x-b2x,a2y-a1y,b1y-b2y);if(nearZero(delta)){return false}var namenda=determinant(b1x-a1x,b1x-b2x,b1y-a1y,b1y-b2y)/delta;if(namenda<0||namenda>1){return false}var miu=determinant(a2x-a1x,b1x-a1x,a2y-a1y,b1y-a1y)/delta;if(miu<0||miu>1){return false}return true}function nearZero(val){return val<=(0.000001)&&val>=-(0.000001)}function determinant(v1,v2,v3,v4){return v1*v4-v2*v3}module.exports=selector}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var graphic=__webpack_require__(20);var modelUtil=__webpack_require__(5);var brushHelper=__webpack_require__(249);var each=zrUtil.each;
var indexOf=zrUtil.indexOf;var curry=zrUtil.curry;var COORD_CONVERTS=["dataToPoint","pointToData"];var INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function BrushTargetManager(option,ecModel,opt){var targetInfoList=this._targetInfoList=[];var info={};var foundCpts=parseFinder(ecModel,option);each(targetInfoBuilders,function(builder,type){if(!opt||!opt.include||indexOf(opt.include,type)>=0){builder(foundCpts,targetInfoList,info)}})}var proto=BrushTargetManager.prototype;proto.setOutputRanges=function(areas,ecModel){this.matchOutputRanges(areas,ecModel,function(area,coordRange,coordSys){(area.coordRanges||(area.coordRanges=[])).push(coordRange);if(!area.coordRange){area.coordRange=coordRange;var result=coordConvert[area.brushType](0,coordSys,coordRange);area.__rangeOffset={offset:diffProcessor[area.brushType](result.values,area.range,[1,1]),xyMinMax:result.xyMinMax}}})};proto.matchOutputRanges=function(areas,ecModel,cb){each(areas,function(area){var targetInfo=this.findTargetInfo(area,ecModel);if(targetInfo&&targetInfo!==true){zrUtil.each(targetInfo.coordSyses,function(coordSys){var result=coordConvert[area.brushType](1,coordSys,area.range);cb(area,result.values,coordSys,ecModel)})}},this)};proto.setInputRanges=function(areas,ecModel){each(areas,function(area){var targetInfo=this.findTargetInfo(area,ecModel);if(true){zrUtil.assert(!targetInfo||targetInfo===true||area.coordRange,"coordRange must be specified when coord index specified.");zrUtil.assert(!targetInfo||targetInfo!==true||area.range,"range must be specified in global brush.")}area.range=area.range||[];if(targetInfo&&targetInfo!==true){area.panelId=targetInfo.panelId;var result=coordConvert[area.brushType](0,targetInfo.coordSys,area.coordRange);var rangeOffset=area.__rangeOffset;area.range=rangeOffset?diffProcessor[area.brushType](result.values,rangeOffset.offset,getScales(result.xyMinMax,rangeOffset.xyMinMax)):result.values}},this)};proto.makePanelOpts=function(api,getDefaultBrushType){return zrUtil.map(this._targetInfoList,function(targetInfo){var rect=targetInfo.getPanelRect();return{panelId:targetInfo.panelId,defaultBrushType:getDefaultBrushType&&getDefaultBrushType(targetInfo),clipPath:brushHelper.makeRectPanelClipPath(rect),isTargetByCursor:brushHelper.makeRectIsTargetByCursor(rect,api,targetInfo.coordSysModel),getLinearBrushOtherExtent:brushHelper.makeLinearBrushOtherExtent(rect)}})};proto.controlSeries=function(area,seriesModel,ecModel){var targetInfo=this.findTargetInfo(area,ecModel);return targetInfo===true||(targetInfo&&indexOf(targetInfo.coordSyses,seriesModel.coordinateSystem)>=0)};proto.findTargetInfo=function(area,ecModel){var targetInfoList=this._targetInfoList;var foundCpts=parseFinder(ecModel,area);for(var i=0;i<targetInfoList.length;i++){var targetInfo=targetInfoList[i];var areaPanelId=area.panelId;if(areaPanelId){if(targetInfo.panelId===areaPanelId){return targetInfo}}else{for(var i=0;i<targetInfoMatchers.length;i++){if(targetInfoMatchers[i](foundCpts,targetInfo)){return targetInfo}}}}return true};function formatMinMax(minMax){minMax[0]>minMax[1]&&minMax.reverse();return minMax}function parseFinder(ecModel,option){return modelUtil.parseFinder(ecModel,option,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}var targetInfoBuilders={grid:function(foundCpts,targetInfoList){var xAxisModels=foundCpts.xAxisModels;var yAxisModels=foundCpts.yAxisModels;var gridModels=foundCpts.gridModels;var gridModelMap=zrUtil.createHashMap();var xAxesHas={};var yAxesHas={};if(!xAxisModels&&!yAxisModels&&!gridModels){return}each(xAxisModels,function(axisModel){var gridModel=axisModel.axis.grid.model;gridModelMap.set(gridModel.id,gridModel);xAxesHas[gridModel.id]=true});each(yAxisModels,function(axisModel){var gridModel=axisModel.axis.grid.model;gridModelMap.set(gridModel.id,gridModel);yAxesHas[gridModel.id]=true});each(gridModels,function(gridModel){gridModelMap.set(gridModel.id,gridModel);xAxesHas[gridModel.id]=true;yAxesHas[gridModel.id]=true});gridModelMap.each(function(gridModel){var grid=gridModel.coordinateSystem;var cartesians=[];each(grid.getCartesians(),function(cartesian,index){if(indexOf(xAxisModels,cartesian.getAxis("x").model)>=0||indexOf(yAxisModels,cartesian.getAxis("y").model)>=0){cartesians.push(cartesian)}});targetInfoList.push({panelId:"grid--"+gridModel.id,gridModel:gridModel,coordSysModel:gridModel,coordSys:cartesians[0],coordSyses:cartesians,getPanelRect:panelRectBuilder.grid,xAxisDeclared:xAxesHas[gridModel.id],yAxisDeclared:yAxesHas[gridModel.id]})})},geo:function(foundCpts,targetInfoList){each(foundCpts.geoModels,function(geoModel){var coordSys=geoModel.coordinateSystem;targetInfoList.push({panelId:"geo--"+geoModel.id,geoModel:geoModel,coordSysModel:geoModel,coordSys:coordSys,coordSyses:[coordSys],getPanelRect:panelRectBuilder.geo})})}};var targetInfoMatchers=[function(foundCpts,targetInfo){var xAxisModel=foundCpts.xAxisModel;var yAxisModel=foundCpts.yAxisModel;var gridModel=foundCpts.gridModel;
!gridModel&&xAxisModel&&(gridModel=xAxisModel.axis.grid.model);!gridModel&&yAxisModel&&(gridModel=yAxisModel.axis.grid.model);return gridModel&&gridModel===targetInfo.gridModel},function(foundCpts,targetInfo){var geoModel=foundCpts.geoModel;return geoModel&&geoModel===targetInfo.geoModel}];var panelRectBuilder={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var coordSys=this.coordSys;var rect=coordSys.getBoundingRect().clone();rect.applyTransform(graphic.getTransform(coordSys));return rect}};var coordConvert={lineX:curry(axisConvert,0),lineY:curry(axisConvert,1),rect:function(to,coordSys,rangeOrCoordRange){var xminymin=coordSys[COORD_CONVERTS[to]]([rangeOrCoordRange[0][0],rangeOrCoordRange[1][0]]);var xmaxymax=coordSys[COORD_CONVERTS[to]]([rangeOrCoordRange[0][1],rangeOrCoordRange[1][1]]);var values=[formatMinMax([xminymin[0],xmaxymax[0]]),formatMinMax([xminymin[1],xmaxymax[1]])];return{values:values,xyMinMax:values}},polygon:function(to,coordSys,rangeOrCoordRange){var xyMinMax=[[Infinity,-Infinity],[Infinity,-Infinity]];var values=zrUtil.map(rangeOrCoordRange,function(item){var p=coordSys[COORD_CONVERTS[to]](item);xyMinMax[0][0]=Math.min(xyMinMax[0][0],p[0]);xyMinMax[1][0]=Math.min(xyMinMax[1][0],p[1]);xyMinMax[0][1]=Math.max(xyMinMax[0][1],p[0]);xyMinMax[1][1]=Math.max(xyMinMax[1][1],p[1]);return p});return{values:values,xyMinMax:xyMinMax}}};function axisConvert(axisNameIndex,to,coordSys,rangeOrCoordRange){if(true){zrUtil.assert(coordSys.type==="cartesian2d","lineX/lineY brush is available only in cartesian2d.")}var axis=coordSys.getAxis(["x","y"][axisNameIndex]);var values=formatMinMax(zrUtil.map([0,1],function(i){return to?axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i])):axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]))}));var xyMinMax=[];xyMinMax[axisNameIndex]=values;xyMinMax[1-axisNameIndex]=[NaN,NaN];return{values:values,xyMinMax:xyMinMax}}var diffProcessor={lineX:curry(axisDiffProcessor,0),lineY:curry(axisDiffProcessor,1),rect:function(values,refer,scales){return[[values[0][0]-scales[0]*refer[0][0],values[0][1]-scales[0]*refer[0][1]],[values[1][0]-scales[1]*refer[1][0],values[1][1]-scales[1]*refer[1][1]]]},polygon:function(values,refer,scales){return zrUtil.map(values,function(item,idx){return[item[0]-scales[0]*refer[idx][0],item[1]-scales[1]*refer[idx][1]]})}};function axisDiffProcessor(axisNameIndex,values,refer,scales){return[values[0]-scales[axisNameIndex]*refer[0],values[1]-scales[axisNameIndex]*refer[1]]}function getScales(xyMinMaxCurr,xyMinMaxOrigin){var sizeCurr=getSize(xyMinMaxCurr);var sizeOrigin=getSize(xyMinMaxOrigin);var scales=[sizeCurr[0]/sizeOrigin[0],sizeCurr[1]/sizeOrigin[1]];isNaN(scales[0])&&(scales[0]=1);isNaN(scales[1])&&(scales[1]=1);return scales}function getSize(xyMinMax){return xyMinMax?[xyMinMax[0][1]-xyMinMax[0][0],xyMinMax[1][1]-xyMinMax[1][0]]:[NaN,NaN]}module.exports=BrushTargetManager}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);var zrUtil=__webpack_require__(4);var visualSolution=__webpack_require__(357);var Model=__webpack_require__(14);var DEFAULT_OUT_OF_BRUSH_COLOR=["#ddd"];var BrushModel=echarts.extendComponentModel({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:true,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:true,z:10000},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(newOption,isInit){var thisOption=this.option;!isInit&&visualSolution.replaceVisualOption(thisOption,newOption,["inBrush","outOfBrush"]);thisOption.inBrush=thisOption.inBrush||{};thisOption.outOfBrush=thisOption.outOfBrush||{color:DEFAULT_OUT_OF_BRUSH_COLOR}},setAreas:function(areas){if(true){zrUtil.assert(zrUtil.isArray(areas));zrUtil.each(areas,function(area){zrUtil.assert(area.brushType,"Illegal areas")})}if(!areas){return}this.areas=zrUtil.map(areas,function(area){return generateBrushOption(this.option,area)},this)},setBrushOption:function(brushOption){this.brushOption=generateBrushOption(this.option,brushOption);this.brushType=this.brushOption.brushType}});function generateBrushOption(option,brushOption){return zrUtil.merge({brushType:option.brushType,brushMode:option.brushMode,transformable:option.transformable,brushStyle:new Model(option.brushStyle).getItemStyle(),removeOnClick:option.removeOnClick,z:option.z},brushOption,true)}module.exports=BrushModel}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var BrushController=__webpack_require__(248);var echarts=__webpack_require__(1);module.exports=echarts.extendComponentView({type:"brush",init:function(ecModel,api){this.ecModel=ecModel;this.api=api;this.model;(this._brushController=new BrushController(api.getZr())).on("brush",zrUtil.bind(this._onBrush,this)).mount()
},render:function(brushModel){this.model=brushModel;return updateController.apply(this,arguments)},updateView:updateController,updateLayout:updateController,updateVisual:updateController,dispose:function(){this._brushController.dispose()},_onBrush:function(areas,opt){var modelId=this.model.id;this.model.brushTargetManager.setOutputRanges(areas,this.ecModel);(!opt.isEnd||opt.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:modelId,areas:zrUtil.clone(areas),$from:modelId})}});function updateController(brushModel,ecModel,api,payload){(!payload||payload.$from!==brushModel.id)&&this._brushController.setPanels(brushModel.brushTargetManager.makePanelOpts(api)).enableBrush(brushModel.brushOption).updateCovers(brushModel.areas.slice())}}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);echarts.registerAction({type:"brush",event:"brush",update:"updateView"},function(payload,ecModel){ecModel.eachComponent({mainType:"brush",query:payload},function(brushModel){brushModel.setAreas(payload.areas)})});echarts.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},function(){})}),(function(module,exports,__webpack_require__){var featureManager=__webpack_require__(364);var zrUtil=__webpack_require__(4);var lang=__webpack_require__(365).toolbox.brush;function Brush(model,ecModel,api){this.model=model;this.ecModel=ecModel;this.api=api;this._brushType;this._brushMode}Brush.defaultOption={show:true,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:zrUtil.clone(lang.title)};var proto=Brush.prototype;proto.render=proto.updateView=proto.updateLayout=function(featureModel,ecModel,api){var brushType;var brushMode;var isBrushed;ecModel.eachComponent({mainType:"brush"},function(brushModel){brushType=brushModel.brushType;brushMode=brushModel.brushOption.brushMode||"single";isBrushed|=brushModel.areas.length});this._brushType=brushType;this._brushMode=brushMode;zrUtil.each(featureModel.get("type",true),function(type){featureModel.setIconStatus(type,(type==="keep"?brushMode==="multiple":type==="clear"?isBrushed:type===brushType)?"emphasis":"normal")})};proto.getIcons=function(){var model=this.model;var availableIcons=model.get("icon",true);var icons={};zrUtil.each(model.get("type",true),function(type){if(availableIcons[type]){icons[type]=availableIcons[type]}});return icons};proto.onclick=function(ecModel,api,type){var api=this.api;var brushType=this._brushType;var brushMode=this._brushMode;if(type==="clear"){api.dispatchAction({type:"axisAreaSelect",intervals:[]});api.dispatchAction({type:"brush",command:"clear",areas:[]})}else{api.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:type==="keep"?brushType:(brushType===type?false:type),brushMode:type==="keep"?(brushMode==="multiple"?"single":"multiple"):brushMode}})}};featureManager.register("brush",Brush);module.exports=Brush}),(function(module,exports){var features={};module.exports={register:function(name,ctor){features[name]=ctor},get:function(name){return features[name]}}}),(function(module,exports){module.exports={toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}}}}),(function(module,exports,__webpack_require__){__webpack_require__(367);
__webpack_require__(368);__webpack_require__(369)}),(function(module,exports,__webpack_require__){var layout=__webpack_require__(74);var numberUtil=__webpack_require__(7);var zrUtil=__webpack_require__(4);var PROXIMATE_ONE_DAY=86400000;function Calendar(calendarModel,ecModel,api){this._model=calendarModel}Calendar.prototype={constructor:Calendar,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"}]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(date){date=numberUtil.parseDate(date);var y=date.getFullYear();var m=date.getMonth()+1;m=m<10?"0"+m:m;var d=date.getDate();d=d<10?"0"+d:d;var day=date.getDay();day=Math.abs((day+7-this.getFirstDayOfWeek())%7);return{y:y,m:m,d:d,day:day,time:date.getTime(),formatedDate:y+"-"+m+"-"+d,date:date}},getNextNDay:function(date,n){n=n||0;if(n===0){return this.getDateInfo(date)}date=new Date(this.getDateInfo(date).time);date.setDate(date.getDate()+n);return this.getDateInfo(date)},update:function(ecModel,api){this._firstDayOfWeek=this._model.getModel("dayLabel").get("firstDay");this._orient=this._model.get("orient");this._lineWidth=this._model.getModel("itemStyle.normal").getItemStyle().lineWidth||0;this._rangeInfo=this._getRangeInfo(this._initRangeOption());var weeks=this._rangeInfo.weeks||1;var whNames=["width","height"];var cellSize=this._model.get("cellSize").slice();var layoutParams=this._model.getBoxLayoutParams();var cellNumbers=this._orient==="horizontal"?[weeks,7]:[7,weeks];zrUtil.each([0,1],function(idx){if(cellSizeSpecified(cellSize,idx)){layoutParams[whNames[idx]]=cellSize[idx]*cellNumbers[idx]}});var whGlobal={width:api.getWidth(),height:api.getHeight()};var calendarRect=this._rect=layout.getLayoutRect(layoutParams,whGlobal);zrUtil.each([0,1],function(idx){if(!cellSizeSpecified(cellSize,idx)){cellSize[idx]=calendarRect[whNames[idx]]/cellNumbers[idx]}});function cellSizeSpecified(cellSize,idx){return cellSize[idx]!=null&&cellSize[idx]!=="auto"}this._sw=cellSize[0];this._sh=cellSize[1]},dataToPoint:function(data,clamp){zrUtil.isArray(data)&&(data=data[0]);clamp==null&&(clamp=true);var dayInfo=this.getDateInfo(data);var range=this._rangeInfo;var date=dayInfo.formatedDate;if(clamp&&!(dayInfo.time>=range.start.time&&dayInfo.time<=range.end.time)){return[NaN,NaN]}var week=dayInfo.day;var nthWeek=this._getRangeInfo([range.start.time,date]).nthWeek;if(this._orient==="vertical"){return[this._rect.x+week*this._sw+this._sw/2,this._rect.y+nthWeek*this._sh+this._sh/2]}return[this._rect.x+nthWeek*this._sw+this._sw/2,this._rect.y+week*this._sh+this._sh/2]},pointToData:function(point){var date=this.pointToDate(point);return date&&date.time},dataToRect:function(data,clamp){var point=this.dataToPoint(data,clamp);return{contentShape:{x:point[0]-(this._sw-this._lineWidth)/2,y:point[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:point,tl:[point[0]-this._sw/2,point[1]-this._sh/2],tr:[point[0]+this._sw/2,point[1]-this._sh/2],br:[point[0]+this._sw/2,point[1]+this._sh/2],bl:[point[0]-this._sw/2,point[1]+this._sh/2]}},pointToDate:function(point){var nthX=Math.floor((point[0]-this._rect.x)/this._sw)+1;var nthY=Math.floor((point[1]-this._rect.y)/this._sh)+1;var range=this._rangeInfo.range;if(this._orient==="vertical"){return this._getDateByWeeksAndDay(nthY,nthX-1,range)}return this._getDateByWeeksAndDay(nthX,nthY-1,range)},convertToPixel:zrUtil.curry(doConvert,"dataToPoint"),convertFromPixel:zrUtil.curry(doConvert,"pointToData"),_initRangeOption:function(){var range=this._model.get("range");var rg=range;if(zrUtil.isArray(rg)&&rg.length===1){rg=rg[0]}if(/^\d{4}$/.test(rg)){range=[rg+"-01-01",rg+"-12-31"]}if(/^\d{4}[\/|-]\d{1,2}$/.test(rg)){var start=this.getDateInfo(rg);var firstDay=start.date;firstDay.setMonth(firstDay.getMonth()+1);var end=this.getNextNDay(firstDay,-1);range=[start.formatedDate,end.formatedDate]}if(/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(rg)){range=[rg,rg]}var tmp=this._getRangeInfo(range);if(tmp.start.time>tmp.end.time){range.reverse()}return range},_getRangeInfo:function(range){range=[this.getDateInfo(range[0]),this.getDateInfo(range[1])];var reversed;if(range[0].time>range[1].time){reversed=true;range.reverse()}var allDay=Math.floor(range[1].time/PROXIMATE_ONE_DAY)-Math.floor(range[0].time/PROXIMATE_ONE_DAY)+1;var date=new Date(range[0].time);var startDateNum=date.getDate();var endDateNum=range[1].date.getDate();date.setDate(startDateNum+allDay-1);if(date.getDate()!==endDateNum){var sign=date.getTime()-range[1].time>0?1:-1;while(date.getDate()!==endDateNum&&(date.getTime()-range[1].time)*sign>0){allDay-=sign;date.setDate(startDateNum+allDay-1)}}var weeks=Math.floor((allDay+range[0].day+6)/7);
var nthWeek=reversed?-weeks+1:weeks-1;reversed&&range.reverse();return{range:[range[0].formatedDate,range[1].formatedDate],start:range[0],end:range[1],allDay:allDay,weeks:weeks,nthWeek:nthWeek,fweek:range[0].day,lweek:range[1].day}},_getDateByWeeksAndDay:function(nthWeek,day,range){var rangeInfo=this._getRangeInfo(range);if(nthWeek>rangeInfo.weeks||(nthWeek===0&&day<rangeInfo.fweek)||(nthWeek===rangeInfo.weeks&&day>rangeInfo.lweek)){return false}var nthDay=(nthWeek-1)*7-rangeInfo.fweek+day;var date=new Date(rangeInfo.start.time);date.setDate(rangeInfo.start.d+nthDay);return this.getDateInfo(date)}};Calendar.dimensions=Calendar.prototype.dimensions;Calendar.getDimensionsInfo=Calendar.prototype.getDimensionsInfo;Calendar.create=function(ecModel,api){var calendarList=[];ecModel.eachComponent("calendar",function(calendarModel){var calendar=new Calendar(calendarModel,ecModel,api);calendarList.push(calendar);calendarModel.coordinateSystem=calendar});ecModel.eachSeries(function(calendarSeries){if(calendarSeries.get("coordinateSystem")==="calendar"){calendarSeries.coordinateSystem=calendarList[calendarSeries.get("calendarIndex")||0]}});return calendarList};function doConvert(methodName,ecModel,finder,value){var calendarModel=finder.calendarModel;var seriesModel=finder.seriesModel;var coordSys=calendarModel?calendarModel.coordinateSystem:seriesModel?seriesModel.coordinateSystem:null;return coordSys===this?coordSys[methodName](value):null}__webpack_require__(79).register("calendar",Calendar);module.exports=Calendar}),(function(module,exports,__webpack_require__){var ComponentModel=__webpack_require__(72);var zrUtil=__webpack_require__(4);var layout=__webpack_require__(74);var CalendarModel=ComponentModel.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:true,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{normal:{color:"#fff",borderWidth:1,borderColor:"#ccc"}},dayLabel:{show:true,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:true,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:true,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(option,parentModel,ecModel,extraOpt){var inputPositionParams=layout.getLayoutParams(option);CalendarModel.superApply(this,"init",arguments);mergeAndNormalizeLayoutParams(option,inputPositionParams)},mergeOption:function(option,extraOpt){CalendarModel.superApply(this,"mergeOption",arguments);mergeAndNormalizeLayoutParams(this.option,option)}});function mergeAndNormalizeLayoutParams(target,raw){var cellSize=target.cellSize;if(!zrUtil.isArray(cellSize)){cellSize=target.cellSize=[cellSize,cellSize]}else{if(cellSize.length===1){cellSize[1]=cellSize[0]}}var ignoreSize=zrUtil.map([0,1],function(hvIdx){if(layout.sizeCalculable(raw,hvIdx)){cellSize[hvIdx]="auto"}return cellSize[hvIdx]!=null&&cellSize[hvIdx]!=="auto"});layout.mergeLayoutParam(target,raw,{type:"box",ignoreSize:ignoreSize})}module.exports=CalendarModel}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var graphic=__webpack_require__(20);var formatUtil=__webpack_require__(6);var numberUtil=__webpack_require__(7);var MONTH_TEXT={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]};var WEEK_TEXT={EN:["S","M","T","W","T","F","S"],CN:["日","一","二","三","四","五","六"]};module.exports=__webpack_require__(1).extendComponentView({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(calendarModel,ecModel,api){var group=this.group;group.removeAll();var coordSys=calendarModel.coordinateSystem;var rangeData=coordSys.getRangeInfo();var orient=coordSys.getOrient();this._renderDayRect(calendarModel,rangeData,group);this._renderLines(calendarModel,rangeData,orient,group);this._renderYearText(calendarModel,rangeData,orient,group);this._renderMonthText(calendarModel,orient,group);this._renderWeekText(calendarModel,rangeData,orient,group)},_renderDayRect:function(calendarModel,rangeData,group){var coordSys=calendarModel.coordinateSystem;var itemRectStyleModel=calendarModel.getModel("itemStyle.normal").getItemStyle();var sw=coordSys.getCellWidth();var sh=coordSys.getCellHeight();for(var i=rangeData.start.time;i<=rangeData.end.time;i=coordSys.getNextNDay(i,1).time){var point=coordSys.dataToRect([i],false).tl;var rect=new graphic.Rect({shape:{x:point[0],y:point[1],width:sw,height:sh},cursor:"default",style:itemRectStyleModel});group.add(rect)}},_renderLines:function(calendarModel,rangeData,orient,group){var self=this;var coordSys=calendarModel.coordinateSystem;var lineStyleModel=calendarModel.getModel("splitLine.lineStyle").getLineStyle();var show=calendarModel.get("splitLine.show");var lineWidth=lineStyleModel.lineWidth;this._tlpoints=[];
this._blpoints=[];this._firstDayOfMonth=[];this._firstDayPoints=[];var firstDay=rangeData.start;for(var i=0;firstDay.time<=rangeData.end.time;i++){addPoints(firstDay.formatedDate);if(i===0){firstDay=coordSys.getDateInfo(rangeData.start.y+"-"+rangeData.start.m)}var date=firstDay.date;date.setMonth(date.getMonth()+1);firstDay=coordSys.getDateInfo(date)}addPoints(coordSys.getNextNDay(rangeData.end.time,1).formatedDate);function addPoints(date){self._firstDayOfMonth.push(coordSys.getDateInfo(date));self._firstDayPoints.push(coordSys.dataToRect([date],false).tl);var points=self._getLinePointsOfOneWeek(calendarModel,date,orient);self._tlpoints.push(points[0]);self._blpoints.push(points[points.length-1]);show&&self._drawSplitline(points,lineStyleModel,group)}show&&this._drawSplitline(self._getEdgesPoints(self._tlpoints,lineWidth,orient),lineStyleModel,group);show&&this._drawSplitline(self._getEdgesPoints(self._blpoints,lineWidth,orient),lineStyleModel,group)},_getEdgesPoints:function(points,lineWidth,orient){var rs=[points[0].slice(),points[points.length-1].slice()];var idx=orient==="horizontal"?0:1;rs[0][idx]=rs[0][idx]-lineWidth/2;rs[1][idx]=rs[1][idx]+lineWidth/2;return rs},_drawSplitline:function(points,lineStyleModel,group){var poyline=new graphic.Polyline({z2:20,shape:{points:points},style:lineStyleModel});group.add(poyline)},_getLinePointsOfOneWeek:function(calendarModel,date,orient){var coordSys=calendarModel.coordinateSystem;date=coordSys.getDateInfo(date);var points=[];for(var i=0;i<7;i++){var tmpD=coordSys.getNextNDay(date.time,i);var point=coordSys.dataToRect([tmpD.time],false);points[2*tmpD.day]=point.tl;points[2*tmpD.day+1]=point[orient==="horizontal"?"bl":"tr"]}return points},_formatterLabel:function(formatter,params){if(typeof formatter==="string"&&formatter){return formatUtil.formatTplSimple(formatter,params)}if(typeof formatter==="function"){return formatter(params)}return params.nameMap},_yearTextPositionControl:function(textEl,point,orient,position,margin){point=point.slice();var aligns=["center","bottom"];if(position==="bottom"){point[1]+=margin;aligns=["center","top"]}else{if(position==="left"){point[0]-=margin}else{if(position==="right"){point[0]+=margin;aligns=["center","top"]}else{point[1]-=margin}}}var rotate=0;if(position==="left"||position==="right"){rotate=Math.PI/2}return{rotation:rotate,position:point,style:{textAlign:aligns[0],textVerticalAlign:aligns[1]}}},_renderYearText:function(calendarModel,rangeData,orient,group){var yearLabel=calendarModel.getModel("yearLabel");if(!yearLabel.get("show")){return}var margin=yearLabel.get("margin");var pos=yearLabel.get("position");if(!pos){pos=orient!=="horizontal"?"top":"left"}var points=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]];var xc=(points[0][0]+points[1][0])/2;var yc=(points[0][1]+points[1][1])/2;var idx=orient==="horizontal"?0:1;var posPoints={top:[xc,points[idx][1]],bottom:[xc,points[1-idx][1]],left:[points[1-idx][0],yc],right:[points[idx][0],yc]};var name=rangeData.start.y;if(+rangeData.end.y>+rangeData.start.y){name=name+"-"+rangeData.end.y}var formatter=yearLabel.get("formatter");var params={start:rangeData.start.y,end:rangeData.end.y,nameMap:name};var content=this._formatterLabel(formatter,params);var yearText=new graphic.Text({z2:30});graphic.setTextStyle(yearText.style,yearLabel,{text:content}),yearText.attr(this._yearTextPositionControl(yearText,posPoints[pos],orient,pos,margin));group.add(yearText)},_monthTextPositionControl:function(point,isCenter,orient,position,margin){var align="left";var vAlign="top";var x=point[0];var y=point[1];if(orient==="horizontal"){y=y+margin;if(isCenter){align="center"}if(position==="start"){vAlign="bottom"}}else{x=x+margin;if(isCenter){vAlign="middle"}if(position==="start"){align="right"}}return{x:x,y:y,textAlign:align,textVerticalAlign:vAlign}},_renderMonthText:function(calendarModel,orient,group){var monthLabel=calendarModel.getModel("monthLabel");if(!monthLabel.get("show")){return}var nameMap=monthLabel.get("nameMap");var margin=monthLabel.get("margin");var pos=monthLabel.get("position");var align=monthLabel.get("align");var termPoints=[this._tlpoints,this._blpoints];if(zrUtil.isString(nameMap)){nameMap=MONTH_TEXT[nameMap.toUpperCase()]||[]}var idx=pos==="start"?0:1;var axis=orient==="horizontal"?0:1;margin=pos==="start"?-margin:margin;var isCenter=(align==="center");for(var i=0;i<termPoints[idx].length-1;i++){var tmp=termPoints[idx][i].slice();var firstDay=this._firstDayOfMonth[i];if(isCenter){var firstDayPoints=this._firstDayPoints[i];tmp[axis]=(firstDayPoints[axis]+termPoints[0][i+1][axis])/2}var formatter=monthLabel.get("formatter");var name=nameMap[+firstDay.m-1];var params={yyyy:firstDay.y,yy:(firstDay.y+"").slice(2),MM:firstDay.m,M:+firstDay.m,nameMap:name};var content=this._formatterLabel(formatter,params);var monthText=new graphic.Text({z2:30});zrUtil.extend(graphic.setTextStyle(monthText.style,monthLabel,{text:content}),this._monthTextPositionControl(tmp,isCenter,orient,pos,margin));
group.add(monthText)}},_weekTextPositionControl:function(point,orient,position,margin,cellSize){var align="center";var vAlign="middle";var x=point[0];var y=point[1];var isStart=position==="start";if(orient==="horizontal"){x=x+margin+(isStart?1:-1)*cellSize[0]/2;align=isStart?"right":"left"}else{y=y+margin+(isStart?1:-1)*cellSize[1]/2;vAlign=isStart?"bottom":"top"}return{x:x,y:y,textAlign:align,textVerticalAlign:vAlign}},_renderWeekText:function(calendarModel,rangeData,orient,group){var dayLabel=calendarModel.getModel("dayLabel");if(!dayLabel.get("show")){return}var coordSys=calendarModel.coordinateSystem;var pos=dayLabel.get("position");var nameMap=dayLabel.get("nameMap");var margin=dayLabel.get("margin");var firstDayOfWeek=coordSys.getFirstDayOfWeek();if(zrUtil.isString(nameMap)){nameMap=WEEK_TEXT[nameMap.toUpperCase()]||[]}var start=coordSys.getNextNDay(rangeData.end.time,(7-rangeData.lweek)).time;var cellSize=[coordSys.getCellWidth(),coordSys.getCellHeight()];margin=numberUtil.parsePercent(margin,cellSize[orient==="horizontal"?0:1]);if(pos==="start"){start=coordSys.getNextNDay(rangeData.start.time,-(7+rangeData.fweek)).time;margin=-margin}for(var i=0;i<7;i++){var tmpD=coordSys.getNextNDay(start,i);var point=coordSys.dataToRect([tmpD.time],false).center;var day=i;day=Math.abs((i+firstDayOfWeek)%7);var weekText=new graphic.Text({z2:30});zrUtil.extend(graphic.setTextStyle(weekText.style,dayLabel,{text:nameMap[day]}),this._weekTextPositionControl(point,orient,pos,margin,cellSize));group.add(weekText)}}})}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);var graphic=__webpack_require__(20);var layout=__webpack_require__(74);echarts.extendComponentModel({type:"title",layoutMode:{type:"box",ignoreSize:true},defaultOption:{zlevel:0,z:6,show:true,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}});echarts.extendComponentView({type:"title",render:function(titleModel,ecModel,api){this.group.removeAll();if(!titleModel.get("show")){return}var group=this.group;var textStyleModel=titleModel.getModel("textStyle");var subtextStyleModel=titleModel.getModel("subtextStyle");var textAlign=titleModel.get("textAlign");var textBaseline=titleModel.get("textBaseline");var textEl=new graphic.Text({style:graphic.setTextStyle({},textStyleModel,{text:titleModel.get("text"),textFill:textStyleModel.getTextColor()},{disableBox:true}),z2:10});var textRect=textEl.getBoundingRect();var subText=titleModel.get("subtext");var subTextEl=new graphic.Text({style:graphic.setTextStyle({},subtextStyleModel,{text:subText,textFill:subtextStyleModel.getTextColor(),y:textRect.height+titleModel.get("itemGap"),textVerticalAlign:"top"},{disableBox:true}),z2:10});var link=titleModel.get("link");var sublink=titleModel.get("sublink");textEl.silent=!link;subTextEl.silent=!sublink;if(link){textEl.on("click",function(){window.open(link,"_"+titleModel.get("target"))})}if(sublink){subTextEl.on("click",function(){window.open(sublink,"_"+titleModel.get("subtarget"))})}group.add(textEl);subText&&group.add(subTextEl);var groupRect=group.getBoundingRect();var layoutOption=titleModel.getBoxLayoutParams();layoutOption.width=groupRect.width;layoutOption.height=groupRect.height;var layoutRect=layout.getLayoutRect(layoutOption,{width:api.getWidth(),height:api.getHeight()},titleModel.get("padding"));if(!textAlign){textAlign=titleModel.get("left")||titleModel.get("right");if(textAlign==="middle"){textAlign="center"}if(textAlign==="right"){layoutRect.x+=layoutRect.width}else{if(textAlign==="center"){layoutRect.x+=layoutRect.width/2}}}if(!textBaseline){textBaseline=titleModel.get("top")||titleModel.get("bottom");if(textBaseline==="center"){textBaseline="middle"}if(textBaseline==="bottom"){layoutRect.y+=layoutRect.height}else{if(textBaseline==="middle"){layoutRect.y+=layoutRect.height/2}}textBaseline=textBaseline||"top"}group.attr("position",[layoutRect.x,layoutRect.y]);var alignStyle={textAlign:textAlign,textVerticalAlign:textBaseline};textEl.setStyle(alignStyle);subTextEl.setStyle(alignStyle);groupRect=group.getBoundingRect();var padding=layoutRect.margin;var style=titleModel.getItemStyle(["color","opacity"]);style.fill=titleModel.get("backgroundColor");var rect=new graphic.Rect({shape:{x:groupRect.x-padding[3],y:groupRect.y-padding[0],width:groupRect.width+padding[1]+padding[3],height:groupRect.height+padding[0]+padding[2],r:titleModel.get("borderRadius")},style:style,silent:true});graphic.subPixelOptimizeRect(rect);group.add(rect)}})}),(function(module,exports,__webpack_require__){__webpack_require__(372);__webpack_require__(373);__webpack_require__(376);__webpack_require__(377);__webpack_require__(378);__webpack_require__(379);__webpack_require__(380);__webpack_require__(382);__webpack_require__(383)}),(function(module,exports,__webpack_require__){__webpack_require__(72).registerSubTypeDefaulter("dataZoom",function(){return"slider"
})}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var env=__webpack_require__(2);var echarts=__webpack_require__(1);var modelUtil=__webpack_require__(5);var helper=__webpack_require__(374);var AxisProxy=__webpack_require__(375);var each=zrUtil.each;var eachAxisDim=helper.eachAxisDim;var DataZoomModel=echarts.extendComponentModel({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(option,parentModel,ecModel){this._dataIntervalByAxis={};this._dataInfo={};this._axisProxies={};this.textStyleModel;this._autoThrottle=true;this._rangePropMode=["percent","percent"];var rawOption=retrieveRaw(option);this.mergeDefaultAndTheme(option,ecModel);this.doInit(rawOption)},mergeOption:function(newOption){var rawOption=retrieveRaw(newOption);zrUtil.merge(this.option,newOption,true);this.doInit(rawOption)},doInit:function(rawOption){var thisOption=this.option;if(!env.canvasSupported){thisOption.realtime=false}this._setDefaultThrottle(rawOption);updateRangeUse(this,rawOption);each([["start","startValue"],["end","endValue"]],function(names,index){if(this._rangePropMode[index]==="value"){thisOption[names[0]]=null}},this);this.textStyleModel=this.getModel("textStyle");this._resetTarget();this._giveAxisProxies()},_giveAxisProxies:function(){var axisProxies=this._axisProxies;this.eachTargetAxis(function(dimNames,axisIndex,dataZoomModel,ecModel){var axisModel=this.dependentModels[dimNames.axis][axisIndex];var axisProxy=axisModel.__dzAxisProxy||(axisModel.__dzAxisProxy=new AxisProxy(dimNames.name,axisIndex,this,ecModel));axisProxies[dimNames.name+"_"+axisIndex]=axisProxy},this)},_resetTarget:function(){var thisOption=this.option;var autoMode=this._judgeAutoMode();eachAxisDim(function(dimNames){var axisIndexName=dimNames.axisIndex;thisOption[axisIndexName]=modelUtil.normalizeToArray(thisOption[axisIndexName])},this);if(autoMode==="axisIndex"){this._autoSetAxisIndex()}else{if(autoMode==="orient"){this._autoSetOrient()}}},_judgeAutoMode:function(){var thisOption=this.option;var hasIndexSpecified=false;eachAxisDim(function(dimNames){if(thisOption[dimNames.axisIndex]!=null){hasIndexSpecified=true}},this);var orient=thisOption.orient;if(orient==null&&hasIndexSpecified){return"orient"}else{if(!hasIndexSpecified){if(orient==null){thisOption.orient="horizontal"}return"axisIndex"}}},_autoSetAxisIndex:function(){var autoAxisIndex=true;var orient=this.get("orient",true);var thisOption=this.option;var dependentModels=this.dependentModels;if(autoAxisIndex){var dimName=orient==="vertical"?"y":"x";if(dependentModels[dimName+"Axis"].length){thisOption[dimName+"AxisIndex"]=[0];autoAxisIndex=false}else{each(dependentModels.singleAxis,function(singleAxisModel){if(autoAxisIndex&&singleAxisModel.get("orient",true)===orient){thisOption.singleAxisIndex=[singleAxisModel.componentIndex];autoAxisIndex=false}})}}if(autoAxisIndex){eachAxisDim(function(dimNames){if(!autoAxisIndex){return}var axisIndices=[];var axisModels=this.dependentModels[dimNames.axis];if(axisModels.length&&!axisIndices.length){for(var i=0,len=axisModels.length;i<len;i++){if(axisModels[i].get("type")==="category"){axisIndices.push(i)}}}thisOption[dimNames.axisIndex]=axisIndices;if(axisIndices.length){autoAxisIndex=false}},this)}if(autoAxisIndex){this.ecModel.eachSeries(function(seriesModel){if(this._isSeriesHasAllAxesTypeOf(seriesModel,"value")){eachAxisDim(function(dimNames){var axisIndices=thisOption[dimNames.axisIndex];var axisIndex=seriesModel.get(dimNames.axisIndex);var axisId=seriesModel.get(dimNames.axisId);var axisModel=seriesModel.ecModel.queryComponents({mainType:dimNames.axis,index:axisIndex,id:axisId})[0];if(true){if(!axisModel){throw new Error(dimNames.axis+' "'+zrUtil.retrieve(axisIndex,axisId,0)+'" not found')}}axisIndex=axisModel.componentIndex;if(zrUtil.indexOf(axisIndices,axisIndex)<0){axisIndices.push(axisIndex)}})}},this)}},_autoSetOrient:function(){var dim;this.eachTargetAxis(function(dimNames){!dim&&(dim=dimNames.name)},this);this.option.orient=dim==="y"?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(seriesModel,axisType){var is=true;eachAxisDim(function(dimNames){var seriesAxisIndex=seriesModel.get(dimNames.axisIndex);var axisModel=this.dependentModels[dimNames.axis][seriesAxisIndex];if(!axisModel||axisModel.get("type")!==axisType){is=false}},this);return is},_setDefaultThrottle:function(rawOption){if(rawOption.hasOwnProperty("throttle")){this._autoThrottle=false}if(this._autoThrottle){var globalOption=this.ecModel.option;this.option.throttle=(globalOption.animation&&globalOption.animationDurationUpdate>0)?100:20}},getFirstTargetAxisModel:function(){var firstAxisModel;eachAxisDim(function(dimNames){if(firstAxisModel==null){var indices=this.get(dimNames.axisIndex);
if(indices.length){firstAxisModel=this.dependentModels[dimNames.axis][indices[0]]}}},this);return firstAxisModel},eachTargetAxis:function(callback,context){var ecModel=this.ecModel;eachAxisDim(function(dimNames){each(this.get(dimNames.axisIndex),function(axisIndex){callback.call(context,dimNames,axisIndex,this,ecModel)},this)},this)},getAxisProxy:function(dimName,axisIndex){return this._axisProxies[dimName+"_"+axisIndex]},getAxisModel:function(dimName,axisIndex){var axisProxy=this.getAxisProxy(dimName,axisIndex);return axisProxy&&axisProxy.getAxisModel()},setRawRange:function(opt,ignoreUpdateRangeUsg){each(["start","end","startValue","endValue"],function(name){this.option[name]=opt[name]},this);!ignoreUpdateRangeUsg&&updateRangeUse(this,opt)},getPercentRange:function(){var axisProxy=this.findRepresentativeAxisProxy();if(axisProxy){return axisProxy.getDataPercentWindow()}},getValueRange:function(axisDimName,axisIndex){if(axisDimName==null&&axisIndex==null){var axisProxy=this.findRepresentativeAxisProxy();if(axisProxy){return axisProxy.getDataValueWindow()}}else{return this.getAxisProxy(axisDimName,axisIndex).getDataValueWindow()}},findRepresentativeAxisProxy:function(axisModel){if(axisModel){return axisModel.__dzAxisProxy}var axisProxies=this._axisProxies;for(var key in axisProxies){if(axisProxies.hasOwnProperty(key)&&axisProxies[key].hostedBy(this)){return axisProxies[key]}}for(var key in axisProxies){if(axisProxies.hasOwnProperty(key)&&!axisProxies[key].hostedBy(this)){return axisProxies[key]}}},getRangePropMode:function(){return this._rangePropMode.slice()}});function retrieveRaw(option){var ret={};each(["start","end","startValue","endValue","throttle"],function(name){option.hasOwnProperty(name)&&(ret[name]=option[name])});return ret}function updateRangeUse(dataZoomModel,rawOption){var rangePropMode=dataZoomModel._rangePropMode;var rangeModeInOption=dataZoomModel.get("rangeMode");each([["start","startValue"],["end","endValue"]],function(names,index){var percentSpecified=rawOption[names[0]]!=null;var valueSpecified=rawOption[names[1]]!=null;if(percentSpecified&&!valueSpecified){rangePropMode[index]="percent"}else{if(!percentSpecified&&valueSpecified){rangePropMode[index]="value"}else{if(rangeModeInOption){rangePropMode[index]=rangeModeInOption[index]}else{if(percentSpecified){rangePropMode[index]="percent"}}}}})}module.exports=DataZoomModel}),(function(module,exports,__webpack_require__){var formatUtil=__webpack_require__(6);var zrUtil=__webpack_require__(4);var helper={};var AXIS_DIMS=["x","y","z","radius","angle","single"];var COORDS=["cartesian2d","polar","singleAxis"];helper.isCoordSupported=function(coordType){return zrUtil.indexOf(COORDS,coordType)>=0};helper.createNameEach=function(names,attrs){names=names.slice();var capitalNames=zrUtil.map(names,formatUtil.capitalFirst);attrs=(attrs||[]).slice();var capitalAttrs=zrUtil.map(attrs,formatUtil.capitalFirst);return function(callback,context){zrUtil.each(names,function(name,index){var nameObj={name:name,capital:capitalNames[index]};for(var j=0;j<attrs.length;j++){nameObj[attrs[j]]=name+capitalAttrs[j]}callback.call(context,nameObj)})}};helper.eachAxisDim=helper.createNameEach(AXIS_DIMS,["axisIndex","axis","index","id"]);helper.createLinkedNodesFinder=function(forEachNode,forEachEdgeType,edgeIdGetter){return function(sourceNode){var result={nodes:[],records:{}};forEachEdgeType(function(edgeType){result.records[edgeType.name]={}});if(!sourceNode){return result}absorb(sourceNode,result);var existsLink;do{existsLink=false;forEachNode(processSingleNode)}while(existsLink);function processSingleNode(node){if(!isNodeAbsorded(node,result)&&isLinked(node,result)){absorb(node,result);existsLink=true}}return result};function isNodeAbsorded(node,result){return zrUtil.indexOf(result.nodes,node)>=0}function isLinked(node,result){var hasLink=false;forEachEdgeType(function(edgeType){zrUtil.each(edgeIdGetter(node,edgeType)||[],function(edgeId){result.records[edgeType.name][edgeId]&&(hasLink=true)})});return hasLink}function absorb(node,result){result.nodes.push(node);forEachEdgeType(function(edgeType){zrUtil.each(edgeIdGetter(node,edgeType)||[],function(edgeId){result.records[edgeType.name][edgeId]=true})})}};module.exports=helper}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var numberUtil=__webpack_require__(7);var helper=__webpack_require__(374);var each=zrUtil.each;var asc=numberUtil.asc;var AxisProxy=function(dimName,axisIndex,dataZoomModel,ecModel){this._dimName=dimName;this._axisIndex=axisIndex;this._valueWindow;this._percentWindow;this._dataExtent;this._minMaxSpan;this.ecModel=ecModel;this._dataZoomModel=dataZoomModel};AxisProxy.prototype={constructor:AxisProxy,hostedBy:function(dataZoomModel){return this._dataZoomModel===dataZoomModel},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var seriesModels=[];var ecModel=this.ecModel;
ecModel.eachSeries(function(seriesModel){if(helper.isCoordSupported(seriesModel.get("coordinateSystem"))){var dimName=this._dimName;var axisModel=ecModel.queryComponents({mainType:dimName+"Axis",index:seriesModel.get(dimName+"AxisIndex"),id:seriesModel.get(dimName+"AxisId")})[0];if(this._axisIndex===(axisModel&&axisModel.componentIndex)){seriesModels.push(seriesModel)}}},this);return seriesModels},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var axisDim=this._dimName;var ecModel=this.ecModel;var axisModel=this.getAxisModel();var isCartesian=axisDim==="x"||axisDim==="y";var otherAxisDim;var coordSysIndexName;if(isCartesian){coordSysIndexName="gridIndex";otherAxisDim=axisDim==="x"?"y":"x"}else{coordSysIndexName="polarIndex";otherAxisDim=axisDim==="angle"?"radius":"angle"}var foundOtherAxisModel;ecModel.eachComponent(otherAxisDim+"Axis",function(otherAxisModel){if((otherAxisModel.get(coordSysIndexName)||0)===(axisModel.get(coordSysIndexName)||0)){foundOtherAxisModel=otherAxisModel}});return foundOtherAxisModel},getMinMaxSpan:function(){return zrUtil.clone(this._minMaxSpan)},calculateDataWindow:function(opt){var dataExtent=this._dataExtent;var axisModel=this.getAxisModel();var scale=axisModel.axis.scale;var rangePropMode=this._dataZoomModel.getRangePropMode();var percentExtent=[0,100];var percentWindow=[opt.start,opt.end];var valueWindow=[];each(["startValue","endValue"],function(prop){valueWindow.push(opt[prop]!=null?scale.parse(opt[prop]):null)});each([0,1],function(idx){var boundValue=valueWindow[idx];var boundPercent=percentWindow[idx];if(rangePropMode[idx]==="percent"){if(boundPercent==null){boundPercent=percentExtent[idx]}boundValue=scale.parse(numberUtil.linearMap(boundPercent,percentExtent,dataExtent,true))}else{boundPercent=numberUtil.linearMap(boundValue,dataExtent,percentExtent,true)}valueWindow[idx]=boundValue;percentWindow[idx]=boundPercent});return{valueWindow:asc(valueWindow),percentWindow:asc(percentWindow)}},reset:function(dataZoomModel){if(dataZoomModel!==this._dataZoomModel){return}this._dataExtent=calculateDataExtent(this,this._dimName,this.getTargetSeriesModels());var dataWindow=this.calculateDataWindow(dataZoomModel.option);this._valueWindow=dataWindow.valueWindow;this._percentWindow=dataWindow.percentWindow;setMinMaxSpan(this);setAxisModel(this)},restore:function(dataZoomModel){if(dataZoomModel!==this._dataZoomModel){return}this._valueWindow=this._percentWindow=null;setAxisModel(this,true)},filterData:function(dataZoomModel){if(dataZoomModel!==this._dataZoomModel){return}var axisDim=this._dimName;var seriesModels=this.getTargetSeriesModels();var filterMode=dataZoomModel.get("filterMode");var valueWindow=this._valueWindow;if(filterMode==="none"){return}var otherAxisModel=this.getOtherAxisModel();if(dataZoomModel.get("$fromToolbox")&&otherAxisModel&&otherAxisModel.get("type")==="category"){filterMode="empty"}each(seriesModels,function(seriesModel){var seriesData=seriesModel.getData();var dataDims=seriesModel.coordDimToDataDim(axisDim);if(filterMode==="weakFilter"){seriesData&&seriesData.filterSelf(function(dataIndex){var leftOut;var rightOut;var hasValue;for(var i=0;i<dataDims.length;i++){var value=seriesData.get(dataDims[i],dataIndex);var thisHasValue=!isNaN(value);var thisLeftOut=value<valueWindow[0];var thisRightOut=value>valueWindow[1];if(thisHasValue&&!thisLeftOut&&!thisRightOut){return true}thisHasValue&&(hasValue=true);thisLeftOut&&(leftOut=true);thisRightOut&&(rightOut=true)}return hasValue&&leftOut&&rightOut})}else{seriesData&&each(dataDims,function(dim){if(filterMode==="empty"){seriesModel.setData(seriesData.map(dim,function(value){return !isInWindow(value)?NaN:value}))}else{seriesData.filterSelf(dim,isInWindow)}})}});function isInWindow(value){return value>=valueWindow[0]&&value<=valueWindow[1]}}};function calculateDataExtent(axisProxy,axisDim,seriesModels){var dataExtent=[Infinity,-Infinity];each(seriesModels,function(seriesModel){var seriesData=seriesModel.getData();if(seriesData){each(seriesModel.coordDimToDataDim(axisDim),function(dim){var seriesExtent=seriesData.getDataExtent(dim);seriesExtent[0]<dataExtent[0]&&(dataExtent[0]=seriesExtent[0]);seriesExtent[1]>dataExtent[1]&&(dataExtent[1]=seriesExtent[1])})}});if(dataExtent[1]<dataExtent[0]){dataExtent=[NaN,NaN]}fixExtentByAxis(axisProxy,dataExtent);return dataExtent}function fixExtentByAxis(axisProxy,dataExtent){var axisModel=axisProxy.getAxisModel();var min=axisModel.getMin(true);var isCategoryAxis=axisModel.get("type")==="category";var axisDataLen=isCategoryAxis&&(axisModel.get("data")||[]).length;if(min!=null&&min!=="dataMin"&&typeof min!=="function"){dataExtent[0]=min}else{if(isCategoryAxis){dataExtent[0]=axisDataLen>0?0:NaN}}var max=axisModel.getMax(true);if(max!=null&&max!=="dataMax"&&typeof max!=="function"){dataExtent[1]=max}else{if(isCategoryAxis){dataExtent[1]=axisDataLen>0?axisDataLen-1:NaN}}if(!axisModel.get("scale",true)){dataExtent[0]>0&&(dataExtent[0]=0);
dataExtent[1]<0&&(dataExtent[1]=0)}return dataExtent}function setAxisModel(axisProxy,isRestore){var axisModel=axisProxy.getAxisModel();var percentWindow=axisProxy._percentWindow;var valueWindow=axisProxy._valueWindow;if(!percentWindow){return}var precision=numberUtil.getPixelPrecision(valueWindow,[0,500]);precision=Math.min(precision,20);var useOrigin=isRestore||(percentWindow[0]===0&&percentWindow[1]===100);axisModel.setRange(useOrigin?null:+valueWindow[0].toFixed(precision),useOrigin?null:+valueWindow[1].toFixed(precision))}function setMinMaxSpan(axisProxy){var minMaxSpan=axisProxy._minMaxSpan={};var dataZoomModel=axisProxy._dataZoomModel;each(["min","max"],function(minMax){minMaxSpan[minMax+"Span"]=dataZoomModel.get(minMax+"Span");var valueSpan=dataZoomModel.get(minMax+"ValueSpan");if(valueSpan!=null){minMaxSpan[minMax+"ValueSpan"]=valueSpan;valueSpan=axisProxy.getAxisModel().axis.scale.parse(valueSpan);if(valueSpan!=null){minMaxSpan[minMax+"Span"]=numberUtil.linearMap(valueSpan,axisProxy._dataExtent,[0,100],true)}}})}module.exports=AxisProxy}),(function(module,exports,__webpack_require__){var ComponentView=__webpack_require__(84);module.exports=ComponentView.extend({type:"dataZoom",render:function(dataZoomModel,ecModel,api,payload){this.dataZoomModel=dataZoomModel;this.ecModel=ecModel;this.api=api},getTargetCoordInfo:function(){var dataZoomModel=this.dataZoomModel;var ecModel=this.ecModel;var coordSysLists={};dataZoomModel.eachTargetAxis(function(dimNames,axisIndex){var axisModel=ecModel.getComponent(dimNames.axis,axisIndex);if(axisModel){var coordModel=axisModel.getCoordSysModel();coordModel&&save(coordModel,axisModel,coordSysLists[coordModel.mainType]||(coordSysLists[coordModel.mainType]=[]),coordModel.componentIndex)}},this);function save(coordModel,axisModel,store,coordIndex){var item;for(var i=0;i<store.length;i++){if(store[i].model===coordModel){item=store[i];break}}if(!item){store.push(item={model:coordModel,axisModels:[],coordIndex:coordIndex})}item.axisModels.push(axisModel)}return coordSysLists}})}),(function(module,exports,__webpack_require__){var DataZoomModel=__webpack_require__(373);var SliderZoomModel=DataZoomModel.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:true,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:0.5,opacity:0.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:0.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:true,showDataShadow:"auto",realtime:true,zoomLock:false,textStyle:{color:"#333"}}});module.exports=SliderZoomModel}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var graphic=__webpack_require__(20);var throttle=__webpack_require__(86);var DataZoomView=__webpack_require__(376);var Rect=graphic.Rect;var numberUtil=__webpack_require__(7);var linearMap=numberUtil.linearMap;var layout=__webpack_require__(74);var sliderMove=__webpack_require__(242);var eventTool=__webpack_require__(93);var asc=numberUtil.asc;var bind=zrUtil.bind;var each=zrUtil.each;var DEFAULT_LOCATION_EDGE_GAP=7;var DEFAULT_FRAME_BORDER_WIDTH=1;var DEFAULT_FILLER_SIZE=30;var HORIZONTAL="horizontal";var VERTICAL="vertical";var LABEL_GAP=5;var SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"];var SliderZoomView=DataZoomView.extend({type:"dataZoom.slider",init:function(ecModel,api){this._displayables={};this._orient;this._range;this._handleEnds;this._size;this._handleWidth;this._handleHeight;this._location;this._dragging;this._dataShadowInfo;this.api=api},render:function(dataZoomModel,ecModel,api,payload){SliderZoomView.superApply(this,"render",arguments);throttle.createOrUpdate(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate");this._orient=dataZoomModel.get("orient");if(this.dataZoomModel.get("show")===false){this.group.removeAll();return}if(!payload||payload.type!=="dataZoom"||payload.from!==this.uid){this._buildView()}this._updateView()},remove:function(){SliderZoomView.superApply(this,"remove",arguments);throttle.clear(this,"_dispatchZoomAction")},dispose:function(){SliderZoomView.superApply(this,"dispose",arguments);throttle.clear(this,"_dispatchZoomAction")},_buildView:function(){var thisGroup=this.group;thisGroup.removeAll();this._resetLocation();this._resetInterval();var barGroup=this._displayables.barGroup=new graphic.Group();this._renderBackground();this._renderHandle();this._renderDataShadow();thisGroup.add(barGroup);this._positionGroup()},_resetLocation:function(){var dataZoomModel=this.dataZoomModel;var api=this.api;var coordRect=this._findCoordRect();var ecSize={width:api.getWidth(),height:api.getHeight()};var positionInfo=this._orient===HORIZONTAL?{right:ecSize.width-coordRect.x-coordRect.width,top:(ecSize.height-DEFAULT_FILLER_SIZE-DEFAULT_LOCATION_EDGE_GAP),width:coordRect.width,height:DEFAULT_FILLER_SIZE}:{right:DEFAULT_LOCATION_EDGE_GAP,top:coordRect.y,width:DEFAULT_FILLER_SIZE,height:coordRect.height};
var layoutParams=layout.getLayoutParams(dataZoomModel.option);zrUtil.each(["right","top","width","height"],function(name){if(layoutParams[name]==="ph"){layoutParams[name]=positionInfo[name]}});var layoutRect=layout.getLayoutRect(layoutParams,ecSize,dataZoomModel.padding);this._location={x:layoutRect.x,y:layoutRect.y};this._size=[layoutRect.width,layoutRect.height];this._orient===VERTICAL&&this._size.reverse()},_positionGroup:function(){var thisGroup=this.group;var location=this._location;var orient=this._orient;var targetAxisModel=this.dataZoomModel.getFirstTargetAxisModel();var inverse=targetAxisModel&&targetAxisModel.get("inverse");var barGroup=this._displayables.barGroup;var otherAxisInverse=(this._dataShadowInfo||{}).otherAxisInverse;barGroup.attr((orient===HORIZONTAL&&!inverse)?{scale:otherAxisInverse?[1,1]:[1,-1]}:(orient===HORIZONTAL&&inverse)?{scale:otherAxisInverse?[-1,1]:[-1,-1]}:(orient===VERTICAL&&!inverse)?{scale:otherAxisInverse?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:otherAxisInverse?[-1,-1]:[-1,1],rotation:Math.PI/2});var rect=thisGroup.getBoundingRect([barGroup]);thisGroup.attr("position",[location.x-rect.x,location.y-rect.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var dataZoomModel=this.dataZoomModel;var size=this._size;var barGroup=this._displayables.barGroup;barGroup.add(new Rect({silent:true,shape:{x:0,y:0,width:size[0],height:size[1]},style:{fill:dataZoomModel.get("backgroundColor")},z2:-40}));barGroup.add(new Rect({shape:{x:0,y:0,width:size[0],height:size[1]},style:{fill:"transparent"},z2:0,onclick:zrUtil.bind(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var info=this._dataShadowInfo=this._prepareDataShadowInfo();if(!info){return}var size=this._size;var seriesModel=info.series;var data=seriesModel.getRawData();var otherDim=seriesModel.getShadowDim?seriesModel.getShadowDim():info.otherDim;if(otherDim==null){return}var otherDataExtent=data.getDataExtent(otherDim);var otherOffset=(otherDataExtent[1]-otherDataExtent[0])*0.3;otherDataExtent=[otherDataExtent[0]-otherOffset,otherDataExtent[1]+otherOffset];var otherShadowExtent=[0,size[1]];var thisShadowExtent=[0,size[0]];var areaPoints=[[size[0],0],[0,0]];var linePoints=[];var step=thisShadowExtent[1]/(data.count()-1);var thisCoord=0;var stride=Math.round(data.count()/size[0]);var lastIsEmpty;data.each([otherDim],function(value,index){if(stride>0&&(index%stride)){thisCoord+=step;return}var isEmpty=value==null||isNaN(value)||value==="";var otherCoord=isEmpty?0:linearMap(value,otherDataExtent,otherShadowExtent,true);if(isEmpty&&!lastIsEmpty&&index){areaPoints.push([areaPoints[areaPoints.length-1][0],0]);linePoints.push([linePoints[linePoints.length-1][0],0])}else{if(!isEmpty&&lastIsEmpty){areaPoints.push([thisCoord,0]);linePoints.push([thisCoord,0])}}areaPoints.push([thisCoord,otherCoord]);linePoints.push([thisCoord,otherCoord]);thisCoord+=step;lastIsEmpty=isEmpty});var dataZoomModel=this.dataZoomModel;this._displayables.barGroup.add(new graphic.Polygon({shape:{points:areaPoints},style:zrUtil.defaults({fill:dataZoomModel.get("dataBackgroundColor")},dataZoomModel.getModel("dataBackground.areaStyle").getAreaStyle()),silent:true,z2:-20}));this._displayables.barGroup.add(new graphic.Polyline({shape:{points:linePoints},style:dataZoomModel.getModel("dataBackground.lineStyle").getLineStyle(),silent:true,z2:-19}))},_prepareDataShadowInfo:function(){var dataZoomModel=this.dataZoomModel;var showDataShadow=dataZoomModel.get("showDataShadow");if(showDataShadow===false){return}var result;var ecModel=this.ecModel;dataZoomModel.eachTargetAxis(function(dimNames,axisIndex){var seriesModels=dataZoomModel.getAxisProxy(dimNames.name,axisIndex).getTargetSeriesModels();zrUtil.each(seriesModels,function(seriesModel){if(result){return}if(showDataShadow!==true&&zrUtil.indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,seriesModel.get("type"))<0){return}var thisAxis=ecModel.getComponent(dimNames.axis,axisIndex).axis;var otherDim=getOtherDim(dimNames.name);var otherAxisInverse;var coordSys=seriesModel.coordinateSystem;if(otherDim!=null&&coordSys.getOtherAxis){otherAxisInverse=coordSys.getOtherAxis(thisAxis).inverse}result={thisAxis:thisAxis,series:seriesModel,thisDim:dimNames.name,otherDim:otherDim,otherAxisInverse:otherAxisInverse}},this)},this);return result},_renderHandle:function(){var displaybles=this._displayables;var handles=displaybles.handles=[];var handleLabels=displaybles.handleLabels=[];var barGroup=this._displayables.barGroup;var size=this._size;var dataZoomModel=this.dataZoomModel;barGroup.add(displaybles.filler=new Rect({draggable:true,cursor:getCursor(this._orient),drift:bind(this._onDragMove,this,"all"),onmousemove:function(e){eventTool.stop(e.event)},ondragstart:bind(this._showDataInfo,this,true),ondragend:bind(this._onDragEnd,this),onmouseover:bind(this._showDataInfo,this,true),onmouseout:bind(this._showDataInfo,this,false),style:{fill:dataZoomModel.get("fillerColor"),textPosition:"inside"}}));barGroup.add(new Rect(graphic.subPixelOptimizeRect({silent:true,shape:{x:0,y:0,width:size[0],height:size[1]},style:{stroke:dataZoomModel.get("dataBackgroundColor")||dataZoomModel.get("borderColor"),lineWidth:DEFAULT_FRAME_BORDER_WIDTH,fill:"rgba(0,0,0,0)"}})));
each([0,1],function(handleIndex){var path=graphic.createIcon(dataZoomModel.get("handleIcon"),{cursor:getCursor(this._orient),draggable:true,drift:bind(this._onDragMove,this,handleIndex),onmousemove:function(e){eventTool.stop(e.event)},ondragend:bind(this._onDragEnd,this),onmouseover:bind(this._showDataInfo,this,true),onmouseout:bind(this._showDataInfo,this,false)},{x:-1,y:0,width:2,height:2});var bRect=path.getBoundingRect();this._handleHeight=numberUtil.parsePercent(dataZoomModel.get("handleSize"),this._size[1]);this._handleWidth=bRect.width/bRect.height*this._handleHeight;path.setStyle(dataZoomModel.getModel("handleStyle").getItemStyle());var handleColor=dataZoomModel.get("handleColor");if(handleColor!=null){path.style.fill=handleColor}barGroup.add(handles[handleIndex]=path);var textStyleModel=dataZoomModel.textStyleModel;this.group.add(handleLabels[handleIndex]=new graphic.Text({silent:true,invisible:true,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:textStyleModel.getTextColor(),textFont:textStyleModel.getFont()},z2:10}))},this)},_resetInterval:function(){var range=this._range=this.dataZoomModel.getPercentRange();var viewExtent=this._getViewExtent();this._handleEnds=[linearMap(range[0],[0,100],viewExtent,true),linearMap(range[1],[0,100],viewExtent,true)]},_updateInterval:function(handleIndex,delta){var dataZoomModel=this.dataZoomModel;var handleEnds=this._handleEnds;var viewExtend=this._getViewExtent();var minMaxSpan=dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();var percentExtent=[0,100];sliderMove(delta,handleEnds,viewExtend,dataZoomModel.get("zoomLock")?"all":handleIndex,minMaxSpan.minSpan!=null?linearMap(minMaxSpan.minSpan,percentExtent,viewExtend,true):null,minMaxSpan.maxSpan!=null?linearMap(minMaxSpan.maxSpan,percentExtent,viewExtend,true):null);this._range=asc([linearMap(handleEnds[0],viewExtend,percentExtent,true),linearMap(handleEnds[1],viewExtend,percentExtent,true)])},_updateView:function(nonRealtime){var displaybles=this._displayables;var handleEnds=this._handleEnds;var handleInterval=asc(handleEnds.slice());var size=this._size;each([0,1],function(handleIndex){var handle=displaybles.handles[handleIndex];var handleHeight=this._handleHeight;handle.attr({scale:[handleHeight/2,handleHeight/2],position:[handleEnds[handleIndex],size[1]/2-handleHeight/2]})},this);displaybles.filler.setShape({x:handleInterval[0],y:0,width:handleInterval[1]-handleInterval[0],height:size[1]});this._updateDataInfo(nonRealtime)},_updateDataInfo:function(nonRealtime){var dataZoomModel=this.dataZoomModel;var displaybles=this._displayables;var handleLabels=displaybles.handleLabels;var orient=this._orient;var labelTexts=["",""];if(dataZoomModel.get("showDetail")){var axisProxy=dataZoomModel.findRepresentativeAxisProxy();if(axisProxy){var axis=axisProxy.getAxisModel().axis;var range=this._range;var dataInterval=nonRealtime?axisProxy.calculateDataWindow({start:range[0],end:range[1]}).valueWindow:axisProxy.getDataValueWindow();labelTexts=[this._formatLabel(dataInterval[0],axis),this._formatLabel(dataInterval[1],axis)]}}var orderedHandleEnds=asc(this._handleEnds.slice());setLabel.call(this,0);setLabel.call(this,1);function setLabel(handleIndex){var barTransform=graphic.getTransform(displaybles.handles[handleIndex].parent,this.group);var direction=graphic.transformDirection(handleIndex===0?"right":"left",barTransform);var offset=this._handleWidth/2+LABEL_GAP;var textPoint=graphic.applyTransform([orderedHandleEnds[handleIndex]+(handleIndex===0?-offset:offset),this._size[1]/2],barTransform);handleLabels[handleIndex].setStyle({x:textPoint[0],y:textPoint[1],textVerticalAlign:orient===HORIZONTAL?"middle":direction,textAlign:orient===HORIZONTAL?direction:"center",text:labelTexts[handleIndex]})}},_formatLabel:function(value,axis){var dataZoomModel=this.dataZoomModel;var labelFormatter=dataZoomModel.get("labelFormatter");var labelPrecision=dataZoomModel.get("labelPrecision");if(labelPrecision==null||labelPrecision==="auto"){labelPrecision=axis.getPixelPrecision()}var valueStr=(value==null||isNaN(value))?"":(axis.type==="category"||axis.type==="time")?axis.scale.getLabel(Math.round(value)):value.toFixed(Math.min(labelPrecision,20));return zrUtil.isFunction(labelFormatter)?labelFormatter(value,valueStr):zrUtil.isString(labelFormatter)?labelFormatter.replace("{value}",valueStr):valueStr},_showDataInfo:function(showOrHide){showOrHide=this._dragging||showOrHide;var handleLabels=this._displayables.handleLabels;handleLabels[0].attr("invisible",!showOrHide);handleLabels[1].attr("invisible",!showOrHide)},_onDragMove:function(handleIndex,dx,dy){this._dragging=true;var barTransform=this._displayables.barGroup.getLocalTransform();var vertex=graphic.applyTransform([dx,dy],barTransform,true);this._updateInterval(handleIndex,vertex[0]);var realtime=this.dataZoomModel.get("realtime");this._updateView(!realtime);if(realtime){realtime&&this._dispatchZoomAction()}},_onDragEnd:function(){this._dragging=false;this._showDataInfo(false);
this._dispatchZoomAction()},_onClickPanelClick:function(e){var size=this._size;var localPoint=this._displayables.barGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(localPoint[0]<0||localPoint[0]>size[0]||localPoint[1]<0||localPoint[1]>size[1]){return}var handleEnds=this._handleEnds;var center=(handleEnds[0]+handleEnds[1])/2;this._updateInterval("all",localPoint[0]-center);this._updateView();this._dispatchZoomAction()},_dispatchZoomAction:function(){var range=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:range[0],end:range[1]})},_findCoordRect:function(){var rect;each(this.getTargetCoordInfo(),function(coordInfoList){if(!rect&&coordInfoList.length){var coordSys=coordInfoList[0].model.coordinateSystem;rect=coordSys.getRect&&coordSys.getRect()}});if(!rect){var width=this.api.getWidth();var height=this.api.getHeight();rect={x:width*0.2,y:height*0.2,width:width*0.6,height:height*0.6}}return rect}});function getOtherDim(thisDim){var map={x:"y",y:"x",radius:"angle",angle:"radius"};return map[thisDim]}function getCursor(orient){return orient==="vertical"?"ns-resize":"ew-resize"}module.exports=SliderZoomView}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(373).extend({type:"dataZoom.inside",defaultOption:{disabled:false,zoomLock:false,zoomOnMouseWheel:true,moveOnMouseMove:true,preventDefaultMouseMove:true}})}),(function(module,exports,__webpack_require__){var DataZoomView=__webpack_require__(376);var zrUtil=__webpack_require__(4);var sliderMove=__webpack_require__(242);var roams=__webpack_require__(381);var bind=zrUtil.bind;var InsideZoomView=DataZoomView.extend({type:"dataZoom.inside",init:function(ecModel,api){this._range},render:function(dataZoomModel,ecModel,api,payload){InsideZoomView.superApply(this,"render",arguments);if(roams.shouldRecordRange(payload,dataZoomModel.id)){this._range=dataZoomModel.getPercentRange()}zrUtil.each(this.getTargetCoordInfo(),function(coordInfoList,coordSysName){var allCoordIds=zrUtil.map(coordInfoList,function(coordInfo){return roams.generateCoordId(coordInfo.model)});zrUtil.each(coordInfoList,function(coordInfo){var coordModel=coordInfo.model;var dataZoomOption=dataZoomModel.option;roams.register(api,{coordId:roams.generateCoordId(coordModel),allCoordIds:allCoordIds,containsPoint:function(e,x,y){return coordModel.coordinateSystem.containPoint([x,y])},dataZoomId:dataZoomModel.id,throttleRate:dataZoomModel.get("throttle",true),panGetRange:bind(this._onPan,this,coordInfo,coordSysName),zoomGetRange:bind(this._onZoom,this,coordInfo,coordSysName),zoomLock:dataZoomOption.zoomLock,disabled:dataZoomOption.disabled,roamControllerOpt:{zoomOnMouseWheel:dataZoomOption.zoomOnMouseWheel,moveOnMouseMove:dataZoomOption.moveOnMouseMove,preventDefaultMouseMove:dataZoomOption.preventDefaultMouseMove}})},this)},this)},dispose:function(){roams.unregister(this.api,this.dataZoomModel.id);InsideZoomView.superApply(this,"dispose",arguments);this._range=null},_onPan:function(coordInfo,coordSysName,controller,dx,dy,oldX,oldY,newX,newY){var range=this._range.slice();var axisModel=coordInfo.axisModels[0];if(!axisModel){return}var directionInfo=getDirectionInfo[coordSysName]([oldX,oldY],[newX,newY],axisModel,controller,coordInfo);var percentDelta=directionInfo.signal*(range[1]-range[0])*directionInfo.pixel/directionInfo.pixelLength;sliderMove(percentDelta,range,[0,100],"all");return(this._range=range)},_onZoom:function(coordInfo,coordSysName,controller,scale,mouseX,mouseY){var range=this._range.slice();var axisModel=coordInfo.axisModels[0];if(!axisModel){return}var directionInfo=getDirectionInfo[coordSysName](null,[mouseX,mouseY],axisModel,controller,coordInfo);var percentPoint=(directionInfo.signal>0?(directionInfo.pixelStart+directionInfo.pixelLength-directionInfo.pixel):(directionInfo.pixel-directionInfo.pixelStart))/directionInfo.pixelLength*(range[1]-range[0])+range[0];scale=Math.max(1/scale,0);range[0]=(range[0]-percentPoint)*scale+percentPoint;range[1]=(range[1]-percentPoint)*scale+percentPoint;var minMaxSpan=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();sliderMove(0,range,[0,100],0,minMaxSpan.minSpan,minMaxSpan.maxSpan);return(this._range=range)}});var getDirectionInfo={grid:function(oldPoint,newPoint,axisModel,controller,coordInfo){var axis=axisModel.axis;var ret={};var rect=coordInfo.model.coordinateSystem.getRect();oldPoint=oldPoint||[0,0];if(axis.dim==="x"){ret.pixel=newPoint[0]-oldPoint[0];ret.pixelLength=rect.width;ret.pixelStart=rect.x;ret.signal=axis.inverse?1:-1}else{ret.pixel=newPoint[1]-oldPoint[1];ret.pixelLength=rect.height;ret.pixelStart=rect.y;ret.signal=axis.inverse?-1:1}return ret},polar:function(oldPoint,newPoint,axisModel,controller,coordInfo){var axis=axisModel.axis;var ret={};var polar=coordInfo.model.coordinateSystem;var radiusExtent=polar.getRadiusAxis().getExtent();var angleExtent=polar.getAngleAxis().getExtent();oldPoint=oldPoint?polar.pointToCoord(oldPoint):[0,0];
newPoint=polar.pointToCoord(newPoint);if(axisModel.mainType==="radiusAxis"){ret.pixel=newPoint[0]-oldPoint[0];ret.pixelLength=radiusExtent[1]-radiusExtent[0];ret.pixelStart=radiusExtent[0];ret.signal=axis.inverse?1:-1}else{ret.pixel=newPoint[1]-oldPoint[1];ret.pixelLength=angleExtent[1]-angleExtent[0];ret.pixelStart=angleExtent[0];ret.signal=axis.inverse?-1:1}return ret},singleAxis:function(oldPoint,newPoint,axisModel,controller,coordInfo){var axis=axisModel.axis;var rect=coordInfo.model.coordinateSystem.getRect();var ret={};oldPoint=oldPoint||[0,0];if(axis.orient==="horizontal"){ret.pixel=newPoint[0]-oldPoint[0];ret.pixelLength=rect.width;ret.pixelStart=rect.x;ret.signal=axis.inverse?1:-1}else{ret.pixel=newPoint[1]-oldPoint[1];ret.pixelLength=rect.height;ret.pixelStart=rect.y;ret.signal=axis.inverse?-1:1}return ret}};module.exports=InsideZoomView}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var RoamController=__webpack_require__(186);var throttle=__webpack_require__(86);var curry=zrUtil.curry;var ATTR="\0_ec_dataZoom_roams";var roams={register:function(api,dataZoomInfo){var store=giveStore(api);var theDataZoomId=dataZoomInfo.dataZoomId;var theCoordId=dataZoomInfo.coordId;zrUtil.each(store,function(record,coordId){var dataZoomInfos=record.dataZoomInfos;if(dataZoomInfos[theDataZoomId]&&zrUtil.indexOf(dataZoomInfo.allCoordIds,theCoordId)<0){delete dataZoomInfos[theDataZoomId];record.count--}});cleanStore(store);var record=store[theCoordId];if(!record){record=store[theCoordId]={coordId:theCoordId,dataZoomInfos:{},count:0};record.controller=createController(api,record);record.dispatchAction=zrUtil.curry(dispatchAction,api)}!(record.dataZoomInfos[theDataZoomId])&&record.count++;record.dataZoomInfos[theDataZoomId]=dataZoomInfo;var controllerParams=mergeControllerParams(record.dataZoomInfos);record.controller.enable(controllerParams.controlType,controllerParams.opt);record.controller.setPointerChecker(dataZoomInfo.containsPoint);throttle.createOrUpdate(record,"dispatchAction",dataZoomInfo.throttleRate,"fixRate")},unregister:function(api,dataZoomId){var store=giveStore(api);zrUtil.each(store,function(record){record.controller.dispose();var dataZoomInfos=record.dataZoomInfos;if(dataZoomInfos[dataZoomId]){delete dataZoomInfos[dataZoomId];record.count--}});cleanStore(store)},shouldRecordRange:function(payload,dataZoomId){if(payload&&payload.type==="dataZoom"&&payload.batch){for(var i=0,len=payload.batch.length;i<len;i++){if(payload.batch[i].dataZoomId===dataZoomId){return false}}}return true},generateCoordId:function(coordModel){return coordModel.type+"\0_"+coordModel.id}};function giveStore(api){var zr=api.getZr();return zr[ATTR]||(zr[ATTR]={})}function createController(api,newRecord){var controller=new RoamController(api.getZr());controller.on("pan",curry(onPan,newRecord));controller.on("zoom",curry(onZoom,newRecord));return controller}function cleanStore(store){zrUtil.each(store,function(record,coordId){if(!record.count){record.controller.dispose();delete store[coordId]}})}function onPan(record,dx,dy,oldX,oldY,newX,newY){wrapAndDispatch(record,function(info){return info.panGetRange(record.controller,dx,dy,oldX,oldY,newX,newY)})}function onZoom(record,scale,mouseX,mouseY){wrapAndDispatch(record,function(info){return info.zoomGetRange(record.controller,scale,mouseX,mouseY)})}function wrapAndDispatch(record,getRange){var batch=[];zrUtil.each(record.dataZoomInfos,function(info){var range=getRange(info);!info.disabled&&range&&batch.push({dataZoomId:info.dataZoomId,start:range[0],end:range[1]})});record.dispatchAction(batch)}function dispatchAction(api,batch){api.dispatchAction({type:"dataZoom",batch:batch})}function mergeControllerParams(dataZoomInfos){var controlType;var opt={};var typePriority={"true":2,"move":1,"false":0,"undefined":-1};zrUtil.each(dataZoomInfos,function(dataZoomInfo){var oneType=dataZoomInfo.disabled?false:dataZoomInfo.zoomLock?"move":true;typePriority[oneType]>typePriority[controlType]&&(controlType=oneType);zrUtil.extend(opt,dataZoomInfo.roamControllerOpt)});return{controlType:controlType,opt:opt}}module.exports=roams}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);echarts.registerProcessor(function(ecModel,api){ecModel.eachComponent("dataZoom",function(dataZoomModel){dataZoomModel.eachTargetAxis(resetSingleAxis);dataZoomModel.eachTargetAxis(filterSingleAxis)});ecModel.eachComponent("dataZoom",function(dataZoomModel){var axisProxy=dataZoomModel.findRepresentativeAxisProxy();var percentRange=axisProxy.getDataPercentWindow();var valueRange=axisProxy.getDataValueWindow();dataZoomModel.setRawRange({start:percentRange[0],end:percentRange[1],startValue:valueRange[0],endValue:valueRange[1]},true)})});function resetSingleAxis(dimNames,axisIndex,dataZoomModel){dataZoomModel.getAxisProxy(dimNames.name,axisIndex).reset(dataZoomModel)}function filterSingleAxis(dimNames,axisIndex,dataZoomModel){dataZoomModel.getAxisProxy(dimNames.name,axisIndex).filterData(dataZoomModel)
}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var helper=__webpack_require__(374);var echarts=__webpack_require__(1);echarts.registerAction("dataZoom",function(payload,ecModel){var linkedNodesFinder=helper.createLinkedNodesFinder(zrUtil.bind(ecModel.eachComponent,ecModel,"dataZoom"),helper.eachAxisDim,function(model,dimNames){return model.get(dimNames.axisIndex)});var effectedModels=[];ecModel.eachComponent({mainType:"dataZoom",query:payload},function(model,index){effectedModels.push.apply(effectedModels,linkedNodesFinder(model).nodes)});zrUtil.each(effectedModels,function(dataZoomModel,index){dataZoomModel.setRawRange({start:payload.start,end:payload.end,startValue:payload.startValue,endValue:payload.endValue})})})}),(function(module,exports,__webpack_require__){__webpack_require__(385);__webpack_require__(396)}),(function(module,exports,__webpack_require__){__webpack_require__(1).registerPreprocessor(__webpack_require__(386));__webpack_require__(387);__webpack_require__(388);__webpack_require__(389);__webpack_require__(392);__webpack_require__(395)}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var each=zrUtil.each;module.exports=function(option){var visualMap=option&&option.visualMap;if(!zrUtil.isArray(visualMap)){visualMap=visualMap?[visualMap]:[]}each(visualMap,function(opt){if(!opt){return}if(has(opt,"splitList")&&!has(opt,"pieces")){opt.pieces=opt.splitList;delete opt.splitList}var pieces=opt.pieces;if(pieces&&zrUtil.isArray(pieces)){each(pieces,function(piece){if(zrUtil.isObject(piece)){if(has(piece,"start")&&!has(piece,"min")){piece.min=piece.start}if(has(piece,"end")&&!has(piece,"max")){piece.max=piece.end}}})}})};function has(obj,name){return obj&&obj.hasOwnProperty&&obj.hasOwnProperty(name)}}),(function(module,exports,__webpack_require__){__webpack_require__(72).registerSubTypeDefaulter("visualMap",function(option){return(!option.categories&&(!(option.pieces?option.pieces.length>0:option.splitNumber>0)||option.calculable))?"continuous":"piecewise"})}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);var visualSolution=__webpack_require__(357);var VisualMapping=__webpack_require__(206);var zrUtil=__webpack_require__(4);echarts.registerVisual(echarts.PRIORITY.VISUAL.COMPONENT,function(ecModel){ecModel.eachComponent("visualMap",function(visualMapModel){processSingleVisualMap(visualMapModel,ecModel)});prepareVisualMeta(ecModel)});function processSingleVisualMap(visualMapModel,ecModel){visualMapModel.eachTargetSeries(function(seriesModel){var data=seriesModel.getData();visualSolution.applyVisual(visualMapModel.stateList,visualMapModel.targetVisuals,data,visualMapModel.getValueState,visualMapModel,visualMapModel.getDataDimension(data))})}function prepareVisualMeta(ecModel){ecModel.eachSeries(function(seriesModel){var data=seriesModel.getData();var visualMetaList=[];ecModel.eachComponent("visualMap",function(visualMapModel){if(visualMapModel.isTargetSeries(seriesModel)){var visualMeta=visualMapModel.getVisualMeta(zrUtil.bind(getColorVisual,null,seriesModel,visualMapModel))||{stops:[],outerColors:[]};visualMeta.dimension=visualMapModel.getDataDimension(data);visualMetaList.push(visualMeta)}});seriesModel.getData().setVisual("visualMeta",visualMetaList)})}function getColorVisual(seriesModel,visualMapModel,value,valueState){var mappings=visualMapModel.targetVisuals[valueState];var visualTypes=VisualMapping.prepareVisualTypes(mappings);var resultVisual={color:seriesModel.getData().getVisual("color")};for(var i=0,len=visualTypes.length;i<len;i++){var type=visualTypes[i];var mapping=mappings[type==="opacity"?"__alphaForOpacity":type];mapping&&mapping.applyVisual(value,getVisual,setVisual)}return resultVisual.color;function getVisual(key){return resultVisual[key]}function setVisual(key,value){resultVisual[key]=value}}}),(function(module,exports,__webpack_require__){var VisualMapModel=__webpack_require__(390);var zrUtil=__webpack_require__(4);var numberUtil=__webpack_require__(7);var DEFAULT_BAR_BOUND=[20,140];var ContinuousModel=VisualMapModel.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:false,range:null,realtime:true,itemHeight:null,itemWidth:null,hoverLink:true,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(newOption,isInit){ContinuousModel.superApply(this,"optionUpdated",arguments);this.resetExtent();this.resetVisual(function(mappingOption){mappingOption.mappingMethod="linear";mappingOption.dataExtent=this.getExtent()});this._resetRange()},resetItemSize:function(){ContinuousModel.superApply(this,"resetItemSize",arguments);var itemSize=this.itemSize;this._orient==="horizontal"&&itemSize.reverse();(itemSize[0]==null||isNaN(itemSize[0]))&&(itemSize[0]=DEFAULT_BAR_BOUND[0]);(itemSize[1]==null||isNaN(itemSize[1]))&&(itemSize[1]=DEFAULT_BAR_BOUND[1])},_resetRange:function(){var dataExtent=this.getExtent();var range=this.option.range;if(!range||range.auto){dataExtent.auto=1;
this.option.range=dataExtent}else{if(zrUtil.isArray(range)){if(range[0]>range[1]){range.reverse()}range[0]=Math.max(range[0],dataExtent[0]);range[1]=Math.min(range[1],dataExtent[1])}}},completeVisualOption:function(){VisualMapModel.prototype.completeVisualOption.apply(this,arguments);zrUtil.each(this.stateList,function(state){var symbolSize=this.option.controller[state].symbolSize;if(symbolSize&&symbolSize[0]!==symbolSize[1]){symbolSize[0]=0}},this)},setSelected:function(selected){this.option.range=selected.slice();this._resetRange()},getSelected:function(){var dataExtent=this.getExtent();var dataInterval=numberUtil.asc((this.get("range")||[]).slice());dataInterval[0]>dataExtent[1]&&(dataInterval[0]=dataExtent[1]);dataInterval[1]>dataExtent[1]&&(dataInterval[1]=dataExtent[1]);dataInterval[0]<dataExtent[0]&&(dataInterval[0]=dataExtent[0]);dataInterval[1]<dataExtent[0]&&(dataInterval[1]=dataExtent[0]);return dataInterval},getValueState:function(value){var range=this.option.range;var dataExtent=this.getExtent();return((range[0]<=dataExtent[0]||range[0]<=value)&&(range[1]>=dataExtent[1]||value<=range[1]))?"inRange":"outOfRange"},findTargetDataIndices:function(range){var result=[];this.eachTargetSeries(function(seriesModel){var dataIndices=[];var data=seriesModel.getData();data.each(this.getDataDimension(data),function(value,dataIndex){range[0]<=value&&value<=range[1]&&dataIndices.push(dataIndex)},true,this);result.push({seriesId:seriesModel.id,dataIndex:dataIndices})},this);return result},getVisualMeta:function(getColorVisual){var oVals=getColorStopValues(this,"outOfRange",this.getExtent());var iVals=getColorStopValues(this,"inRange",this.option.range.slice());var stops=[];function setStop(value,valueState){stops.push({value:value,color:getColorVisual(value,valueState)})}var iIdx=0;var oIdx=0;var iLen=iVals.length;var oLen=oVals.length;for(;oIdx<oLen&&(!iVals.length||oVals[oIdx]<=iVals[0]);oIdx++){if(oVals[oIdx]<iVals[iIdx]){setStop(oVals[oIdx],"outOfRange")}}for(var first=1;iIdx<iLen;iIdx++,first=0){first&&stops.length&&setStop(iVals[iIdx],"outOfRange");setStop(iVals[iIdx],"inRange")}for(var first=1;oIdx<oLen;oIdx++){if(!iVals.length||iVals[iVals.length-1]<oVals[oIdx]){if(first){stops.length&&setStop(stops[stops.length-1].value,"outOfRange");first=0}setStop(oVals[oIdx],"outOfRange")}}var stopsLen=stops.length;return{stops:stops,outerColors:[stopsLen?stops[0].color:"transparent",stopsLen?stops[stopsLen-1].color:"transparent"]}}});function getColorStopValues(visualMapModel,valueState,dataExtent){if(dataExtent[0]===dataExtent[1]){return dataExtent.slice()}var count=200;var step=(dataExtent[1]-dataExtent[0])/count;var value=dataExtent[0];var stopValues=[];for(var i=0;i<=count&&value<dataExtent[1];i++){stopValues.push(value);value+=step}stopValues.push(dataExtent[1]);return stopValues}module.exports=ContinuousModel}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);var zrUtil=__webpack_require__(4);var env=__webpack_require__(2);var visualDefault=__webpack_require__(391);var VisualMapping=__webpack_require__(206);var visualSolution=__webpack_require__(357);var mapVisual=VisualMapping.mapVisual;var modelUtil=__webpack_require__(5);var eachVisual=VisualMapping.eachVisual;var numberUtil=__webpack_require__(7);var isArray=zrUtil.isArray;var each=zrUtil.each;var asc=numberUtil.asc;var linearMap=numberUtil.linearMap;var noop=zrUtil.noop;var DEFAULT_COLOR=["#f6efa6","#d88273","#bf444c"];var VisualMapModel=echarts.extendComponentModel({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-Infinity,Infinity],layoutMode:{type:"box",ignoreSize:true},defaultOption:{show:true,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:false,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(option,parentModel,ecModel){this._dataExtent;this.targetVisuals={};this.controllerVisuals={};this.textStyleModel;this.itemSize;this.mergeDefaultAndTheme(option,ecModel)},optionUpdated:function(newOption,isInit){var thisOption=this.option;if(!env.canvasSupported){thisOption.realtime=false}!isInit&&visualSolution.replaceVisualOption(thisOption,newOption,this.replacableOptionKeys);this.textStyleModel=this.getModel("textStyle");this.resetItemSize();this.completeVisualOption()},resetVisual:function(supplementVisualOption){var stateList=this.stateList;supplementVisualOption=zrUtil.bind(supplementVisualOption,this);this.controllerVisuals=visualSolution.createVisualMappings(this.option.controller,stateList,supplementVisualOption);this.targetVisuals=visualSolution.createVisualMappings(this.option.target,stateList,supplementVisualOption)
},getTargetSeriesIndices:function(){var optionSeriesIndex=this.option.seriesIndex;var seriesIndices=[];if(optionSeriesIndex==null||optionSeriesIndex==="all"){this.ecModel.eachSeries(function(seriesModel,index){seriesIndices.push(index)})}else{seriesIndices=modelUtil.normalizeToArray(optionSeriesIndex)}return seriesIndices},eachTargetSeries:function(callback,context){zrUtil.each(this.getTargetSeriesIndices(),function(seriesIndex){callback.call(context,this.ecModel.getSeriesByIndex(seriesIndex))},this)},isTargetSeries:function(seriesModel){var is=false;this.eachTargetSeries(function(model){model===seriesModel&&(is=true)});return is},formatValueText:function(value,isCategory,edgeSymbols){var option=this.option;var precision=option.precision;var dataBound=this.dataBound;var formatter=option.formatter;var isMinMax;var textValue;edgeSymbols=edgeSymbols||["<",">"];if(zrUtil.isArray(value)){value=value.slice();isMinMax=true}textValue=isCategory?value:(isMinMax?[toFixed(value[0]),toFixed(value[1])]:toFixed(value));if(zrUtil.isString(formatter)){return formatter.replace("{value}",isMinMax?textValue[0]:textValue).replace("{value2}",isMinMax?textValue[1]:textValue)}else{if(zrUtil.isFunction(formatter)){return isMinMax?formatter(value[0],value[1]):formatter(value)}}if(isMinMax){if(value[0]===dataBound[0]){return edgeSymbols[0]+" "+textValue[1]}else{if(value[1]===dataBound[1]){return edgeSymbols[1]+" "+textValue[0]}else{return textValue[0]+" - "+textValue[1]}}}else{return textValue}function toFixed(val){return val===dataBound[0]?"min":val===dataBound[1]?"max":(+val).toFixed(Math.min(precision,20))}},resetExtent:function(){var thisOption=this.option;var extent=asc([thisOption.min,thisOption.max]);this._dataExtent=extent},getDataDimension:function(list){var optDim=this.option.dimension;return optDim!=null?optDim:list.dimensions.length-1},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var thisOption=this.option;var base={inRange:thisOption.inRange,outOfRange:thisOption.outOfRange};var target=thisOption.target||(thisOption.target={});var controller=thisOption.controller||(thisOption.controller={});zrUtil.merge(target,base);zrUtil.merge(controller,base);var isCategory=this.isCategory();completeSingle.call(this,target);completeSingle.call(this,controller);completeInactive.call(this,target,"inRange","outOfRange");completeController.call(this,controller);function completeSingle(base){if(isArray(thisOption.color)&&!base.inRange){base.inRange={color:thisOption.color.slice().reverse()}}base.inRange=base.inRange||{color:DEFAULT_COLOR};each(this.stateList,function(state){var visualType=base[state];if(zrUtil.isString(visualType)){var defa=visualDefault.get(visualType,"active",isCategory);if(defa){base[state]={};base[state][visualType]=defa}else{delete base[state]}}},this)}function completeInactive(base,stateExist,stateAbsent){var optExist=base[stateExist];var optAbsent=base[stateAbsent];if(optExist&&!optAbsent){optAbsent=base[stateAbsent]={};each(optExist,function(visualData,visualType){if(!VisualMapping.isValidType(visualType)){return}var defa=visualDefault.get(visualType,"inactive",isCategory);if(defa!=null){optAbsent[visualType]=defa;if(visualType==="color"&&!optAbsent.hasOwnProperty("opacity")&&!optAbsent.hasOwnProperty("colorAlpha")){optAbsent.opacity=[0,0]}}})}}function completeController(controller){var symbolExists=(controller.inRange||{}).symbol||(controller.outOfRange||{}).symbol;var symbolSizeExists=(controller.inRange||{}).symbolSize||(controller.outOfRange||{}).symbolSize;var inactiveColor=this.get("inactiveColor");each(this.stateList,function(state){var itemSize=this.itemSize;var visuals=controller[state];if(!visuals){visuals=controller[state]={color:isCategory?inactiveColor:[inactiveColor]}}if(visuals.symbol==null){visuals.symbol=symbolExists&&zrUtil.clone(symbolExists)||(isCategory?"roundRect":["roundRect"])}if(visuals.symbolSize==null){visuals.symbolSize=symbolSizeExists&&zrUtil.clone(symbolSizeExists)||(isCategory?itemSize[0]:[itemSize[0],itemSize[0]])}visuals.symbol=mapVisual(visuals.symbol,function(symbol){return(symbol==="none"||symbol==="square")?"roundRect":symbol});var symbolSize=visuals.symbolSize;if(symbolSize!=null){var max=-Infinity;eachVisual(symbolSize,function(value){value>max&&(max=value)});visuals.symbolSize=mapVisual(symbolSize,function(value){return linearMap(value,[0,max],[0,itemSize[0]],true)})}},this)}},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return !!this.option.categories},setSelected:noop,getValueState:noop,getVisualMeta:noop});module.exports=VisualMapModel}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var visualDefault={get:function(visualType,key,isCategory){var value=zrUtil.clone((defaultOption[visualType]||{})[key]);return isCategory?(zrUtil.isArray(value)?value[value.length-1]:value):value}};var defaultOption={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[0.3,1],inactive:[0,0]},colorLightness:{active:[0.9,0.5],inactive:[0,0]},colorAlpha:{active:[0.3,1],inactive:[0,0]},opacity:{active:[0.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};
module.exports=visualDefault}),(function(module,exports,__webpack_require__){var VisualMapView=__webpack_require__(393);var graphic=__webpack_require__(20);var zrUtil=__webpack_require__(4);var numberUtil=__webpack_require__(7);var sliderMove=__webpack_require__(242);var LinearGradient=__webpack_require__(68);var helper=__webpack_require__(394);var modelUtil=__webpack_require__(5);var eventTool=__webpack_require__(93);var linearMap=numberUtil.linearMap;var each=zrUtil.each;var mathMin=Math.min;var mathMax=Math.max;var HOVER_LINK_SIZE=12;var HOVER_LINK_OUT=6;var ContinuousView=VisualMapView.extend({type:"visualMap.continuous",init:function(){ContinuousView.superApply(this,"init",arguments);this._shapes={};this._dataInterval=[];this._handleEnds=[];this._orient;this._useHandle;this._hoverLinkDataIndices=[];this._dragging;this._hovering},doRender:function(visualMapModel,ecModel,api,payload){if(!payload||payload.type!=="selectDataRange"||payload.from!==this.uid){this._buildView()}},_buildView:function(){this.group.removeAll();var visualMapModel=this.visualMapModel;var thisGroup=this.group;this._orient=visualMapModel.get("orient");this._useHandle=visualMapModel.get("calculable");this._resetInterval();this._renderBar(thisGroup);var dataRangeText=visualMapModel.get("text");this._renderEndsText(thisGroup,dataRangeText,0);this._renderEndsText(thisGroup,dataRangeText,1);this._updateView(true);this.renderBackground(thisGroup);this._updateView();this._enableHoverLinkToSeries();this._enableHoverLinkFromSeries();this.positionGroup(thisGroup)},_renderEndsText:function(group,dataRangeText,endsIndex){if(!dataRangeText){return}var text=dataRangeText[1-endsIndex];text=text!=null?text+"":"";var visualMapModel=this.visualMapModel;var textGap=visualMapModel.get("textGap");var itemSize=visualMapModel.itemSize;var barGroup=this._shapes.barGroup;var position=this._applyTransform([itemSize[0]/2,endsIndex===0?-textGap:itemSize[1]+textGap],barGroup);var align=this._applyTransform(endsIndex===0?"bottom":"top",barGroup);var orient=this._orient;var textStyleModel=this.visualMapModel.textStyleModel;this.group.add(new graphic.Text({style:{x:position[0],y:position[1],textVerticalAlign:orient==="horizontal"?"middle":align,textAlign:orient==="horizontal"?align:"center",text:text,textFont:textStyleModel.getFont(),textFill:textStyleModel.getTextColor()}}))},_renderBar:function(targetGroup){var visualMapModel=this.visualMapModel;var shapes=this._shapes;var itemSize=visualMapModel.itemSize;var orient=this._orient;var useHandle=this._useHandle;var itemAlign=helper.getItemAlign(visualMapModel,this.api,itemSize);var barGroup=shapes.barGroup=this._createBarGroup(itemAlign);barGroup.add(shapes.outOfRange=createPolygon());barGroup.add(shapes.inRange=createPolygon(null,useHandle?getCursor(this._orient):null,zrUtil.bind(this._dragHandle,this,"all",false),zrUtil.bind(this._dragHandle,this,"all",true)));var textRect=visualMapModel.textStyleModel.getTextRect("国");var textSize=mathMax(textRect.width,textRect.height);if(useHandle){shapes.handleThumbs=[];shapes.handleLabels=[];shapes.handleLabelPoints=[];this._createHandle(barGroup,0,itemSize,textSize,orient,itemAlign);this._createHandle(barGroup,1,itemSize,textSize,orient,itemAlign)}this._createIndicator(barGroup,itemSize,textSize,orient);targetGroup.add(barGroup)},_createHandle:function(barGroup,handleIndex,itemSize,textSize,orient){var onDrift=zrUtil.bind(this._dragHandle,this,handleIndex,false);var onDragEnd=zrUtil.bind(this._dragHandle,this,handleIndex,true);var handleThumb=createPolygon(createHandlePoints(handleIndex,textSize),getCursor(this._orient),onDrift,onDragEnd);handleThumb.position[0]=itemSize[0];barGroup.add(handleThumb);var textStyleModel=this.visualMapModel.textStyleModel;var handleLabel=new graphic.Text({draggable:true,drift:onDrift,onmousemove:function(e){eventTool.stop(e.event)},ondragend:onDragEnd,style:{x:0,y:0,text:"",textFont:textStyleModel.getFont(),textFill:textStyleModel.getTextColor()}});this.group.add(handleLabel);var handleLabelPoint=[orient==="horizontal"?textSize/2:textSize*1.5,orient==="horizontal"?(handleIndex===0?-(textSize*1.5):(textSize*1.5)):(handleIndex===0?-textSize/2:textSize/2)];var shapes=this._shapes;shapes.handleThumbs[handleIndex]=handleThumb;shapes.handleLabelPoints[handleIndex]=handleLabelPoint;shapes.handleLabels[handleIndex]=handleLabel},_createIndicator:function(barGroup,itemSize,textSize,orient){var indicator=createPolygon([[0,0]],"move");indicator.position[0]=itemSize[0];indicator.attr({invisible:true,silent:true});barGroup.add(indicator);var textStyleModel=this.visualMapModel.textStyleModel;var indicatorLabel=new graphic.Text({silent:true,invisible:true,style:{x:0,y:0,text:"",textFont:textStyleModel.getFont(),textFill:textStyleModel.getTextColor()}});this.group.add(indicatorLabel);var indicatorLabelPoint=[orient==="horizontal"?textSize/2:HOVER_LINK_OUT+3,0];var shapes=this._shapes;shapes.indicator=indicator;shapes.indicatorLabel=indicatorLabel;shapes.indicatorLabelPoint=indicatorLabelPoint
},_dragHandle:function(handleIndex,isEnd,dx,dy){if(!this._useHandle){return}this._dragging=!isEnd;if(!isEnd){var vertex=this._applyTransform([dx,dy],this._shapes.barGroup,true);this._updateInterval(handleIndex,vertex[1]);this._updateView()}if(isEnd===!this.visualMapModel.get("realtime")){this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()})}if(isEnd){!this._hovering&&this._clearHoverLinkToSeries()}else{if(useHoverLinkOnHandle(this.visualMapModel)){this._doHoverLinkToSeries(this._handleEnds[handleIndex],false)}}},_resetInterval:function(){var visualMapModel=this.visualMapModel;var dataInterval=this._dataInterval=visualMapModel.getSelected();var dataExtent=visualMapModel.getExtent();var sizeExtent=[0,visualMapModel.itemSize[1]];this._handleEnds=[linearMap(dataInterval[0],dataExtent,sizeExtent,true),linearMap(dataInterval[1],dataExtent,sizeExtent,true)]},_updateInterval:function(handleIndex,delta){delta=delta||0;var visualMapModel=this.visualMapModel;var handleEnds=this._handleEnds;var sizeExtent=[0,visualMapModel.itemSize[1]];sliderMove(delta,handleEnds,sizeExtent,handleIndex,0);var dataExtent=visualMapModel.getExtent();this._dataInterval=[linearMap(handleEnds[0],sizeExtent,dataExtent,true),linearMap(handleEnds[1],sizeExtent,dataExtent,true)]},_updateView:function(forSketch){var visualMapModel=this.visualMapModel;var dataExtent=visualMapModel.getExtent();var shapes=this._shapes;var outOfRangeHandleEnds=[0,visualMapModel.itemSize[1]];var inRangeHandleEnds=forSketch?outOfRangeHandleEnds:this._handleEnds;var visualInRange=this._createBarVisual(this._dataInterval,dataExtent,inRangeHandleEnds,"inRange");var visualOutOfRange=this._createBarVisual(dataExtent,dataExtent,outOfRangeHandleEnds,"outOfRange");shapes.inRange.setStyle({fill:visualInRange.barColor,opacity:visualInRange.opacity}).setShape("points",visualInRange.barPoints);shapes.outOfRange.setStyle({fill:visualOutOfRange.barColor,opacity:visualOutOfRange.opacity}).setShape("points",visualOutOfRange.barPoints);this._updateHandle(inRangeHandleEnds,visualInRange)},_createBarVisual:function(dataInterval,dataExtent,handleEnds,forceState){var opts={forceState:forceState,convertOpacityToAlpha:true};var colorStops=this._makeColorGradient(dataInterval,opts);var symbolSizes=[this.getControllerVisual(dataInterval[0],"symbolSize",opts),this.getControllerVisual(dataInterval[1],"symbolSize",opts)];var barPoints=this._createBarPoints(handleEnds,symbolSizes);return{barColor:new LinearGradient(0,0,0,1,colorStops),barPoints:barPoints,handlesColor:[colorStops[0].color,colorStops[colorStops.length-1].color]}},_makeColorGradient:function(dataInterval,opts){var sampleNumber=100;var colorStops=[];var step=(dataInterval[1]-dataInterval[0])/sampleNumber;colorStops.push({color:this.getControllerVisual(dataInterval[0],"color",opts),offset:0});for(var i=1;i<sampleNumber;i++){var currValue=dataInterval[0]+step*i;if(currValue>dataInterval[1]){break}colorStops.push({color:this.getControllerVisual(currValue,"color",opts),offset:i/sampleNumber})}colorStops.push({color:this.getControllerVisual(dataInterval[1],"color",opts),offset:1});return colorStops},_createBarPoints:function(handleEnds,symbolSizes){var itemSize=this.visualMapModel.itemSize;return[[itemSize[0]-symbolSizes[0],handleEnds[0]],[itemSize[0],handleEnds[0]],[itemSize[0],handleEnds[1]],[itemSize[0]-symbolSizes[1],handleEnds[1]]]},_createBarGroup:function(itemAlign){var orient=this._orient;var inverse=this.visualMapModel.get("inverse");return new graphic.Group((orient==="horizontal"&&!inverse)?{scale:itemAlign==="bottom"?[1,1]:[-1,1],rotation:Math.PI/2}:(orient==="horizontal"&&inverse)?{scale:itemAlign==="bottom"?[-1,1]:[1,1],rotation:-Math.PI/2}:(orient==="vertical"&&!inverse)?{scale:itemAlign==="left"?[1,-1]:[-1,-1]}:{scale:itemAlign==="left"?[1,1]:[-1,1]})},_updateHandle:function(handleEnds,visualInRange){if(!this._useHandle){return}var shapes=this._shapes;var visualMapModel=this.visualMapModel;var handleThumbs=shapes.handleThumbs;var handleLabels=shapes.handleLabels;each([0,1],function(handleIndex){var handleThumb=handleThumbs[handleIndex];handleThumb.setStyle("fill",visualInRange.handlesColor[handleIndex]);handleThumb.position[1]=handleEnds[handleIndex];var textPoint=graphic.applyTransform(shapes.handleLabelPoints[handleIndex],graphic.getTransform(handleThumb,this.group));handleLabels[handleIndex].setStyle({x:textPoint[0],y:textPoint[1],text:visualMapModel.formatValueText(this._dataInterval[handleIndex]),textVerticalAlign:"middle",textAlign:this._applyTransform(this._orient==="horizontal"?(handleIndex===0?"bottom":"top"):"left",shapes.barGroup)})},this)},_showIndicator:function(cursorValue,textValue,rangeSymbol,halfHoverLinkSize){var visualMapModel=this.visualMapModel;var dataExtent=visualMapModel.getExtent();var itemSize=visualMapModel.itemSize;var sizeExtent=[0,itemSize[1]];var pos=linearMap(cursorValue,dataExtent,sizeExtent,true);var shapes=this._shapes;
var indicator=shapes.indicator;if(!indicator){return}indicator.position[1]=pos;indicator.attr("invisible",false);indicator.setShape("points",createIndicatorPoints(!!rangeSymbol,halfHoverLinkSize,pos,itemSize[1]));var opts={convertOpacityToAlpha:true};var color=this.getControllerVisual(cursorValue,"color",opts);indicator.setStyle("fill",color);var textPoint=graphic.applyTransform(shapes.indicatorLabelPoint,graphic.getTransform(indicator,this.group));var indicatorLabel=shapes.indicatorLabel;indicatorLabel.attr("invisible",false);var align=this._applyTransform("left",shapes.barGroup);var orient=this._orient;indicatorLabel.setStyle({text:(rangeSymbol?rangeSymbol:"")+visualMapModel.formatValueText(textValue),textVerticalAlign:orient==="horizontal"?align:"middle",textAlign:orient==="horizontal"?"center":align,x:textPoint[0],y:textPoint[1]})},_enableHoverLinkToSeries:function(){var self=this;this._shapes.barGroup.on("mousemove",function(e){self._hovering=true;if(!self._dragging){var itemSize=self.visualMapModel.itemSize;var pos=self._applyTransform([e.offsetX,e.offsetY],self._shapes.barGroup,true,true);pos[1]=mathMin(mathMax(0,pos[1]),itemSize[1]);self._doHoverLinkToSeries(pos[1],0<=pos[0]&&pos[0]<=itemSize[0])}}).on("mouseout",function(){self._hovering=false;!self._dragging&&self._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var zr=this.api.getZr();if(this.visualMapModel.option.hoverLink){zr.on("mouseover",this._hoverLinkFromSeriesMouseOver,this);zr.on("mouseout",this._hideIndicator,this)}else{this._clearHoverLinkFromSeries()}},_doHoverLinkToSeries:function(cursorPos,hoverOnBar){var visualMapModel=this.visualMapModel;var itemSize=visualMapModel.itemSize;if(!visualMapModel.option.hoverLink){return}var sizeExtent=[0,itemSize[1]];var dataExtent=visualMapModel.getExtent();cursorPos=mathMin(mathMax(sizeExtent[0],cursorPos),sizeExtent[1]);var halfHoverLinkSize=getHalfHoverLinkSize(visualMapModel,dataExtent,sizeExtent);var hoverRange=[cursorPos-halfHoverLinkSize,cursorPos+halfHoverLinkSize];var cursorValue=linearMap(cursorPos,sizeExtent,dataExtent,true);var valueRange=[linearMap(hoverRange[0],sizeExtent,dataExtent,true),linearMap(hoverRange[1],sizeExtent,dataExtent,true)];hoverRange[0]<sizeExtent[0]&&(valueRange[0]=-Infinity);hoverRange[1]>sizeExtent[1]&&(valueRange[1]=Infinity);if(hoverOnBar){if(valueRange[0]===-Infinity){this._showIndicator(cursorValue,valueRange[1],"< ",halfHoverLinkSize)}else{if(valueRange[1]===Infinity){this._showIndicator(cursorValue,valueRange[0],"> ",halfHoverLinkSize)}else{this._showIndicator(cursorValue,cursorValue,"≈ ",halfHoverLinkSize)}}}var oldBatch=this._hoverLinkDataIndices;var newBatch=[];if(hoverOnBar||useHoverLinkOnHandle(visualMapModel)){newBatch=this._hoverLinkDataIndices=visualMapModel.findTargetDataIndices(valueRange)}var resultBatches=modelUtil.compressBatches(oldBatch,newBatch);this._dispatchHighDown("downplay",helper.convertDataIndex(resultBatches[0]));this._dispatchHighDown("highlight",helper.convertDataIndex(resultBatches[1]))},_hoverLinkFromSeriesMouseOver:function(e){var el=e.target;var visualMapModel=this.visualMapModel;if(!el||el.dataIndex==null){return}var dataModel=this.ecModel.getSeriesByIndex(el.seriesIndex);if(!visualMapModel.isTargetSeries(dataModel)){return}var data=dataModel.getData(el.dataType);var dim=data.getDimension(visualMapModel.getDataDimension(data));var value=data.get(dim,el.dataIndex,true);if(!isNaN(value)){this._showIndicator(value,value)}},_hideIndicator:function(){var shapes=this._shapes;shapes.indicator&&shapes.indicator.attr("invisible",true);shapes.indicatorLabel&&shapes.indicatorLabel.attr("invisible",true)},_clearHoverLinkToSeries:function(){this._hideIndicator();var indices=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",helper.convertDataIndex(indices));indices.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var zr=this.api.getZr();zr.off("mouseover",this._hoverLinkFromSeriesMouseOver);zr.off("mouseout",this._hideIndicator)},_applyTransform:function(vertex,element,inverse,global){var transform=graphic.getTransform(element,global?null:this.group);return graphic[zrUtil.isArray(vertex)?"applyTransform":"transformDirection"](vertex,transform,inverse)},_dispatchHighDown:function(type,batch){batch&&batch.length&&this.api.dispatchAction({type:type,batch:batch})},dispose:function(){this._clearHoverLinkFromSeries();this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries();this._clearHoverLinkToSeries()}});function createPolygon(points,cursor,onDrift,onDragEnd){return new graphic.Polygon({shape:{points:points},draggable:!!onDrift,cursor:cursor,drift:onDrift,onmousemove:function(e){eventTool.stop(e.event)},ondragend:onDragEnd})}function createHandlePoints(handleIndex,textSize){return handleIndex===0?[[0,0],[textSize,0],[textSize,-textSize]]:[[0,0],[textSize,0],[textSize,textSize]]}function createIndicatorPoints(isRange,halfHoverLinkSize,pos,extentMax){return isRange?[[0,-mathMin(halfHoverLinkSize,mathMax(pos,0))],[HOVER_LINK_OUT,0],[0,mathMin(halfHoverLinkSize,mathMax(extentMax-pos,0))]]:[[0,0],[5,-5],[5,5]]
}function getHalfHoverLinkSize(visualMapModel,dataExtent,sizeExtent){var halfHoverLinkSize=HOVER_LINK_SIZE/2;var hoverLinkDataSize=visualMapModel.get("hoverLinkDataSize");if(hoverLinkDataSize){halfHoverLinkSize=linearMap(hoverLinkDataSize,dataExtent,sizeExtent,true)/2}return halfHoverLinkSize}function useHoverLinkOnHandle(visualMapModel){var hoverLinkOnHandle=visualMapModel.get("hoverLinkOnHandle");return !!(hoverLinkOnHandle==null?visualMapModel.get("realtime"):hoverLinkOnHandle)}function getCursor(orient){return orient==="vertical"?"ns-resize":"ew-resize"}module.exports=ContinuousView}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var graphic=__webpack_require__(20);var formatUtil=__webpack_require__(6);var layout=__webpack_require__(74);var echarts=__webpack_require__(1);var VisualMapping=__webpack_require__(206);module.exports=echarts.extendComponentView({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(ecModel,api){this.ecModel=ecModel;this.api=api;this.visualMapModel},render:function(visualMapModel,ecModel,api,payload){this.visualMapModel=visualMapModel;if(visualMapModel.get("show")===false){this.group.removeAll();return}this.doRender.apply(this,arguments)},renderBackground:function(group){var visualMapModel=this.visualMapModel;var padding=formatUtil.normalizeCssArray(visualMapModel.get("padding")||0);var rect=group.getBoundingRect();group.add(new graphic.Rect({z2:-1,silent:true,shape:{x:rect.x-padding[3],y:rect.y-padding[0],width:rect.width+padding[3]+padding[1],height:rect.height+padding[0]+padding[2]},style:{fill:visualMapModel.get("backgroundColor"),stroke:visualMapModel.get("borderColor"),lineWidth:visualMapModel.get("borderWidth")}}))},getControllerVisual:function(targetValue,visualCluster,opts){opts=opts||{};var forceState=opts.forceState;var visualMapModel=this.visualMapModel;var visualObj={};if(visualCluster==="symbol"){visualObj.symbol=visualMapModel.get("itemSymbol")}if(visualCluster==="color"){var defaultColor=visualMapModel.get("contentColor");visualObj.color=defaultColor}function getter(key){return visualObj[key]}function setter(key,value){visualObj[key]=value}var mappings=visualMapModel.controllerVisuals[forceState||visualMapModel.getValueState(targetValue)];var visualTypes=VisualMapping.prepareVisualTypes(mappings);zrUtil.each(visualTypes,function(type){var visualMapping=mappings[type];if(opts.convertOpacityToAlpha&&type==="opacity"){type="colorAlpha";visualMapping=mappings.__alphaForOpacity}if(VisualMapping.dependsOn(type,visualCluster)){visualMapping&&visualMapping.applyVisual(targetValue,getter,setter)}});return visualObj[visualCluster]},positionGroup:function(group){var model=this.visualMapModel;var api=this.api;layout.positionElement(group,model.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()})},doRender:zrUtil.noop})}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var layout=__webpack_require__(74);var helper={getItemAlign:function(visualMapModel,api,itemSize){var modelOption=visualMapModel.option;var itemAlign=modelOption.align;if(itemAlign!=null&&itemAlign!=="auto"){return itemAlign}var ecSize={width:api.getWidth(),height:api.getHeight()};var realIndex=modelOption.orient==="horizontal"?1:0;var paramsSet=[["left","right","width"],["top","bottom","height"]];var reals=paramsSet[realIndex];var fakeValue=[0,null,10];var layoutInput={};for(var i=0;i<3;i++){layoutInput[paramsSet[1-realIndex][i]]=fakeValue[i];layoutInput[reals[i]]=i===2?itemSize[0]:modelOption[reals[i]]}var rParam=[["x","width",3],["y","height",0]][realIndex];var rect=layout.getLayoutRect(layoutInput,ecSize,modelOption.padding);return reals[(rect.margin[rParam[2]]||0)+rect[rParam[0]]+rect[rParam[1]]*0.5<ecSize[rParam[1]]*0.5?0:1]},convertDataIndex:function(batch){zrUtil.each(batch||[],function(batchItem){if(batch.dataIndex!=null){batch.dataIndexInside=batch.dataIndex;batch.dataIndex=null}});return batch}};module.exports=helper}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);var actionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"};echarts.registerAction(actionInfo,function(payload,ecModel){ecModel.eachComponent({mainType:"visualMap",query:payload},function(model){model.setSelected(payload.selected)})})}),(function(module,exports,__webpack_require__){__webpack_require__(1).registerPreprocessor(__webpack_require__(386));__webpack_require__(387);__webpack_require__(388);__webpack_require__(397);__webpack_require__(398);__webpack_require__(395)}),(function(module,exports,__webpack_require__){var VisualMapModel=__webpack_require__(390);var zrUtil=__webpack_require__(4);var VisualMapping=__webpack_require__(206);var visualDefault=__webpack_require__(391);var reformIntervals=__webpack_require__(7).reformIntervals;var PiecewiseModel=VisualMapModel.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:false,maxOpen:false,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:true,showLabel:null},optionUpdated:function(newOption,isInit){PiecewiseModel.superApply(this,"optionUpdated",arguments);
this._pieceList=[];this.resetExtent();var mode=this._mode=this._determineMode();resetMethods[this._mode].call(this);this._resetSelected(newOption,isInit);var categories=this.option.categories;this.resetVisual(function(mappingOption,state){if(mode==="categories"){mappingOption.mappingMethod="category";mappingOption.categories=zrUtil.clone(categories)}else{mappingOption.dataExtent=this.getExtent();mappingOption.mappingMethod="piecewise";mappingOption.pieceList=zrUtil.map(this._pieceList,function(piece){var piece=zrUtil.clone(piece);if(state!=="inRange"){piece.visual=null}return piece})}})},completeVisualOption:function(){var option=this.option;var visualTypesInPieces={};var visualTypes=VisualMapping.listVisualTypes();var isCategory=this.isCategory();zrUtil.each(option.pieces,function(piece){zrUtil.each(visualTypes,function(visualType){if(piece.hasOwnProperty(visualType)){visualTypesInPieces[visualType]=1}})});zrUtil.each(visualTypesInPieces,function(v,visualType){var exists=0;zrUtil.each(this.stateList,function(state){exists|=has(option,state,visualType)||has(option.target,state,visualType)},this);!exists&&zrUtil.each(this.stateList,function(state){(option[state]||(option[state]={}))[visualType]=visualDefault.get(visualType,state==="inRange"?"active":"inactive",isCategory)})},this);function has(obj,state,visualType){return obj&&obj[state]&&(zrUtil.isObject(obj[state])?obj[state].hasOwnProperty(visualType):obj[state]===visualType)}VisualMapModel.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(newOption,isInit){var thisOption=this.option;var pieceList=this._pieceList;var selected=(isInit?thisOption:newOption).selected||{};thisOption.selected=selected;zrUtil.each(pieceList,function(piece,index){var key=this.getSelectedMapKey(piece);if(!selected.hasOwnProperty(key)){selected[key]=true}},this);if(thisOption.selectedMode==="single"){var hasSel=false;zrUtil.each(pieceList,function(piece,index){var key=this.getSelectedMapKey(piece);if(selected[key]){hasSel?(selected[key]=false):(hasSel=true)}},this)}},getSelectedMapKey:function(piece){return this._mode==="categories"?piece.value+"":piece.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var option=this.option;return option.pieces&&option.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(selected){this.option.selected=zrUtil.clone(selected)},getValueState:function(value){var index=VisualMapping.findPieceIndex(value,this._pieceList);return index!=null?(this.option.selected[this.getSelectedMapKey(this._pieceList[index])]?"inRange":"outOfRange"):"outOfRange"},findTargetDataIndices:function(pieceIndex){var result=[];this.eachTargetSeries(function(seriesModel){var dataIndices=[];var data=seriesModel.getData();data.each(this.getDataDimension(data),function(value,dataIndex){var pIdx=VisualMapping.findPieceIndex(value,this._pieceList);pIdx===pieceIndex&&dataIndices.push(dataIndex)},true,this);result.push({seriesId:seriesModel.id,dataIndex:dataIndices})},this);return result},getRepresentValue:function(piece){var representValue;if(this.isCategory()){representValue=piece.value}else{if(piece.value!=null){representValue=piece.value}else{var pieceInterval=piece.interval||[];representValue=(pieceInterval[0]===-Infinity&&pieceInterval[1]===Infinity)?0:(pieceInterval[0]+pieceInterval[1])/2}}return representValue},getVisualMeta:function(getColorVisual){if(this.isCategory()){return}var stops=[];var outerColors=[];var visualMapModel=this;function setStop(interval,valueState){var representValue=visualMapModel.getRepresentValue({interval:interval});if(!valueState){valueState=visualMapModel.getValueState(representValue)}var color=getColorVisual(representValue,valueState);if(interval[0]===-Infinity){outerColors[0]=color}else{if(interval[1]===Infinity){outerColors[1]=color}else{stops.push({value:interval[0],color:color},{value:interval[1],color:color})}}}var pieceList=this._pieceList.slice();if(!pieceList.length){pieceList.push({interval:[-Infinity,Infinity]})}else{var edge=pieceList[0].interval[0];edge!==-Infinity&&pieceList.unshift({interval:[-Infinity,edge]});edge=pieceList[pieceList.length-1].interval[1];edge!==Infinity&&pieceList.push({interval:[edge,Infinity]})}var curr=-Infinity;zrUtil.each(pieceList,function(piece){var interval=piece.interval;if(interval){interval[0]>curr&&setStop([curr,interval[0]],"outOfRange");setStop(interval.slice());curr=interval[1]}},this);return{stops:stops,outerColors:outerColors}}});var resetMethods={splitNumber:function(){var thisOption=this.option;var pieceList=this._pieceList;var precision=Math.min(thisOption.precision,20);var dataExtent=this.getExtent();var splitNumber=thisOption.splitNumber;splitNumber=Math.max(parseInt(splitNumber,10),1);thisOption.splitNumber=splitNumber;var splitStep=(dataExtent[1]-dataExtent[0])/splitNumber;while(+splitStep.toFixed(precision)!==splitStep&&precision<5){precision++}thisOption.precision=precision;splitStep=+splitStep.toFixed(precision);
var index=0;if(thisOption.minOpen){pieceList.push({index:index++,interval:[-Infinity,dataExtent[0]],close:[0,0]})}for(var curr=dataExtent[0],len=index+splitNumber;index<len;curr+=splitStep){var max=index===splitNumber-1?dataExtent[1]:(curr+splitStep);pieceList.push({index:index++,interval:[curr,max],close:[1,1]})}if(thisOption.maxOpen){pieceList.push({index:index++,interval:[dataExtent[1],Infinity],close:[0,0]})}reformIntervals(pieceList);zrUtil.each(pieceList,function(piece){piece.text=this.formatValueText(piece.interval)},this)},categories:function(){var thisOption=this.option;zrUtil.each(thisOption.categories,function(cate){this._pieceList.push({text:this.formatValueText(cate,true),value:cate})},this);normalizeReverse(thisOption,this._pieceList)},pieces:function(){var thisOption=this.option;var pieceList=this._pieceList;zrUtil.each(thisOption.pieces,function(pieceListItem,index){if(!zrUtil.isObject(pieceListItem)){pieceListItem={value:pieceListItem}}var item={text:"",index:index};if(pieceListItem.label!=null){item.text=pieceListItem.label}if(pieceListItem.hasOwnProperty("value")){var value=item.value=pieceListItem.value;item.interval=[value,value];item.close=[1,1]}else{var interval=item.interval=[];var close=item.close=[0,0];var closeList=[1,0,1];var infinityList=[-Infinity,Infinity];var useMinMax=[];for(var lg=0;lg<2;lg++){var names=[["gte","gt","min"],["lte","lt","max"]][lg];for(var i=0;i<3&&interval[lg]==null;i++){interval[lg]=pieceListItem[names[i]];close[lg]=closeList[i];useMinMax[lg]=i===2}interval[lg]==null&&(interval[lg]=infinityList[lg])}useMinMax[0]&&interval[1]===Infinity&&(close[0]=0);useMinMax[1]&&interval[0]===-Infinity&&(close[1]=0);if(true){if(interval[0]>interval[1]){console.warn("Piece "+index+"is illegal: "+interval+" lower bound should not greater then uppper bound.")}}if(interval[0]===interval[1]&&close[0]&&close[1]){item.value=interval[0]}}item.visual=VisualMapping.retrieveVisuals(pieceListItem);pieceList.push(item)},this);normalizeReverse(thisOption,pieceList);reformIntervals(pieceList);zrUtil.each(pieceList,function(piece){var close=piece.close;var edgeSymbols=[["<","≤"][close[1]],[">","≥"][close[0]]];piece.text=piece.text||this.formatValueText(piece.value!=null?piece.value:piece.interval,false,edgeSymbols)},this)}};function normalizeReverse(thisOption,pieceList){var inverse=thisOption.inverse;if(thisOption.orient==="vertical"?!inverse:inverse){pieceList.reverse()}}module.exports=PiecewiseModel}),(function(module,exports,__webpack_require__){var VisualMapView=__webpack_require__(393);var zrUtil=__webpack_require__(4);var graphic=__webpack_require__(20);var symbolCreators=__webpack_require__(114);var layout=__webpack_require__(74);var helper=__webpack_require__(394);var PiecewiseVisualMapView=VisualMapView.extend({type:"visualMap.piecewise",doRender:function(){var thisGroup=this.group;thisGroup.removeAll();var visualMapModel=this.visualMapModel;var textGap=visualMapModel.get("textGap");var textStyleModel=visualMapModel.textStyleModel;var textFont=textStyleModel.getFont();var textFill=textStyleModel.getTextColor();var itemAlign=this._getItemAlign();var itemSize=visualMapModel.itemSize;var viewData=this._getViewData();var endsText=viewData.endsText;var showLabel=zrUtil.retrieve(visualMapModel.get("showLabel",true),!endsText);endsText&&this._renderEndsText(thisGroup,endsText[0],itemSize,showLabel,itemAlign);zrUtil.each(viewData.viewPieceList,renderItem,this);endsText&&this._renderEndsText(thisGroup,endsText[1],itemSize,showLabel,itemAlign);layout.box(visualMapModel.get("orient"),thisGroup,visualMapModel.get("itemGap"));this.renderBackground(thisGroup);this.positionGroup(thisGroup);function renderItem(item){var piece=item.piece;var itemGroup=new graphic.Group();itemGroup.onclick=zrUtil.bind(this._onItemClick,this,piece);this._enableHoverLink(itemGroup,item.indexInModelPieceList);var representValue=visualMapModel.getRepresentValue(piece);this._createItemSymbol(itemGroup,representValue,[0,0,itemSize[0],itemSize[1]]);if(showLabel){var visualState=this.visualMapModel.getValueState(representValue);itemGroup.add(new graphic.Text({style:{x:itemAlign==="right"?-textGap:itemSize[0]+textGap,y:itemSize[1]/2,text:piece.text,textVerticalAlign:"middle",textAlign:itemAlign,textFont:textFont,textFill:textFill,opacity:visualState==="outOfRange"?0.5:1}}))}thisGroup.add(itemGroup)}},_enableHoverLink:function(itemGroup,pieceIndex){itemGroup.on("mouseover",zrUtil.bind(onHoverLink,this,"highlight")).on("mouseout",zrUtil.bind(onHoverLink,this,"downplay"));function onHoverLink(method){var visualMapModel=this.visualMapModel;visualMapModel.option.hoverLink&&this.api.dispatchAction({type:method,batch:helper.convertDataIndex(visualMapModel.findTargetDataIndices(pieceIndex))})}},_getItemAlign:function(){var visualMapModel=this.visualMapModel;var modelOption=visualMapModel.option;if(modelOption.orient==="vertical"){return helper.getItemAlign(visualMapModel,this.api,visualMapModel.itemSize)}else{var align=modelOption.align;
if(!align||align==="auto"){align="left"}return align}},_renderEndsText:function(group,text,itemSize,showLabel,itemAlign){if(!text){return}var itemGroup=new graphic.Group();var textStyleModel=this.visualMapModel.textStyleModel;itemGroup.add(new graphic.Text({style:{x:showLabel?(itemAlign==="right"?itemSize[0]:0):itemSize[0]/2,y:itemSize[1]/2,textVerticalAlign:"middle",textAlign:showLabel?itemAlign:"center",text:text,textFont:textStyleModel.getFont(),textFill:textStyleModel.getTextColor()}}));group.add(itemGroup)},_getViewData:function(){var visualMapModel=this.visualMapModel;var viewPieceList=zrUtil.map(visualMapModel.getPieceList(),function(piece,index){return{piece:piece,indexInModelPieceList:index}});var endsText=visualMapModel.get("text");var orient=visualMapModel.get("orient");var inverse=visualMapModel.get("inverse");if(orient==="horizontal"?inverse:!inverse){viewPieceList.reverse()}else{if(endsText){endsText=endsText.slice().reverse()}}return{viewPieceList:viewPieceList,endsText:endsText}},_createItemSymbol:function(group,representValue,shapeParam){group.add(symbolCreators.createSymbol(this.getControllerVisual(representValue,"symbol"),shapeParam[0],shapeParam[1],shapeParam[2],shapeParam[3],this.getControllerVisual(representValue,"color")))},_onItemClick:function(piece){var visualMapModel=this.visualMapModel;var option=visualMapModel.option;var selected=zrUtil.clone(option.selected);var newKey=visualMapModel.getSelectedMapKey(piece);if(option.selectedMode==="single"){selected[newKey]=true;zrUtil.each(selected,function(o,key){selected[key]=key===newKey})}else{selected[newKey]=!selected[newKey]}this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:selected})}});module.exports=PiecewiseVisualMapView}),(function(module,exports,__webpack_require__){__webpack_require__(400);__webpack_require__(402);__webpack_require__(1).registerPreprocessor(function(opt){opt.markPoint=opt.markPoint||{}})}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(401).extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{normal:{show:true,position:"inside"},emphasis:{show:true}},itemStyle:{normal:{borderWidth:2}}}})}),(function(module,exports,__webpack_require__){var modelUtil=__webpack_require__(5);var zrUtil=__webpack_require__(4);var env=__webpack_require__(2);var formatUtil=__webpack_require__(6);var addCommas=formatUtil.addCommas;var encodeHTML=formatUtil.encodeHTML;function fillLabel(opt){modelUtil.defaultEmphasis(opt.label,["show"])}var MarkerModel=__webpack_require__(1).extendComponentModel({type:"marker",dependencies:["series","grid","polar","geo"],init:function(option,parentModel,ecModel,extraOpt){if(true){if(this.type==="marker"){throw new Error("Marker component is abstract component. Use markLine, markPoint, markArea instead.")}}this.mergeDefaultAndTheme(option,ecModel);this.mergeOption(option,ecModel,extraOpt.createdBySelf,true)},isAnimationEnabled:function(){if(env.node){return false}var hostSeries=this.__hostSeries;return this.getShallow("animation")&&hostSeries&&hostSeries.isAnimationEnabled()},mergeOption:function(newOpt,ecModel,createdBySelf,isInit){var MarkerModel=this.constructor;var modelPropName=this.mainType+"Model";if(!createdBySelf){ecModel.eachSeries(function(seriesModel){var markerOpt=seriesModel.get(this.mainType);var markerModel=seriesModel[modelPropName];if(!markerOpt||!markerOpt.data){seriesModel[modelPropName]=null;return}if(!markerModel){if(isInit){fillLabel(markerOpt)}zrUtil.each(markerOpt.data,function(item){if(item instanceof Array){fillLabel(item[0]);fillLabel(item[1])}else{fillLabel(item)}});markerModel=new MarkerModel(markerOpt,this,ecModel);zrUtil.extend(markerModel,{mainType:this.mainType,seriesIndex:seriesModel.seriesIndex,name:seriesModel.name,createdBySelf:true});markerModel.__hostSeries=seriesModel}else{markerModel.mergeOption(markerOpt,ecModel,true)}seriesModel[modelPropName]=markerModel},this)}},formatTooltip:function(dataIndex){var data=this.getData();var value=this.getRawValue(dataIndex);var formattedValue=zrUtil.isArray(value)?zrUtil.map(value,addCommas).join(", "):addCommas(value);var name=data.getName(dataIndex);var html=encodeHTML(this.name);if(value!=null||name){html+="<br />"}if(name){html+=encodeHTML(name);if(value!=null){html+=" : "}}if(value!=null){html+=encodeHTML(formattedValue)}return html},getData:function(){return this._data},setData:function(data){this._data=data}});zrUtil.mixin(MarkerModel,modelUtil.dataFormatMixin);module.exports=MarkerModel}),(function(module,exports,__webpack_require__){var SymbolDraw=__webpack_require__(119);var zrUtil=__webpack_require__(4);var numberUtil=__webpack_require__(7);var List=__webpack_require__(101);var markerHelper=__webpack_require__(403);function updateMarkerLayout(mpData,seriesModel,api){var coordSys=seriesModel.coordinateSystem;mpData.each(function(idx){var itemModel=mpData.getItemModel(idx);
var point;var xPx=numberUtil.parsePercent(itemModel.get("x"),api.getWidth());var yPx=numberUtil.parsePercent(itemModel.get("y"),api.getHeight());if(!isNaN(xPx)&&!isNaN(yPx)){point=[xPx,yPx]}else{if(seriesModel.getMarkerPosition){point=seriesModel.getMarkerPosition(mpData.getValues(mpData.dimensions,idx))}else{if(coordSys){var x=mpData.get(coordSys.dimensions[0],idx);var y=mpData.get(coordSys.dimensions[1],idx);point=coordSys.dataToPoint([x,y])}}}if(!isNaN(xPx)){point[0]=xPx}if(!isNaN(yPx)){point[1]=yPx}mpData.setItemLayout(idx,point)})}__webpack_require__(404).extend({type:"markPoint",updateLayout:function(markPointModel,ecModel,api){ecModel.eachSeries(function(seriesModel){var mpModel=seriesModel.markPointModel;if(mpModel){updateMarkerLayout(mpModel.getData(),seriesModel,api);this.markerGroupMap.get(seriesModel.id).updateLayout(mpModel)}},this)},renderSeries:function(seriesModel,mpModel,ecModel,api){var coordSys=seriesModel.coordinateSystem;var seriesId=seriesModel.id;var seriesData=seriesModel.getData();var symbolDrawMap=this.markerGroupMap;var symbolDraw=symbolDrawMap.get(seriesId)||symbolDrawMap.set(seriesId,new SymbolDraw());var mpData=createList(coordSys,seriesModel,mpModel);mpModel.setData(mpData);updateMarkerLayout(mpModel.getData(),seriesModel,api);mpData.each(function(idx){var itemModel=mpData.getItemModel(idx);var symbolSize=itemModel.getShallow("symbolSize");if(typeof symbolSize==="function"){symbolSize=symbolSize(mpModel.getRawValue(idx),mpModel.getDataParams(idx))}mpData.setItemVisual(idx,{symbolSize:symbolSize,color:itemModel.get("itemStyle.normal.color")||seriesData.getVisual("color"),symbol:itemModel.getShallow("symbol")})});symbolDraw.updateData(mpData);this.group.add(symbolDraw.group);mpData.eachItemGraphicEl(function(el){el.traverse(function(child){child.dataModel=mpModel})});symbolDraw.__keep=true;symbolDraw.group.silent=mpModel.get("silent")||seriesModel.get("silent")}});function createList(coordSys,seriesModel,mpModel){var coordDimsInfos;if(coordSys){coordDimsInfos=zrUtil.map(coordSys&&coordSys.dimensions,function(coordDim){var info=seriesModel.getData().getDimensionInfo(seriesModel.coordDimToDataDim(coordDim)[0])||{};info.name=coordDim;return info})}else{coordDimsInfos=[{name:"value",type:"float"}]}var mpData=new List(coordDimsInfos,mpModel);var dataOpt=zrUtil.map(mpModel.get("data"),zrUtil.curry(markerHelper.dataTransform,seriesModel));if(coordSys){dataOpt=zrUtil.filter(dataOpt,zrUtil.curry(markerHelper.dataFilter,coordSys))}mpData.initData(dataOpt,null,coordSys?markerHelper.dimValueGetter:function(item){return item.value});return mpData}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var numberUtil=__webpack_require__(7);var indexOf=zrUtil.indexOf;function hasXOrY(item){return !(isNaN(parseFloat(item.x))&&isNaN(parseFloat(item.y)))}function hasXAndY(item){return !isNaN(parseFloat(item.x))&&!isNaN(parseFloat(item.y))}function getPrecision(data,valueAxisDim,dataIndex){var precision=-1;do{precision=Math.max(numberUtil.getPrecision(data.get(valueAxisDim,dataIndex)),precision);data=data.stackedOn}while(data);return precision}function markerTypeCalculatorWithExtent(mlType,data,otherDataDim,targetDataDim,otherCoordIndex,targetCoordIndex){var coordArr=[];var value=numCalculate(data,targetDataDim,mlType);var dataIndex=data.indicesOfNearest(targetDataDim,value,true)[0];coordArr[otherCoordIndex]=data.get(otherDataDim,dataIndex,true);coordArr[targetCoordIndex]=data.get(targetDataDim,dataIndex,true);var precision=getPrecision(data,targetDataDim,dataIndex);precision=Math.min(precision,20);if(precision>=0){coordArr[targetCoordIndex]=+coordArr[targetCoordIndex].toFixed(precision)}return coordArr}var curry=zrUtil.curry;var markerTypeCalculator={min:curry(markerTypeCalculatorWithExtent,"min"),max:curry(markerTypeCalculatorWithExtent,"max"),average:curry(markerTypeCalculatorWithExtent,"average")};var dataTransform=function(seriesModel,item){var data=seriesModel.getData();var coordSys=seriesModel.coordinateSystem;if(item&&!hasXAndY(item)&&!zrUtil.isArray(item.coord)&&coordSys){var dims=coordSys.dimensions;var axisInfo=getAxisInfo(item,data,coordSys,seriesModel);item=zrUtil.clone(item);if(item.type&&markerTypeCalculator[item.type]&&axisInfo.baseAxis&&axisInfo.valueAxis){var otherCoordIndex=indexOf(dims,axisInfo.baseAxis.dim);var targetCoordIndex=indexOf(dims,axisInfo.valueAxis.dim);item.coord=markerTypeCalculator[item.type](data,axisInfo.baseDataDim,axisInfo.valueDataDim,otherCoordIndex,targetCoordIndex);item.value=item.coord[targetCoordIndex]}else{var coord=[item.xAxis!=null?item.xAxis:item.radiusAxis,item.yAxis!=null?item.yAxis:item.angleAxis];for(var i=0;i<2;i++){if(markerTypeCalculator[coord[i]]){var dataDim=seriesModel.coordDimToDataDim(dims[i])[0];coord[i]=numCalculate(data,dataDim,coord[i])}}item.coord=coord}}return item};var getAxisInfo=function(item,data,coordSys,seriesModel){var ret={};if(item.valueIndex!=null||item.valueDim!=null){ret.valueDataDim=item.valueIndex!=null?data.getDimension(item.valueIndex):item.valueDim;
ret.valueAxis=coordSys.getAxis(seriesModel.dataDimToCoordDim(ret.valueDataDim));ret.baseAxis=coordSys.getOtherAxis(ret.valueAxis);ret.baseDataDim=seriesModel.coordDimToDataDim(ret.baseAxis.dim)[0]}else{ret.baseAxis=seriesModel.getBaseAxis();ret.valueAxis=coordSys.getOtherAxis(ret.baseAxis);ret.baseDataDim=seriesModel.coordDimToDataDim(ret.baseAxis.dim)[0];ret.valueDataDim=seriesModel.coordDimToDataDim(ret.valueAxis.dim)[0]}return ret};var dataFilter=function(coordSys,item){return(coordSys&&coordSys.containData&&item.coord&&!hasXOrY(item))?coordSys.containData(item.coord):true};var dimValueGetter=function(item,dimName,dataIndex,dimIndex){if(dimIndex<2){return item.coord&&item.coord[dimIndex]}return item.value};var numCalculate=function(data,valueDataDim,type){if(type==="average"){var sum=0;var count=0;data.each(valueDataDim,function(val,idx){if(!isNaN(val)){sum+=val;count++}},true);return sum/count}else{return data.getDataExtent(valueDataDim,true)[type==="max"?1:0]}};module.exports={dataTransform:dataTransform,dataFilter:dataFilter,dimValueGetter:dimValueGetter,getAxisInfo:getAxisInfo,numCalculate:numCalculate}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);module.exports=__webpack_require__(1).extendComponentView({type:"marker",init:function(){this.markerGroupMap=zrUtil.createHashMap()},render:function(markerModel,ecModel,api){var markerGroupMap=this.markerGroupMap;markerGroupMap.each(function(item){item.__keep=false});var markerModelKey=this.type+"Model";ecModel.eachSeries(function(seriesModel){var markerModel=seriesModel[markerModelKey];markerModel&&this.renderSeries(seriesModel,markerModel,ecModel,api)},this);markerGroupMap.each(function(item){!item.__keep&&this.group.remove(item.group)},this)},renderSeries:function(){}})}),(function(module,exports,__webpack_require__){__webpack_require__(406);__webpack_require__(407);__webpack_require__(1).registerPreprocessor(function(opt){opt.markLine=opt.markLine||{}})}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(401).extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{normal:{show:true,position:"end"},emphasis:{show:true}},lineStyle:{normal:{type:"dashed"},emphasis:{width:3}},animationEasing:"linear"}})}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var List=__webpack_require__(101);var numberUtil=__webpack_require__(7);var markerHelper=__webpack_require__(403);var LineDraw=__webpack_require__(213);var markLineTransform=function(seriesModel,coordSys,mlModel,item){var data=seriesModel.getData();var mlType=item.type;if(!zrUtil.isArray(item)&&(mlType==="min"||mlType==="max"||mlType==="average"||(item.xAxis!=null||item.yAxis!=null))){var valueAxis;var valueDataDim;var value;if(item.yAxis!=null||item.xAxis!=null){valueDataDim=item.yAxis!=null?"y":"x";valueAxis=coordSys.getAxis(valueDataDim);value=zrUtil.retrieve(item.yAxis,item.xAxis)}else{var axisInfo=markerHelper.getAxisInfo(item,data,coordSys,seriesModel);valueDataDim=axisInfo.valueDataDim;valueAxis=axisInfo.valueAxis;value=markerHelper.numCalculate(data,valueDataDim,mlType)}var valueIndex=valueDataDim==="x"?0:1;var baseIndex=1-valueIndex;var mlFrom=zrUtil.clone(item);var mlTo={};mlFrom.type=null;mlFrom.coord=[];mlTo.coord=[];mlFrom.coord[baseIndex]=-Infinity;mlTo.coord[baseIndex]=Infinity;var precision=mlModel.get("precision");if(precision>=0&&typeof value==="number"){value=+value.toFixed(Math.min(precision,20))}mlFrom.coord[valueIndex]=mlTo.coord[valueIndex]=value;item=[mlFrom,mlTo,{type:mlType,valueIndex:item.valueIndex,value:value}]}item=[markerHelper.dataTransform(seriesModel,item[0]),markerHelper.dataTransform(seriesModel,item[1]),zrUtil.extend({},item[2])];item[2].type=item[2].type||"";zrUtil.merge(item[2],item[0]);zrUtil.merge(item[2],item[1]);return item};function isInifinity(val){return !isNaN(val)&&!isFinite(val)}function ifMarkLineHasOnlyDim(dimIndex,fromCoord,toCoord,coordSys){var otherDimIndex=1-dimIndex;var dimName=coordSys.dimensions[dimIndex];return isInifinity(fromCoord[otherDimIndex])&&isInifinity(toCoord[otherDimIndex])&&fromCoord[dimIndex]===toCoord[dimIndex]&&coordSys.getAxis(dimName).containData(fromCoord[dimIndex])}function markLineFilter(coordSys,item){if(coordSys.type==="cartesian2d"){var fromCoord=item[0].coord;var toCoord=item[1].coord;if(fromCoord&&toCoord&&(ifMarkLineHasOnlyDim(1,fromCoord,toCoord,coordSys)||ifMarkLineHasOnlyDim(0,fromCoord,toCoord,coordSys))){return true}}return markerHelper.dataFilter(coordSys,item[0])&&markerHelper.dataFilter(coordSys,item[1])}function updateSingleMarkerEndLayout(data,idx,isFrom,seriesModel,api){var coordSys=seriesModel.coordinateSystem;var itemModel=data.getItemModel(idx);var point;var xPx=numberUtil.parsePercent(itemModel.get("x"),api.getWidth());var yPx=numberUtil.parsePercent(itemModel.get("y"),api.getHeight());if(!isNaN(xPx)&&!isNaN(yPx)){point=[xPx,yPx]}else{if(seriesModel.getMarkerPosition){point=seriesModel.getMarkerPosition(data.getValues(data.dimensions,idx))
}else{var dims=coordSys.dimensions;var x=data.get(dims[0],idx);var y=data.get(dims[1],idx);point=coordSys.dataToPoint([x,y])}if(coordSys.type==="cartesian2d"){var xAxis=coordSys.getAxis("x");var yAxis=coordSys.getAxis("y");var dims=coordSys.dimensions;if(isInifinity(data.get(dims[0],idx))){point[0]=xAxis.toGlobalCoord(xAxis.getExtent()[isFrom?0:1])}else{if(isInifinity(data.get(dims[1],idx))){point[1]=yAxis.toGlobalCoord(yAxis.getExtent()[isFrom?0:1])}}}if(!isNaN(xPx)){point[0]=xPx}if(!isNaN(yPx)){point[1]=yPx}}data.setItemLayout(idx,point)}__webpack_require__(404).extend({type:"markLine",updateLayout:function(markLineModel,ecModel,api){ecModel.eachSeries(function(seriesModel){var mlModel=seriesModel.markLineModel;if(mlModel){var mlData=mlModel.getData();var fromData=mlModel.__from;var toData=mlModel.__to;fromData.each(function(idx){updateSingleMarkerEndLayout(fromData,idx,true,seriesModel,api);updateSingleMarkerEndLayout(toData,idx,false,seriesModel,api)});mlData.each(function(idx){mlData.setItemLayout(idx,[fromData.getItemLayout(idx),toData.getItemLayout(idx)])});this.markerGroupMap.get(seriesModel.id).updateLayout()}},this)},renderSeries:function(seriesModel,mlModel,ecModel,api){var coordSys=seriesModel.coordinateSystem;var seriesId=seriesModel.id;var seriesData=seriesModel.getData();var lineDrawMap=this.markerGroupMap;var lineDraw=lineDrawMap.get(seriesId)||lineDrawMap.set(seriesId,new LineDraw());this.group.add(lineDraw.group);var mlData=createList(coordSys,seriesModel,mlModel);var fromData=mlData.from;var toData=mlData.to;var lineData=mlData.line;mlModel.__from=fromData;mlModel.__to=toData;mlModel.setData(lineData);var symbolType=mlModel.get("symbol");var symbolSize=mlModel.get("symbolSize");if(!zrUtil.isArray(symbolType)){symbolType=[symbolType,symbolType]}if(typeof symbolSize==="number"){symbolSize=[symbolSize,symbolSize]}mlData.from.each(function(idx){updateDataVisualAndLayout(fromData,idx,true);updateDataVisualAndLayout(toData,idx,false)});lineData.each(function(idx){var lineColor=lineData.getItemModel(idx).get("lineStyle.normal.color");lineData.setItemVisual(idx,{color:lineColor||fromData.getItemVisual(idx,"color")});lineData.setItemLayout(idx,[fromData.getItemLayout(idx),toData.getItemLayout(idx)]);lineData.setItemVisual(idx,{"fromSymbolSize":fromData.getItemVisual(idx,"symbolSize"),"fromSymbol":fromData.getItemVisual(idx,"symbol"),"toSymbolSize":toData.getItemVisual(idx,"symbolSize"),"toSymbol":toData.getItemVisual(idx,"symbol")})});lineDraw.updateData(lineData);mlData.line.eachItemGraphicEl(function(el,idx){el.traverse(function(child){child.dataModel=mlModel})});function updateDataVisualAndLayout(data,idx,isFrom){var itemModel=data.getItemModel(idx);updateSingleMarkerEndLayout(data,idx,isFrom,seriesModel,api);data.setItemVisual(idx,{symbolSize:itemModel.get("symbolSize")||symbolSize[isFrom?0:1],symbol:itemModel.get("symbol",true)||symbolType[isFrom?0:1],color:itemModel.get("itemStyle.normal.color")||seriesData.getVisual("color")})}lineDraw.__keep=true;lineDraw.group.silent=mlModel.get("silent")||seriesModel.get("silent")}});function createList(coordSys,seriesModel,mlModel){var coordDimsInfos;if(coordSys){coordDimsInfos=zrUtil.map(coordSys&&coordSys.dimensions,function(coordDim){var info=seriesModel.getData().getDimensionInfo(seriesModel.coordDimToDataDim(coordDim)[0])||{};info.name=coordDim;return info})}else{coordDimsInfos=[{name:"value",type:"float"}]}var fromData=new List(coordDimsInfos,mlModel);var toData=new List(coordDimsInfos,mlModel);var lineData=new List([],mlModel);var optData=zrUtil.map(mlModel.get("data"),zrUtil.curry(markLineTransform,seriesModel,coordSys,mlModel));if(coordSys){optData=zrUtil.filter(optData,zrUtil.curry(markLineFilter,coordSys))}var dimValueGetter=coordSys?markerHelper.dimValueGetter:function(item){return item.value};fromData.initData(zrUtil.map(optData,function(item){return item[0]}),null,dimValueGetter);toData.initData(zrUtil.map(optData,function(item){return item[1]}),null,dimValueGetter);lineData.initData(zrUtil.map(optData,function(item){return item[2]}));lineData.hasItemOption=true;return{from:fromData,to:toData,line:lineData}}}),(function(module,exports,__webpack_require__){__webpack_require__(409);__webpack_require__(410);__webpack_require__(1).registerPreprocessor(function(opt){opt.markArea=opt.markArea||{}})}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(401).extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:false,label:{normal:{show:true,position:"top"},emphasis:{show:true,position:"top"}},itemStyle:{normal:{borderWidth:0}}}})}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var List=__webpack_require__(101);var numberUtil=__webpack_require__(7);var graphic=__webpack_require__(20);var colorUtil=__webpack_require__(33);var markerHelper=__webpack_require__(403);var markAreaTransform=function(seriesModel,coordSys,maModel,item){var lt=markerHelper.dataTransform(seriesModel,item[0]);
var rb=markerHelper.dataTransform(seriesModel,item[1]);var retrieve=zrUtil.retrieve;var ltCoord=lt.coord;var rbCoord=rb.coord;ltCoord[0]=retrieve(ltCoord[0],-Infinity);ltCoord[1]=retrieve(ltCoord[1],-Infinity);rbCoord[0]=retrieve(rbCoord[0],Infinity);rbCoord[1]=retrieve(rbCoord[1],Infinity);var result=zrUtil.mergeAll([{},lt,rb]);result.coord=[lt.coord,rb.coord];result.x0=lt.x;result.y0=lt.y;result.x1=rb.x;result.y1=rb.y;return result};function isInifinity(val){return !isNaN(val)&&!isFinite(val)}function ifMarkLineHasOnlyDim(dimIndex,fromCoord,toCoord,coordSys){var otherDimIndex=1-dimIndex;return isInifinity(fromCoord[otherDimIndex])&&isInifinity(toCoord[otherDimIndex])}function markAreaFilter(coordSys,item){var fromCoord=item.coord[0];var toCoord=item.coord[1];if(coordSys.type==="cartesian2d"){if(fromCoord&&toCoord&&(ifMarkLineHasOnlyDim(1,fromCoord,toCoord,coordSys)||ifMarkLineHasOnlyDim(0,fromCoord,toCoord,coordSys))){return true}}return markerHelper.dataFilter(coordSys,{coord:fromCoord,x:item.x0,y:item.y0})||markerHelper.dataFilter(coordSys,{coord:toCoord,x:item.x1,y:item.y1})}function getSingleMarkerEndPoint(data,idx,dims,seriesModel,api){var coordSys=seriesModel.coordinateSystem;var itemModel=data.getItemModel(idx);var point;var xPx=numberUtil.parsePercent(itemModel.get(dims[0]),api.getWidth());var yPx=numberUtil.parsePercent(itemModel.get(dims[1]),api.getHeight());if(!isNaN(xPx)&&!isNaN(yPx)){point=[xPx,yPx]}else{if(seriesModel.getMarkerPosition){point=seriesModel.getMarkerPosition(data.getValues(dims,idx))}else{var x=data.get(dims[0],idx);var y=data.get(dims[1],idx);point=coordSys.dataToPoint([x,y],true)}if(coordSys.type==="cartesian2d"){var xAxis=coordSys.getAxis("x");var yAxis=coordSys.getAxis("y");var x=data.get(dims[0],idx);var y=data.get(dims[1],idx);if(isInifinity(x)){point[0]=xAxis.toGlobalCoord(xAxis.getExtent()[dims[0]==="x0"?0:1])}else{if(isInifinity(y)){point[1]=yAxis.toGlobalCoord(yAxis.getExtent()[dims[1]==="y0"?0:1])}}}if(!isNaN(xPx)){point[0]=xPx}if(!isNaN(yPx)){point[1]=yPx}}return point}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];__webpack_require__(404).extend({type:"markArea",updateLayout:function(markAreaModel,ecModel,api){ecModel.eachSeries(function(seriesModel){var maModel=seriesModel.markAreaModel;if(maModel){var areaData=maModel.getData();areaData.each(function(idx){var points=zrUtil.map(dimPermutations,function(dim){return getSingleMarkerEndPoint(areaData,idx,dim,seriesModel,api)});areaData.setItemLayout(idx,points);var el=areaData.getItemGraphicEl(idx);el.setShape("points",points)})}},this)},renderSeries:function(seriesModel,maModel,ecModel,api){var coordSys=seriesModel.coordinateSystem;var seriesName=seriesModel.name;var seriesData=seriesModel.getData();var areaGroupMap=this.markerGroupMap;var polygonGroup=areaGroupMap.get(seriesName)||areaGroupMap.set(seriesName,{group:new graphic.Group()});this.group.add(polygonGroup.group);polygonGroup.__keep=true;var areaData=createList(coordSys,seriesModel,maModel);maModel.setData(areaData);areaData.each(function(idx){areaData.setItemLayout(idx,zrUtil.map(dimPermutations,function(dim){return getSingleMarkerEndPoint(areaData,idx,dim,seriesModel,api)}));areaData.setItemVisual(idx,{color:seriesData.getVisual("color")})});areaData.diff(polygonGroup.__data).add(function(idx){var polygon=new graphic.Polygon({shape:{points:areaData.getItemLayout(idx)}});areaData.setItemGraphicEl(idx,polygon);polygonGroup.group.add(polygon)}).update(function(newIdx,oldIdx){var polygon=polygonGroup.__data.getItemGraphicEl(oldIdx);graphic.updateProps(polygon,{shape:{points:areaData.getItemLayout(newIdx)}},maModel,newIdx);polygonGroup.group.add(polygon);areaData.setItemGraphicEl(newIdx,polygon)}).remove(function(idx){var polygon=polygonGroup.__data.getItemGraphicEl(idx);polygonGroup.group.remove(polygon)}).execute();areaData.eachItemGraphicEl(function(polygon,idx){var itemModel=areaData.getItemModel(idx);var labelModel=itemModel.getModel("label.normal");var labelHoverModel=itemModel.getModel("label.emphasis");var color=areaData.getItemVisual(idx,"color");polygon.useStyle(zrUtil.defaults(itemModel.getModel("itemStyle.normal").getItemStyle(),{fill:colorUtil.modifyAlpha(color,0.4),stroke:color}));polygon.hoverStyle=itemModel.getModel("itemStyle.emphasis").getItemStyle();graphic.setLabelStyle(polygon.style,polygon.hoverStyle,labelModel,labelHoverModel,{labelFetcher:maModel,labelDataIndex:idx,defaultText:areaData.getName(idx)||"",isRectText:true,autoColor:color});graphic.setHoverStyle(polygon,{});polygon.dataModel=maModel});polygonGroup.__data=areaData;polygonGroup.group.silent=maModel.get("silent")||seriesModel.get("silent")}});function createList(coordSys,seriesModel,maModel){var coordDimsInfos;var areaData;var dims=["x0","y0","x1","y1"];if(coordSys){coordDimsInfos=zrUtil.map(coordSys&&coordSys.dimensions,function(coordDim){var info=seriesModel.getData().getDimensionInfo(seriesModel.coordDimToDataDim(coordDim)[0])||{};info.name=coordDim;return info
});areaData=new List(zrUtil.map(dims,function(dim,idx){return{name:dim,type:coordDimsInfos[idx%2].type}}),maModel)}else{coordDimsInfos=[{name:"value",type:"float"}];areaData=new List(coordDimsInfos,maModel)}var optData=zrUtil.map(maModel.get("data"),zrUtil.curry(markAreaTransform,seriesModel,coordSys,maModel));if(coordSys){optData=zrUtil.filter(optData,zrUtil.curry(markAreaFilter,coordSys))}var dimValueGetter=coordSys?function(item,dimName,dataIndex,dimIndex){return item.coord[Math.floor(dimIndex/2)][dimIndex%2]}:function(item){return item.value};areaData.initData(optData,null,dimValueGetter);areaData.hasItemOption=true;return areaData}}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);echarts.registerPreprocessor(__webpack_require__(412));__webpack_require__(413);__webpack_require__(414);__webpack_require__(415);__webpack_require__(417)}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);module.exports=function(option){var timelineOpt=option&&option.timeline;if(!zrUtil.isArray(timelineOpt)){timelineOpt=timelineOpt?[timelineOpt]:[]}zrUtil.each(timelineOpt,function(opt){if(!opt){return}compatibleEC2(opt)})};function compatibleEC2(opt){var type=opt.type;var ec2Types={"number":"value","time":"time"};if(ec2Types[type]){opt.axisType=ec2Types[type];delete opt.type}transferItem(opt);if(has(opt,"controlPosition")){var controlStyle=opt.controlStyle||(opt.controlStyle={});if(!has(controlStyle,"position")){controlStyle.position=opt.controlPosition}if(controlStyle.position==="none"&&!has(controlStyle,"show")){controlStyle.show=false;delete controlStyle.position}delete opt.controlPosition}zrUtil.each(opt.data||[],function(dataItem){if(zrUtil.isObject(dataItem)&&!zrUtil.isArray(dataItem)){if(!has(dataItem,"value")&&has(dataItem,"name")){dataItem.value=dataItem.name}transferItem(dataItem)}})}function transferItem(opt){var itemStyle=opt.itemStyle||(opt.itemStyle={});var itemStyleEmphasis=itemStyle.emphasis||(itemStyle.emphasis={});var label=opt.label||(opt.label||{});var labelNormal=label.normal||(label.normal={});var excludeLabelAttr={normal:1,emphasis:1};zrUtil.each(label,function(value,name){if(!excludeLabelAttr[name]&&!has(labelNormal,name)){labelNormal[name]=value}});if(itemStyleEmphasis.label&&!has(label,"emphasis")){label.emphasis=itemStyleEmphasis.label;delete itemStyleEmphasis.label}}function has(obj,attr){return obj.hasOwnProperty(attr)}}),(function(module,exports,__webpack_require__){__webpack_require__(72).registerSubTypeDefaulter("timeline",function(){return"slider"})}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);var zrUtil=__webpack_require__(4);echarts.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(payload,ecModel){var timelineModel=ecModel.getComponent("timeline");if(timelineModel&&payload.currentIndex!=null){timelineModel.setCurrentIndex(payload.currentIndex);if(!timelineModel.get("loop",true)&&timelineModel.isIndexMax()){timelineModel.setPlayState(false)}}ecModel.resetOption("timeline");return zrUtil.defaults({currentIndex:timelineModel.option.currentIndex},payload)});echarts.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(payload,ecModel){var timelineModel=ecModel.getComponent("timeline");if(timelineModel&&payload.playState!=null){timelineModel.setPlayState(payload.playState)}})}),(function(module,exports,__webpack_require__){var TimelineModel=__webpack_require__(416);var zrUtil=__webpack_require__(4);var modelUtil=__webpack_require__(5);var SliderTimelineModel=TimelineModel.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:false,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:true,width:2,color:"#304654"},label:{position:"auto",normal:{show:true,interval:"auto",rotate:0,color:"#304654"},emphasis:{show:true,color:"#c23531"}},itemStyle:{normal:{color:"#304654",borderWidth:1},emphasis:{color:"#c23531"}},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:true,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:true,showPlayBtn:true,showPrevBtn:true,showNextBtn:true,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",normal:{color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}});
zrUtil.mixin(SliderTimelineModel,modelUtil.dataFormatMixin);module.exports=SliderTimelineModel}),(function(module,exports,__webpack_require__){var ComponentModel=__webpack_require__(72);var List=__webpack_require__(101);var zrUtil=__webpack_require__(4);var modelUtil=__webpack_require__(5);var TimelineModel=ComponentModel.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:true,axisType:"time",realtime:true,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:false,rewind:false,loop:true,playInterval:2000,currentIndex:0,itemStyle:{normal:{},emphasis:{}},label:{normal:{color:"#000"},emphasis:{}},data:[]},init:function(option,parentModel,ecModel){this._data;this._names;this.mergeDefaultAndTheme(option,ecModel);this._initData()},mergeOption:function(option){TimelineModel.superApply(this,"mergeOption",arguments);this._initData()},setCurrentIndex:function(currentIndex){if(currentIndex==null){currentIndex=this.option.currentIndex}var count=this._data.count();if(this.option.loop){currentIndex=(currentIndex%count+count)%count}else{currentIndex>=count&&(currentIndex=count-1);currentIndex<0&&(currentIndex=0)}this.option.currentIndex=currentIndex},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(state){this.option.autoPlay=!!state},getPlayState:function(){return !!this.option.autoPlay},_initData:function(){var thisOption=this.option;var dataArr=thisOption.data||[];var axisType=thisOption.axisType;var names=this._names=[];if(axisType==="category"){var idxArr=[];zrUtil.each(dataArr,function(item,index){var value=modelUtil.getDataItemValue(item);var newItem;if(zrUtil.isObject(item)){newItem=zrUtil.clone(item);newItem.value=index}else{newItem=index}idxArr.push(newItem);if(!zrUtil.isString(value)&&(value==null||isNaN(value))){value=""}names.push(value+"")});dataArr=idxArr}var dimType=({category:"ordinal",time:"time"})[axisType]||"number";var data=this._data=new List([{name:"value",type:dimType}],this);data.initData(dataArr,names)},getData:function(){return this._data},getCategories:function(){if(this.get("axisType")==="category"){return this._names.slice()}}});module.exports=TimelineModel}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var graphic=__webpack_require__(20);var layout=__webpack_require__(74);var TimelineView=__webpack_require__(418);var TimelineAxis=__webpack_require__(419);var symbolUtil=__webpack_require__(114);var axisHelper=__webpack_require__(104);var BoundingRect=__webpack_require__(9);var matrix=__webpack_require__(11);var numberUtil=__webpack_require__(7);var formatUtil=__webpack_require__(6);var encodeHTML=formatUtil.encodeHTML;var bind=zrUtil.bind;var each=zrUtil.each;var PI=Math.PI;module.exports=TimelineView.extend({type:"timeline.slider",init:function(ecModel,api){this.api=api;this._axis;this._viewRect;this._timer;this._currentPointer;this._mainGroup;this._labelGroup},render:function(timelineModel,ecModel,api,payload){this.model=timelineModel;this.api=api;this.ecModel=ecModel;this.group.removeAll();if(timelineModel.get("show",true)){var layoutInfo=this._layout(timelineModel,api);var mainGroup=this._createGroup("mainGroup");var labelGroup=this._createGroup("labelGroup");var axis=this._axis=this._createAxis(layoutInfo,timelineModel);timelineModel.formatTooltip=function(dataIndex){return encodeHTML(axis.scale.getLabel(dataIndex))};each(["AxisLine","AxisTick","Control","CurrentPointer"],function(name){this["_render"+name](layoutInfo,mainGroup,axis,timelineModel)},this);this._renderAxisLabel(layoutInfo,labelGroup,axis,timelineModel);this._position(layoutInfo,timelineModel)}this._doPlayStop()},remove:function(){this._clearTimer();this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(timelineModel,api){var labelPosOpt=timelineModel.get("label.normal.position");var orient=timelineModel.get("orient");var viewRect=getViewRect(timelineModel,api);if(labelPosOpt==null||labelPosOpt==="auto"){labelPosOpt=orient==="horizontal"?((viewRect.y+viewRect.height/2)<api.getHeight()/2?"-":"+"):((viewRect.x+viewRect.width/2)<api.getWidth()/2?"+":"-")}else{if(isNaN(labelPosOpt)){labelPosOpt=({horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}})[orient][labelPosOpt]}}var labelAlignMap={horizontal:"center",vertical:(labelPosOpt>=0||labelPosOpt==="+")?"left":"right"};var labelBaselineMap={horizontal:(labelPosOpt>=0||labelPosOpt==="+")?"top":"bottom",vertical:"middle"};var rotationMap={horizontal:0,vertical:PI/2};var mainLength=orient==="vertical"?viewRect.height:viewRect.width;var controlModel=timelineModel.getModel("controlStyle");var showControl=controlModel.get("show");var controlSize=showControl?controlModel.get("itemSize"):0;var controlGap=showControl?controlModel.get("itemGap"):0;var sizePlusGap=controlSize+controlGap;var labelRotation=timelineModel.get("label.normal.rotate")||0;
labelRotation=labelRotation*PI/180;var playPosition;var prevBtnPosition;var nextBtnPosition;var axisExtent;var controlPosition=controlModel.get("position",true);var showControl=controlModel.get("show",true);var showPlayBtn=showControl&&controlModel.get("showPlayBtn",true);var showPrevBtn=showControl&&controlModel.get("showPrevBtn",true);var showNextBtn=showControl&&controlModel.get("showNextBtn",true);var xLeft=0;var xRight=mainLength;if(controlPosition==="left"||controlPosition==="bottom"){showPlayBtn&&(playPosition=[0,0],xLeft+=sizePlusGap);showPrevBtn&&(prevBtnPosition=[xLeft,0],xLeft+=sizePlusGap);showNextBtn&&(nextBtnPosition=[xRight-controlSize,0],xRight-=sizePlusGap)}else{showPlayBtn&&(playPosition=[xRight-controlSize,0],xRight-=sizePlusGap);showPrevBtn&&(prevBtnPosition=[0,0],xLeft+=sizePlusGap);showNextBtn&&(nextBtnPosition=[xRight-controlSize,0],xRight-=sizePlusGap)}axisExtent=[xLeft,xRight];if(timelineModel.get("inverse")){axisExtent.reverse()}return{viewRect:viewRect,mainLength:mainLength,orient:orient,rotation:rotationMap[orient],labelRotation:labelRotation,labelPosOpt:labelPosOpt,labelAlign:timelineModel.get("label.normal.align")||labelAlignMap[orient],labelBaseline:timelineModel.get("label.normal.verticalAlign")||timelineModel.get("label.normal.baseline")||labelBaselineMap[orient],playPosition:playPosition,prevBtnPosition:prevBtnPosition,nextBtnPosition:nextBtnPosition,axisExtent:axisExtent,controlSize:controlSize,controlGap:controlGap}},_position:function(layoutInfo,timelineModel){var mainGroup=this._mainGroup;var labelGroup=this._labelGroup;var viewRect=layoutInfo.viewRect;if(layoutInfo.orient==="vertical"){var m=matrix.create();var rotateOriginX=viewRect.x;var rotateOriginY=viewRect.y+viewRect.height;matrix.translate(m,m,[-rotateOriginX,-rotateOriginY]);matrix.rotate(m,m,-PI/2);matrix.translate(m,m,[rotateOriginX,rotateOriginY]);viewRect=viewRect.clone();viewRect.applyTransform(m)}var viewBound=getBound(viewRect);var mainBound=getBound(mainGroup.getBoundingRect());var labelBound=getBound(labelGroup.getBoundingRect());var mainPosition=mainGroup.position;var labelsPosition=labelGroup.position;labelsPosition[0]=mainPosition[0]=viewBound[0][0];var labelPosOpt=layoutInfo.labelPosOpt;if(isNaN(labelPosOpt)){var mainBoundIdx=labelPosOpt==="+"?0:1;toBound(mainPosition,mainBound,viewBound,1,mainBoundIdx);toBound(labelsPosition,labelBound,viewBound,1,1-mainBoundIdx)}else{var mainBoundIdx=labelPosOpt>=0?0:1;toBound(mainPosition,mainBound,viewBound,1,mainBoundIdx);labelsPosition[1]=mainPosition[1]+labelPosOpt}mainGroup.attr("position",mainPosition);labelGroup.attr("position",labelsPosition);mainGroup.rotation=labelGroup.rotation=layoutInfo.rotation;setOrigin(mainGroup);setOrigin(labelGroup);function setOrigin(targetGroup){var pos=targetGroup.position;targetGroup.origin=[viewBound[0][0]-pos[0],viewBound[1][0]-pos[1]]}function getBound(rect){return[[rect.x,rect.x+rect.width],[rect.y,rect.y+rect.height]]}function toBound(fromPos,from,to,dimIdx,boundIdx){fromPos[dimIdx]+=to[dimIdx][boundIdx]-from[dimIdx][boundIdx]}},_createAxis:function(layoutInfo,timelineModel){var data=timelineModel.getData();var axisType=timelineModel.get("axisType");var scale=axisHelper.createScaleByModel(timelineModel,axisType);var dataExtent=data.getDataExtent("value");scale.setExtent(dataExtent[0],dataExtent[1]);this._customizeScale(scale,data);scale.niceTicks();var axis=new TimelineAxis("value",scale,layoutInfo.axisExtent,axisType);axis.model=timelineModel;return axis},_customizeScale:function(scale,data){scale.getTicks=function(){return data.mapArray(["value"],function(value){return value})};scale.getTicksLabels=function(){return zrUtil.map(this.getTicks(),scale.getLabel,scale)}},_createGroup:function(name){var newGroup=this["_"+name]=new graphic.Group();this.group.add(newGroup);return newGroup},_renderAxisLine:function(layoutInfo,group,axis,timelineModel){var axisExtent=axis.getExtent();if(!timelineModel.get("lineStyle.show")){return}group.add(new graphic.Line({shape:{x1:axisExtent[0],y1:0,x2:axisExtent[1],y2:0},style:zrUtil.extend({lineCap:"round"},timelineModel.getModel("lineStyle").getLineStyle()),silent:true,z2:1}))},_renderAxisTick:function(layoutInfo,group,axis,timelineModel){var data=timelineModel.getData();var ticks=axis.scale.getTicks();each(ticks,function(value,dataIndex){var tickCoord=axis.dataToCoord(value);var itemModel=data.getItemModel(dataIndex);var itemStyleModel=itemModel.getModel("itemStyle.normal");var hoverStyleModel=itemModel.getModel("itemStyle.emphasis");var symbolOpt={position:[tickCoord,0],onclick:bind(this._changeTimeline,this,dataIndex)};var el=giveSymbol(itemModel,itemStyleModel,group,symbolOpt);graphic.setHoverStyle(el,hoverStyleModel.getItemStyle());if(itemModel.get("tooltip")){el.dataIndex=dataIndex;el.dataModel=timelineModel}else{el.dataIndex=el.dataModel=null}},this)},_renderAxisLabel:function(layoutInfo,group,axis,timelineModel){var labelModel=timelineModel.getModel("label.normal");if(!labelModel.get("show")){return
}var data=timelineModel.getData();var ticks=axis.scale.getTicks();var labels=axisHelper.getFormattedLabels(axis,labelModel.get("formatter"));var labelInterval=axis.getLabelInterval();each(ticks,function(tick,dataIndex){if(axis.isLabelIgnored(dataIndex,labelInterval)){return}var itemModel=data.getItemModel(dataIndex);var normalLabelModel=itemModel.getModel("label.normal");var hoverLabelModel=itemModel.getModel("label.emphasis");var tickCoord=axis.dataToCoord(tick);var textEl=new graphic.Text({position:[tickCoord,0],rotation:layoutInfo.labelRotation-layoutInfo.rotation,onclick:bind(this._changeTimeline,this,dataIndex),silent:false});graphic.setTextStyle(textEl.style,normalLabelModel,{text:labels[dataIndex],textAlign:layoutInfo.labelAlign,textVerticalAlign:layoutInfo.labelBaseline});group.add(textEl);graphic.setHoverStyle(textEl,graphic.setTextStyle({},hoverLabelModel))},this)},_renderControl:function(layoutInfo,group,axis,timelineModel){var controlSize=layoutInfo.controlSize;var rotation=layoutInfo.rotation;var itemStyle=timelineModel.getModel("controlStyle.normal").getItemStyle();var hoverStyle=timelineModel.getModel("controlStyle.emphasis").getItemStyle();var rect=[0,-controlSize/2,controlSize,controlSize];var playState=timelineModel.getPlayState();var inverse=timelineModel.get("inverse",true);makeBtn(layoutInfo.nextBtnPosition,"controlStyle.nextIcon",bind(this._changeTimeline,this,inverse?"-":"+"));makeBtn(layoutInfo.prevBtnPosition,"controlStyle.prevIcon",bind(this._changeTimeline,this,inverse?"+":"-"));makeBtn(layoutInfo.playPosition,"controlStyle."+(playState?"stopIcon":"playIcon"),bind(this._handlePlayClick,this,!playState),true);function makeBtn(position,iconPath,onclick,willRotate){if(!position){return}var opt={position:position,origin:[controlSize/2,0],rotation:willRotate?-rotation:0,rectHover:true,style:itemStyle,onclick:onclick};var btn=makeIcon(timelineModel,iconPath,rect,opt);group.add(btn);graphic.setHoverStyle(btn,hoverStyle)}},_renderCurrentPointer:function(layoutInfo,group,axis,timelineModel){var data=timelineModel.getData();var currentIndex=timelineModel.getCurrentIndex();var pointerModel=data.getItemModel(currentIndex).getModel("checkpointStyle");var me=this;var callback={onCreate:function(pointer){pointer.draggable=true;pointer.drift=bind(me._handlePointerDrag,me);pointer.ondragend=bind(me._handlePointerDragend,me);pointerMoveTo(pointer,currentIndex,axis,timelineModel,true)},onUpdate:function(pointer){pointerMoveTo(pointer,currentIndex,axis,timelineModel)}};this._currentPointer=giveSymbol(pointerModel,pointerModel,this._mainGroup,{},this._currentPointer,callback)},_handlePlayClick:function(nextState){this._clearTimer();this.api.dispatchAction({type:"timelinePlayChange",playState:nextState,from:this.uid})},_handlePointerDrag:function(dx,dy,e){this._clearTimer();this._pointerChangeTimeline([e.offsetX,e.offsetY])},_handlePointerDragend:function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],true)},_pointerChangeTimeline:function(mousePos,trigger){var toCoord=this._toAxisCoord(mousePos)[0];var axis=this._axis;var axisExtent=numberUtil.asc(axis.getExtent().slice());toCoord>axisExtent[1]&&(toCoord=axisExtent[1]);toCoord<axisExtent[0]&&(toCoord=axisExtent[0]);this._currentPointer.position[0]=toCoord;this._currentPointer.dirty();var targetDataIndex=this._findNearestTick(toCoord);var timelineModel=this.model;if(trigger||(targetDataIndex!==timelineModel.getCurrentIndex()&&timelineModel.get("realtime"))){this._changeTimeline(targetDataIndex)}},_doPlayStop:function(){this._clearTimer();if(this.model.getPlayState()){this._timer=setTimeout(bind(handleFrame,this),this.model.get("playInterval"))}function handleFrame(){var timelineModel=this.model;this._changeTimeline(timelineModel.getCurrentIndex()+(timelineModel.get("rewind",true)?-1:1))}},_toAxisCoord:function(vertex){var trans=this._mainGroup.getLocalTransform();return graphic.applyTransform(vertex,trans,true)},_findNearestTick:function(axisCoord){var data=this.model.getData();var dist=Infinity;var targetDataIndex;var axis=this._axis;data.each(["value"],function(value,dataIndex){var coord=axis.dataToCoord(value);var d=Math.abs(coord-axisCoord);if(d<dist){dist=d;targetDataIndex=dataIndex}});return targetDataIndex},_clearTimer:function(){if(this._timer){clearTimeout(this._timer);this._timer=null}},_changeTimeline:function(nextIndex){var currentIndex=this.model.getCurrentIndex();if(nextIndex==="+"){nextIndex=currentIndex+1}else{if(nextIndex==="-"){nextIndex=currentIndex-1}}this.api.dispatchAction({type:"timelineChange",currentIndex:nextIndex,from:this.uid})}});function getViewRect(model,api){return layout.getLayoutRect(model.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()},model.get("padding"))}function makeIcon(timelineModel,objPath,rect,opts){var icon=graphic.makePath(timelineModel.get(objPath).replace(/^path:\/\//,""),zrUtil.clone(opts||{}),new BoundingRect(rect[0],rect[1],rect[2],rect[3]),"center");return icon}function giveSymbol(hostModel,itemStyleModel,group,opt,symbol,callback){var color=itemStyleModel.get("color");
if(!symbol){var symbolType=hostModel.get("symbol");symbol=symbolUtil.createSymbol(symbolType,-1,-1,2,2,color);symbol.setStyle("strokeNoScale",true);group.add(symbol);callback&&callback.onCreate(symbol)}else{symbol.setColor(color);group.add(symbol);callback&&callback.onUpdate(symbol)}var itemStyle=itemStyleModel.getItemStyle(["color","symbol","symbolSize"]);symbol.setStyle(itemStyle);opt=zrUtil.merge({rectHover:true,z2:100},opt,true);var symbolSize=hostModel.get("symbolSize");symbolSize=symbolSize instanceof Array?symbolSize.slice():[+symbolSize,+symbolSize];symbolSize[0]/=2;symbolSize[1]/=2;opt.scale=symbolSize;var symbolOffset=hostModel.get("symbolOffset");if(symbolOffset){var pos=opt.position=opt.position||[0,0];pos[0]+=numberUtil.parsePercent(symbolOffset[0],symbolSize[0]);pos[1]+=numberUtil.parsePercent(symbolOffset[1],symbolSize[1])}var symbolRotate=hostModel.get("symbolRotate");opt.rotation=(symbolRotate||0)*Math.PI/180||0;symbol.attr(opt);symbol.updateTransform();return symbol}function pointerMoveTo(pointer,dataIndex,axis,timelineModel,noAnimation){if(pointer.dragging){return}var pointerModel=timelineModel.getModel("checkpointStyle");var toCoord=axis.dataToCoord(timelineModel.getData().get(["value"],dataIndex));if(noAnimation||!pointerModel.get("animation",true)){pointer.attr({position:[toCoord,0]})}else{pointer.stopAnimation(true);pointer.animateTo({position:[toCoord,0]},pointerModel.get("animationDuration",true),pointerModel.get("animationEasing",true))}}}),(function(module,exports,__webpack_require__){var ComponentView=__webpack_require__(84);module.exports=ComponentView.extend({type:"timeline"})}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var Axis=__webpack_require__(103);var axisHelper=__webpack_require__(104);var TimelineAxis=function(dim,scale,coordExtent,axisType){Axis.call(this,dim,scale,coordExtent);this.type=axisType||"value";this._autoLabelInterval;this.model=null};TimelineAxis.prototype={constructor:TimelineAxis,getLabelInterval:function(){var timelineModel=this.model;var labelModel=timelineModel.getModel("label.normal");var labelInterval=labelModel.get("interval");if(labelInterval!=null&&labelInterval!="auto"){return labelInterval}var labelInterval=this._autoLabelInterval;if(!labelInterval){labelInterval=this._autoLabelInterval=axisHelper.getAxisLabelInterval(zrUtil.map(this.scale.getTicks(),this.dataToCoord,this),axisHelper.getFormattedLabels(this,labelModel.get("formatter")),labelModel.getFont(),timelineModel.get("orient")==="horizontal")}return labelInterval},isLabelIgnored:function(idx){if(this.type==="category"){var labelInterval=this.getLabelInterval();return((typeof labelInterval==="function")&&!labelInterval(idx,this.scale.getLabel(idx)))||idx%(labelInterval+1)}}};zrUtil.inherits(TimelineAxis,Axis);module.exports=TimelineAxis}),(function(module,exports,__webpack_require__){__webpack_require__(421);__webpack_require__(422);__webpack_require__(423);__webpack_require__(424);__webpack_require__(425);__webpack_require__(426);__webpack_require__(431)}),(function(module,exports,__webpack_require__){var featureManager=__webpack_require__(364);var zrUtil=__webpack_require__(4);var ToolboxModel=__webpack_require__(1).extendComponentModel({type:"toolbox",layoutMode:{type:"box",ignoreSize:true},mergeDefaultAndTheme:function(option){ToolboxModel.superApply(this,"mergeDefaultAndTheme",arguments);zrUtil.each(this.option.feature,function(featureOpt,featureName){var Feature=featureManager.get(featureName);Feature&&zrUtil.merge(featureOpt,Feature.defaultOption)})},defaultOption:{show:true,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:true,iconStyle:{normal:{borderColor:"#666",color:"none"},emphasis:{borderColor:"#3E98C5"}}}});module.exports=ToolboxModel}),(function(module,exports,__webpack_require__){(function(process){var featureManager=__webpack_require__(364);var zrUtil=__webpack_require__(4);var graphic=__webpack_require__(20);var Model=__webpack_require__(14);var DataDiffer=__webpack_require__(102);var listComponentHelper=__webpack_require__(329);var textContain=__webpack_require__(8);module.exports=__webpack_require__(1).extendComponentView({type:"toolbox",render:function(toolboxModel,ecModel,api,payload){var group=this.group;group.removeAll();if(!toolboxModel.get("show")){return}var itemSize=+toolboxModel.get("itemSize");var featureOpts=toolboxModel.get("feature")||{};var features=this._features||(this._features={});var featureNames=[];zrUtil.each(featureOpts,function(opt,name){featureNames.push(name)});(new DataDiffer(this._featureNames||[],featureNames)).add(process).update(process).remove(zrUtil.curry(process,null)).execute();this._featureNames=featureNames;function process(newIndex,oldIndex){var featureName=featureNames[newIndex];var oldName=featureNames[oldIndex];var featureOpt=featureOpts[featureName];var featureModel=new Model(featureOpt,toolboxModel,toolboxModel.ecModel);
var feature;if(featureName&&!oldName){if(isUserFeatureName(featureName)){feature={model:featureModel,onclick:featureModel.option.onclick,featureName:featureName}}else{var Feature=featureManager.get(featureName);if(!Feature){return}feature=new Feature(featureModel,ecModel,api)}features[featureName]=feature}else{feature=features[oldName];if(!feature){return}feature.model=featureModel;feature.ecModel=ecModel;feature.api=api}if(!featureName&&oldName){feature.dispose&&feature.dispose(ecModel,api);return}if(!featureModel.get("show")||feature.unusable){feature.remove&&feature.remove(ecModel,api);return}createIconPaths(featureModel,feature,featureName);featureModel.setIconStatus=function(iconName,status){var option=this.option;var iconPaths=this.iconPaths;option.iconStatus=option.iconStatus||{};option.iconStatus[iconName]=status;iconPaths[iconName]&&iconPaths[iconName].trigger(status)};if(feature.render){feature.render(featureModel,ecModel,api,payload)}}function createIconPaths(featureModel,feature,featureName){var iconStyleModel=featureModel.getModel("iconStyle");var icons=feature.getIcons?feature.getIcons():featureModel.get("icon");var titles=featureModel.get("title")||{};if(typeof icons==="string"){var icon=icons;var title=titles;icons={};titles={};icons[featureName]=icon;titles[featureName]=title}var iconPaths=featureModel.iconPaths={};zrUtil.each(icons,function(iconStr,iconName){var path=graphic.createIcon(iconStr,{},{x:-itemSize/2,y:-itemSize/2,width:itemSize,height:itemSize});path.setStyle(iconStyleModel.getModel("normal").getItemStyle());path.hoverStyle=iconStyleModel.getModel("emphasis").getItemStyle();graphic.setHoverStyle(path);if(toolboxModel.get("showTitle")){path.__title=titles[iconName];path.on("mouseover",function(){var hoverStyle=iconStyleModel.getModel("emphasis").getItemStyle();path.setStyle({text:titles[iconName],textPosition:hoverStyle.textPosition||"bottom",textFill:hoverStyle.fill||hoverStyle.stroke||"#000",textAlign:hoverStyle.textAlign||"center"})}).on("mouseout",function(){path.setStyle({textFill:null})})}path.trigger(featureModel.get("iconStatus."+iconName)||"normal");group.add(path);path.on("click",zrUtil.bind(feature.onclick,feature,ecModel,api,iconName));iconPaths[iconName]=path})}listComponentHelper.layout(group,toolboxModel,api);group.add(listComponentHelper.makeBackground(group.getBoundingRect(),toolboxModel));group.eachChild(function(icon){var titleText=icon.__title;var hoverStyle=icon.hoverStyle;if(hoverStyle&&titleText){var rect=textContain.getBoundingRect(titleText,textContain.makeFont(hoverStyle));var offsetX=icon.position[0]+group.position[0];var offsetY=icon.position[1]+group.position[1]+itemSize;var needPutOnTop=false;if(offsetY+rect.height>api.getHeight()){hoverStyle.textPosition="top";needPutOnTop=true}var topOffset=needPutOnTop?(-5-rect.height):(itemSize+8);if(offsetX+rect.width/2>api.getWidth()){hoverStyle.textPosition=["100%",topOffset];hoverStyle.textAlign="right"}else{if(offsetX-rect.width/2<0){hoverStyle.textPosition=[0,topOffset];hoverStyle.textAlign="left"}}}})},updateView:function(toolboxModel,ecModel,api,payload){zrUtil.each(this._features,function(feature){feature.updateView&&feature.updateView(feature.model,ecModel,api,payload)})},updateLayout:function(toolboxModel,ecModel,api,payload){zrUtil.each(this._features,function(feature){feature.updateLayout&&feature.updateLayout(feature.model,ecModel,api,payload)})},remove:function(ecModel,api){zrUtil.each(this._features,function(feature){feature.remove&&feature.remove(ecModel,api)});this.group.removeAll()},dispose:function(ecModel,api){zrUtil.each(this._features,function(feature){feature.dispose&&feature.dispose(ecModel,api)})}});function isUserFeatureName(featureName){return featureName.indexOf("my")===0}}.call(exports,__webpack_require__(313)))}),(function(module,exports,__webpack_require__){var env=__webpack_require__(2);var lang=__webpack_require__(365).toolbox.saveAsImage;function SaveAsImage(model){this.model=model}SaveAsImage.defaultOption={show:true,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:lang.title,type:"png",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:lang.lang.slice()};SaveAsImage.prototype.unusable=!env.canvasSupported;var proto=SaveAsImage.prototype;proto.onclick=function(ecModel,api){var model=this.model;var title=model.get("name")||ecModel.get("title.0.text")||"echarts";var $a=document.createElement("a");var type=model.get("type",true)||"png";$a.download=title+"."+type;$a.target="_blank";var url=api.getConnectedDataURL({type:type,backgroundColor:model.get("backgroundColor",true)||ecModel.get("backgroundColor")||"#fff",excludeComponents:model.get("excludeComponents"),pixelRatio:model.get("pixelRatio")});$a.href=url;if(typeof MouseEvent==="function"&&!env.browser.ie&&!env.browser.edge){var evt=new MouseEvent("click",{view:window,bubbles:true,cancelable:false});$a.dispatchEvent(evt)}else{if(window.navigator.msSaveOrOpenBlob){var bstr=atob(url.split(",")[1]);
var n=bstr.length;var u8arr=new Uint8Array(n);while(n--){u8arr[n]=bstr.charCodeAt(n)}var blob=new Blob([u8arr]);window.navigator.msSaveOrOpenBlob(blob,title+"."+type)}else{var lang=model.get("lang");var html=""+'<body style="margin:0;">'+'<img src="'+url+'" style="max-width:100%;" title="'+((lang&&lang[0])||"")+'" />'+"</body>";var tab=window.open();tab.document.write(html)}}};__webpack_require__(364).register("saveAsImage",SaveAsImage);module.exports=SaveAsImage}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var lang=__webpack_require__(365).toolbox.magicType;function MagicType(model){this.model=model}MagicType.defaultOption={show:true,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z",tiled:"M2.3,2.2h22.8V25H2.3V2.2z M35,2.2h22.8V25H35V2.2zM2.3,35h22.8v22.8H2.3V35z M35,35h22.8v22.8H35V35z"},title:zrUtil.clone(lang.title),option:{},seriesIndex:{}};var proto=MagicType.prototype;proto.getIcons=function(){var model=this.model;var availableIcons=model.get("icon");var icons={};zrUtil.each(model.get("type"),function(type){if(availableIcons[type]){icons[type]=availableIcons[type]}});return icons};var seriesOptGenreator={"line":function(seriesType,seriesId,seriesModel,model){if(seriesType==="bar"){return zrUtil.merge({id:seriesId,type:"line",data:seriesModel.get("data"),stack:seriesModel.get("stack"),markPoint:seriesModel.get("markPoint"),markLine:seriesModel.get("markLine")},model.get("option.line")||{},true)}},"bar":function(seriesType,seriesId,seriesModel,model){if(seriesType==="line"){return zrUtil.merge({id:seriesId,type:"bar",data:seriesModel.get("data"),stack:seriesModel.get("stack"),markPoint:seriesModel.get("markPoint"),markLine:seriesModel.get("markLine")},model.get("option.bar")||{},true)}},"stack":function(seriesType,seriesId,seriesModel,model){if(seriesType==="line"||seriesType==="bar"){return zrUtil.merge({id:seriesId,stack:"__ec_magicType_stack__"},model.get("option.stack")||{},true)}},"tiled":function(seriesType,seriesId,seriesModel,model){if(seriesType==="line"||seriesType==="bar"){return zrUtil.merge({id:seriesId,stack:""},model.get("option.tiled")||{},true)}}};var radioTypes=[["line","bar"],["stack","tiled"]];proto.onclick=function(ecModel,api,type){var model=this.model;var seriesIndex=model.get("seriesIndex."+type);if(!seriesOptGenreator[type]){return}var newOption={series:[]};var generateNewSeriesTypes=function(seriesModel){var seriesType=seriesModel.subType;var seriesId=seriesModel.id;var newSeriesOpt=seriesOptGenreator[type](seriesType,seriesId,seriesModel,model);if(newSeriesOpt){zrUtil.defaults(newSeriesOpt,seriesModel.option);newOption.series.push(newSeriesOpt)}var coordSys=seriesModel.coordinateSystem;if(coordSys&&coordSys.type==="cartesian2d"&&(type==="line"||type==="bar")){var categoryAxis=coordSys.getAxesByScale("ordinal")[0];if(categoryAxis){var axisDim=categoryAxis.dim;var axisType=axisDim+"Axis";var axisModel=ecModel.queryComponents({mainType:axisType,index:seriesModel.get(name+"Index"),id:seriesModel.get(name+"Id")})[0];var axisIndex=axisModel.componentIndex;newOption[axisType]=newOption[axisType]||[];for(var i=0;i<=axisIndex;i++){newOption[axisType][axisIndex]=newOption[axisType][axisIndex]||{}}newOption[axisType][axisIndex].boundaryGap=type==="bar"?true:false}}};zrUtil.each(radioTypes,function(radio){if(zrUtil.indexOf(radio,type)>=0){zrUtil.each(radio,function(item){model.setIconStatus(item,"normal")})}});model.setIconStatus(type,"emphasis");ecModel.eachComponent({mainType:"series",query:seriesIndex==null?null:{seriesIndex:seriesIndex}},generateNewSeriesTypes);api.dispatchAction({type:"changeMagicType",currentType:type,newOption:newOption})};var echarts=__webpack_require__(1);echarts.registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(payload,ecModel){ecModel.mergeOption(payload.newOption)});__webpack_require__(364).register("magicType",MagicType);module.exports=MagicType}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var eventTool=__webpack_require__(93);var lang=__webpack_require__(365).toolbox.dataView;var BLOCK_SPLITER=new Array(60).join("-");var ITEM_SPLITER="\t";function groupSeries(ecModel){var seriesGroupByCategoryAxis={};var otherSeries=[];var meta=[];ecModel.eachRawSeries(function(seriesModel){var coordSys=seriesModel.coordinateSystem;if(coordSys&&(coordSys.type==="cartesian2d"||coordSys.type==="polar")){var baseAxis=coordSys.getBaseAxis();if(baseAxis.type==="category"){var key=baseAxis.dim+"_"+baseAxis.index;
if(!seriesGroupByCategoryAxis[key]){seriesGroupByCategoryAxis[key]={categoryAxis:baseAxis,valueAxis:coordSys.getOtherAxis(baseAxis),series:[]};meta.push({axisDim:baseAxis.dim,axisIndex:baseAxis.index})}seriesGroupByCategoryAxis[key].series.push(seriesModel)}else{otherSeries.push(seriesModel)}}else{otherSeries.push(seriesModel)}});return{seriesGroupByCategoryAxis:seriesGroupByCategoryAxis,other:otherSeries,meta:meta}}function assembleSeriesWithCategoryAxis(series){var tables=[];zrUtil.each(series,function(group,key){var categoryAxis=group.categoryAxis;var valueAxis=group.valueAxis;var valueAxisDim=valueAxis.dim;var headers=[" "].concat(zrUtil.map(group.series,function(series){return series.name}));var columns=[categoryAxis.model.getCategories()];zrUtil.each(group.series,function(series){columns.push(series.getRawData().mapArray(valueAxisDim,function(val){return val}))});var lines=[headers.join(ITEM_SPLITER)];for(var i=0;i<columns[0].length;i++){var items=[];for(var j=0;j<columns.length;j++){items.push(columns[j][i])}lines.push(items.join(ITEM_SPLITER))}tables.push(lines.join("\n"))});return tables.join("\n\n"+BLOCK_SPLITER+"\n\n")}function assembleOtherSeries(series){return zrUtil.map(series,function(series){var data=series.getRawData();var lines=[series.name];var vals=[];data.each(data.dimensions,function(){var argLen=arguments.length;var dataIndex=arguments[argLen-1];var name=data.getName(dataIndex);for(var i=0;i<argLen-1;i++){vals[i]=arguments[i]}lines.push((name?(name+ITEM_SPLITER):"")+vals.join(ITEM_SPLITER))});return lines.join("\n")}).join("\n\n"+BLOCK_SPLITER+"\n\n")}function getContentFromModel(ecModel){var result=groupSeries(ecModel);return{value:zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis),assembleOtherSeries(result.other)],function(str){return str.replace(/[\n\t\s]/g,"")}).join("\n\n"+BLOCK_SPLITER+"\n\n"),meta:result.meta}}function trim(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function isTSVFormat(block){var firstLine=block.slice(0,block.indexOf("\n"));if(firstLine.indexOf(ITEM_SPLITER)>=0){return true}}var itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");function parseTSVContents(tsv){var tsvLines=tsv.split(/\n+/g);var headers=trim(tsvLines.shift()).split(itemSplitRegex);var categories=[];var series=zrUtil.map(headers,function(header){return{name:header,data:[]}});for(var i=0;i<tsvLines.length;i++){var items=trim(tsvLines[i]).split(itemSplitRegex);categories.push(items.shift());for(var j=0;j<items.length;j++){series[j]&&(series[j].data[i]=items[j])}}return{series:series,categories:categories}}function parseListContents(str){var lines=str.split(/\n+/g);var seriesName=trim(lines.shift());var data=[];for(var i=0;i<lines.length;i++){var items=trim(lines[i]).split(itemSplitRegex);var name="";var value;var hasName=false;if(isNaN(items[0])){hasName=true;name=items[0];items=items.slice(1);data[i]={name:name,value:[]};value=data[i].value}else{value=data[i]=[]}for(var j=0;j<items.length;j++){value.push(+items[j])}if(value.length===1){hasName?(data[i].value=value[0]):(data[i]=value[0])}}return{name:seriesName,data:data}}function parseContents(str,blockMetaList){var blocks=str.split(new RegExp("\n*"+BLOCK_SPLITER+"\n*","g"));var newOption={series:[]};zrUtil.each(blocks,function(block,idx){if(isTSVFormat(block)){var result=parseTSVContents(block);var blockMeta=blockMetaList[idx];var axisKey=blockMeta.axisDim+"Axis";if(blockMeta){newOption[axisKey]=newOption[axisKey]||[];newOption[axisKey][blockMeta.axisIndex]={data:result.categories};newOption.series=newOption.series.concat(result.series)}}else{var result=parseListContents(block);newOption.series.push(result)}});return newOption}function DataView(model){this._dom=null;this.model=model}DataView.defaultOption={show:true,readOnly:false,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:zrUtil.clone(lang.title),lang:zrUtil.clone(lang.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};DataView.prototype.onclick=function(ecModel,api){var container=api.getDom();var model=this.model;if(this._dom){container.removeChild(this._dom)}var root=document.createElement("div");root.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;";root.style.backgroundColor=model.get("backgroundColor")||"#fff";var header=document.createElement("h4");var lang=model.get("lang")||[];header.innerHTML=lang[0]||model.get("title");header.style.cssText="margin: 10px 20px;";header.style.color=model.get("textColor");var viewMain=document.createElement("div");var textarea=document.createElement("textarea");viewMain.style.cssText="display:block;width:100%;overflow:auto;";var optionToContent=model.get("optionToContent");var contentToOption=model.get("contentToOption");var result=getContentFromModel(ecModel);if(typeof optionToContent==="function"){var htmlOrDom=optionToContent(api.getOption());
if(typeof htmlOrDom==="string"){viewMain.innerHTML=htmlOrDom}else{if(zrUtil.isDom(htmlOrDom)){viewMain.appendChild(htmlOrDom)}}}else{viewMain.appendChild(textarea);textarea.readOnly=model.get("readOnly");textarea.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;";textarea.style.color=model.get("textColor");textarea.style.borderColor=model.get("textareaBorderColor");textarea.style.backgroundColor=model.get("textareaColor");textarea.value=result.value}var blockMetaList=result.meta;var buttonContainer=document.createElement("div");buttonContainer.style.cssText="position:absolute;bottom:0;left:0;right:0;";var buttonStyle="float:right;margin-right:20px;border:none;"+"cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px";var closeButton=document.createElement("div");var refreshButton=document.createElement("div");buttonStyle+=";background-color:"+model.get("buttonColor");buttonStyle+=";color:"+model.get("buttonTextColor");var self=this;function close(){container.removeChild(root);self._dom=null}eventTool.addEventListener(closeButton,"click",close);eventTool.addEventListener(refreshButton,"click",function(){var newOption;try{if(typeof contentToOption==="function"){newOption=contentToOption(viewMain,api.getOption())}else{newOption=parseContents(textarea.value,blockMetaList)}}catch(e){close();throw new Error("Data view format error "+e)}if(newOption){api.dispatchAction({type:"changeDataView",newOption:newOption})}close()});closeButton.innerHTML=lang[1];refreshButton.innerHTML=lang[2];refreshButton.style.cssText=buttonStyle;closeButton.style.cssText=buttonStyle;!model.get("readOnly")&&buttonContainer.appendChild(refreshButton);buttonContainer.appendChild(closeButton);eventTool.addEventListener(textarea,"keydown",function(e){if((e.keyCode||e.which)===9){var val=this.value;var start=this.selectionStart;var end=this.selectionEnd;this.value=val.substring(0,start)+ITEM_SPLITER+val.substring(end);this.selectionStart=this.selectionEnd=start+1;eventTool.stop(e)}});root.appendChild(header);root.appendChild(viewMain);root.appendChild(buttonContainer);viewMain.style.height=(container.clientHeight-80)+"px";container.appendChild(root);this._dom=root};DataView.prototype.remove=function(ecModel,api){this._dom&&api.getDom().removeChild(this._dom)};DataView.prototype.dispose=function(ecModel,api){this.remove(ecModel,api)};function tryMergeDataOption(newData,originalData){return zrUtil.map(newData,function(newVal,idx){var original=originalData&&originalData[idx];if(zrUtil.isObject(original)&&!zrUtil.isArray(original)){if(zrUtil.isObject(newVal)&&!zrUtil.isArray(newVal)){newVal=newVal.value}return zrUtil.defaults({value:newVal},original)}else{return newVal}})}__webpack_require__(364).register("dataView",DataView);__webpack_require__(1).registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(payload,ecModel){var newSeriesOptList=[];zrUtil.each(payload.newOption.series,function(seriesOpt){var seriesModel=ecModel.getSeriesByName(seriesOpt.name)[0];if(!seriesModel){newSeriesOptList.push(zrUtil.extend({type:"scatter"},seriesOpt))}else{var originalData=seriesModel.get("data");newSeriesOptList.push({name:seriesOpt.name,data:tryMergeDataOption(seriesOpt.data,originalData)})}});ecModel.mergeOption(zrUtil.defaults({series:newSeriesOptList},payload.newOption))});module.exports=DataView}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var BrushController=__webpack_require__(248);var BrushTargetManager=__webpack_require__(359);var history=__webpack_require__(427);var sliderMove=__webpack_require__(242);var lang=__webpack_require__(365).toolbox.dataZoom;var each=zrUtil.each;__webpack_require__(428);var DATA_ZOOM_ID_BASE="\0_ec_\0toolbox-dataZoom_";function DataZoom(model,ecModel,api){(this._brushController=new BrushController(api.getZr())).on("brush",zrUtil.bind(this._onBrush,this)).mount();this._isZoomActive}DataZoom.defaultOption={show:true,icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:zrUtil.clone(lang.title)};var proto=DataZoom.prototype;proto.render=function(featureModel,ecModel,api,payload){this.model=featureModel;this.ecModel=ecModel;this.api=api;updateZoomBtnStatus(featureModel,ecModel,this,payload,api);updateBackBtnStatus(featureModel,ecModel)};proto.onclick=function(ecModel,api,type){handlers[type].call(this)};proto.remove=function(ecModel,api){this._brushController.unmount()};proto.dispose=function(ecModel,api){this._brushController.dispose()};var handlers={zoom:function(){var nextActive=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:nextActive})},back:function(){this._dispatchZoomAction(history.pop(this.ecModel))}};proto._onBrush=function(areas,opt){if(!opt.isEnd||!areas.length){return}var snapshot={};var ecModel=this.ecModel;this._brushController.updateCovers([]);
var brushTargetManager=new BrushTargetManager(retrieveAxisSetting(this.model.option),ecModel,{include:["grid"]});brushTargetManager.matchOutputRanges(areas,ecModel,function(area,coordRange,coordSys){if(coordSys.type!=="cartesian2d"){return}var brushType=area.brushType;if(brushType==="rect"){setBatch("x",coordSys,coordRange[0]);setBatch("y",coordSys,coordRange[1])}else{setBatch(({lineX:"x",lineY:"y"})[brushType],coordSys,coordRange)}});history.push(ecModel,snapshot);this._dispatchZoomAction(snapshot);function setBatch(dimName,coordSys,minMax){var axis=coordSys.getAxis(dimName);var axisModel=axis.model;var dataZoomModel=findDataZoom(dimName,axisModel,ecModel);var minMaxSpan=dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();if(minMaxSpan.minValueSpan!=null||minMaxSpan.maxValueSpan!=null){minMax=sliderMove(0,minMax.slice(),axis.scale.getExtent(),0,minMaxSpan.minValueSpan,minMaxSpan.maxValueSpan)}dataZoomModel&&(snapshot[dataZoomModel.id]={dataZoomId:dataZoomModel.id,startValue:minMax[0],endValue:minMax[1]})}function findDataZoom(dimName,axisModel,ecModel){var found;ecModel.eachComponent({mainType:"dataZoom",subType:"select"},function(dzModel){var has=dzModel.getAxisModel(dimName,axisModel.componentIndex);has&&(found=dzModel)});return found}};proto._dispatchZoomAction=function(snapshot){var batch=[];each(snapshot,function(batchItem,dataZoomId){batch.push(zrUtil.clone(batchItem))});batch.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:batch})};function retrieveAxisSetting(option){var setting={};zrUtil.each(["xAxisIndex","yAxisIndex"],function(name){setting[name]=option[name];setting[name]==null&&(setting[name]="all");(setting[name]===false||setting[name]==="none")&&(setting[name]=[])});return setting}function updateBackBtnStatus(featureModel,ecModel){featureModel.setIconStatus("back",history.count(ecModel)>1?"emphasis":"normal")}function updateZoomBtnStatus(featureModel,ecModel,view,payload,api){var zoomActive=view._isZoomActive;if(payload&&payload.type==="takeGlobalCursor"){zoomActive=payload.key==="dataZoomSelect"?payload.dataZoomSelectActive:false}view._isZoomActive=zoomActive;featureModel.setIconStatus("zoom",zoomActive?"emphasis":"normal");var brushTargetManager=new BrushTargetManager(retrieveAxisSetting(featureModel.option),ecModel,{include:["grid"]});view._brushController.setPanels(brushTargetManager.makePanelOpts(api,function(targetInfo){return(targetInfo.xAxisDeclared&&!targetInfo.yAxisDeclared)?"lineX":(!targetInfo.xAxisDeclared&&targetInfo.yAxisDeclared)?"lineY":"rect"})).enableBrush(zoomActive?{brushType:"auto",brushStyle:{lineWidth:0,fill:"rgba(0,0,0,0.2)"}}:false)}__webpack_require__(364).register("dataZoom",DataZoom);__webpack_require__(1).registerPreprocessor(function(option){if(!option){return}var dataZoomOpts=option.dataZoom||(option.dataZoom=[]);if(!zrUtil.isArray(dataZoomOpts)){option.dataZoom=dataZoomOpts=[dataZoomOpts]}var toolboxOpt=option.toolbox;if(toolboxOpt){if(zrUtil.isArray(toolboxOpt)){toolboxOpt=toolboxOpt[0]}if(toolboxOpt&&toolboxOpt.feature){var dataZoomOpt=toolboxOpt.feature.dataZoom;addForAxis("xAxis",dataZoomOpt);addForAxis("yAxis",dataZoomOpt)}}function addForAxis(axisName,dataZoomOpt){if(!dataZoomOpt){return}var axisIndicesName=axisName+"Index";var givenAxisIndices=dataZoomOpt[axisIndicesName];if(givenAxisIndices!=null&&givenAxisIndices!="all"&&!zrUtil.isArray(givenAxisIndices)){givenAxisIndices=(givenAxisIndices===false||givenAxisIndices==="none")?[]:[givenAxisIndices]}forEachComponent(axisName,function(axisOpt,axisIndex){if(givenAxisIndices!=null&&givenAxisIndices!="all"&&zrUtil.indexOf(givenAxisIndices,axisIndex)===-1){return}var newOpt={type:"select",$fromToolbox:true,id:DATA_ZOOM_ID_BASE+axisName+axisIndex};newOpt[axisIndicesName]=axisIndex;dataZoomOpts.push(newOpt)})}function forEachComponent(mainType,cb){var opts=option[mainType];if(!zrUtil.isArray(opts)){opts=opts?[opts]:[]}each(opts,cb)}});module.exports=DataZoom}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);var each=zrUtil.each;var ATTR="\0_ec_hist_store";var history={push:function(ecModel,newSnapshot){var store=giveStore(ecModel);each(newSnapshot,function(batchItem,dataZoomId){var i=store.length-1;for(;i>=0;i--){var snapshot=store[i];if(snapshot[dataZoomId]){break}}if(i<0){var dataZoomModel=ecModel.queryComponents({mainType:"dataZoom",subType:"select",id:dataZoomId})[0];if(dataZoomModel){var percentRange=dataZoomModel.getPercentRange();store[0][dataZoomId]={dataZoomId:dataZoomId,start:percentRange[0],end:percentRange[1]}}}});store.push(newSnapshot)},pop:function(ecModel){var store=giveStore(ecModel);var head=store[store.length-1];store.length>1&&store.pop();var snapshot={};each(head,function(batchItem,dataZoomId){for(var i=store.length-1;i>=0;i--){var batchItem=store[i][dataZoomId];if(batchItem){snapshot[dataZoomId]=batchItem;break}}});return snapshot},clear:function(ecModel){ecModel[ATTR]=null},count:function(ecModel){return giveStore(ecModel).length
}};function giveStore(ecModel){var store=ecModel[ATTR];if(!store){store=ecModel[ATTR]=[{}]}return store}module.exports=history}),(function(module,exports,__webpack_require__){__webpack_require__(372);__webpack_require__(373);__webpack_require__(376);__webpack_require__(429);__webpack_require__(430);__webpack_require__(382);__webpack_require__(383)}),(function(module,exports,__webpack_require__){var DataZoomModel=__webpack_require__(373);module.exports=DataZoomModel.extend({type:"dataZoom.select"})}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(376).extend({type:"dataZoom.select"})}),(function(module,exports,__webpack_require__){var history=__webpack_require__(427);var lang=__webpack_require__(365).toolbox.restore;function Restore(model){this.model=model}Restore.defaultOption={show:true,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:lang.title};var proto=Restore.prototype;proto.onclick=function(ecModel,api,type){history.clear(ecModel);api.dispatchAction({type:"restore",from:this.uid})};__webpack_require__(364).register("restore",Restore);__webpack_require__(1).registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(payload,ecModel){ecModel.resetOption("recreate")});module.exports=Restore}),(function(module,exports,__webpack_require__){__webpack_require__(433);__webpack_require__(87).registerPainter("vml",__webpack_require__(435))}),(function(module,exports,__webpack_require__){if(!__webpack_require__(2).canvasSupported){var vec2=__webpack_require__(10);var BoundingRect=__webpack_require__(9);var CMD=__webpack_require__(39).CMD;var colorTool=__webpack_require__(33);var textContain=__webpack_require__(8);var textHelper=__webpack_require__(37);var RectText=__webpack_require__(36);var Displayable=__webpack_require__(23);var ZImage=__webpack_require__(52);var Text=__webpack_require__(53);var Path=__webpack_require__(22);var PathProxy=__webpack_require__(39);var Gradient=__webpack_require__(69);var vmlCore=__webpack_require__(434);var round=Math.round;var sqrt=Math.sqrt;var abs=Math.abs;var cos=Math.cos;var sin=Math.sin;var mathMax=Math.max;var applyTransform=vec2.applyTransform;var comma=",";var imageTransformPrefix="progid:DXImageTransform.Microsoft";var Z=21600;var Z2=Z/2;var ZLEVEL_BASE=100000;var Z_BASE=1000;var initRootElStyle=function(el){el.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;";el.coordsize=Z+","+Z;el.coordorigin="0,0"};var encodeHtmlAttribute=function(s){return String(s).replace(/&/g,"&amp;").replace(/"/g,"&quot;")};var rgb2Str=function(r,g,b){return"rgb("+[r,g,b].join(",")+")"};var append=function(parent,child){if(child&&parent&&child.parentNode!==parent){parent.appendChild(child)}};var remove=function(parent,child){if(child&&parent&&child.parentNode===parent){parent.removeChild(child)}};var getZIndex=function(zlevel,z,z2){return(parseFloat(zlevel)||0)*ZLEVEL_BASE+(parseFloat(z)||0)*Z_BASE+z2};var parsePercent=function(value,maxValue){if(typeof value==="string"){if(value.lastIndexOf("%")>=0){return parseFloat(value)/100*maxValue}return parseFloat(value)}return value};var setColorAndOpacity=function(el,color,opacity){var colorArr=colorTool.parse(color);opacity=+opacity;if(isNaN(opacity)){opacity=1}if(colorArr){el.color=rgb2Str(colorArr[0],colorArr[1],colorArr[2]);el.opacity=opacity*colorArr[3]}};var getColorAndAlpha=function(color){var colorArr=colorTool.parse(color);return[rgb2Str(colorArr[0],colorArr[1],colorArr[2]),colorArr[3]]};var updateFillNode=function(el,style,zrEl){var fill=style.fill;if(fill!=null){if(fill instanceof Gradient){var gradientType;var angle=0;var focus=[0,0];var shift=0;var expansion=1;var rect=zrEl.getBoundingRect();var rectWidth=rect.width;var rectHeight=rect.height;if(fill.type==="linear"){gradientType="gradient";var transform=zrEl.transform;var p0=[fill.x*rectWidth,fill.y*rectHeight];var p1=[fill.x2*rectWidth,fill.y2*rectHeight];if(transform){applyTransform(p0,p0,transform);applyTransform(p1,p1,transform)}var dx=p1[0]-p0[0];var dy=p1[1]-p0[1];angle=Math.atan2(dx,dy)*180/Math.PI;if(angle<0){angle+=360}if(angle<0.000001){angle=0}}else{gradientType="gradientradial";var p0=[fill.x*rectWidth,fill.y*rectHeight];var transform=zrEl.transform;var scale=zrEl.scale;var width=rectWidth;var height=rectHeight;focus=[(p0[0]-rect.x)/width,(p0[1]-rect.y)/height];if(transform){applyTransform(p0,p0,transform)}width/=scale[0]*Z;height/=scale[1]*Z;var dimension=mathMax(width,height);shift=2*0/dimension;expansion=2*fill.r/dimension-shift}var stops=fill.colorStops.slice();stops.sort(function(cs1,cs2){return cs1.offset-cs2.offset});var length=stops.length;var colorAndAlphaList=[];var colors=[];for(var i=0;i<length;i++){var stop=stops[i];var colorAndAlpha=getColorAndAlpha(stop.color);colors.push(stop.offset*expansion+shift+" "+colorAndAlpha[0]);if(i===0||i===length-1){colorAndAlphaList.push(colorAndAlpha)
}}if(length>=2){var color1=colorAndAlphaList[0][0];var color2=colorAndAlphaList[1][0];var opacity1=colorAndAlphaList[0][1]*style.opacity;var opacity2=colorAndAlphaList[1][1]*style.opacity;el.type=gradientType;el.method="none";el.focus="100%";el.angle=angle;el.color=color1;el.color2=color2;el.colors=colors.join(",");el.opacity=opacity2;el.opacity2=opacity1}if(gradientType==="radial"){el.focusposition=focus.join(",")}}else{setColorAndOpacity(el,fill,style.opacity)}}};var updateStrokeNode=function(el,style){if(style.lineDash!=null){el.dashstyle=style.lineDash.join(" ")}if(style.stroke!=null&&!(style.stroke instanceof Gradient)){setColorAndOpacity(el,style.stroke,style.opacity)}};var updateFillAndStroke=function(vmlEl,type,style,zrEl){var isFill=type=="fill";var el=vmlEl.getElementsByTagName(type)[0];if(style[type]!=null&&style[type]!=="none"&&(isFill||(!isFill&&style.lineWidth))){vmlEl[isFill?"filled":"stroked"]="true";if(style[type] instanceof Gradient){remove(vmlEl,el)}if(!el){el=vmlCore.createNode(type)}isFill?updateFillNode(el,style,zrEl):updateStrokeNode(el,style);append(vmlEl,el)}else{vmlEl[isFill?"filled":"stroked"]="false";remove(vmlEl,el)}};var points=[[],[],[]];var pathDataToString=function(data,m){var M=CMD.M;var C=CMD.C;var L=CMD.L;var A=CMD.A;var Q=CMD.Q;var str=[];var nPoint;var cmdStr;var cmd;var i;var xi;var yi;for(i=0;i<data.length;){cmd=data[i++];cmdStr="";nPoint=0;switch(cmd){case M:cmdStr=" m ";nPoint=1;xi=data[i++];yi=data[i++];points[0][0]=xi;points[0][1]=yi;break;case L:cmdStr=" l ";nPoint=1;xi=data[i++];yi=data[i++];points[0][0]=xi;points[0][1]=yi;break;case Q:case C:cmdStr=" c ";nPoint=3;var x1=data[i++];var y1=data[i++];var x2=data[i++];var y2=data[i++];var x3;var y3;if(cmd===Q){x3=x2;y3=y2;x2=(x2+2*x1)/3;y2=(y2+2*y1)/3;x1=(xi+2*x1)/3;y1=(yi+2*y1)/3}else{x3=data[i++];y3=data[i++]}points[0][0]=x1;points[0][1]=y1;points[1][0]=x2;points[1][1]=y2;points[2][0]=x3;points[2][1]=y3;xi=x3;yi=y3;break;case A:var x=0;var y=0;var sx=1;var sy=1;var angle=0;if(m){x=m[4];y=m[5];sx=sqrt(m[0]*m[0]+m[1]*m[1]);sy=sqrt(m[2]*m[2]+m[3]*m[3]);angle=Math.atan2(-m[1]/sy,m[0]/sx)}var cx=data[i++];var cy=data[i++];var rx=data[i++];var ry=data[i++];var startAngle=data[i++]+angle;var endAngle=data[i++]+startAngle+angle;i++;var clockwise=data[i++];var x0=cx+cos(startAngle)*rx;var y0=cy+sin(startAngle)*ry;var x1=cx+cos(endAngle)*rx;var y1=cy+sin(endAngle)*ry;var type=clockwise?" wa ":" at ";if(Math.abs(x0-x1)<0.0001){if(Math.abs(endAngle-startAngle)>0.01){if(clockwise){x0+=270/Z}}else{if(Math.abs(y0-cy)<0.0001){if((clockwise&&x0<cx)||(!clockwise&&x0>cx)){y1-=270/Z}else{y1+=270/Z}}else{if((clockwise&&y0<cy)||(!clockwise&&y0>cy)){x1+=270/Z}else{x1-=270/Z}}}}str.push(type,round(((cx-rx)*sx+x)*Z-Z2),comma,round(((cy-ry)*sy+y)*Z-Z2),comma,round(((cx+rx)*sx+x)*Z-Z2),comma,round(((cy+ry)*sy+y)*Z-Z2),comma,round((x0*sx+x)*Z-Z2),comma,round((y0*sy+y)*Z-Z2),comma,round((x1*sx+x)*Z-Z2),comma,round((y1*sy+y)*Z-Z2));xi=x1;yi=y1;break;case CMD.R:var p0=points[0];var p1=points[1];p0[0]=data[i++];p0[1]=data[i++];p1[0]=p0[0]+data[i++];p1[1]=p0[1]+data[i++];if(m){applyTransform(p0,p0,m);applyTransform(p1,p1,m)}p0[0]=round(p0[0]*Z-Z2);p1[0]=round(p1[0]*Z-Z2);p0[1]=round(p0[1]*Z-Z2);p1[1]=round(p1[1]*Z-Z2);str.push(" m ",p0[0],comma,p0[1]," l ",p1[0],comma,p0[1]," l ",p1[0],comma,p1[1]," l ",p0[0],comma,p1[1]);break;case CMD.Z:str.push(" x ")}if(nPoint>0){str.push(cmdStr);for(var k=0;k<nPoint;k++){var p=points[k];m&&applyTransform(p,p,m);str.push(round(p[0]*Z-Z2),comma,round(p[1]*Z-Z2),k<nPoint-1?comma:"")}}}return str.join("")};Path.prototype.brushVML=function(vmlRoot){var style=this.style;var vmlEl=this._vmlEl;if(!vmlEl){vmlEl=vmlCore.createNode("shape");initRootElStyle(vmlEl);this._vmlEl=vmlEl}updateFillAndStroke(vmlEl,"fill",style,this);updateFillAndStroke(vmlEl,"stroke",style,this);var m=this.transform;var needTransform=m!=null;var strokeEl=vmlEl.getElementsByTagName("stroke")[0];if(strokeEl){var lineWidth=style.lineWidth;if(needTransform&&!style.strokeNoScale){var det=m[0]*m[3]-m[1]*m[2];lineWidth*=sqrt(abs(det))}strokeEl.weight=lineWidth+"px"}var path=this.path||(this.path=new PathProxy());if(this.__dirtyPath){path.beginPath();this.buildPath(path,this.shape);path.toStatic();this.__dirtyPath=false}vmlEl.path=pathDataToString(path.data,this.transform);vmlEl.style.zIndex=getZIndex(this.zlevel,this.z,this.z2);append(vmlRoot,vmlEl);if(style.text!=null){this.drawRectText(vmlRoot,this.getBoundingRect())}else{this.removeRectText(vmlRoot)}};Path.prototype.onRemove=function(vmlRoot){remove(vmlRoot,this._vmlEl);this.removeRectText(vmlRoot)};Path.prototype.onAdd=function(vmlRoot){append(vmlRoot,this._vmlEl);this.appendRectText(vmlRoot)};var isImage=function(img){return(typeof img==="object")&&img.tagName&&img.tagName.toUpperCase()==="IMG"};ZImage.prototype.brushVML=function(vmlRoot){var style=this.style;var image=style.image;var ow;var oh;if(isImage(image)){var src=image.src;if(src===this._imageSrc){ow=this._imageWidth;oh=this._imageHeight}else{var imageRuntimeStyle=image.runtimeStyle;
var oldRuntimeWidth=imageRuntimeStyle.width;var oldRuntimeHeight=imageRuntimeStyle.height;imageRuntimeStyle.width="auto";imageRuntimeStyle.height="auto";ow=image.width;oh=image.height;imageRuntimeStyle.width=oldRuntimeWidth;imageRuntimeStyle.height=oldRuntimeHeight;this._imageSrc=src;this._imageWidth=ow;this._imageHeight=oh}image=src}else{if(image===this._imageSrc){ow=this._imageWidth;oh=this._imageHeight}}if(!image){return}var x=style.x||0;var y=style.y||0;var dw=style.width;var dh=style.height;var sw=style.sWidth;var sh=style.sHeight;var sx=style.sx||0;var sy=style.sy||0;var hasCrop=sw&&sh;var vmlEl=this._vmlEl;if(!vmlEl){vmlEl=vmlCore.doc.createElement("div");initRootElStyle(vmlEl);this._vmlEl=vmlEl}var vmlElStyle=vmlEl.style;var hasRotation=false;var m;var scaleX=1;var scaleY=1;if(this.transform){m=this.transform;scaleX=sqrt(m[0]*m[0]+m[1]*m[1]);scaleY=sqrt(m[2]*m[2]+m[3]*m[3]);hasRotation=m[1]||m[2]}if(hasRotation){var p0=[x,y];var p1=[x+dw,y];var p2=[x,y+dh];var p3=[x+dw,y+dh];applyTransform(p0,p0,m);applyTransform(p1,p1,m);applyTransform(p2,p2,m);applyTransform(p3,p3,m);var maxX=mathMax(p0[0],p1[0],p2[0],p3[0]);var maxY=mathMax(p0[1],p1[1],p2[1],p3[1]);var transformFilter=[];transformFilter.push("M11=",m[0]/scaleX,comma,"M12=",m[2]/scaleY,comma,"M21=",m[1]/scaleX,comma,"M22=",m[3]/scaleY,comma,"Dx=",round(x*scaleX+m[4]),comma,"Dy=",round(y*scaleY+m[5]));vmlElStyle.padding="0 "+round(maxX)+"px "+round(maxY)+"px 0";vmlElStyle.filter=imageTransformPrefix+".Matrix("+transformFilter.join("")+", SizingMethod=clip)"}else{if(m){x=x*scaleX+m[4];y=y*scaleY+m[5]}vmlElStyle.filter="";vmlElStyle.left=round(x)+"px";vmlElStyle.top=round(y)+"px"}var imageEl=this._imageEl;var cropEl=this._cropEl;if(!imageEl){imageEl=vmlCore.doc.createElement("div");this._imageEl=imageEl}var imageELStyle=imageEl.style;if(hasCrop){if(!(ow&&oh)){var tmpImage=new Image();var self=this;tmpImage.onload=function(){tmpImage.onload=null;ow=tmpImage.width;oh=tmpImage.height;imageELStyle.width=round(scaleX*ow*dw/sw)+"px";imageELStyle.height=round(scaleY*oh*dh/sh)+"px";self._imageWidth=ow;self._imageHeight=oh;self._imageSrc=image};tmpImage.src=image}else{imageELStyle.width=round(scaleX*ow*dw/sw)+"px";imageELStyle.height=round(scaleY*oh*dh/sh)+"px"}if(!cropEl){cropEl=vmlCore.doc.createElement("div");cropEl.style.overflow="hidden";this._cropEl=cropEl}var cropElStyle=cropEl.style;cropElStyle.width=round((dw+sx*dw/sw)*scaleX);cropElStyle.height=round((dh+sy*dh/sh)*scaleY);cropElStyle.filter=imageTransformPrefix+".Matrix(Dx="+(-sx*dw/sw*scaleX)+",Dy="+(-sy*dh/sh*scaleY)+")";if(!cropEl.parentNode){vmlEl.appendChild(cropEl)}if(imageEl.parentNode!=cropEl){cropEl.appendChild(imageEl)}}else{imageELStyle.width=round(scaleX*dw)+"px";imageELStyle.height=round(scaleY*dh)+"px";vmlEl.appendChild(imageEl);if(cropEl&&cropEl.parentNode){vmlEl.removeChild(cropEl);this._cropEl=null}}var filterStr="";var alpha=style.opacity;if(alpha<1){filterStr+=".Alpha(opacity="+round(alpha*100)+") "}filterStr+=imageTransformPrefix+".AlphaImageLoader(src="+image+", SizingMethod=scale)";imageELStyle.filter=filterStr;vmlEl.style.zIndex=getZIndex(this.zlevel,this.z,this.z2);append(vmlRoot,vmlEl);if(style.text!=null){this.drawRectText(vmlRoot,this.getBoundingRect())}};ZImage.prototype.onRemove=function(vmlRoot){remove(vmlRoot,this._vmlEl);this._vmlEl=null;this._cropEl=null;this._imageEl=null;this.removeRectText(vmlRoot)};ZImage.prototype.onAdd=function(vmlRoot){append(vmlRoot,this._vmlEl);this.appendRectText(vmlRoot)};var DEFAULT_STYLE_NORMAL="normal";var fontStyleCache={};var fontStyleCacheCount=0;var MAX_FONT_CACHE_SIZE=100;var fontEl=document.createElement("div");var getFontStyle=function(fontString){var fontStyle=fontStyleCache[fontString];if(!fontStyle){if(fontStyleCacheCount>MAX_FONT_CACHE_SIZE){fontStyleCacheCount=0;fontStyleCache={}}var style=fontEl.style;var fontFamily;try{style.font=fontString;fontFamily=style.fontFamily.split(",")[0]}catch(e){}fontStyle={style:style.fontStyle||DEFAULT_STYLE_NORMAL,variant:style.fontVariant||DEFAULT_STYLE_NORMAL,weight:style.fontWeight||DEFAULT_STYLE_NORMAL,size:parseFloat(style.fontSize||12)|0,family:fontFamily||"Microsoft YaHei"};fontStyleCache[fontString]=fontStyle;fontStyleCacheCount++}return fontStyle};var textMeasureEl;textContain.measureText=function(text,textFont){var doc=vmlCore.doc;if(!textMeasureEl){textMeasureEl=doc.createElement("div");textMeasureEl.style.cssText="position:absolute;top:-20000px;left:0;"+"padding:0;margin:0;border:none;white-space:pre;";vmlCore.doc.body.appendChild(textMeasureEl)}try{textMeasureEl.style.font=textFont}catch(ex){}textMeasureEl.innerHTML="";textMeasureEl.appendChild(doc.createTextNode(text));return{width:textMeasureEl.offsetWidth}};var tmpRect=new BoundingRect();var drawRectText=function(vmlRoot,rect,textRect,fromTextEl){var style=this.style;this.__dirty&&textHelper.normalizeTextStyle(style,true);var text=style.text;text!=null&&(text+="");if(!text){return}if(style.rich){var contentBlock=textContain.parseRichText(text,style);
text=[];for(var i=0;i<contentBlock.lines.length;i++){var tokens=contentBlock.lines[i].tokens;var textLine=[];for(var j=0;j<tokens.length;j++){textLine.push(tokens[j].text)}text.push(textLine.join(""))}text=text.join("\n")}var x;var y;var align=style.textAlign;var verticalAlign=style.textVerticalAlign;var fontStyle=getFontStyle(style.font);var font=fontStyle.style+" "+fontStyle.variant+" "+fontStyle.weight+" "+fontStyle.size+'px "'+fontStyle.family+'"';textRect=textRect||textContain.getBoundingRect(text,font,align,verticalAlign);var m=this.transform;if(m&&!fromTextEl){tmpRect.copy(rect);tmpRect.applyTransform(m);rect=tmpRect}if(!fromTextEl){var textPosition=style.textPosition;var distance=style.textDistance;if(textPosition instanceof Array){x=rect.x+parsePercent(textPosition[0],rect.width);y=rect.y+parsePercent(textPosition[1],rect.height);align=align||"left"}else{var res=textContain.adjustTextPositionOnRect(textPosition,rect,distance);x=res.x;y=res.y;align=align||res.textAlign;verticalAlign=verticalAlign||res.textVerticalAlign}}else{x=rect.x;y=rect.y}x=textContain.adjustTextX(x,textRect.width,align);y=textContain.adjustTextY(y,textRect.height,verticalAlign);y+=textRect.height/2;var createNode=vmlCore.createNode;var textVmlEl=this._textVmlEl;var pathEl;var textPathEl;var skewEl;if(!textVmlEl){textVmlEl=createNode("line");pathEl=createNode("path");textPathEl=createNode("textpath");skewEl=createNode("skew");textPathEl.style["v-text-align"]="left";initRootElStyle(textVmlEl);pathEl.textpathok=true;textPathEl.on=true;textVmlEl.from="0 0";textVmlEl.to="1000 0.05";append(textVmlEl,skewEl);append(textVmlEl,pathEl);append(textVmlEl,textPathEl);this._textVmlEl=textVmlEl}else{skewEl=textVmlEl.firstChild;pathEl=skewEl.nextSibling;textPathEl=pathEl.nextSibling}var coords=[x,y];var textVmlElStyle=textVmlEl.style;if(m&&fromTextEl){applyTransform(coords,coords,m);skewEl.on=true;skewEl.matrix=m[0].toFixed(3)+comma+m[2].toFixed(3)+comma+m[1].toFixed(3)+comma+m[3].toFixed(3)+",0,0";skewEl.offset=(round(coords[0])||0)+","+(round(coords[1])||0);skewEl.origin="0 0";textVmlElStyle.left="0px";textVmlElStyle.top="0px"}else{skewEl.on=false;textVmlElStyle.left=round(x)+"px";textVmlElStyle.top=round(y)+"px"}textPathEl.string=encodeHtmlAttribute(text);try{textPathEl.style.font=font}catch(e){}updateFillAndStroke(textVmlEl,"fill",{fill:style.textFill,opacity:style.opacity},this);updateFillAndStroke(textVmlEl,"stroke",{stroke:style.textStroke,opacity:style.opacity,lineDash:style.lineDash},this);textVmlEl.style.zIndex=getZIndex(this.zlevel,this.z,this.z2);append(vmlRoot,textVmlEl)};var removeRectText=function(vmlRoot){remove(vmlRoot,this._textVmlEl);this._textVmlEl=null};var appendRectText=function(vmlRoot){append(vmlRoot,this._textVmlEl)};var list=[RectText,Displayable,ZImage,Path,Text];for(var i=0;i<list.length;i++){var proto=list[i].prototype;proto.drawRectText=drawRectText;proto.removeRectText=removeRectText;proto.appendRectText=appendRectText}Text.prototype.brushVML=function(vmlRoot){var style=this.style;if(style.text!=null){this.drawRectText(vmlRoot,{x:style.x||0,y:style.y||0,width:0,height:0},this.getBoundingRect(),true)}else{this.removeRectText(vmlRoot)}};Text.prototype.onRemove=function(vmlRoot){this.removeRectText(vmlRoot)};Text.prototype.onAdd=function(vmlRoot){this.appendRectText(vmlRoot)}}}),(function(module,exports,__webpack_require__){if(!__webpack_require__(2).canvasSupported){var urn="urn:schemas-microsoft-com:vml";var createNode;var win=window;var doc=win.document;var vmlInited=false;try{!doc.namespaces.zrvml&&doc.namespaces.add("zrvml",urn);createNode=function(tagName){return doc.createElement("<zrvml:"+tagName+' class="zrvml">')}}catch(e){createNode=function(tagName){return doc.createElement("<"+tagName+' xmlns="'+urn+'" class="zrvml">')}}var initVML=function(){if(vmlInited){return}vmlInited=true;var styleSheets=doc.styleSheets;if(styleSheets.length<31){doc.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)")}else{styleSheets[0].addRule(".zrvml","behavior:url(#default#VML)")}};module.exports={doc:doc,initVML:initVML,createNode:createNode}}}),(function(module,exports,__webpack_require__){var zrLog=__webpack_require__(34);var vmlCore=__webpack_require__(434);function parseInt10(val){return parseInt(val,10)}function VMLPainter(root,storage){vmlCore.initVML();this.root=root;this.storage=storage;var vmlViewport=document.createElement("div");var vmlRoot=document.createElement("div");vmlViewport.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;";vmlRoot.style.cssText="position:absolute;left:0;top:0;";root.appendChild(vmlViewport);this._vmlRoot=vmlRoot;this._vmlViewport=vmlViewport;this.resize();var oldDelFromStorage=storage.delFromStorage;var oldAddToStorage=storage.addToStorage;storage.delFromStorage=function(el){oldDelFromStorage.call(storage,el);if(el){el.onRemove&&el.onRemove(vmlRoot)}};storage.addToStorage=function(el){el.onAdd&&el.onAdd(vmlRoot);oldAddToStorage.call(storage,el)
};this._firstPaint=true}VMLPainter.prototype={constructor:VMLPainter,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var viewportRoot=this.getViewportRoot();if(viewportRoot){return{offsetLeft:viewportRoot.offsetLeft||0,offsetTop:viewportRoot.offsetTop||0}}},refresh:function(){var list=this.storage.getDisplayList(true,true);this._paintList(list)},_paintList:function(list){var vmlRoot=this._vmlRoot;for(var i=0;i<list.length;i++){var el=list[i];if(el.invisible||el.ignore){if(!el.__alreadyNotVisible){el.onRemove(vmlRoot)}el.__alreadyNotVisible=true}else{if(el.__alreadyNotVisible){el.onAdd(vmlRoot)}el.__alreadyNotVisible=false;if(el.__dirty){el.beforeBrush&&el.beforeBrush();(el.brushVML||el.brush).call(el,vmlRoot);el.afterBrush&&el.afterBrush()}}el.__dirty=false}if(this._firstPaint){this._vmlViewport.appendChild(vmlRoot);this._firstPaint=false}},resize:function(width,height){var width=width==null?this._getWidth():width;var height=height==null?this._getHeight():height;if(this._width!=width||this._height!=height){this._width=width;this._height=height;var vmlViewportStyle=this._vmlViewport.style;vmlViewportStyle.width=width+"px";vmlViewportStyle.height=height+"px"}},dispose:function(){this.root.innerHTML="";this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){if(this._vmlViewport){this.root.removeChild(this._vmlViewport)}},_getWidth:function(){var root=this.root;var stl=root.currentStyle;return((root.clientWidth||parseInt10(stl.width))-parseInt10(stl.paddingLeft)-parseInt10(stl.paddingRight))|0},_getHeight:function(){var root=this.root;var stl=root.currentStyle;return((root.clientHeight||parseInt10(stl.height))-parseInt10(stl.paddingTop)-parseInt10(stl.paddingBottom))|0}};function createMethodNotSupport(method){return function(){zrLog('In IE8.0 VML mode painter not support method "'+method+'"')}}var notSupportedMethods=["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"];for(var i=0;i<notSupportedMethods.length;i++){var name=notSupportedMethods[i];VMLPainter.prototype[name]=createMethodNotSupport(name)}module.exports=VMLPainter})])});